!function(t){var n={};function r(e){if(n[e])return n[e].exports;var l=n[e]={i:e,l:!1,exports:{}};return t[e].call(l.exports,l,l.exports,r),l.l=!0,l.exports}r.m=t,r.c=n,r.d=function(t,n,e){r.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:e})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,n){if(1&n&&(t=r(t)),8&n)return t;if(4&n&&"object"==typeof t&&t&&t.__esModule)return t;var e=Object.create(null);if(r.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(var l in t)r.d(e,l,function(n){return t[n]}.bind(null,l));return e},r.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(n,"a",n),n},r.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},r.p="",r(r.s=5)}([function(t,n,r){(function(t){function r(t,n){for(var r=0,e=t.length-1;e>=0;e--){var l=t[e];"."===l?t.splice(e,1):".."===l?(t.splice(e,1),r++):r&&(t.splice(e,1),r--)}if(n)for(;r--;r)t.unshift("..");return t}function e(t,n){if(t.filter)return t.filter(n);for(var r=[],e=0;e<t.length;e++)n(t[e],e,t)&&r.push(t[e]);return r}n.resolve=function(){for(var n="",l=!1,i=arguments.length-1;i>=-1&&!l;i--){var u=i>=0?arguments[i]:t.cwd();if("string"!=typeof u)throw new TypeError("Arguments to path.resolve must be strings");u&&(n=u+"/"+n,l="/"===u.charAt(0))}return(l?"/":"")+(n=r(e(n.split("/"),function(t){return!!t}),!l).join("/"))||"."},n.normalize=function(t){var i=n.isAbsolute(t),u="/"===l(t,-1);return(t=r(e(t.split("/"),function(t){return!!t}),!i).join("/"))||i||(t="."),t&&u&&(t+="/"),(i?"/":"")+t},n.isAbsolute=function(t){return"/"===t.charAt(0)},n.join=function(){var t=Array.prototype.slice.call(arguments,0);return n.normalize(e(t,function(t,n){if("string"!=typeof t)throw new TypeError("Arguments to path.join must be strings");return t}).join("/"))},n.relative=function(t,r){function e(t){for(var n=0;n<t.length&&""===t[n];n++);for(var r=t.length-1;r>=0&&""===t[r];r--);return n>r?[]:t.slice(n,r-n+1)}t=n.resolve(t).substr(1),r=n.resolve(r).substr(1);for(var l=e(t.split("/")),i=e(r.split("/")),u=Math.min(l.length,i.length),o=u,s=0;s<u;s++)if(l[s]!==i[s]){o=s;break}var a=[];for(s=o;s<l.length;s++)a.push("..");return(a=a.concat(i.slice(o))).join("/")},n.sep="/",n.delimiter=":",n.dirname=function(t){if("string"!=typeof t&&(t+=""),0===t.length)return".";for(var n=t.charCodeAt(0),r=47===n,e=-1,l=!0,i=t.length-1;i>=1;--i)if(47===(n=t.charCodeAt(i))){if(!l){e=i;break}}else l=!1;return-1===e?r?"/":".":r&&1===e?"/":t.slice(0,e)},n.basename=function(t,n){var r=function(t){"string"!=typeof t&&(t+="");var n,r=0,e=-1,l=!0;for(n=t.length-1;n>=0;--n)if(47===t.charCodeAt(n)){if(!l){r=n+1;break}}else-1===e&&(l=!1,e=n+1);return-1===e?"":t.slice(r,e)}(t);return n&&r.substr(-1*n.length)===n&&(r=r.substr(0,r.length-n.length)),r},n.extname=function(t){"string"!=typeof t&&(t+="");for(var n=-1,r=0,e=-1,l=!0,i=0,u=t.length-1;u>=0;--u){var o=t.charCodeAt(u);if(47!==o)-1===e&&(l=!1,e=u+1),46===o?-1===n?n=u:1!==i&&(i=1):-1!==n&&(i=-1);else if(!l){r=u+1;break}}return-1===n||-1===e||0===i||1===i&&n===e-1&&n===r+1?"":t.slice(n,e)};var l="b"==="ab".substr(-1)?function(t,n,r){return t.substr(n,r)}:function(t,n,r){return n<0&&(n=t.length+n),t.substr(n,r)}}).call(this,r(12))},function(t,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var e=r(6);n.assemble=e.assemble,n.platformC64=e.platformC64;var l=r(23);n.disassemble=l.disassemble},function(t,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.default={ADC:[105,101,117,null,109,125,121,null,97,113,null,null],AND:[41,37,53,null,45,61,57,null,33,49,null,null],ASL:[null,6,22,null,14,30,null,null,null,null,10,null],BIT:[null,36,null,null,44,null,null,null,null,null,null,null],BPL:[null,null,null,null,null,null,null,null,null,null,null,16],BMI:[null,null,null,null,null,null,null,null,null,null,null,48],BVC:[null,null,null,null,null,null,null,null,null,null,null,80],BVS:[null,null,null,null,null,null,null,null,null,null,null,112],BCC:[null,null,null,null,null,null,null,null,null,null,null,144],BCS:[null,null,null,null,null,null,null,null,null,null,null,176],BNE:[null,null,null,null,null,null,null,null,null,null,null,208],BEQ:[null,null,null,null,null,null,null,null,null,null,null,240],BRK:[null,null,null,null,null,null,null,null,null,null,0,null],CMP:[201,197,213,null,205,221,217,null,193,209,null,null],CPX:[224,228,null,null,236,null,null,null,null,null,null,null],CPY:[192,196,null,null,204,null,null,null,null,null,null,null],DEC:[null,198,214,null,206,222,null,null,null,null,null,null],EOR:[73,69,85,null,77,93,89,null,65,81,null,null],CLC:[null,null,null,null,null,null,null,null,null,null,24,null],SEC:[null,null,null,null,null,null,null,null,null,null,56,null],CLI:[null,null,null,null,null,null,null,null,null,null,88,null],SEI:[null,null,null,null,null,null,null,null,null,null,120,null],CLV:[null,null,null,null,null,null,null,null,null,null,184,null],CLD:[null,null,null,null,null,null,null,null,null,null,216,null],SED:[null,null,null,null,null,null,null,null,null,null,248,null],INC:[null,230,246,null,238,254,null,null,null,null,null,null],JMP:[null,null,null,null,76,null,null,108,null,null,null,null],JSR:[null,null,null,null,32,null,null,null,null,null,null,null],LDA:[169,165,181,null,173,189,185,null,161,177,null,null],LDX:[162,166,null,182,174,null,190,null,null,null,null,null],LDY:[160,164,180,null,172,188,null,null,null,null,null,null],LSR:[null,70,86,null,78,94,null,null,null,null,74,null],NOP:[null,null,null,null,null,null,null,null,null,null,234,null],ORA:[9,5,21,null,13,29,25,null,1,17,null,null],TAX:[null,null,null,null,null,null,null,null,null,null,170,null],TXA:[null,null,null,null,null,null,null,null,null,null,138,null],DEX:[null,null,null,null,null,null,null,null,null,null,202,null],INX:[null,null,null,null,null,null,null,null,null,null,232,null],TAY:[null,null,null,null,null,null,null,null,null,null,168,null],TYA:[null,null,null,null,null,null,null,null,null,null,152,null],DEY:[null,null,null,null,null,null,null,null,null,null,136,null],INY:[null,null,null,null,null,null,null,null,null,null,200,null],ROR:[null,102,118,null,110,126,null,null,null,null,106,null],ROL:[null,38,54,null,46,62,null,null,null,null,42,null],RTI:[null,null,null,null,null,null,null,null,null,null,64,null],RTS:[null,null,null,null,null,null,null,null,null,null,96,null],SBC:[233,229,245,null,237,253,249,null,225,241,null,null],STA:[null,133,149,null,141,157,153,null,129,145,null,null],TXS:[null,null,null,null,null,null,null,null,null,null,154,null],TSX:[null,null,null,null,null,null,null,null,null,null,186,null],PHA:[null,null,null,null,null,null,null,null,null,null,72,null],PLA:[null,null,null,null,null,null,null,null,null,null,104,null],PHP:[null,null,null,null,null,null,null,null,null,null,8,null],PLP:[null,null,null,null,null,null,null,null,null,null,40,null],STX:[null,134,null,150,142,null,null,null,null,null,null,null],STY:[null,132,148,null,140,null,null,null,null,null,null,null],"---":[null,null,null,null,null,null,null,null,null,null,null,null]}},function(t,n){},function(t,n,r){"use strict";function e(t,n){return{type:"literal",lit:t,loc:n}}Object.defineProperty(n,"__esModule",{value:!0}),n.mkLiteral=e,n.mkScopeQualifiedIdent=function(t,n,r){return{type:"qualified-ident",path:t,absolute:n,loc:r}},n.mkIdent=function(t,n){return{type:"ident",name:t,loc:n}},n.mkUnary=function(t,n,r){return{type:"unary",op:t,expr:n,loc:r}},n.mkBinaryOp=function(t,n,r,e){return{type:"binary",op:t,left:n,right:r,loc:e}},n.mkExprArray=function(t,n){return{type:"array",list:t,loc:n}},n.mkCallFunc=function(t,n,r){return{type:"callfunc",callee:t,args:null==n?[]:n,loc:r}},n.mkMember=function(t,n,r,e){return{type:"member",object:t,property:n,computed:r,loc:e}},function(t){t[t.Byte=0]="Byte",t[t.Word=1]="Word"}(n.DataSize||(n.DataSize={})),n.mkLabel=function(t,n){return{name:t,loc:n}},n.mkInsn=function(t,n){return{type:"insn",insn:t,loc:n}},n.mkSetPC=function(t,n){return{type:"setpc",pc:t,loc:n}},n.mkData=function(t,n,r){return{type:"data",values:n,dataSize:t,loc:r}},n.mkFill=function(t,n,r){return{type:"fill",numBytes:t,fillValue:n,loc:r}},n.mkAlign=function(t,n){return{type:"align",alignBytes:t,loc:n}},n.mkInclude=function(t,n){return{type:"include",filename:t,loc:n}},n.mkError=function(t,n){return{type:"error",error:t,loc:n}},n.mkBinary=function(t,n,r,e){return{type:"binary",filename:t,size:n,offset:r,loc:e}},n.mkIfElse=function(t,n,r){return{type:"if",cases:t,elseBranch:null!==n?n:[],loc:r}},n.mkFor=function(t,n,r,e){return{type:"for",index:t,list:n,body:r,loc:e}},n.mkMacroArg=function(t){return{ident:t}},n.mkMacro=function(t,n,r,e){return{type:"macro",name:t,args:null==n?[]:n,body:r,loc:e}},n.mkCallMacro=function(t,n,r){return{type:"callmacro",name:t,args:null==n?[]:n,loc:r}},n.mkLet=function(t,n,r){return{type:"let",name:t,value:n,loc:r}},n.mkAssign=function(t,n,r){return{type:"assign",name:t,value:n,loc:r}},n.mkLoadPlugin=function(t,n,r){return{type:"load-plugin",filename:t,moduleName:n,loc:r}},n.mkFilescope=function(t,n){return{type:"filescope",name:t,loc:n}},n.mkAsmLine=function(t,n,r,e){return{label:t,stmt:n,scopedStmts:r,loc:e}},n.objectToAst=function t(n,r){return Array.isArray(n)?{type:"array",values:n.map(n=>t(n,r)),loc:r}:"object"==typeof n?{type:"object",props:Object.keys(n).map(e=>({key:e,val:t(n[e],r)})),loc:r}:"number"==typeof n?e(n,r):"string"==typeof n?e(n,r):void 0}},function(t,n,r){"use strict";r.r(n);var e=r(1);onmessage=function(t){postMessage(function(t){var n=t.sourceFileMap,r={readFileSync:function(t){if(t in n)return n[t];throw new Error("File not found "+t)}},l=e.assemble("main.asm",r);return 0===l.errors.length?{prg:l.prg,disassembly:e.disassemble(l.prg),diagnostics:l.errors}:{prg:void 0,diagnostics:l.errors}}(t.data))}},function(t,n,r){"use strict";(function(t){Object.defineProperty(n,"__esModule",{value:!0});const e=r(2),l=r(0),i=r(13),u=r(3),o=r(19),s=r(4),a=r(20),c=r(22);function f(t){return{value:t,errors:!0}}function h(t){return{value:t,errors:!1}}function p(...t){return t.some(t=>void 0!==t&&t.errors)}n.platformC64={name:"c64",defaultStartPC:2049};class d{constructor(t,n){this.syms=new Map,this.parent=null,this.children=new Map,this.parent=t,this.name=n}enter(t){const n=this.children.get(t);if(void 0!==n)return n;const r=new d(this,t);return this.children.set(t,r),r}leave(){return this.parent}findSymbol(t){for(let n=this;null!==n;n=n.parent){const r=n.syms.get(t);if(void 0!==r)return r}}findSymbolPath(t){if(1==t.length)return this.findSymbol(t[0]);let n=this;for(;null==n.children.get(t[0]);)if(null==(n=n.parent))return;for(let r=0;r<t.length-1;r++)if(null==(n=n.children.get(t[r])))return;return n.syms.get(t[t.length-1])}addSymbol(t,n,r){this.syms.set(t,Object.assign({},n,{seen:r}))}updateSymbol(t,n,r){for(let e=this;null!==e;e=e.parent){if(void 0!==e.syms.get(t))return void e.syms.set(t,Object.assign({},n,{seen:r}))}}}class m{constructor(){this.passCount=0,this.root=new d(null,""),this.curSymtab=this.root,this.anonScopeCount=0}startPass(t){this.curSymtab=this.root,this.anonScopeCount=0,this.passCount=t}withAnonScope(t){const n=`__anon_scope_${this.anonScopeCount}`;this.anonScopeCount++,this.withLabelScope(n,t)}withLabelScope(t,n){this.curSymtab=this.curSymtab.enter(t),n(),this.curSymtab=this.curSymtab.leave()}findPath(t,n){return n?this.root.findSymbolPath(t):this.curSymtab.findSymbolPath(t)}findQualifiedSym(t,n){return this.findPath(t,n)}symbolSeen(t){const n=this.curSymtab.syms.get(t);return void 0!==n&&n.seen==this.passCount}declareLabelSymbol(t,n){const{name:r,loc:e}=t,l=this.curSymtab.syms.get(r);if(null==l){const t={type:"label",data:h({addr:n,loc:e})};return this.curSymtab.addSymbol(r,t,this.passCount),!1}if("label"!==l.type)throw new Error("ICE: declareLabelSymbol should be called only on labels");if(l.data.value.addr!==n){const t={type:"label",data:Object.assign({},l.data,{value:Object.assign({},l.data.value,{addr:n})})};return this.curSymtab.updateSymbol(r,t,this.passCount),!0}return this.curSymtab.updateSymbol(r,l,this.passCount),!1}declareVar(t,n){this.curSymtab.addSymbol(t,{type:"var",data:n},this.passCount)}updateVar(t,n){const r={type:"var",data:n};this.curSymtab.updateSymbol(t,r,this.passCount)}findMacro(t,n){const r=this.findPath(t,n);if(void 0!==r&&"macro"==r.type)return r.data}declareMacro(t,n){this.curSymtab.addSymbol(t,{type:"macro",data:n},this.passCount)}dumpLabels(t){const n=[],r=(t,r)=>{n.push({prefix:`${t}/${r.name}`,sym:r})};r("",this.root);const e=[];for(;n.length>0;){const t=n.pop();for(let[n,r]of t.sym.syms)"label"==r.type&&e.push({name:`${t.prefix}/${n}`,addr:r.data.value.addr,size:0});for(let[n,e]of t.sym.children)r(t.prefix,e)}const l=e.sort((t,n)=>t.addr-n.addr),i=l.length;if(i>0){for(let t=1;t<i;t++)l[t-1].size=l[t].addr-l[t-1].addr;const n=l[i-1];n.size=t-n.addr}return l}}function y(t){return{source:t,start:{offset:0,line:0,column:0},end:{offset:0,line:0,column:0}}}function g(t){const n=typeof t;return"object"===n&&t instanceof Array?"array":n}function b(t){return`${t.absolute?"::":""}${t.path.join("::")}`}const v=(t,n,r)=>{const e=r(t.value,n.value);return h("boolean"==typeof e?e?1:0:e)},A=(t,n)=>{if(p(t))return f(0);const r=n(t.value);return h("boolean"==typeof r?r?1:0:r)};class w{constructor(t){this.binary=[],this.parseCache=new a.default,this.pluginCache=new Map,this.includeStack=[],this.initialPC=0,this.codePC=0,this.codePCSet=!1,this.pass=0,this.needPass=!1,this.scopes=new m,this.errorList=[],this.warningList=[],this.outOfRangeBranches=[],this.debugInfo=new c.DebugInfoTracker,this.errors=()=>this.formatErrors(this.errorList,"error"),this.warnings=()=>this.formatErrors(this.warningList,"warning"),this.readFileSyncFunc=t.readFileSync,this.platform=t.platformOptions||n.platformC64}readFileSync(t,n){return this.readFileSyncFunc(t,n)}prg(){const n=255&this.initialPC,r=this.initialPC>>8&255;return t.from([n,r].concat(this.binary))}parse(t,n){const r=null==n?y(t):n;return this.parseCache.parse(t,n,(t,n)=>this.guardedReadFileSync(t,r))}requirePlugin(t){const n=this.pluginCache.get(t);if(void 0!==n)return n;const r=i(l.resolve(this.makeSourceRelativePath(t)));return this.pluginCache.set(t,r),r}peekSourceStack(){const t=this.includeStack.length;return this.includeStack[t-1]}pushSource(t){this.includeStack.push(t)}popSource(){this.includeStack.pop()}anyErrors(){return 0!==this.errorList.length}formatErrors(t,n){return[...new Set(t.map(t=>JSON.stringify(t)))].map(t=>{const{loc:r,msg:e}=JSON.parse(t);let l=`<unknown>:1:1: ${n}: ${e}`;return r&&(l=`${r.source}:${r.start.line}:${r.start.column}: ${n}: ${e}`),{loc:r,msg:e,formatted:l}})}addError(t,n){this.errorList.push({msg:t,loc:n})}addWarning(t,n){this.warningList.push({msg:t,loc:n})}startPass(t){this.codePC=this.platform.defaultStartPC,this.codePCSet=!1,this.pass=t,this.needPass=!1,this.binary=[],this.errorList=[],this.scopes.startPass(t),this.outOfRangeBranches=[],this.debugInfo=new c.DebugInfoTracker}emitBasicHeader(){this.emit(12),this.emit(8),this.emit(0),this.emit(0),this.emit(158);[1e4,1e3,100,10,1].forEach(t=>{2061>=t&&this.emit(48+2061/t%10)}),this.emit(0),this.emit(0),this.emit(0)}emitBinary(t){const{filename:n}=t,r=this.evalExprToString(n,"!binary filename");let e=h(0),l=void 0;if(null!==t.size&&(null!==t.offset&&(e=this.evalExprToInt(t.offset,"!binary offset")),null!==t.size&&(l=this.evalExprToInt(t.size,"!binary size"))),p(r,e,l))return;const i=this.makeSourceRelativePath(r.value),u=this.guardedReadFileSync(i,t.loc);let o=u.byteLength;l&&(o=l.value);for(let t=0;t<o;t++)this.emit(u.readUInt8(t+e.value))}evalExprType(t,n,r){const e=this.evalExpr(t),{errors:l,value:i}=e;return l||typeof i===n?e:(this.addError(`Expecting ${r} to be '${n}' type, got '${g(i)}'`,t.loc),{errors:!0,value:i})}evalExprToInt(t,n){return this.evalExprType(t,"number",n)}evalExprToString(t,n){return this.evalExprType(t,"string",n)}evalExpr(t){switch(t.type){case"binary":{const n=this.evalExpr(t.left),r=this.evalExpr(t.right);if(p(n,r))return f(0);if(typeof n.value!=typeof r.value)return this.addError(`Binary expression operands are expected to be of the same type.  Got: '${g(n.value)}' (left), '${g(r.value)}' (right)`,t.loc),f(0);if("string"!=typeof n.value&&"number"!=typeof n.value)return this.addError(`Binary expression operands can only operator on numbers or strings.  Got: '${g(n.value)}'`,t.loc),f(0);if("string"==typeof n.value){const n=["+","==","<","<=",">",">="];if(n.indexOf(t.op)<0)return this.addError(`'${t.op}' operator is not supported for strings.  Valid operators for strings are: ${n.join(", ")}`,t.loc),f(0)}switch(t.op){case"+":return v(n,r,(t,n)=>t+n);case"-":return v(n,r,(t,n)=>t-n);case"*":return v(n,r,(t,n)=>t*n);case"/":return v(n,r,(t,n)=>t/n);case"%":return v(n,r,(t,n)=>t%n);case"&":return v(n,r,(t,n)=>t&n);case"|":return v(n,r,(t,n)=>t|n);case"^":return v(n,r,(t,n)=>t^n);case"<<":return v(n,r,(t,n)=>t<<n);case">>":return v(n,r,(t,n)=>t>>n);case"==":return v(n,r,(t,n)=>t==n);case"!=":return v(n,r,(t,n)=>t!=n);case"<":return v(n,r,(t,n)=>t<n);case"<=":return v(n,r,(t,n)=>t<=n);case">":return v(n,r,(t,n)=>t>n);case">=":return v(n,r,(t,n)=>t>=n);case"&&":return v(n,r,(t,n)=>t&&n);case"||":return v(n,r,(t,n)=>t||n);default:throw new Error(`Unhandled binary operator ${t.op}`)}}case"unary":{const n=this.evalExprToInt(t.expr,"operand");if(n.errors)return n;switch(t.op){case"+":return A(n,t=>+t);case"-":return A(n,t=>-t);case"~":return A(n,t=>~t);default:throw new Error(`Unhandled unary operator ${t.op}`)}}case"literal":return h(t.lit);case"array":{const n=t.list.map(t=>this.evalExpr(t));return{value:n.map(t=>t.value),errors:p(...n)}}case"ident":throw new Error("should not see an ident here -- if you do, it is probably a wrong type node in parser");case"qualified-ident":{const n=this.scopes.findQualifiedSym(t.path,t.absolute);if(null==n)return this.pass>=1?(this.addError(`Undefined symbol '${b(t)}'`,t.loc),f(0)):(this.needPass=!0,h(0));switch(n.type){case"label":return{errors:n.data.errors,value:n.data.value.addr};case"var":return n.seen<this.pass&&this.addError(`Undeclared variable '${b(t)}`,t.loc),n.data;case"macro":return this.addError("Must have a label or a variable identifier here, got macro name",t.loc),f(0)}break}case"member":{const n=this.evalExpr(t.object),{value:r}=n;if(null==r)return this.addError("Cannot access properties of an unresolved symbol'",t.loc),f(0);const e=(t,n)=>t in r||(this.addError(`Property '${t}' does not exist in object`,n),!1),l=(t,n)=>{if("ident"!==t.property.type)this.addError(`${n} property must be a string, got ${g(t.property.type)}`,t.loc);else if(e(t.property.name,t.property.loc))return h(r[t.property.name]);return f(0)};if(r instanceof Array){if(!t.computed)return l(t,"Array");const{errors:n,value:e}=this.evalExprToInt(t.property,"array index");return n?f(0):e in r?h(r[e]):(this.addError(`Out of bounds array index ${e}`,t.property.loc),f(0))}if("object"==typeof r){if(t.computed){let{errors:n,value:l}=this.evalExpr(t.property);return n?f(0):"string"!=typeof l&&"number"!=typeof l?(this.addError(`Object property must be a string or an integer, got ${g(l)}`,t.loc),f(0)):e(l,t.property.loc)?h(r[l]):f(0)}return l(t,"Object")}return 0!==this.pass?(n.errors||(t.computed?this.addError("Cannot use []-operator on non-array/object values",t.loc):this.addError("Cannot use the dot-operator on non-object values",t.loc)),f(0)):h(0)}case"callfunc":{const n=this.evalExpr(t.callee),r=t.args.map(t=>this.evalExpr(t));if(n.errors)return f(0);if("function"!=typeof n.value)return this.addError(`Callee must be a function type.  Got '${g(n)}'`,t.loc),f(0);if(p(...r))return f(0);try{return h(n.value(r.map(t=>t.value)))}catch(n){return"qualified-ident"==t.callee.type?this.addError(`Call to '${b(t.callee)}' failed with an error: ${n.message}`,t.loc):this.addError(`Plugin call failed with an error: ${n.message}`,t.loc),f(0)}}}throw new Error("should be unreachable?")}setInitialPC(t){if(this.codePCSet)throw new Error("PC already set -- shouldn't happen");this.codePC=t,this.codePCSet=!0,this.initialPC=t}topLevelSourceLoc(){return y(this.includeStack[0])}emit(t){this.codePCSet||(this.setInitialPC(this.platform.defaultStartPC),this.addWarning(`Starting program counter not set with '* = addr'.  Defaulting to platform default $${o.toHex16(this.codePC)}`,this.topLevelSourceLoc())),this.binary.push(t),this.codePC+=1}emit16(t){this.emit(255&t),this.emit(t>>8&255)}checkSingle(t){return null!==t&&(this.emit(t),!0)}checkImm(t,n){if(null===n||null===t)return!1;const r=this.evalExprToInt(t,"immediate");return p(r)||(this.emit(n),this.emit(r.value)),!0}checkAbs(t,n,r){if(null===n||null===t)return!1;const e=this.evalExprToInt(t,"absolute address");if(p(e))return!0;const{value:l}=e;if(8===r){if(l<0||l>=1<<r)return!1;this.emit(n),this.emit(l)}else this.emit(n),this.emit16(l);return!0}checkBranch(t,n){if(null===n||null===t)return!1;const r=this.evalExpr(t);if(p(r))return!0;if("number"!=typeof r.value)return this.addError(`Expecting branch label to evaluate to integer, got ${g(r.value)}`,t.loc),!0;const{value:e}=r,l=e-this.codePC-2;return this.emit(n),(l>127||l<-128)&&this.outOfRangeBranches.push({loc:t.loc,offset:l}),this.emit(255&l),!0}setPC(t){const n=this.evalExprToInt(t,"pc");if(!p(n)){const{value:r}=n;if(this.codePCSet)for(this.codePC>r&&this.addError(`Cannot set program counter to a smaller value than current (current: $${o.toHex16(this.codePC)}, trying to set $${o.toHex16(r)})`,t.loc);this.codePC<r;)this.emit(0);else this.setInitialPC(r)}}guardedReadFileSync(n,r){try{return this.readFileSync(n)}catch(e){return this.addError(`Couldn't open file '${n}'`,r),t.from([])}}fileInclude(t){const n=this.evalExprToString(t.filename,"!include filename");if(p(n))return;const r=n.value,e=this.makeSourceRelativePath(r);this.pushSource(e),this.assemble(e,t.loc),this.popSource()}fillBytes(t){const n=this.evalExprToInt(t.numBytes,"!fill num_bytes"),r=this.evalExprToInt(t.fillValue,"!fill value");if(p(n,r))return;const{value:e}=r;if(e<0||e>=256)return void this.addError(`!fill value to repeat must be in 8-bit range, '${e}' given`,t.fillValue.loc);const l=n.value;if(l<0)this.addError(`!fill repeat count must be >= 0, got ${l}`,t.numBytes.loc);else for(let t=0;t<l;t++)this.emit(e)}alignBytes(t){const n=this.evalExprToInt(t.alignBytes,"alignment");if(p(n))return;const{value:r}=n;if(r<1)this.addError(`Alignment must be a positive integer, ${r} given`,t.alignBytes.loc);else if(0==(r&r-1))for(;0!=(this.codePC&r-1);)this.emit(0);else this.addError(`Alignment must be a power of two, ${r} given`,t.loc)}withAnonScope(t,n){if(null!==t)return this.withLabelScope(t,n);this.scopes.withAnonScope(n)}withLabelScope(t,n){this.scopes.withLabelScope(t,n)}emit8or16(t,n){8!=n?this.emit16(t):this.emit(t)}emitData(t,n){for(let r=0;r<t.length;r++){const e=this.evalExpr(t[r]);if(p(e))continue;const{value:l}=e;if("number"==typeof l)this.emit8or16(l,n);else if(l instanceof Array)for(let t in l)this.emit8or16(l[t],n);else this.addError(`Only literal (int constants) or array types can be emitted.  Got ${g(l)}`,t[r].loc)}}makeFunction(t,n){return n=>{return t({readFileSync:t=>this.readFileSync(t),resolveRelative:t=>this.makeSourceRelativePath(t)},...n)}}bindFunction(t,n,r){this.scopes.declareVar(t.name,h(this.makeFunction(n,r)))}bindPlugin(t,n){const r=t.moduleName;if("function"==typeof n&&this.bindFunction(r,n,t.loc),"object"==typeof n){const e={},l=Object.keys(n);for(let r in l){const i=l[r],u=n[i];e[i]=this.makeFunction(u,t.loc)}this.scopes.declareVar(r.name,h(e))}}checkDirectives(t,n){switch(t.type){case"data":this.emitData(t.values,t.dataSize===s.DataSize.Byte?8:16);break;case"fill":this.fillBytes(t);break;case"align":this.alignBytes(t);break;case"setpc":this.setPC(t.pc);break;case"binary":this.emitBinary(t);break;case"include":this.fileInclude(t);break;case"error":{const n=this.evalExprToString(t.error,"error message");if(!p(n))return void this.addError(n.value,t.loc);break}case"if":{const{cases:e,elseBranch:l}=t;for(let t in e){const[l,i]=e[t],u=this.evalExpr(l);if(!p(u)&&(!0===(r=u.value)||0!=r))return this.withAnonScope(n,()=>{this.assembleLines(i)})}return this.withAnonScope(n,()=>{this.assembleLines(l)})}case"for":{const{index:r,list:e,body:l,loc:i}=t,u=this.evalExpr(e);if(p(u))return;const{value:o}=u;if(!(o instanceof Array))return void this.addError("for-loop range must be an array expression (e.g., a range() or an array)",e.loc);for(let t=0;t<o.length;t++){let e=null;null!==n&&(e=`${n}__${t}`),this.withAnonScope(e,()=>(this.scopes.declareVar(r.name,h(o[t])),this.assembleLines(l)))}break}case"macro":{const{name:n,args:r,body:e}=t;if(void 0!==this.scopes.findMacro([n.name],!1)&&this.scopes.symbolSeen(n.name))return void this.addError(`Macro '${n.name}' already defined`,n.loc);this.scopes.declareMacro(n.name,t);break}case"callmacro":{const{name:r,args:e}=t,l=this.scopes.findMacro(r.path,r.absolute),i=e.map(t=>this.evalExpr(t));if(null==l)return void this.addError(`Undefined macro '${b(r)}'`,r.loc);if(l.args.length!==e.length)return void this.addError(`Macro '${b(r)}' declared with ${l.args.length} args but called here with ${e.length}`,r.loc);this.withAnonScope(n,()=>{for(let t=0;t<i.length;t++){const n=l.args[t].ident.name;this.scopes.declareVar(n,i[t])}this.assembleLines(l.body)});break}case"let":{const n=t.name,r=this.scopes.findQualifiedSym([n.name],!1),e=this.evalExpr(t.value);if(void 0!==r&&this.scopes.symbolSeen(n.name))return void this.addError(`Variable '${n.name}' already defined`,t.loc);this.scopes.declareVar(n.name,e);break}case"assign":{const n=t.name;if(1!==t.name.path.length||t.name.absolute)return void this.addError("Only symbol names in the current (or owning) scopes are allowed for assignment",t.loc);const r=this.scopes.findQualifiedSym(t.name.path,t.name.absolute);if(null==r)return void this.addError(`Assignment to undeclared variable '${b(n)}'`,t.loc);if("var"!==r.type)return void this.addError(`Assignment to symbol '${b(n)}' that is not a variable.  Its type is '${r.type}'`,t.loc);const e=this.evalExpr(t.value);this.scopes.updateVar(n.path[0],e);break}case"load-plugin":{const n=this.evalExprToString(t.filename,"plugin filename");if(p(n))return;const r=this.requirePlugin(n.value);this.bindPlugin(t,r);break}case"filescope":return void this.addError("The !filescope directive is only allowed as the first directive in a source file",t.loc);default:return void this.addError(`unknown directive ${t.type}`,t.loc)}var r}assembleLines(t){if(null===t||0==t.length)return;if(0==t.length)return;const n=t=>{for(let n=0;n<t.length;n++)this.debugInfo.startLine(t[n].loc,this.codePC),this.assembleLine(t[n]),this.debugInfo.endLine(this.codePC)};let r=0;for(;r<t.length;){const{label:n,stmt:e,scopedStmts:l}=t[r];if(null!=n||null!=e||null!=l)break;r++}if(r>=t.length)return;const e=t[r];return null!=e.stmt&&"filescope"==e.stmt.type?(this.checkAndDeclareLabel(e.stmt.name),this.withLabelScope(e.stmt.name.name,()=>n(t.slice(r+1)))):n(t)}checkAndDeclareLabel(t){if(this.scopes.symbolSeen(t.name))this.addError(`Symbol '${t.name}' already defined`,t.loc);else{this.scopes.declareLabelSymbol(t,this.codePC)&&(this.needPass=!0)}}assembleLine(t){if(null==t.label&&null==t.stmt&&null==t.scopedStmts)return;null!==t.label&&this.checkAndDeclareLabel(t.label);const n=t.scopedStmts;if(null!=n){if(!t.label)throw new Error("ICE: line.label cannot be undefined");return void this.withLabelScope(t.label.name,()=>{this.assembleLines(n)})}if(null===t.stmt)return;if("insn"!==t.stmt.type)return void this.checkDirectives(t.stmt,null==t.label?null:t.label.name);const r=t.stmt.insn,l=e.default[r.mnemonic.toUpperCase()];if(void 0!==l){if(null===r.imm&&null===r.abs&&null===r.absx&&null===r.absy&&null===r.absind&&this.checkSingle(l[10]))return;if(this.checkImm(r.imm,l[0]))return;if(this.checkAbs(r.abs,l[1],8))return;if(this.checkAbs(r.absx,l[2],8))return;if(this.checkAbs(r.absy,l[3],8))return;if(this.checkAbs(r.absx,l[5],16))return;if(this.checkAbs(r.absy,l[6],16))return;if(this.checkAbs(r.absind,l[7],16))return;if(this.checkAbs(r.indx,l[8],8))return;if(this.checkAbs(r.indy,l[9],8))return;if(this.checkAbs(r.abs,l[4],16))return;if(this.checkBranch(r.abs,l[11]))return;this.addError(`Couldn't encode instruction '${r.mnemonic}'`,t.loc)}else this.addError(`Unknown mnemonic '${r.mnemonic}'`,t.loc)}makeSourceRelativePath(t){const n=this.peekSourceStack();return l.join(l.dirname(n),t)}assemble(t,n){try{const r=this.parse(t,n);this.assembleLines(r)}catch(t){if(!("name"in t&&"SyntaxError"==t.name)){if("name"in t&&"semantic"==t.name)return;throw t}this.addError(`Syntax error: ${t.message}`,Object.assign({},t.location,{source:this.peekSourceStack()}))}}_requireType(t,n){if(typeof t==n)return t;this.addError(`Expecting a ${n} value, got ${g(t)}`,t.loc)}requireString(t){return this._requireType(t,"string")}requireNumber(t){return this._requireType(t,"number")}registerPlugins(){const t=(t,n)=>{this.scopes.declareVar(t,h(n))};t("loadJson",t=>{const n=this.requireString(t[0]),r=this.makeSourceRelativePath(n);return JSON.parse(this.readFileSync(r,"utf-8"))}),t("range",t=>{let n=0,r=void 0;if(1==t.length)r=this.requireNumber(t[0]);else{if(2!=t.length)throw new Error("Invalid number of args to 'range'.  Expecting 1 or 2 arguments.");n=this.requireNumber(t[0]),r=this.requireNumber(t[1])}if(r==n)return[];if(r<n)throw new Error("range 'end' must be larger or equal to 'start'");return Array(r-n).fill(null).map((t,r)=>r+n)})}dumpLabels(){return this.scopes.dumpLabels(this.codePC)}}const E={readFileSync:u.readFileSync};n.assemble=function(n,r=E){const e=new w(r);e.pushSource(n);let l=0;do{if(e.startPass(l),e.registerPlugins(),e.assemble(n,y(n)),l>0&&e.anyErrors())return{prg:t.from([]),labels:[],debugInfo:void 0,errors:e.errors(),warnings:e.warnings()};const r=10;if(l>r)return void console.error(`Exceeded max pass limit ${r}`);if(l+=1,!e.needPass&&0!=e.outOfRangeBranches.length){for(let t in e.outOfRangeBranches){const n=e.outOfRangeBranches[t];e.addError(`Branch target too far (must fit in signed 8-bit range, got ${n.offset})`,n.loc)}break}}while(e.needPass);return e.popSource(),{prg:e.prg(),errors:e.errors(),warnings:e.warnings(),labels:e.dumpLabels(),debugInfo:e.debugInfo}}}).call(this,r(7).Buffer)},function(t,n,r){"use strict";(function(t){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */
var e=r(9),l=r(10),i=r(11);function u(){return s.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function o(t,n){if(u()<n)throw new RangeError("Invalid typed array length");return s.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(n)).__proto__=s.prototype:(null===t&&(t=new s(n)),t.length=n),t}function s(t,n,r){if(!(s.TYPED_ARRAY_SUPPORT||this instanceof s))return new s(t,n,r);if("number"==typeof t){if("string"==typeof n)throw new Error("If encoding is specified then the first argument must be a string");return f(this,t)}return a(this,t,n,r)}function a(t,n,r,e){if("number"==typeof n)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&n instanceof ArrayBuffer?function(t,n,r,e){if(n.byteLength,r<0||n.byteLength<r)throw new RangeError("'offset' is out of bounds");if(n.byteLength<r+(e||0))throw new RangeError("'length' is out of bounds");n=void 0===r&&void 0===e?new Uint8Array(n):void 0===e?new Uint8Array(n,r):new Uint8Array(n,r,e);s.TYPED_ARRAY_SUPPORT?(t=n).__proto__=s.prototype:t=h(t,n);return t}(t,n,r,e):"string"==typeof n?function(t,n,r){"string"==typeof r&&""!==r||(r="utf8");if(!s.isEncoding(r))throw new TypeError('"encoding" must be a valid string encoding');var e=0|d(n,r),l=(t=o(t,e)).write(n,r);l!==e&&(t=t.slice(0,l));return t}(t,n,r):function(t,n){if(s.isBuffer(n)){var r=0|p(n.length);return 0===(t=o(t,r)).length?t:(n.copy(t,0,0,r),t)}if(n){if("undefined"!=typeof ArrayBuffer&&n.buffer instanceof ArrayBuffer||"length"in n)return"number"!=typeof n.length||(e=n.length)!=e?o(t,0):h(t,n);if("Buffer"===n.type&&i(n.data))return h(t,n.data)}var e;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(t,n)}function c(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function f(t,n){if(c(n),t=o(t,n<0?0:0|p(n)),!s.TYPED_ARRAY_SUPPORT)for(var r=0;r<n;++r)t[r]=0;return t}function h(t,n){var r=n.length<0?0:0|p(n.length);t=o(t,r);for(var e=0;e<r;e+=1)t[e]=255&n[e];return t}function p(t){if(t>=u())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+u().toString(16)+" bytes");return 0|t}function d(t,n){if(s.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var r=t.length;if(0===r)return 0;for(var e=!1;;)switch(n){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return F(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return N(t).length;default:if(e)return F(t).length;n=(""+n).toLowerCase(),e=!0}}function m(t,n,r){var e=!1;if((void 0===n||n<0)&&(n=0),n>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(n>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return L(this,n,r);case"utf8":case"utf-8":return P(this,n,r);case"ascii":return x(this,n,r);case"latin1":case"binary":return _(this,n,r);case"base64":return k(this,n,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return B(this,n,r);default:if(e)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),e=!0}}function y(t,n,r){var e=t[n];t[n]=t[r],t[r]=e}function g(t,n,r,e,l){if(0===t.length)return-1;if("string"==typeof r?(e=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,isNaN(r)&&(r=l?0:t.length-1),r<0&&(r=t.length+r),r>=t.length){if(l)return-1;r=t.length-1}else if(r<0){if(!l)return-1;r=0}if("string"==typeof n&&(n=s.from(n,e)),s.isBuffer(n))return 0===n.length?-1:b(t,n,r,e,l);if("number"==typeof n)return n&=255,s.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?l?Uint8Array.prototype.indexOf.call(t,n,r):Uint8Array.prototype.lastIndexOf.call(t,n,r):b(t,[n],r,e,l);throw new TypeError("val must be string, number or Buffer")}function b(t,n,r,e,l){var i,u=1,o=t.length,s=n.length;if(void 0!==e&&("ucs2"===(e=String(e).toLowerCase())||"ucs-2"===e||"utf16le"===e||"utf-16le"===e)){if(t.length<2||n.length<2)return-1;u=2,o/=2,s/=2,r/=2}function a(t,n){return 1===u?t[n]:t.readUInt16BE(n*u)}if(l){var c=-1;for(i=r;i<o;i++)if(a(t,i)===a(n,-1===c?0:i-c)){if(-1===c&&(c=i),i-c+1===s)return c*u}else-1!==c&&(i-=i-c),c=-1}else for(r+s>o&&(r=o-s),i=r;i>=0;i--){for(var f=!0,h=0;h<s;h++)if(a(t,i+h)!==a(n,h)){f=!1;break}if(f)return i}return-1}function v(t,n,r,e){r=Number(r)||0;var l=t.length-r;e?(e=Number(e))>l&&(e=l):e=l;var i=n.length;if(i%2!=0)throw new TypeError("Invalid hex string");e>i/2&&(e=i/2);for(var u=0;u<e;++u){var o=parseInt(n.substr(2*u,2),16);if(isNaN(o))return u;t[r+u]=o}return u}function A(t,n,r,e){return z(F(n,t.length-r),t,r,e)}function w(t,n,r,e){return z(function(t){for(var n=[],r=0;r<t.length;++r)n.push(255&t.charCodeAt(r));return n}(n),t,r,e)}function E(t,n,r,e){return w(t,n,r,e)}function S(t,n,r,e){return z(N(n),t,r,e)}function C(t,n,r,e){return z(function(t,n){for(var r,e,l,i=[],u=0;u<t.length&&!((n-=2)<0);++u)r=t.charCodeAt(u),e=r>>8,l=r%256,i.push(l),i.push(e);return i}(n,t.length-r),t,r,e)}function k(t,n,r){return 0===n&&r===t.length?e.fromByteArray(t):e.fromByteArray(t.slice(n,r))}function P(t,n,r){r=Math.min(t.length,r);for(var e=[],l=n;l<r;){var i,u,o,s,a=t[l],c=null,f=a>239?4:a>223?3:a>191?2:1;if(l+f<=r)switch(f){case 1:a<128&&(c=a);break;case 2:128==(192&(i=t[l+1]))&&(s=(31&a)<<6|63&i)>127&&(c=s);break;case 3:i=t[l+1],u=t[l+2],128==(192&i)&&128==(192&u)&&(s=(15&a)<<12|(63&i)<<6|63&u)>2047&&(s<55296||s>57343)&&(c=s);break;case 4:i=t[l+1],u=t[l+2],o=t[l+3],128==(192&i)&&128==(192&u)&&128==(192&o)&&(s=(15&a)<<18|(63&i)<<12|(63&u)<<6|63&o)>65535&&s<1114112&&(c=s)}null===c?(c=65533,f=1):c>65535&&(c-=65536,e.push(c>>>10&1023|55296),c=56320|1023&c),e.push(c),l+=f}return function(t){var n=t.length;if(n<=T)return String.fromCharCode.apply(String,t);var r="",e=0;for(;e<n;)r+=String.fromCharCode.apply(String,t.slice(e,e+=T));return r}(e)}n.Buffer=s,n.SlowBuffer=function(t){+t!=t&&(t=0);return s.alloc(+t)},n.INSPECT_MAX_BYTES=50,s.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(t){return!1}}(),n.kMaxLength=u(),s.poolSize=8192,s._augment=function(t){return t.__proto__=s.prototype,t},s.from=function(t,n,r){return a(null,t,n,r)},s.TYPED_ARRAY_SUPPORT&&(s.prototype.__proto__=Uint8Array.prototype,s.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&s[Symbol.species]===s&&Object.defineProperty(s,Symbol.species,{value:null,configurable:!0})),s.alloc=function(t,n,r){return function(t,n,r,e){return c(n),n<=0?o(t,n):void 0!==r?"string"==typeof e?o(t,n).fill(r,e):o(t,n).fill(r):o(t,n)}(null,t,n,r)},s.allocUnsafe=function(t){return f(null,t)},s.allocUnsafeSlow=function(t){return f(null,t)},s.isBuffer=function(t){return!(null==t||!t._isBuffer)},s.compare=function(t,n){if(!s.isBuffer(t)||!s.isBuffer(n))throw new TypeError("Arguments must be Buffers");if(t===n)return 0;for(var r=t.length,e=n.length,l=0,i=Math.min(r,e);l<i;++l)if(t[l]!==n[l]){r=t[l],e=n[l];break}return r<e?-1:e<r?1:0},s.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},s.concat=function(t,n){if(!i(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return s.alloc(0);var r;if(void 0===n)for(n=0,r=0;r<t.length;++r)n+=t[r].length;var e=s.allocUnsafe(n),l=0;for(r=0;r<t.length;++r){var u=t[r];if(!s.isBuffer(u))throw new TypeError('"list" argument must be an Array of Buffers');u.copy(e,l),l+=u.length}return e},s.byteLength=d,s.prototype._isBuffer=!0,s.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var n=0;n<t;n+=2)y(this,n,n+1);return this},s.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var n=0;n<t;n+=4)y(this,n,n+3),y(this,n+1,n+2);return this},s.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var n=0;n<t;n+=8)y(this,n,n+7),y(this,n+1,n+6),y(this,n+2,n+5),y(this,n+3,n+4);return this},s.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?P(this,0,t):m.apply(this,arguments)},s.prototype.equals=function(t){if(!s.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===s.compare(this,t)},s.prototype.inspect=function(){var t="",r=n.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,r).match(/.{2}/g).join(" "),this.length>r&&(t+=" ... ")),"<Buffer "+t+">"},s.prototype.compare=function(t,n,r,e,l){if(!s.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===n&&(n=0),void 0===r&&(r=t?t.length:0),void 0===e&&(e=0),void 0===l&&(l=this.length),n<0||r>t.length||e<0||l>this.length)throw new RangeError("out of range index");if(e>=l&&n>=r)return 0;if(e>=l)return-1;if(n>=r)return 1;if(this===t)return 0;for(var i=(l>>>=0)-(e>>>=0),u=(r>>>=0)-(n>>>=0),o=Math.min(i,u),a=this.slice(e,l),c=t.slice(n,r),f=0;f<o;++f)if(a[f]!==c[f]){i=a[f],u=c[f];break}return i<u?-1:u<i?1:0},s.prototype.includes=function(t,n,r){return-1!==this.indexOf(t,n,r)},s.prototype.indexOf=function(t,n,r){return g(this,t,n,r,!0)},s.prototype.lastIndexOf=function(t,n,r){return g(this,t,n,r,!1)},s.prototype.write=function(t,n,r,e){if(void 0===n)e="utf8",r=this.length,n=0;else if(void 0===r&&"string"==typeof n)e=n,r=this.length,n=0;else{if(!isFinite(n))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");n|=0,isFinite(r)?(r|=0,void 0===e&&(e="utf8")):(e=r,r=void 0)}var l=this.length-n;if((void 0===r||r>l)&&(r=l),t.length>0&&(r<0||n<0)||n>this.length)throw new RangeError("Attempt to write outside buffer bounds");e||(e="utf8");for(var i=!1;;)switch(e){case"hex":return v(this,t,n,r);case"utf8":case"utf-8":return A(this,t,n,r);case"ascii":return w(this,t,n,r);case"latin1":case"binary":return E(this,t,n,r);case"base64":return S(this,t,n,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return C(this,t,n,r);default:if(i)throw new TypeError("Unknown encoding: "+e);e=(""+e).toLowerCase(),i=!0}},s.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var T=4096;function x(t,n,r){var e="";r=Math.min(t.length,r);for(var l=n;l<r;++l)e+=String.fromCharCode(127&t[l]);return e}function _(t,n,r){var e="";r=Math.min(t.length,r);for(var l=n;l<r;++l)e+=String.fromCharCode(t[l]);return e}function L(t,n,r){var e=t.length;(!n||n<0)&&(n=0),(!r||r<0||r>e)&&(r=e);for(var l="",i=n;i<r;++i)l+=j(t[i]);return l}function B(t,n,r){for(var e=t.slice(n,r),l="",i=0;i<e.length;i+=2)l+=String.fromCharCode(e[i]+256*e[i+1]);return l}function R(t,n,r){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+n>r)throw new RangeError("Trying to access beyond buffer length")}function I(t,n,r,e,l,i){if(!s.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(n>l||n<i)throw new RangeError('"value" argument is out of bounds');if(r+e>t.length)throw new RangeError("Index out of range")}function $(t,n,r,e){n<0&&(n=65535+n+1);for(var l=0,i=Math.min(t.length-r,2);l<i;++l)t[r+l]=(n&255<<8*(e?l:1-l))>>>8*(e?l:1-l)}function O(t,n,r,e){n<0&&(n=4294967295+n+1);for(var l=0,i=Math.min(t.length-r,4);l<i;++l)t[r+l]=n>>>8*(e?l:3-l)&255}function U(t,n,r,e,l,i){if(r+e>t.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function M(t,n,r,e,i){return i||U(t,0,r,4),l.write(t,n,r,e,23,4),r+4}function Y(t,n,r,e,i){return i||U(t,0,r,8),l.write(t,n,r,e,52,8),r+8}s.prototype.slice=function(t,n){var r,e=this.length;if((t=~~t)<0?(t+=e)<0&&(t=0):t>e&&(t=e),(n=void 0===n?e:~~n)<0?(n+=e)<0&&(n=0):n>e&&(n=e),n<t&&(n=t),s.TYPED_ARRAY_SUPPORT)(r=this.subarray(t,n)).__proto__=s.prototype;else{var l=n-t;r=new s(l,void 0);for(var i=0;i<l;++i)r[i]=this[i+t]}return r},s.prototype.readUIntLE=function(t,n,r){t|=0,n|=0,r||R(t,n,this.length);for(var e=this[t],l=1,i=0;++i<n&&(l*=256);)e+=this[t+i]*l;return e},s.prototype.readUIntBE=function(t,n,r){t|=0,n|=0,r||R(t,n,this.length);for(var e=this[t+--n],l=1;n>0&&(l*=256);)e+=this[t+--n]*l;return e},s.prototype.readUInt8=function(t,n){return n||R(t,1,this.length),this[t]},s.prototype.readUInt16LE=function(t,n){return n||R(t,2,this.length),this[t]|this[t+1]<<8},s.prototype.readUInt16BE=function(t,n){return n||R(t,2,this.length),this[t]<<8|this[t+1]},s.prototype.readUInt32LE=function(t,n){return n||R(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},s.prototype.readUInt32BE=function(t,n){return n||R(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},s.prototype.readIntLE=function(t,n,r){t|=0,n|=0,r||R(t,n,this.length);for(var e=this[t],l=1,i=0;++i<n&&(l*=256);)e+=this[t+i]*l;return e>=(l*=128)&&(e-=Math.pow(2,8*n)),e},s.prototype.readIntBE=function(t,n,r){t|=0,n|=0,r||R(t,n,this.length);for(var e=n,l=1,i=this[t+--e];e>0&&(l*=256);)i+=this[t+--e]*l;return i>=(l*=128)&&(i-=Math.pow(2,8*n)),i},s.prototype.readInt8=function(t,n){return n||R(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},s.prototype.readInt16LE=function(t,n){n||R(t,2,this.length);var r=this[t]|this[t+1]<<8;return 32768&r?4294901760|r:r},s.prototype.readInt16BE=function(t,n){n||R(t,2,this.length);var r=this[t+1]|this[t]<<8;return 32768&r?4294901760|r:r},s.prototype.readInt32LE=function(t,n){return n||R(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},s.prototype.readInt32BE=function(t,n){return n||R(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},s.prototype.readFloatLE=function(t,n){return n||R(t,4,this.length),l.read(this,t,!0,23,4)},s.prototype.readFloatBE=function(t,n){return n||R(t,4,this.length),l.read(this,t,!1,23,4)},s.prototype.readDoubleLE=function(t,n){return n||R(t,8,this.length),l.read(this,t,!0,52,8)},s.prototype.readDoubleBE=function(t,n){return n||R(t,8,this.length),l.read(this,t,!1,52,8)},s.prototype.writeUIntLE=function(t,n,r,e){(t=+t,n|=0,r|=0,e)||I(this,t,n,r,Math.pow(2,8*r)-1,0);var l=1,i=0;for(this[n]=255&t;++i<r&&(l*=256);)this[n+i]=t/l&255;return n+r},s.prototype.writeUIntBE=function(t,n,r,e){(t=+t,n|=0,r|=0,e)||I(this,t,n,r,Math.pow(2,8*r)-1,0);var l=r-1,i=1;for(this[n+l]=255&t;--l>=0&&(i*=256);)this[n+l]=t/i&255;return n+r},s.prototype.writeUInt8=function(t,n,r){return t=+t,n|=0,r||I(this,t,n,1,255,0),s.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[n]=255&t,n+1},s.prototype.writeUInt16LE=function(t,n,r){return t=+t,n|=0,r||I(this,t,n,2,65535,0),s.TYPED_ARRAY_SUPPORT?(this[n]=255&t,this[n+1]=t>>>8):$(this,t,n,!0),n+2},s.prototype.writeUInt16BE=function(t,n,r){return t=+t,n|=0,r||I(this,t,n,2,65535,0),s.TYPED_ARRAY_SUPPORT?(this[n]=t>>>8,this[n+1]=255&t):$(this,t,n,!1),n+2},s.prototype.writeUInt32LE=function(t,n,r){return t=+t,n|=0,r||I(this,t,n,4,4294967295,0),s.TYPED_ARRAY_SUPPORT?(this[n+3]=t>>>24,this[n+2]=t>>>16,this[n+1]=t>>>8,this[n]=255&t):O(this,t,n,!0),n+4},s.prototype.writeUInt32BE=function(t,n,r){return t=+t,n|=0,r||I(this,t,n,4,4294967295,0),s.TYPED_ARRAY_SUPPORT?(this[n]=t>>>24,this[n+1]=t>>>16,this[n+2]=t>>>8,this[n+3]=255&t):O(this,t,n,!1),n+4},s.prototype.writeIntLE=function(t,n,r,e){if(t=+t,n|=0,!e){var l=Math.pow(2,8*r-1);I(this,t,n,r,l-1,-l)}var i=0,u=1,o=0;for(this[n]=255&t;++i<r&&(u*=256);)t<0&&0===o&&0!==this[n+i-1]&&(o=1),this[n+i]=(t/u>>0)-o&255;return n+r},s.prototype.writeIntBE=function(t,n,r,e){if(t=+t,n|=0,!e){var l=Math.pow(2,8*r-1);I(this,t,n,r,l-1,-l)}var i=r-1,u=1,o=0;for(this[n+i]=255&t;--i>=0&&(u*=256);)t<0&&0===o&&0!==this[n+i+1]&&(o=1),this[n+i]=(t/u>>0)-o&255;return n+r},s.prototype.writeInt8=function(t,n,r){return t=+t,n|=0,r||I(this,t,n,1,127,-128),s.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[n]=255&t,n+1},s.prototype.writeInt16LE=function(t,n,r){return t=+t,n|=0,r||I(this,t,n,2,32767,-32768),s.TYPED_ARRAY_SUPPORT?(this[n]=255&t,this[n+1]=t>>>8):$(this,t,n,!0),n+2},s.prototype.writeInt16BE=function(t,n,r){return t=+t,n|=0,r||I(this,t,n,2,32767,-32768),s.TYPED_ARRAY_SUPPORT?(this[n]=t>>>8,this[n+1]=255&t):$(this,t,n,!1),n+2},s.prototype.writeInt32LE=function(t,n,r){return t=+t,n|=0,r||I(this,t,n,4,2147483647,-2147483648),s.TYPED_ARRAY_SUPPORT?(this[n]=255&t,this[n+1]=t>>>8,this[n+2]=t>>>16,this[n+3]=t>>>24):O(this,t,n,!0),n+4},s.prototype.writeInt32BE=function(t,n,r){return t=+t,n|=0,r||I(this,t,n,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),s.TYPED_ARRAY_SUPPORT?(this[n]=t>>>24,this[n+1]=t>>>16,this[n+2]=t>>>8,this[n+3]=255&t):O(this,t,n,!1),n+4},s.prototype.writeFloatLE=function(t,n,r){return M(this,t,n,!0,r)},s.prototype.writeFloatBE=function(t,n,r){return M(this,t,n,!1,r)},s.prototype.writeDoubleLE=function(t,n,r){return Y(this,t,n,!0,r)},s.prototype.writeDoubleBE=function(t,n,r){return Y(this,t,n,!1,r)},s.prototype.copy=function(t,n,r,e){if(r||(r=0),e||0===e||(e=this.length),n>=t.length&&(n=t.length),n||(n=0),e>0&&e<r&&(e=r),e===r)return 0;if(0===t.length||0===this.length)return 0;if(n<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(e<0)throw new RangeError("sourceEnd out of bounds");e>this.length&&(e=this.length),t.length-n<e-r&&(e=t.length-n+r);var l,i=e-r;if(this===t&&r<n&&n<e)for(l=i-1;l>=0;--l)t[l+n]=this[l+r];else if(i<1e3||!s.TYPED_ARRAY_SUPPORT)for(l=0;l<i;++l)t[l+n]=this[l+r];else Uint8Array.prototype.set.call(t,this.subarray(r,r+i),n);return i},s.prototype.fill=function(t,n,r,e){if("string"==typeof t){if("string"==typeof n?(e=n,n=0,r=this.length):"string"==typeof r&&(e=r,r=this.length),1===t.length){var l=t.charCodeAt(0);l<256&&(t=l)}if(void 0!==e&&"string"!=typeof e)throw new TypeError("encoding must be a string");if("string"==typeof e&&!s.isEncoding(e))throw new TypeError("Unknown encoding: "+e)}else"number"==typeof t&&(t&=255);if(n<0||this.length<n||this.length<r)throw new RangeError("Out of range index");if(r<=n)return this;var i;if(n>>>=0,r=void 0===r?this.length:r>>>0,t||(t=0),"number"==typeof t)for(i=n;i<r;++i)this[i]=t;else{var u=s.isBuffer(t)?t:F(new s(t,e).toString()),o=u.length;for(i=0;i<r-n;++i)this[i+n]=u[i%o]}return this};var D=/[^+\/0-9A-Za-z-_]/g;function j(t){return t<16?"0"+t.toString(16):t.toString(16)}function F(t,n){var r;n=n||1/0;for(var e=t.length,l=null,i=[],u=0;u<e;++u){if((r=t.charCodeAt(u))>55295&&r<57344){if(!l){if(r>56319){(n-=3)>-1&&i.push(239,191,189);continue}if(u+1===e){(n-=3)>-1&&i.push(239,191,189);continue}l=r;continue}if(r<56320){(n-=3)>-1&&i.push(239,191,189),l=r;continue}r=65536+(l-55296<<10|r-56320)}else l&&(n-=3)>-1&&i.push(239,191,189);if(l=null,r<128){if((n-=1)<0)break;i.push(r)}else if(r<2048){if((n-=2)<0)break;i.push(r>>6|192,63&r|128)}else if(r<65536){if((n-=3)<0)break;i.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((n-=4)<0)break;i.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return i}function N(t){return e.toByteArray(function(t){if((t=function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}(t).replace(D,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function z(t,n,r,e){for(var l=0;l<e&&!(l+r>=n.length||l>=t.length);++l)n[l+r]=t[l];return l}}).call(this,r(8))},function(t,n){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(t){"object"==typeof window&&(r=window)}t.exports=r},function(t,n,r){"use strict";n.byteLength=function(t){var n=a(t),r=n[0],e=n[1];return 3*(r+e)/4-e},n.toByteArray=function(t){for(var n,r=a(t),e=r[0],u=r[1],o=new i(function(t,n,r){return 3*(n+r)/4-r}(0,e,u)),s=0,c=u>0?e-4:e,f=0;f<c;f+=4)n=l[t.charCodeAt(f)]<<18|l[t.charCodeAt(f+1)]<<12|l[t.charCodeAt(f+2)]<<6|l[t.charCodeAt(f+3)],o[s++]=n>>16&255,o[s++]=n>>8&255,o[s++]=255&n;2===u&&(n=l[t.charCodeAt(f)]<<2|l[t.charCodeAt(f+1)]>>4,o[s++]=255&n);1===u&&(n=l[t.charCodeAt(f)]<<10|l[t.charCodeAt(f+1)]<<4|l[t.charCodeAt(f+2)]>>2,o[s++]=n>>8&255,o[s++]=255&n);return o},n.fromByteArray=function(t){for(var n,r=t.length,l=r%3,i=[],u=0,o=r-l;u<o;u+=16383)i.push(c(t,u,u+16383>o?o:u+16383));1===l?(n=t[r-1],i.push(e[n>>2]+e[n<<4&63]+"==")):2===l&&(n=(t[r-2]<<8)+t[r-1],i.push(e[n>>10]+e[n>>4&63]+e[n<<2&63]+"="));return i.join("")};for(var e=[],l=[],i="undefined"!=typeof Uint8Array?Uint8Array:Array,u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=0,s=u.length;o<s;++o)e[o]=u[o],l[u.charCodeAt(o)]=o;function a(t){var n=t.length;if(n%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=t.indexOf("=");return-1===r&&(r=n),[r,r===n?0:4-r%4]}function c(t,n,r){for(var l,i,u=[],o=n;o<r;o+=3)l=(t[o]<<16&16711680)+(t[o+1]<<8&65280)+(255&t[o+2]),u.push(e[(i=l)>>18&63]+e[i>>12&63]+e[i>>6&63]+e[63&i]);return u.join("")}l["-".charCodeAt(0)]=62,l["_".charCodeAt(0)]=63},function(t,n){n.read=function(t,n,r,e,l){var i,u,o=8*l-e-1,s=(1<<o)-1,a=s>>1,c=-7,f=r?l-1:0,h=r?-1:1,p=t[n+f];for(f+=h,i=p&(1<<-c)-1,p>>=-c,c+=o;c>0;i=256*i+t[n+f],f+=h,c-=8);for(u=i&(1<<-c)-1,i>>=-c,c+=e;c>0;u=256*u+t[n+f],f+=h,c-=8);if(0===i)i=1-a;else{if(i===s)return u?NaN:1/0*(p?-1:1);u+=Math.pow(2,e),i-=a}return(p?-1:1)*u*Math.pow(2,i-e)},n.write=function(t,n,r,e,l,i){var u,o,s,a=8*i-l-1,c=(1<<a)-1,f=c>>1,h=23===l?Math.pow(2,-24)-Math.pow(2,-77):0,p=e?0:i-1,d=e?1:-1,m=n<0||0===n&&1/n<0?1:0;for(n=Math.abs(n),isNaN(n)||n===1/0?(o=isNaN(n)?1:0,u=c):(u=Math.floor(Math.log(n)/Math.LN2),n*(s=Math.pow(2,-u))<1&&(u--,s*=2),(n+=u+f>=1?h/s:h*Math.pow(2,1-f))*s>=2&&(u++,s/=2),u+f>=c?(o=0,u=c):u+f>=1?(o=(n*s-1)*Math.pow(2,l),u+=f):(o=n*Math.pow(2,f-1)*Math.pow(2,l),u=0));l>=8;t[r+p]=255&o,p+=d,o/=256,l-=8);for(u=u<<l|o,a+=l;a>0;t[r+p]=255&u,p+=d,u/=256,a-=8);t[r+p-d]|=128*m}},function(t,n){var r={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==r.call(t)}},function(t,n){var r,e,l=t.exports={};function i(){throw new Error("setTimeout has not been defined")}function u(){throw new Error("clearTimeout has not been defined")}function o(t){if(r===setTimeout)return setTimeout(t,0);if((r===i||!r)&&setTimeout)return r=setTimeout,setTimeout(t,0);try{return r(t,0)}catch(n){try{return r.call(null,t,0)}catch(n){return r.call(this,t,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:i}catch(t){r=i}try{e="function"==typeof clearTimeout?clearTimeout:u}catch(t){e=u}}();var s,a=[],c=!1,f=-1;function h(){c&&s&&(c=!1,s.length?a=s.concat(a):f=-1,a.length&&p())}function p(){if(!c){var t=o(h);c=!0;for(var n=a.length;n;){for(s=a,a=[];++f<n;)s&&s[f].run();f=-1,n=a.length}s=null,c=!1,function(t){if(e===clearTimeout)return clearTimeout(t);if((e===u||!e)&&clearTimeout)return e=clearTimeout,clearTimeout(t);try{e(t)}catch(n){try{return e.call(null,t)}catch(n){return e.call(this,t)}}}(t)}}function d(t,n){this.fun=t,this.array=n}function m(){}l.nextTick=function(t){var n=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)n[r-1]=arguments[r];a.push(new d(t,n)),1!==a.length||c||o(p)},d.prototype.run=function(){this.fun.apply(null,this.array)},l.title="browser",l.browser=!0,l.env={},l.argv=[],l.version="",l.versions={},l.on=m,l.addListener=m,l.once=m,l.off=m,l.removeListener=m,l.removeAllListeners=m,l.emit=m,l.prependListener=m,l.prependOnceListener=m,l.listeners=function(t){return[]},l.binding=function(t){throw new Error("process.binding is not supported")},l.cwd=function(){return"/"},l.chdir=function(t){throw new Error("process.chdir is not supported")},l.umask=function(){return 0}},function(t,n,r){"use strict";const e=r(0),l=r(14),i=r(15);t.exports=t=>{if("string"!=typeof t)throw new TypeError("Expected a string");const n=l(e.dirname(i()),t);if(r.c[n]&&r.c[n].parent){let t=r.c[n].parent.children.length;for(;t--;)r.c[n].parent.children[t].id===n&&r.c[n].parent.children.splice(t,1)}return delete r.c[n],r(18)(n)}},function(t,n,r){"use strict";const e=r(0),l=r(3),i=(t,n,r)=>{if("string"!=typeof t)throw new TypeError(`Expected \`fromDir\` to be of type \`string\`, got \`${typeof t}\``);if("string"!=typeof n)throw new TypeError(`Expected \`moduleId\` to be of type \`string\`, got \`${typeof n}\``);t=e.resolve(t);const i=e.join(t,"noop.js"),u=()=>l._resolveFilename(n,{id:i,filename:i,paths:l._nodeModulePaths(t)});if(r)try{return u()}catch(t){return null}return u()};t.exports=(t,n)=>i(t,n),t.exports.silent=(t,n)=>i(t,n,!0)},function(t,n,r){"use strict";const e=r(16);t.exports=()=>e().getFileName()},function(t,n,r){"use strict";const e=r(17);t.exports=()=>{const t=e();let n;for(let r=0;r<t.length;r++){if(null!==t[r].getTypeName()){n=r;break}}return t[n]}},function(t,n,r){"use strict";t.exports=()=>{const t=Error.prepareStackTrace;Error.prepareStackTrace=(t,n)=>n;const n=(new Error).stack.slice(1);return Error.prepareStackTrace=t,n}},function(t,n){function r(t){var n=new Error("Cannot find module '"+t+"'");throw n.code="MODULE_NOT_FOUND",n}r.keys=function(){return[]},r.resolve=r,t.exports=r,r.id=18},function(t,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.toHex16=function(t){return t.toString(16).padStart(4,"0")}},function(t,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var e=r(21);n.default=class{constructor(){this.filenameToSource=new Map,this.sourceToAst=new Map}getFileContents(t,n,r){const e=this.filenameToSource.get(t);if(void 0!==e)return e;const l=r(t,n);return this.filenameToSource.set(t,l),l}parse(t,n,r){const l=this.getFileContents(t,n,r),i=this.sourceToAst.get(t);if(void 0!==i)return i;const u=e.parse(l.toString(),{source:t});return this.sourceToAst.set(t,u),u}}},function(t,n,r){"use strict";function e(t,n,r,l){this.message=t,this.expected=n,this.found=r,this.location=l,this.name="SyntaxError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,e)}!function(t,n){function r(){this.constructor=t}r.prototype=n.prototype,t.prototype=new r}(e,Error),e.buildMessage=function(t,n){var r={literal:function(t){return'"'+l(t.text)+'"'},class:function(t){var n,r="";for(n=0;n<t.parts.length;n++)r+=t.parts[n]instanceof Array?i(t.parts[n][0])+"-"+i(t.parts[n][1]):i(t.parts[n]);return"["+(t.inverted?"^":"")+r+"]"},any:function(t){return"any character"},end:function(t){return"end of input"},other:function(t){return t.description}};function e(t){return t.charCodeAt(0).toString(16).toUpperCase()}function l(t){return t.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(t){return"\\x0"+e(t)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(t){return"\\x"+e(t)})}function i(t){return t.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(t){return"\\x0"+e(t)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(t){return"\\x"+e(t)})}return"Expected "+function(t){var n,e,l,i=new Array(t.length);for(n=0;n<t.length;n++)i[n]=(l=t[n],r[l.type](l));if(i.sort(),i.length>0){for(n=1,e=1;n<i.length;n++)i[n-1]!==i[n]&&(i[e]=i[n],e++);i.length=e}switch(i.length){case 1:return i[0];case 2:return i[0]+" or "+i[1];default:return i.slice(0,-1).join(", ")+", or "+i[i.length-1]}}(t)+" but "+function(t){return t?'"'+l(t)+'"':"end of input"}(n)+" found."},t.exports={SyntaxError:e,parse:function(t,n){n=void 0!==n?n:{};var l,i={},u={statements:oe},o=oe,s="\n",a=te("\n",!1),c=function(t,n){return bl(t,n,1)},f=";",h=te(";",!1),p={type:"any"},d=function(t){return t},m=function(t,n){return ml.mkAsmLine(t,null,n,vl())},y=function(t,n){return ml.mkAsmLine(t,n,null,vl())},g=function(t){return ml.mkAsmLine(t,null,null,vl())},b=function(t){return ml.mkAsmLine(null,t,null,vl())},v=function(t){return ml.mkAsmLine(null,t,null,vl())},A=function(){return ml.mkAsmLine(null,null,null,vl())},w=function(t){return t},E=function(t){return ml.mkInsn(t,vl())},S=":",C=te(":",!1),k=function(t){return ml.mkLabel(t,vl())},P=function(t){return ml.mkSetPC(t,vl())},T=function(t,n){const r="byte"==t?ml.DataSize.Byte:ml.DataSize.Word;return ml.mkData(r,n,vl())},x=function(t,n){return ml.mkFill(t,n,vl())},_=function(t){return ml.mkInclude(t,vl())},L=function(t,n){let r=null,e=null;return null!==n&&(r=n[1],e=n[3]),ml.mkBinary(t,r,e,vl())},B=function(t,n,r,e){const l=[t,...r.map(t=>t.condition)],i=[n,...r.map(t=>t.trueBranch)],u=l.map((t,n)=>[t,i[n]]);return ml.mkIfElse(u,e,vl())},R="in",I=te("in",!1),$=function(t,n,r){return ml.mkFor(t,n,r,vl())},O=function(t,n,r){return ml.mkMacro(t,n,r,vl())},U="+",M=te("+",!1),Y=function(t,n){return ml.mkCallMacro(t,n,vl())},D=function(t,n){return ml.mkLet(t,n,vl())},j=function(t,n){return ml.mkAssign(t,n,vl())},F="as",N=te("as",!1),z=function(t,n){return ml.mkLoadPlugin(t,n,vl())},X=function(t){return ml.mkError(t,vl())},V=function(t){return ml.mkAlign(t,vl())},q=function(t){return ml.mkFilescope(t,vl())},Z=function(t,n){return{condition:t,trueBranch:n}},Q=function(t){return t},H='"',J=te('"',!1),W=function(t){return ml.mkLiteral(t.join(""),vl())},G=function(t){return t},K=function(t){return ml.mkIdent(t,vl())},tt=function(t,n){return bl(t,n,1)},nt=function(t){return ml.mkMacroArg(t)},rt=function(t,n){return gl(t,n,null,vl())},et="x",lt=te("x",!1),it=function(t,n){return function(t,n,r){return{...yl,mnemonic:t,indx:n,loc:r}}(t,n,vl())},ut="y",ot=te("y",!1),st=function(t,n){return function(t,n,r){return{...yl,mnemonic:t,indy:n,loc:r}}(t,n,vl())},at=function(t,n){return function(t,n,r){return{...yl,mnemonic:t,absind:n,loc:r}}(t,n,vl())},ct=function(t,n,r){return"x"===r?function(t,n,r){return{...yl,mnemonic:t,absx:n,loc:r}}(t,n,vl()):function(t,n,r){return{...yl,mnemonic:t,absy:n,loc:r}}(t,n,vl())},ft=function(t,n){return gl(t,null,n,vl())},ht=function(t){return gl(t,null,null,vl())},pt=function(){return t.substring(Hr,Qr)},dt=function(t){return t},mt="::",yt=te("::",!1),gt=function(t,n){return ml.mkScopeQualifiedIdent(bl(t,n,1),!1,vl())},bt=function(t,n){return ml.mkScopeQualifiedIdent(bl(t,n,1),!0,vl())},vt=function(t){return ml.mkIdent(t,vl())},At=function(t){return t},wt="#",Et=te("#",!1),St=function(t,n){if(null!==t){if("lo"===t)return ml.mkBinaryOp("&",n,ml.mkLiteral(255,vl(),vl()));const r=ml.mkLiteral(8,vl()),e=ml.mkLiteral(255,vl());return ml.mkBinaryOp("&",ml.mkBinaryOp(">>",n,r,vl()),e,vl())}return n},Ct=function(){return"lo"},kt=function(){return"hi"},Pt=function(t){return t},Tt=function(t,n){return n.reduce(function(t,n){return ml.mkBinaryOp(n[0],t,n[1],vl())},t)},xt=function(t,n){return ml.mkUnary(t,n,vl())},_t=function(t){return t},Lt=function(t,n){return{property:n,computed:!0}},Bt=function(t,n){return{property:ml.mkIdent(n,vl()),computed:!1}},Rt=function(t,n){return n.reduce(function(t,n){return ml.mkMember(t,n.property,n.computed,vl())},t)},It=function(t,n){return ml.mkCallFunc(t,n,vl())},$t=function(t){return ml.mkLiteral(t,vl())},Ot=function(t){return t},Ut=function(t){return t},Mt="$",Yt=te("$",!1),Dt=function(t){return parseInt(t,16)},jt="%",Ft=te("%",!1),Nt=function(t){return parseInt(t,2)},zt=function(t){return parseInt(t,10)},Xt=function(t){return ml.mkExprArray(null===t?[]:t,vl())},Vt=/^[a-zA-Z_]/,qt=ne([["a","z"],["A","Z"],"_"],!1,!1),Zt=/^[a-zA-Z_0-9]/,Qt=ne([["a","z"],["A","Z"],"_",["0","9"]],!1,!1),Ht=/^[0-9]/,Jt=ne([["0","9"]],!1,!1),Wt=/^[0-1]/,Gt=ne([["0","1"]],!1,!1),Kt=/^[0-9a-f]/i,tn=ne([["0","9"],["a","f"]],!1,!0),nn=re("whitespace"),rn=/^[ \t\r]/,en=ne([" ","\t","\r"],!1,!1),ln="!align",un=te("!align",!1),on="!byte",sn=te("!byte",!1),an=function(){return"byte"},cn="!word",fn=te("!word",!1),hn=function(){return"word"},pn="!binary",dn=te("!binary",!1),mn="!let",yn=te("!let",!1),gn="!macro",bn=te("!macro",!1),vn="!if",An=te("!if",!1),wn="else",En=te("else",!1),Sn="elif",Cn=te("elif",!1),kn="!error",Pn=te("!error",!1),Tn="!for",xn=te("!for",!1),_n="!include",Ln=te("!include",!1),Bn="!fill",Rn=te("!fill",!1),In="!use",$n=te("!use",!1),On="!filescope",Un=te("!filescope",!1),Mn="[",Yn=te("[",!1),Dn=function(t){return t},jn="]",Fn=te("]",!1),Nn="(",zn=te("(",!1),Xn=")",Vn=te(")",!1),qn="{",Zn=te("{",!1),Qn="}",Hn=te("}",!1),Jn=".",Wn=te(".",!1),Gn=(te("->",!1),te("++",!1),te("--",!1),"&"),Kn=te("&",!1),tr=/^[&]/,nr=ne(["&"],!1,!1),rr="*",er=te("*",!1),lr=/^[=]/,ir=ne(["="],!1,!1),ur=/^[+=]/,or=ne(["+","="],!1,!1),sr="-",ar=te("-",!1),cr=/^[\-=>]/,fr=ne(["-","=",">"],!1,!1),hr="~",pr=te("~",!1),dr="!",mr=te("!",!1),yr="/",gr=te("/",!1),br=/^[=>]/,vr=ne(["=",">"],!1,!1),Ar="<<",wr=te("<<",!1),Er=">>",Sr=te(">>",!1),Cr="<",kr=te("<",!1),Pr=">",Tr=te(">",!1),xr="<=",_r=te("<=",!1),Lr=">=",Br=te(">=",!1),Rr="==",Ir=te("==",!1),$r="!=",Or=te("!=",!1),Ur="^",Mr=te("^",!1),Yr="|",Dr=te("|",!1),jr="&&",Fr=te("&&",!1),Nr="||",zr=te("||",!1),Xr=(te("?",!1),ne([">"],!1,!1),te("...",!1),"="),Vr=te("=",!1),qr=(te("*=",!1),te("/=",!1),te("%=",!1),te("+=",!1),te("-=",!1),te("<<=",!1),te(">>=",!1),te("&=",!1),te("^=",!1),te("|=",!1),","),Zr=te(",",!1),Qr=0,Hr=0,Jr=[{line:1,column:1}],Wr=0,Gr=[],Kr=0;if("startRule"in n){if(!(n.startRule in u))throw new Error("Can't start parsing from rule \""+n.startRule+'".');o=u[n.startRule]}function te(t,n){return{type:"literal",text:t,ignoreCase:n}}function ne(t,n,r){return{type:"class",parts:t,inverted:n,ignoreCase:r}}function re(t){return{type:"other",description:t}}function ee(n){var r,e=Jr[n];if(e)return e;for(r=n-1;!Jr[r];)r--;for(e={line:(e=Jr[r]).line,column:e.column};r<n;)10===t.charCodeAt(r)?(e.line++,e.column=1):e.column++,r++;return Jr[n]=e,e}function le(t,n){var r=ee(t),e=ee(n);return{start:{offset:t,line:r.line,column:r.column},end:{offset:n,line:e.line,column:e.column}}}function ie(t){Qr<Wr||(Qr>Wr&&(Wr=Qr,Gr=[]),Gr.push(t))}function ue(t,n,r){return new e(e.buildMessage(t,n),t,n,r)}function oe(){var n,r,e,l,u,o;if(n=Qr,(r=se())!==i){for(e=[],l=Qr,10===t.charCodeAt(Qr)?(u=s,Qr++):(u=i,0===Kr&&ie(a)),u!==i&&(o=se())!==i?l=u=[u,o]:(Qr=l,l=i);l!==i;)e.push(l),l=Qr,10===t.charCodeAt(Qr)?(u=s,Qr++):(u=i,0===Kr&&ie(a)),u!==i&&(o=se())!==i?l=u=[u,o]:(Qr=l,l=i);e!==i?(Hr=n,n=r=c(r,e)):(Qr=n,n=i)}else Qr=n,n=i;return n}function se(){var n,r,e,l,u,o,c,w;if(n=Qr,Fe()!==i)if((r=function(){var t,n,r,e;return t=Qr,(n=ce())!==i&&(r=qe())!==i&&(e=oe())!==i&&Ze()!==i?(Hr=t,n=m(n,e),t=n):(Qr=t,t=i),t===i&&(t=Qr,(n=ce())!==i&&(r=ae())!==i?(Hr=t,n=y(n,r),t=n):(Qr=t,t=i),t===i&&(t=Qr,(n=ce())!==i&&(Hr=t,n=g(n)),(t=n)===i&&(t=Qr,(n=ae())!==i&&(Hr=t,n=b(n)),(t=n)===i&&(t=Qr,(n=function(){var t,n,r;return t=Qr,(n=Je())!==i&&pl()!==i&&(r=Re())!==i?(Hr=t,n=P(r),t=n):(Qr=t,t=i),t}())!==i&&(Hr=t,n=v(n)),(t=n)===i&&(t=Qr,(n=Fe())!==i&&(Hr=t,n=A()),t=n))))),t}())!==i){if(e=Qr,59===t.charCodeAt(Qr)?(l=f,Qr++):(l=i,0===Kr&&ie(h)),l!==i){for(u=[],o=Qr,c=Qr,Kr++,10===t.charCodeAt(Qr)?(w=s,Qr++):(w=i,0===Kr&&ie(a)),Kr--,w===i?c=void 0:(Qr=c,c=i),c!==i?(t.length>Qr?(w=t.charAt(Qr),Qr++):(w=i,0===Kr&&ie(p)),w!==i?o=c=[c,w]:(Qr=o,o=i)):(Qr=o,o=i);o!==i;)u.push(o),o=Qr,c=Qr,Kr++,10===t.charCodeAt(Qr)?(w=s,Qr++):(w=i,0===Kr&&ie(a)),Kr--,w===i?c=void 0:(Qr=c,c=i),c!==i?(t.length>Qr?(w=t.charAt(Qr),Qr++):(w=i,0===Kr&&ie(p)),w!==i?o=c=[c,w]:(Qr=o,o=i)):(Qr=o,o=i);u!==i?e=l=[l,u]:(Qr=e,e=i)}else Qr=e,e=i;e===i&&(e=null),e!==i?(Hr=n,n=d(r)):(Qr=n,n=i)}else Qr=n,n=i;else Qr=n,n=i;return n}function ae(){var n,r;return n=Qr,(r=function(){var n,r,e,l,u,o,s,a,c,f;if(n=Qr,(r=function(){var n,r;return n=Qr,t.substr(Qr,5)===on?(r=on,Qr+=5):(r=i,0===Kr&&ie(sn)),r!==i&&Fe()!==i?(Hr=n,r=an(),n=r):(Qr=n,n=i),n}())===i&&(r=function(){var n,r;return n=Qr,t.substr(Qr,5)===cn?(r=cn,Qr+=5):(r=i,0===Kr&&ie(fn)),r!==i&&Fe()!==i?(Hr=n,r=hn(),n=r):(Qr=n,n=i),n}()),r!==i&&(e=me())!==i?(Hr=n,r=T(r,e),n=r):(Qr=n,n=i),n===i&&(n=Qr,(r=function(){var n,r,e;return n=Qr,t.substr(Qr,5)===Bn?(r=Bn,Qr+=5):(r=i,0===Kr&&ie(Rn)),r!==i&&(e=Fe())!==i?n=r=[r,e]:(Qr=n,n=i),n}())!==i&&(e=Re())!==i&&(l=dl())!==i&&(u=Re())!==i?(Hr=n,r=x(e,u),n=r):(Qr=n,n=i),n===i&&(n=Qr,(r=function(){var n,r,e;return n=Qr,t.substr(Qr,8)===_n?(r=_n,Qr+=8):(r=i,0===Kr&&ie(Ln)),r!==i&&(e=Fe())!==i?n=r=[r,e]:(Qr=n,n=i),n}())!==i&&(e=Re())!==i?(Hr=n,r=_(e),n=r):(Qr=n,n=i),n===i&&(n=Qr,(r=function(){var n,r,e;return n=Qr,t.substr(Qr,7)===pn?(r=pn,Qr+=7):(r=i,0===Kr&&ie(dn)),r!==i&&(e=Fe())!==i?n=r=[r,e]:(Qr=n,n=i),n}())!==i&&(e=Re())!==i?(l=Qr,(u=dl())!==i?((o=Re())===i&&(o=null),o!==i&&(s=dl())!==i&&(a=Re())!==i?l=u=[u,o,s,a]:(Qr=l,l=i)):(Qr=l,l=i),l===i&&(l=null),l!==i?(Hr=n,r=L(e,l),n=r):(Qr=n,n=i)):(Qr=n,n=i),n===i)))){if(n=Qr,(r=function(){var n,r,e;return n=Qr,t.substr(Qr,3)===vn?(r=vn,Qr+=3):(r=i,0===Kr&&ie(An)),r!==i&&(e=Fe())!==i?n=r=[r,e]:(Qr=n,n=i),n}())!==i)if((e=Xe())!==i)if((l=Re())!==i)if((u=Ve())!==i)if((o=qe())!==i)if((s=oe())!==i)if((a=Ze())!==i){for(c=[],f=fe();f!==i;)c.push(f),f=fe();c!==i?((f=function(){var n,r,e;return n=Qr,(r=function(){var n,r,e;return n=Qr,t.substr(Qr,4)===wn?(r=wn,Qr+=4):(r=i,0===Kr&&ie(En)),r!==i&&(e=Fe())!==i?n=r=[r,e]:(Qr=n,n=i),n}())!==i&&qe()!==i&&(e=oe())!==i&&Ze()!==i?(Hr=n,r=Q(e),n=r):(Qr=n,n=i),n}())===i&&(f=null),f!==i?(Hr=n,r=B(l,s,c,f),n=r):(Qr=n,n=i)):(Qr=n,n=i)}else Qr=n,n=i;else Qr=n,n=i;else Qr=n,n=i;else Qr=n,n=i;else Qr=n,n=i;else Qr=n,n=i;else Qr=n,n=i;n===i&&(n=Qr,(r=function(){var n,r,e;return n=Qr,t.substr(Qr,4)===Tn?(r=Tn,Qr+=4):(r=i,0===Kr&&ie(xn)),r!==i&&(e=Fe())!==i?n=r=[r,e]:(Qr=n,n=i),n}())!==i&&(e=ve())!==i?(t.substr(Qr,2)===R?(l=R,Qr+=2):(l=i,0===Kr&&ie(I)),l!==i&&(u=Fe())!==i&&(o=Re())!==i&&(s=qe())!==i&&(a=oe())!==i&&(c=Ze())!==i?(Hr=n,r=$(e,o,a),n=r):(Qr=n,n=i)):(Qr=n,n=i),n===i&&(n=Qr,(r=function(){var n,r,e;return n=Qr,t.substr(Qr,6)===gn?(r=gn,Qr+=6):(r=i,0===Kr&&ie(bn)),r!==i&&(e=Fe())!==i?n=r=[r,e]:(Qr=n,n=i),n}())!==i&&(e=function(){var t,n;return t=Qr,(n=Ae())!==i&&(Hr=t,n=K(n)),t=n}())!==i&&(l=Xe())!==i?((u=function(){var t,n,r,e,l,u;if(t=Qr,(n=de())!==i){for(r=[],e=Qr,(l=dl())!==i&&(u=de())!==i?e=l=[l,u]:(Qr=e,e=i);e!==i;)r.push(e),e=Qr,(l=dl())!==i&&(u=de())!==i?e=l=[l,u]:(Qr=e,e=i);r!==i?(Hr=t,n=tt(n,r),t=n):(Qr=t,t=i)}else Qr=t,t=i;return t}())===i&&(u=null),u!==i&&(o=Ve())!==i&&(s=qe())!==i&&(a=oe())!==i&&(c=Ze())!==i?(Hr=n,r=O(e,u,a),n=r):(Qr=n,n=i)):(Qr=n,n=i),n===i&&(n=Qr,43===t.charCodeAt(Qr)?(r=U,Qr++):(r=i,0===Kr&&ie(M)),r!==i&&(e=be())!==i&&(l=Xe())!==i?((u=me())===i&&(u=null),u!==i&&(o=Ve())!==i?(Hr=n,r=Y(e,u),n=r):(Qr=n,n=i)):(Qr=n,n=i),n===i&&(n=Qr,(r=function(){var n,r,e;return n=Qr,t.substr(Qr,4)===mn?(r=mn,Qr+=4):(r=i,0===Kr&&ie(yn)),r!==i&&(e=Fe())!==i?n=r=[r,e]:(Qr=n,n=i),n}())!==i&&(e=ve())!==i&&(l=pl())!==i&&(u=Re())!==i?(Hr=n,r=D(e,u),n=r):(Qr=n,n=i),n===i&&(n=Qr,(r=be())!==i&&(e=pl())!==i&&(l=Re())!==i?(Hr=n,r=j(r,l),n=r):(Qr=n,n=i),n===i&&(n=Qr,(r=function(){var n,r,e;return n=Qr,t.substr(Qr,4)===In?(r=In,Qr+=4):(r=i,0===Kr&&ie($n)),r!==i&&(e=Fe())!==i?n=r=[r,e]:(Qr=n,n=i),n}())!==i&&(e=he())!==i?(t.substr(Qr,2)===F?(l=F,Qr+=2):(l=i,0===Kr&&ie(N)),l!==i&&(u=Fe())!==i&&(o=ve())!==i?(Hr=n,r=z(e,o),n=r):(Qr=n,n=i)):(Qr=n,n=i),n===i&&(n=Qr,(r=function(){var n,r,e;return n=Qr,t.substr(Qr,6)===kn?(r=kn,Qr+=6):(r=i,0===Kr&&ie(Pn)),r!==i&&(e=Fe())!==i?n=r=[r,e]:(Qr=n,n=i),n}())!==i&&(e=he())!==i?(Hr=n,r=X(e),n=r):(Qr=n,n=i),n===i&&(n=Qr,(r=function(){var n,r,e;return n=Qr,t.substr(Qr,6)===ln?(r=ln,Qr+=6):(r=i,0===Kr&&ie(un)),r!==i&&(e=Fe())!==i?n=r=[r,e]:(Qr=n,n=i),n}())!==i&&(e=Re())!==i?(Hr=n,r=V(e),n=r):(Qr=n,n=i),n===i&&(n=Qr,(r=function(){var n,r,e;return n=Qr,t.substr(Qr,10)===On?(r=On,Qr+=10):(r=i,0===Kr&&ie(Un)),r!==i&&(e=Fe())!==i?n=r=[r,e]:(Qr=n,n=i),n}())!==i&&(e=ve())!==i?(Hr=n,r=q(e),n=r):(Qr=n,n=i))))))))))}return n}())!==i&&(Hr=n,r=w(r)),(n=r)===i&&(n=Qr,(r=function(){var n,r,e,l,u,o,s;return n=Qr,(r=we())!==i&&(e=function(){var n,r,e,l;return n=Qr,35===t.charCodeAt(Qr)?(r=wt,Qr++):(r=i,0===Kr&&ie(Et)),r!==i?((e=function(){var t,n;return t=Qr,(n=el())!==i&&(Hr=t,n=Ct()),(t=n)===i&&(t=Qr,(n=ll())!==i&&(Hr=t,n=kt()),t=n),t}())===i&&(e=null),e!==i&&(l=Re())!==i?(Hr=n,r=St(e,l),n=r):(Qr=n,n=i)):(Qr=n,n=i),n}())!==i?(Hr=n,r=rt(r,e),n=r):(Qr=n,n=i),n===i&&(n=Qr,(r=we())!==i&&(e=Xe())!==i&&(l=Ee())!==i&&(u=dl())!==i?(120===t.charCodeAt(Qr)?(o=et,Qr++):(o=i,0===Kr&&ie(lt)),o!==i&&(s=Fe())!==i&&Ve()!==i?(Hr=n,r=it(r,l),n=r):(Qr=n,n=i)):(Qr=n,n=i),n===i&&(n=Qr,(r=we())!==i&&(e=Xe())!==i&&(l=Ee())!==i&&(u=Ve())!==i&&(o=dl())!==i?(121===t.charCodeAt(Qr)?(s=ut,Qr++):(s=i,0===Kr&&ie(ot)),s!==i&&Fe()!==i?(Hr=n,r=st(r,l),n=r):(Qr=n,n=i)):(Qr=n,n=i),n===i&&(n=Qr,(r=we())!==i&&(e=Xe())!==i&&(l=Ee())!==i&&(u=Ve())!==i?(Hr=n,r=at(r,l),n=r):(Qr=n,n=i),n===i&&(n=Qr,(r=we())!==i&&(e=Ee())!==i&&(l=dl())!==i?(120===t.charCodeAt(Qr)?(u=et,Qr++):(u=i,0===Kr&&ie(lt)),u===i&&(121===t.charCodeAt(Qr)?(u=ut,Qr++):(u=i,0===Kr&&ie(ot))),u!==i&&(o=Fe())!==i?(Hr=n,r=ct(r,e,u),n=r):(Qr=n,n=i)):(Qr=n,n=i),n===i&&(n=Qr,(r=we())!==i&&(e=Ee())!==i?(Hr=n,r=ft(r,e),n=r):(Qr=n,n=i),n===i&&(n=Qr,(r=we())!==i&&(Hr=n,r=ht(r)),n=r)))))),n}())!==i&&(Hr=n,r=E(r)),n=r),n}function ce(){var n,r,e;return n=Qr,(r=ye())!==i?(58===t.charCodeAt(Qr)?(e=S,Qr++):(e=i,0===Kr&&ie(C)),e!==i&&Fe()!==i?(Hr=n,n=r=k(r)):(Qr=n,n=i)):(Qr=n,n=i),n}function fe(){var n,r,e;return n=Qr,function(){var n,r,e;return n=Qr,t.substr(Qr,4)===Sn?(r=Sn,Qr+=4):(r=i,0===Kr&&ie(Cn)),r!==i&&(e=Fe())!==i?n=r=[r,e]:(Qr=n,n=i),n}()!==i&&Xe()!==i&&(r=Re())!==i&&Ve()!==i&&qe()!==i&&(e=oe())!==i&&Ze()!==i?(Hr=n,n=Z(r,e)):(Qr=n,n=i),n}function he(){var n,r,e,l;if(n=Qr,34===t.charCodeAt(Qr)?(r=H,Qr++):(r=i,0===Kr&&ie(J)),r!==i){for(e=[],l=pe();l!==i;)e.push(l),l=pe();e!==i?(34===t.charCodeAt(Qr)?(l=H,Qr++):(l=i,0===Kr&&ie(J)),l!==i&&Fe()!==i?(Hr=n,n=r=W(e)):(Qr=n,n=i)):(Qr=n,n=i)}else Qr=n,n=i;return n}function pe(){var n,r,e;return n=Qr,r=Qr,Kr++,34===t.charCodeAt(Qr)?(e=H,Qr++):(e=i,0===Kr&&ie(J)),Kr--,e===i?r=void 0:(Qr=r,r=i),r!==i?(t.length>Qr?(e=t.charAt(Qr),Qr++):(e=i,0===Kr&&ie(p)),e!==i?(Hr=n,n=r=G(e)):(Qr=n,n=i)):(Qr=n,n=i),n}function de(){var t,n;return t=Qr,(n=ve())!==i&&(Hr=t,n=nt(n)),t=n}function me(){var t,n,r,e,l,u;if(t=Qr,(n=Re())!==i){for(r=[],e=Qr,(l=dl())!==i&&(u=Re())!==i?e=l=[l,u]:(Qr=e,e=i);e!==i;)r.push(e),e=Qr,(l=dl())!==i&&(u=Re())!==i?e=l=[l,u]:(Qr=e,e=i);r!==i?(Hr=t,t=n=tt(n,r)):(Qr=t,t=i)}else Qr=t,t=i;return t}function ye(){var t,n,r,e,l;if(t=Qr,n=Qr,r=[],(e=Ue())!==i)for(;e!==i;)r.push(e),e=Ue();else r=i;if(r!==i){for(e=[],l=Me();l!==i;)e.push(l),l=Me();e!==i?n=r=[r,e]:(Qr=n,n=i)}else Qr=n,n=i;return n!==i&&(Hr=t,n=pt()),t=n}function ge(){var t,n;return t=Qr,(n=ye())!==i&&Fe()!==i?(Hr=t,t=n=dt(n)):(Qr=t,t=i),t}function be(){var n,r,e,l,u,o,s;if(n=Qr,(r=ye())!==i){for(e=[],l=Qr,t.substr(Qr,2)===mt?(u=mt,Qr+=2):(u=i,0===Kr&&ie(yt)),u!==i&&(o=ye())!==i?l=u=[u,o]:(Qr=l,l=i);l!==i;)e.push(l),l=Qr,t.substr(Qr,2)===mt?(u=mt,Qr+=2):(u=i,0===Kr&&ie(yt)),u!==i&&(o=ye())!==i?l=u=[u,o]:(Qr=l,l=i);e!==i&&(l=Fe())!==i?(Hr=n,n=r=gt(r,e)):(Qr=n,n=i)}else Qr=n,n=i;if(n===i)if(n=Qr,t.substr(Qr,2)===mt?(r=mt,Qr+=2):(r=i,0===Kr&&ie(yt)),r!==i)if((e=ye())!==i){for(l=[],u=Qr,t.substr(Qr,2)===mt?(o=mt,Qr+=2):(o=i,0===Kr&&ie(yt)),o!==i&&(s=ye())!==i?u=o=[o,s]:(Qr=u,u=i);u!==i;)l.push(u),u=Qr,t.substr(Qr,2)===mt?(o=mt,Qr+=2):(o=i,0===Kr&&ie(yt)),o!==i&&(s=ye())!==i?u=o=[o,s]:(Qr=u,u=i);l!==i&&(u=Fe())!==i?(Hr=n,n=r=bt(e,l)):(Qr=n,n=i)}else Qr=n,n=i;else Qr=n,n=i;return n}function ve(){var t,n;return t=Qr,(n=Ae())!==i&&(Hr=t,n=vt(n)),t=n}function Ae(){var t,n;return t=Qr,(n=ye())!==i&&Fe()!==i?(Hr=t,t=n=At(n)):(Qr=t,t=i),t}function we(){var t,n;return t=Qr,(n=ye())!==i&&Fe()!==i?(Hr=t,t=n=dt(n)):(Qr=t,t=i),t}function Ee(){var t,n;return t=Qr,(n=Re())!==i&&(Hr=t,n=Pt(n)),t=n}function Se(){var t,n,r,e,l,u;if(t=Qr,(n=Ie())!==i){for(r=[],e=Qr,(l=Je())===i&&(l=Ke())===i&&(l=tl()),l!==i&&(u=Ie())!==i?e=l=[l,u]:(Qr=e,e=i);e!==i;)r.push(e),e=Qr,(l=Je())===i&&(l=Ke())===i&&(l=tl()),l!==i&&(u=Ie())!==i?e=l=[l,u]:(Qr=e,e=i);r!==i?(Hr=t,t=n=Tt(n,r)):(Qr=t,t=i)}else Qr=t,t=i;return t===i&&(t=Oe()),t}function Ce(){var t,n,r,e,l,u;if(t=Qr,(n=Se())!==i){for(r=[],e=Qr,(l=We())===i&&(l=Ge()),l!==i&&(u=Se())!==i?e=l=[l,u]:(Qr=e,e=i);e!==i;)r.push(e),e=Qr,(l=We())===i&&(l=Ge()),l!==i&&(u=Se())!==i?e=l=[l,u]:(Qr=e,e=i);r!==i?(Hr=t,t=n=Tt(n,r)):(Qr=t,t=i)}else Qr=t,t=i;return t}function ke(){var t,n,r,e,l,u;if(t=Qr,(n=Ce())!==i){for(r=[],e=Qr,(l=nl())===i&&(l=rl()),l!==i&&(u=Ce())!==i?e=l=[l,u]:(Qr=e,e=i);e!==i;)r.push(e),e=Qr,(l=nl())===i&&(l=rl()),l!==i&&(u=Ce())!==i?e=l=[l,u]:(Qr=e,e=i);r!==i?(Hr=t,t=n=Tt(n,r)):(Qr=t,t=i)}else Qr=t,t=i;return t}function Pe(){var t,n,r,e,l,u;if(t=Qr,(n=ke())!==i){for(r=[],e=Qr,(l=il())===i&&(l=ul())===i&&(l=el())===i&&(l=ll()),l!==i&&(u=ke())!==i?e=l=[l,u]:(Qr=e,e=i);e!==i;)r.push(e),e=Qr,(l=il())===i&&(l=ul())===i&&(l=el())===i&&(l=ll()),l!==i&&(u=ke())!==i?e=l=[l,u]:(Qr=e,e=i);r!==i?(Hr=t,t=n=Tt(n,r)):(Qr=t,t=i)}else Qr=t,t=i;return t}function Te(){var t,n,r,e,l,u;if(t=Qr,(n=Pe())!==i){for(r=[],e=Qr,(l=ol())===i&&(l=sl()),l!==i&&(u=Pe())!==i?e=l=[l,u]:(Qr=e,e=i);e!==i;)r.push(e),e=Qr,(l=ol())===i&&(l=sl()),l!==i&&(u=Pe())!==i?e=l=[l,u]:(Qr=e,e=i);r!==i?(Hr=t,t=n=Tt(n,r)):(Qr=t,t=i)}else Qr=t,t=i;return t}function xe(){var t,n,r,e,l,u;if(t=Qr,(n=Te())!==i){for(r=[],e=Qr,(l=He())!==i&&(u=Te())!==i?e=l=[l,u]:(Qr=e,e=i);e!==i;)r.push(e),e=Qr,(l=He())!==i&&(u=Te())!==i?e=l=[l,u]:(Qr=e,e=i);r!==i?(Hr=t,t=n=Tt(n,r)):(Qr=t,t=i)}else Qr=t,t=i;return t}function _e(){var t,n,r,e,l,u;if(t=Qr,(n=xe())!==i){for(r=[],e=Qr,(l=al())!==i&&(u=xe())!==i?e=l=[l,u]:(Qr=e,e=i);e!==i;)r.push(e),e=Qr,(l=al())!==i&&(u=xe())!==i?e=l=[l,u]:(Qr=e,e=i);r!==i?(Hr=t,t=n=Tt(n,r)):(Qr=t,t=i)}else Qr=t,t=i;return t}function Le(){var t,n,r,e,l,u;if(t=Qr,(n=_e())!==i){for(r=[],e=Qr,(l=cl())!==i&&(u=_e())!==i?e=l=[l,u]:(Qr=e,e=i);e!==i;)r.push(e),e=Qr,(l=cl())!==i&&(u=_e())!==i?e=l=[l,u]:(Qr=e,e=i);r!==i?(Hr=t,t=n=Tt(n,r)):(Qr=t,t=i)}else Qr=t,t=i;return t}function Be(){var t,n,r,e,l,u;if(t=Qr,(n=Le())!==i){for(r=[],e=Qr,(l=fl())!==i&&(u=Le())!==i?e=l=[l,u]:(Qr=e,e=i);e!==i;)r.push(e),e=Qr,(l=fl())!==i&&(u=Le())!==i?e=l=[l,u]:(Qr=e,e=i);r!==i?(Hr=t,t=n=Tt(n,r)):(Qr=t,t=i)}else Qr=t,t=i;return t}function Re(){var t,n,r,e,l,u;if(t=Qr,(n=Be())!==i){for(r=[],e=Qr,(l=hl())!==i&&(u=Be())!==i?e=l=[l,u]:(Qr=e,e=i);e!==i;)r.push(e),e=Qr,(l=hl())!==i&&(u=Be())!==i?e=l=[l,u]:(Qr=e,e=i);r!==i?(Hr=t,t=n=Tt(n,r)):(Qr=t,t=i)}else Qr=t,t=i;return t}function Ie(){var n,r,e;return(n=function(){var t;return(t=function(){var t,n,r;return t=Qr,(n=$e())!==i&&Xe()!==i?((r=me())===i&&(r=null),r!==i&&Ve()!==i?(Hr=t,n=It(n,r),t=n):(Qr=t,t=i)):(Qr=t,t=i),t}())===i&&(t=$e()),t}())===i&&(n=Qr,(r=function(){var n,r;return n=Qr,(r=We())===i&&(r=Ge())===i&&(r=function(){var n,r;return n=Qr,126===t.charCodeAt(Qr)?(r=hr,Qr++):(r=i,0===Kr&&ie(pr)),r!==i&&Fe()!==i?(Hr=n,r=Dn(r),n=r):(Qr=n,n=i),n}())===i&&(r=function(){var n,r,e,l;return n=Qr,33===t.charCodeAt(Qr)?(r=dr,Qr++):(r=i,0===Kr&&ie(mr)),r!==i?(e=Qr,Kr++,lr.test(t.charAt(Qr))?(l=t.charAt(Qr),Qr++):(l=i,0===Kr&&ie(ir)),Kr--,l===i?e=void 0:(Qr=e,e=i),e!==i&&(l=Fe())!==i?(Hr=n,r=Dn(r),n=r):(Qr=n,n=i)):(Qr=n,n=i),n}()),r!==i&&(Hr=n,r=_t(r)),n=r}())!==i&&(e=Ie())!==i?(Hr=n,n=r=xt(r,e)):(Qr=n,n=i)),n}function $e(){var t,n,r,e,l;if(t=Qr,(n=Oe())!==i){for(r=[],e=Qr,Ne()!==i&&(l=Re())!==i&&ze()!==i?(Hr=e,e=Lt(n,l)):(Qr=e,e=i),e===i&&(e=Qr,Qe()!==i&&(l=ge())!==i?(Hr=e,e=Bt(n,l)):(Qr=e,e=i));e!==i;)r.push(e),e=Qr,Ne()!==i&&(l=Re())!==i&&ze()!==i?(Hr=e,e=Lt(n,l)):(Qr=e,e=i),e===i&&(e=Qr,Qe()!==i&&(l=ge())!==i?(Hr=e,e=Bt(n,l)):(Qr=e,e=i));r!==i?(Hr=t,t=n=Rt(n,r)):(Qr=t,t=i)}else Qr=t,t=i;return t}function Oe(){var n,r,e;return n=Qr,(r=function(){var n,r,e,l,u;if(n=Qr,36===t.charCodeAt(Qr)?(r=Mt,Qr++):(r=i,0===Kr&&ie(Yt)),r!==i){if(e=Qr,l=[],(u=je())!==i)for(;u!==i;)l.push(u),u=je();else l=i;(e=l!==i?t.substring(e,Qr):l)!==i&&(l=Fe())!==i?(Hr=n,r=Dt(e),n=r):(Qr=n,n=i)}else Qr=n,n=i;if(n===i){if(n=Qr,37===t.charCodeAt(Qr)?(r=jt,Qr++):(r=i,0===Kr&&ie(Ft)),r!==i){if(e=Qr,l=[],(u=De())!==i)for(;u!==i;)l.push(u),u=De();else l=i;(e=l!==i?t.substring(e,Qr):l)!==i&&(l=Fe())!==i?(Hr=n,r=Nt(e),n=r):(Qr=n,n=i)}else Qr=n,n=i;if(n===i){if(n=Qr,r=Qr,e=[],(l=Ye())!==i)for(;l!==i;)e.push(l),l=Ye();else e=i;(r=e!==i?t.substring(r,Qr):e)!==i&&(e=Fe())!==i?(Hr=n,r=zt(r),n=r):(Qr=n,n=i)}}return n}())!==i&&(Hr=n,r=$t(r)),(n=r)===i&&(n=Qr,(r=be())!==i&&(Hr=n,r=dt(r)),(n=r)===i&&(n=Qr,(r=he())!==i&&(Hr=n,r=Ot(r)),(n=r)===i&&(n=function(){var t,n,r;return t=Qr,(n=Ne())!==i?((r=me())===i&&(r=null),r!==i&&ze()!==i?(Hr=t,n=Xt(r),t=n):(Qr=t,t=i)):(Qr=t,t=i),t}())===i&&(n=Qr,(r=Xe())!==i&&(e=Re())!==i&&Ve()!==i?(Hr=n,n=r=Ut(e)):(Qr=n,n=i)))),n}function Ue(){var n;return Vt.test(t.charAt(Qr))?(n=t.charAt(Qr),Qr++):(n=i,0===Kr&&ie(qt)),n}function Me(){var n;return Zt.test(t.charAt(Qr))?(n=t.charAt(Qr),Qr++):(n=i,0===Kr&&ie(Qt)),n}function Ye(){var n;return Ht.test(t.charAt(Qr))?(n=t.charAt(Qr),Qr++):(n=i,0===Kr&&ie(Jt)),n}function De(){var n;return Wt.test(t.charAt(Qr))?(n=t.charAt(Qr),Qr++):(n=i,0===Kr&&ie(Gt)),n}function je(){var n;return Kt.test(t.charAt(Qr))?(n=t.charAt(Qr),Qr++):(n=i,0===Kr&&ie(tn)),n}function Fe(){var n,r;for(Kr++,n=[],rn.test(t.charAt(Qr))?(r=t.charAt(Qr),Qr++):(r=i,0===Kr&&ie(en));r!==i;)n.push(r),rn.test(t.charAt(Qr))?(r=t.charAt(Qr),Qr++):(r=i,0===Kr&&ie(en));return Kr--,n===i&&(r=i,0===Kr&&ie(nn)),n}function Ne(){var n,r;return n=Qr,91===t.charCodeAt(Qr)?(r=Mn,Qr++):(r=i,0===Kr&&ie(Yn)),r!==i&&Fe()!==i?(Hr=n,n=r=Dn(r)):(Qr=n,n=i),n}function ze(){var n,r;return n=Qr,93===t.charCodeAt(Qr)?(r=jn,Qr++):(r=i,0===Kr&&ie(Fn)),r!==i&&Fe()!==i?(Hr=n,n=r=Dn(r)):(Qr=n,n=i),n}function Xe(){var n,r;return n=Qr,40===t.charCodeAt(Qr)?(r=Nn,Qr++):(r=i,0===Kr&&ie(zn)),r!==i&&Fe()!==i?(Hr=n,n=r=Dn(r)):(Qr=n,n=i),n}function Ve(){var n,r;return n=Qr,41===t.charCodeAt(Qr)?(r=Xn,Qr++):(r=i,0===Kr&&ie(Vn)),r!==i&&Fe()!==i?(Hr=n,n=r=Dn(r)):(Qr=n,n=i),n}function qe(){var n,r;return n=Qr,123===t.charCodeAt(Qr)?(r=qn,Qr++):(r=i,0===Kr&&ie(Zn)),r!==i&&Fe()!==i?(Hr=n,n=r=Dn(r)):(Qr=n,n=i),n}function Ze(){var n,r;return n=Qr,125===t.charCodeAt(Qr)?(r=Qn,Qr++):(r=i,0===Kr&&ie(Hn)),r!==i&&Fe()!==i?(Hr=n,n=r=Dn(r)):(Qr=n,n=i),n}function Qe(){var n,r;return n=Qr,46===t.charCodeAt(Qr)?(r=Jn,Qr++):(r=i,0===Kr&&ie(Wn)),r!==i&&Fe()!==i?(Hr=n,n=r=Dn(r)):(Qr=n,n=i),n}function He(){var n,r,e,l;return n=Qr,38===t.charCodeAt(Qr)?(r=Gn,Qr++):(r=i,0===Kr&&ie(Kn)),r!==i?(e=Qr,Kr++,tr.test(t.charAt(Qr))?(l=t.charAt(Qr),Qr++):(l=i,0===Kr&&ie(nr)),Kr--,l===i?e=void 0:(Qr=e,e=i),e!==i&&(l=Fe())!==i?(Hr=n,n=r=Dn(r)):(Qr=n,n=i)):(Qr=n,n=i),n}function Je(){var n,r,e,l;return n=Qr,42===t.charCodeAt(Qr)?(r=rr,Qr++):(r=i,0===Kr&&ie(er)),r!==i?(e=Qr,Kr++,lr.test(t.charAt(Qr))?(l=t.charAt(Qr),Qr++):(l=i,0===Kr&&ie(ir)),Kr--,l===i?e=void 0:(Qr=e,e=i),e!==i&&(l=Fe())!==i?(Hr=n,n=r=Dn(r)):(Qr=n,n=i)):(Qr=n,n=i),n}function We(){var n,r,e,l;return n=Qr,43===t.charCodeAt(Qr)?(r=U,Qr++):(r=i,0===Kr&&ie(M)),r!==i?(e=Qr,Kr++,ur.test(t.charAt(Qr))?(l=t.charAt(Qr),Qr++):(l=i,0===Kr&&ie(or)),Kr--,l===i?e=void 0:(Qr=e,e=i),e!==i&&(l=Fe())!==i?(Hr=n,n=r=Dn(r)):(Qr=n,n=i)):(Qr=n,n=i),n}function Ge(){var n,r,e,l;return n=Qr,45===t.charCodeAt(Qr)?(r=sr,Qr++):(r=i,0===Kr&&ie(ar)),r!==i?(e=Qr,Kr++,cr.test(t.charAt(Qr))?(l=t.charAt(Qr),Qr++):(l=i,0===Kr&&ie(fr)),Kr--,l===i?e=void 0:(Qr=e,e=i),e!==i&&(l=Fe())!==i?(Hr=n,n=r=Dn(r)):(Qr=n,n=i)):(Qr=n,n=i),n}function Ke(){var n,r,e,l;return n=Qr,47===t.charCodeAt(Qr)?(r=yr,Qr++):(r=i,0===Kr&&ie(gr)),r!==i?(e=Qr,Kr++,lr.test(t.charAt(Qr))?(l=t.charAt(Qr),Qr++):(l=i,0===Kr&&ie(ir)),Kr--,l===i?e=void 0:(Qr=e,e=i),e!==i&&(l=Fe())!==i?(Hr=n,n=r=Dn(r)):(Qr=n,n=i)):(Qr=n,n=i),n}function tl(){var n,r,e,l;return n=Qr,37===t.charCodeAt(Qr)?(r=jt,Qr++):(r=i,0===Kr&&ie(Ft)),r!==i?(e=Qr,Kr++,br.test(t.charAt(Qr))?(l=t.charAt(Qr),Qr++):(l=i,0===Kr&&ie(vr)),Kr--,l===i?e=void 0:(Qr=e,e=i),e!==i&&(l=Fe())!==i?(Hr=n,n=r=Dn(r)):(Qr=n,n=i)):(Qr=n,n=i),n}function nl(){var n,r,e,l;return n=Qr,t.substr(Qr,2)===Ar?(r=Ar,Qr+=2):(r=i,0===Kr&&ie(wr)),r!==i?(e=Qr,Kr++,lr.test(t.charAt(Qr))?(l=t.charAt(Qr),Qr++):(l=i,0===Kr&&ie(ir)),Kr--,l===i?e=void 0:(Qr=e,e=i),e!==i&&(l=Fe())!==i?(Hr=n,n=r=Dn(r)):(Qr=n,n=i)):(Qr=n,n=i),n}function rl(){var n,r,e,l;return n=Qr,t.substr(Qr,2)===Er?(r=Er,Qr+=2):(r=i,0===Kr&&ie(Sr)),r!==i?(e=Qr,Kr++,lr.test(t.charAt(Qr))?(l=t.charAt(Qr),Qr++):(l=i,0===Kr&&ie(ir)),Kr--,l===i?e=void 0:(Qr=e,e=i),e!==i&&(l=Fe())!==i?(Hr=n,n=r=Dn(r)):(Qr=n,n=i)):(Qr=n,n=i),n}function el(){var n,r,e,l;return n=Qr,60===t.charCodeAt(Qr)?(r=Cr,Qr++):(r=i,0===Kr&&ie(kr)),r!==i?(e=Qr,Kr++,lr.test(t.charAt(Qr))?(l=t.charAt(Qr),Qr++):(l=i,0===Kr&&ie(ir)),Kr--,l===i?e=void 0:(Qr=e,e=i),e!==i&&(l=Fe())!==i?(Hr=n,n=r=Dn(r)):(Qr=n,n=i)):(Qr=n,n=i),n}function ll(){var n,r,e,l;return n=Qr,62===t.charCodeAt(Qr)?(r=Pr,Qr++):(r=i,0===Kr&&ie(Tr)),r!==i?(e=Qr,Kr++,lr.test(t.charAt(Qr))?(l=t.charAt(Qr),Qr++):(l=i,0===Kr&&ie(ir)),Kr--,l===i?e=void 0:(Qr=e,e=i),e!==i&&(l=Fe())!==i?(Hr=n,n=r=Dn(r)):(Qr=n,n=i)):(Qr=n,n=i),n}function il(){var n,r;return n=Qr,t.substr(Qr,2)===xr?(r=xr,Qr+=2):(r=i,0===Kr&&ie(_r)),r!==i&&Fe()!==i?(Hr=n,n=r=Dn(r)):(Qr=n,n=i),n}function ul(){var n,r;return n=Qr,t.substr(Qr,2)===Lr?(r=Lr,Qr+=2):(r=i,0===Kr&&ie(Br)),r!==i&&Fe()!==i?(Hr=n,n=r=Dn(r)):(Qr=n,n=i),n}function ol(){var n,r;return n=Qr,t.substr(Qr,2)===Rr?(r=Rr,Qr+=2):(r=i,0===Kr&&ie(Ir)),r!==i&&Fe()!==i?(Hr=n,n=r=Dn(r)):(Qr=n,n=i),n}function sl(){var n,r;return n=Qr,t.substr(Qr,2)===$r?(r=$r,Qr+=2):(r=i,0===Kr&&ie(Or)),r!==i&&Fe()!==i?(Hr=n,n=r=Dn(r)):(Qr=n,n=i),n}function al(){var n,r,e,l;return n=Qr,94===t.charCodeAt(Qr)?(r=Ur,Qr++):(r=i,0===Kr&&ie(Mr)),r!==i?(e=Qr,Kr++,lr.test(t.charAt(Qr))?(l=t.charAt(Qr),Qr++):(l=i,0===Kr&&ie(ir)),Kr--,l===i?e=void 0:(Qr=e,e=i),e!==i&&(l=Fe())!==i?(Hr=n,n=r=Dn(r)):(Qr=n,n=i)):(Qr=n,n=i),n}function cl(){var n,r,e,l;return n=Qr,124===t.charCodeAt(Qr)?(r=Yr,Qr++):(r=i,0===Kr&&ie(Dr)),r!==i?(e=Qr,Kr++,lr.test(t.charAt(Qr))?(l=t.charAt(Qr),Qr++):(l=i,0===Kr&&ie(ir)),Kr--,l===i?e=void 0:(Qr=e,e=i),e!==i&&(l=Fe())!==i?(Hr=n,n=r=Dn(r)):(Qr=n,n=i)):(Qr=n,n=i),n}function fl(){var n,r;return n=Qr,t.substr(Qr,2)===jr?(r=jr,Qr+=2):(r=i,0===Kr&&ie(Fr)),r!==i&&Fe()!==i?(Hr=n,n=r=Dn(r)):(Qr=n,n=i),n}function hl(){var n,r;return n=Qr,t.substr(Qr,2)===Nr?(r=Nr,Qr+=2):(r=i,0===Kr&&ie(zr)),r!==i&&Fe()!==i?(Hr=n,n=r=Dn(r)):(Qr=n,n=i),n}function pl(){var n,r,e,l;return n=Qr,61===t.charCodeAt(Qr)?(r=Xr,Qr++):(r=i,0===Kr&&ie(Vr)),r!==i?(e=Qr,Kr++,61===t.charCodeAt(Qr)?(l=Xr,Qr++):(l=i,0===Kr&&ie(Vr)),Kr--,l===i?e=void 0:(Qr=e,e=i),e!==i&&(l=Fe())!==i?(Hr=n,n=r=Dn(r)):(Qr=n,n=i)):(Qr=n,n=i),n}function dl(){var n,r;return n=Qr,44===t.charCodeAt(Qr)?(r=qr,Qr++):(r=i,0===Kr&&ie(Zr)),r!==i&&Fe()!==i?(Hr=n,n=r=Dn(r)):(Qr=n,n=i),n}var ml=r(4);ml.objectToAst;const yl={mnemonic:null,imm:null,abs:null,absx:null,absy:null,absind:null,indx:null,indy:null};function gl(t,n,r,e){return{...yl,mnemonic:t,imm:n,abs:r,loc:e}}function bl(t,n,r){return[t].concat(function(t,n){return t.map(function(t){return t[n]})}(n,r))}function vl(){return{...le(Hr,Qr),source:n.source}}if((l=o())!==i&&Qr===t.length)return l;throw l!==i&&Qr<t.length&&ie({type:"end"}),ue(Gr,Wr<t.length?t.charAt(Wr):null,Wr<t.length?le(Wr,Wr+1):le(Wr,Wr))}}},function(t,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const e=r(0);n.DebugInfoTracker=class{constructor(){this.lineStack=[],this.pcToLocs={}}startLine(t,n){const r={source:e.resolve(t.source),lineNo:t.start.line};this.lineStack.push({loc:r,pc:n})}endLine(t){const n=this.lineStack.pop();if(!n)throw new Error("internal compiler error, mismatching start/end lines in debugInfo");if(t-n.pc>0){const t=this.pcToLocs[n.pc]||[];t.push(n.loc),this.pcToLocs[n.pc]=t}}info(){return{pcToLocs:this.pcToLocs}}}},function(t,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const e=r(2);function l(t){return`${t.toString(16).toUpperCase().padStart(2,"0")}`}function i(t){return`${t.toString(16).toUpperCase().padStart(4,"0")}`}class u{constructor(t){this.buf=t,this.byte=()=>{const t=this.buf.readUInt8(this.curOffs);return this.curOffs++,t},this.print=(t,n,r)=>{const e=l(n[0]),u=n.length>=2?l(n[1]):"  ",o=n.length>=3?l(n[2]):"  ";this.output.push(`${i(t)}: ${e} ${u} ${o}     ${r}`)},this.output=[],this.curAddr=t.readUInt8(0)+(t.readUInt8(1)<<8),this.curOffs=2,this.opToDecl={},Object.keys(e.default).forEach(t=>{let n=e.default[t];for(let r=0;r<n.length;r++){const e=n[r];null!==e&&(this.opToDecl[e]={mnemonic:t,decode:n})}})}disImm(t,n){const r=this.curAddr,e=this.byte();this.print(r,[n,e],`${t} #${l(e)}`)}disZp(t,n){const r=this.curAddr,e=this.byte();this.print(r,[n,e],`${t} $${l(e)}`)}disZpX(t,n){const r=this.curAddr,e=this.byte();this.print(r,[n,e],`${t} $${l(e)},X`)}disZpY(t,n){const r=this.curAddr,e=this.byte();this.print(r,[n,e],`${t} $${l(e)},Y`)}disAbs(t,n){const r=this.curAddr,e=this.byte(),l=this.byte();this.print(r,[n,e,l],`${t} $${i(e+256*l)}`)}disAbsX(t,n){const r=this.curAddr,e=this.byte(),l=this.byte();this.print(r,[n,e,l],`${t} $${i(e+256*l)},X`)}disAbsY(t,n){const r=this.curAddr,e=this.byte(),l=this.byte();this.print(r,[n,e,l],`${t} $${i(e+256*l)},Y`)}disInd(t,n){const r=this.curAddr,e=this.byte(),l=this.byte();this.print(r,[n,e,l],`${t} ($${i(e+256*l)})`)}disIndX(t,n){const r=this.curAddr,e=this.byte();this.print(r,[n,e],`${t} ($${l(e)},X)`)}disIndY(t,n){const r=this.curAddr,e=this.byte();this.print(r,[n,e],`${t} ($${l(e)}),Y`)}disSingle(t,n){const r=this.curAddr;this.print(r,[n],`${t}`)}disBranch(t,n){const r=this.curAddr,e=this.byte(),l=r+(e>=128?-(256-e):e)+2;this.print(r,[n,e],`${t} $${i(l)}`)}disUnknown(t){this.print(this.curAddr,[t],"")}disassemble(){const t=this.buf.byteLength;let n=this.curOffs;for(;this.curOffs<t;){this.curAddr+=this.curOffs-n,n=this.curOffs;const t=this.byte(),r=this.opToDecl[t];if(void 0!==r){const n=r.decode.indexOf(t);if(0===n){this.disImm(r.mnemonic,t);continue}if(1===n){this.disZp(r.mnemonic,t);continue}if(2===n){this.disZpX(r.mnemonic,t);continue}if(3===n){this.disZpY(r.mnemonic,t);continue}if(4===n){this.disAbs(r.mnemonic,t);continue}if(5===n){this.disAbsX(r.mnemonic,t);continue}if(6===n){this.disAbsY(r.mnemonic,t);continue}if(7===n){this.disInd(r.mnemonic,t);continue}if(8===n){this.disIndX(r.mnemonic,t);continue}if(9===n){this.disIndY(r.mnemonic,t);continue}if(10===n){this.disSingle(r.mnemonic,t);continue}if(11===n){this.disBranch(r.mnemonic,t);continue}}else this.disUnknown(t)}return this.output}}n.disassemble=function(t){return new u(t).disassemble()}}]);