(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[,,,function(e,t,n){e.exports={heading:"Editor_heading__3jsuC",layoutContainer:"Editor_layoutContainer__2bFri",editorContainer:"Editor_editorContainer__1wXnR",overlayCommon:"Editor_overlayCommon__36_O2",textarea:"Editor_textarea__28EdL",textareaHighlightOverlay:"Editor_textareaHighlightOverlay__1opTU",textareaHighlightRow:"Editor_textareaHighlightRow__1R6Ia",textareaHighlightRowCurrent:"Editor_textareaHighlightRowCurrent__25KL2",highlightError:"Editor_highlightError__1YeA5",gutter:"Editor_gutter__3CDcX",gutterRow:"Editor_gutterRow__1DNMN",gutterRowSelected:"Editor_gutterRowSelected__3GiGf",textareaSyntaxHighlightOverlay:"Editor_textareaSyntaxHighlightOverlay__31QUS",textareaSyntaxHighlightRow:"Editor_textareaSyntaxHighlightRow__2NLii",hiliteNormal:"Editor_hiliteNormal__3ZDsF",hiliteComment:"Editor_hiliteComment__1s7LO"}},,,,,function(e,t,n){e.exports={container:"SourceTabs_container__2NQsa",heading:"SourceTabs_heading__28rTn",tabContainer:"SourceTabs_tabContainer__2X9q3",gistContainer:"SourceTabs_gistContainer__1hQke",gistInputContainer:"SourceTabs_gistInputContainer__fGFjd",tab:"SourceTabs_tab__2FK_a",active:"SourceTabs_active__1mZcV",gist:"SourceTabs_gist__3Emgh",gistLoadButtonContainer:"SourceTabs_gistLoadButtonContainer__3NcSa",gistResetButtonContainer:"SourceTabs_gistResetButtonContainer__3PwhC",loadingText:"SourceTabs_loadingText__3UiVE"}},,function(e,t,n){e.exports={helpModalContainer:"Help_helpModalContainer__10bLm",helpContents:"Help_helpContents__3Cbr8",headingContainer:"Help_headingContainer__jN87w",emph:"Help_emph__29_7I",hidden:"Help_hidden__2fGZK",circleReveal:"Help_circleReveal__2igbG",circle:"Help_circle__2jpkq",maxWidth:"Help_maxWidth__3MUy2",closeButtonContainer:"Help_closeButtonContainer__1TIMT",asm:"Help_asm__1yYjY"}},function(e,t,n){e.exports={layoutContainer:"DiagnosticsList_layoutContainer__3Yxfa",diagnostics:"DiagnosticsList_diagnostics__U_t5K",heading:"DiagnosticsList_heading__f0lgX",diagnosticsBox:"DiagnosticsList_diagnosticsBox__NbaZi",diagItem:"DiagnosticsList_diagItem__3otDW",selected:"DiagnosticsList_selected__jbDsD",error:"DiagnosticsList_error__1cDSO"}},,function(e,t,n){"use strict";n.d(t,"b",function(){return r}),n.d(t,"a",function(){return a});var r="\nmodule.exports = {\n  sintab: ({}, len, scale) => {\n      const res = Array(len).fill(0).map((v,i) => Math.sin(i/len * Math.PI * 2.0) * scale);\n      return res;\n  }\n}\n",a="\n!filescope c64\n!macro basic_start(addr) {\n* = $801\n    !byte $0c, $08, $00, $00, $9e\n    !for d in [10000, 1000, 100, 10, 1] {\n        !if (addr >= d) {\n            !byte $30 + (addr/d)%10\n        }\n    }\n    !byte 0, 0, 0\n}\n"},function(e,t,n){e.exports={headerContainer:"App_headerContainer__qCdWC",appTitle:"App_appTitle__2SEQk",helpLink:"App_helpLink__3e6xG",githubLink:"App_githubLink__14Qon",appHelpLinksContainer:"App_appHelpLinksContainer__8kdU0"}},function(e,t,n){e.exports={heading:"Disasm_heading__2ZRjL",layoutContainer:"Disasm_layoutContainer__36ehI",disasmContainer:"Disasm_disasmContainer__2QplX",downloadButton:"Disasm_downloadButton__3MkkT"}},,,,,,function(e,t,n){"use strict";function r(e,t){for(var n=e.split("\n"),r=0,a=0;a<t.start.line-1;a++)r+=n[a].length+1;return r+t.start.column-1}function a(e,t){for(var n=e.split("\n"),r=0,a=0;a<n.length;a++)if(t<(r+=n[a].length+1))return a}n.d(t,"a",function(){return r}),n.d(t,"b",function(){return a})},,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(54);t.assemble=r.assemble,t.platformC64=r.platformC64;var a=n(73);t.disassemble=a.disassemble},,function(e,t,n){e.exports={buttonContainer:"CloseButton_buttonContainer__28ZWo",close:"CloseButton_close__1cumB"}},,,,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={ADC:[105,101,117,null,109,125,121,null,97,113,null,null],AND:[41,37,53,null,45,61,57,null,33,49,null,null],ASL:[null,6,22,null,14,30,null,null,null,null,10,null],BIT:[null,36,null,null,44,null,null,null,null,null,null,null],BPL:[null,null,null,null,null,null,null,null,null,null,null,16],BMI:[null,null,null,null,null,null,null,null,null,null,null,48],BVC:[null,null,null,null,null,null,null,null,null,null,null,80],BVS:[null,null,null,null,null,null,null,null,null,null,null,112],BCC:[null,null,null,null,null,null,null,null,null,null,null,144],BCS:[null,null,null,null,null,null,null,null,null,null,null,176],BNE:[null,null,null,null,null,null,null,null,null,null,null,208],BEQ:[null,null,null,null,null,null,null,null,null,null,null,240],BRK:[null,null,null,null,null,null,null,null,null,null,0,null],CMP:[201,197,213,null,205,221,217,null,193,209,null,null],CPX:[224,228,null,null,236,null,null,null,null,null,null,null],CPY:[192,196,null,null,204,null,null,null,null,null,null,null],DEC:[null,198,214,null,206,222,null,null,null,null,null,null],EOR:[73,69,85,null,77,93,89,null,65,81,null,null],CLC:[null,null,null,null,null,null,null,null,null,null,24,null],SEC:[null,null,null,null,null,null,null,null,null,null,56,null],CLI:[null,null,null,null,null,null,null,null,null,null,88,null],SEI:[null,null,null,null,null,null,null,null,null,null,120,null],CLV:[null,null,null,null,null,null,null,null,null,null,184,null],CLD:[null,null,null,null,null,null,null,null,null,null,216,null],SED:[null,null,null,null,null,null,null,null,null,null,248,null],INC:[null,230,246,null,238,254,null,null,null,null,null,null],JMP:[null,null,null,null,76,null,null,108,null,null,null,null],JSR:[null,null,null,null,32,null,null,null,null,null,null,null],LDA:[169,165,181,null,173,189,185,null,161,177,null,null],LDX:[162,166,null,182,174,null,190,null,null,null,null,null],LDY:[160,164,180,null,172,188,null,null,null,null,null,null],LSR:[null,70,86,null,78,94,null,null,null,null,74,null],NOP:[null,null,null,null,null,null,null,null,null,null,234,null],ORA:[9,5,21,null,13,29,25,null,1,17,null,null],TAX:[null,null,null,null,null,null,null,null,null,null,170,null],TXA:[null,null,null,null,null,null,null,null,null,null,138,null],DEX:[null,null,null,null,null,null,null,null,null,null,202,null],INX:[null,null,null,null,null,null,null,null,null,null,232,null],TAY:[null,null,null,null,null,null,null,null,null,null,168,null],TYA:[null,null,null,null,null,null,null,null,null,null,152,null],DEY:[null,null,null,null,null,null,null,null,null,null,136,null],INY:[null,null,null,null,null,null,null,null,null,null,200,null],ROR:[null,102,118,null,110,126,null,null,null,null,106,null],ROL:[null,38,54,null,46,62,null,null,null,null,42,null],RTI:[null,null,null,null,null,null,null,null,null,null,64,null],RTS:[null,null,null,null,null,null,null,null,null,null,96,null],SBC:[233,229,245,null,237,253,249,null,225,241,null,null],STA:[null,133,149,null,141,157,153,null,129,145,null,null],TXS:[null,null,null,null,null,null,null,null,null,null,154,null],TSX:[null,null,null,null,null,null,null,null,null,null,186,null],PHA:[null,null,null,null,null,null,null,null,null,null,72,null],PLA:[null,null,null,null,null,null,null,null,null,null,104,null],PHP:[null,null,null,null,null,null,null,null,null,null,8,null],PLP:[null,null,null,null,null,null,null,null,null,null,40,null],STX:[null,134,null,150,142,null,null,null,null,null,null,null],STY:[null,132,148,null,140,null,null,null,null,null,null,null],"---":[null,null,null,null,null,null,null,null,null,null,null,null]}},,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mkLiteral=function(e,t){return{type:"literal",lit:e,loc:t}},t.mkScopeQualifiedIdent=function(e,t,n){return{type:"qualified-ident",path:e,absolute:t,loc:n}},t.mkIdent=function(e,t){return{type:"ident",name:e,loc:t}},t.mkUnary=function(e,t,n){return{type:"unary",op:e,expr:t,loc:n}},t.mkBinaryOp=function(e,t,n,r){return{type:"binary",op:e,left:t,right:n,loc:r}},t.mkExprArray=function(e,t){return{type:"array",list:e,loc:t}},t.mkExprObject=function(e,t){return{type:"object",props:e,loc:t}},t.mkCallFunc=function(e,t,n){return{type:"callfunc",callee:e,args:null==t?[]:t,loc:n}},t.mkMember=function(e,t,n,r){return{type:"member",object:e,property:t,computed:n,loc:r}},function(e){e[e.Byte=0]="Byte",e[e.Word=1]="Word"}(t.DataSize||(t.DataSize={})),t.mkLabel=function(e,t){return{name:e,loc:t}},t.mkInsn=function(e,t){return{type:"insn",insn:e,loc:t}},t.mkSetPC=function(e,t){return{type:"setpc",pc:e,loc:t}},t.mkData=function(e,t,n){return{type:"data",values:t,dataSize:e,loc:n}},t.mkFill=function(e,t,n){return{type:"fill",numBytes:e,fillValue:t,loc:n}},t.mkAlign=function(e,t){return{type:"align",alignBytes:e,loc:t}},t.mkInclude=function(e,t){return{type:"include",filename:e,loc:t}},t.mkError=function(e,t){return{type:"error",error:e,loc:t}},t.mkBinary=function(e,t,n,r){return{type:"binary",filename:e,size:t,offset:n,loc:r}},t.mkIfElse=function(e,t,n){return{type:"if",cases:e,elseBranch:null!==t?t:[],loc:n}},t.mkFor=function(e,t,n,r){return{type:"for",index:e,list:t,body:n,loc:r}},t.mkMacroArg=function(e){return{ident:e}},t.mkMacro=function(e,t,n,r){return{type:"macro",name:e,args:null==t?[]:t,body:n,loc:r}},t.mkCallMacro=function(e,t,n){return{type:"callmacro",name:e,args:null==t?[]:t,loc:n}},t.mkLet=function(e,t,n){return{type:"let",name:e,value:t,loc:n}},t.mkAssign=function(e,t,n){return{type:"assign",name:e,value:t,loc:n}},t.mkLoadPlugin=function(e,t,n){return{type:"load-plugin",filename:e,moduleName:t,loc:n}},t.mkFilescope=function(e,t){return{type:"filescope",name:e,loc:t}},t.mkAsmLine=function(e,t,n,r){return{label:e,stmt:t,scopedStmts:n,loc:r}}},function(e,t,n){"use strict";(function(e){var r=n(9),a=n(4),l=n(1),i=n(2),o=n(5),u=n(6),s=n(0),c=n.n(s),f=n(24),h=n(13),d=n(21),p=n(42),m=n(38),v=n(40),g=n(41),y=n(43),b=n(14),k=n.n(b),C={useWebWorkers:!0};function S(e){return c.a.createElement("span",{"aria-label":"emoji",role:"img"},e.emoji)}var E=function(){function e(){Object(o.a)(this,e),this.cache={}}return Object(u.a)(e,[{key:"update",value:function(e){var t=!1,n=!0,r=!1,a=void 0;try{for(var l,i=e[Symbol.iterator]();!(n=(l=i.next()).done);n=!0){var o=l.value;this.cache[o.name]!==o.text&&(this.cache[o.name]=o.text,t=!0),this.cache[o.name]=o.text}}catch(u){r=!0,a=u}finally{try{n||null==i.return||i.return()}finally{if(r)throw a}}return{sourceFileMap:this.cache,changed:t}}}]),e}(),x=[{name:"main.asm",text:e.from(""),cursorOffset:0},{name:"c64.asm",text:e.from(h.a),cursorOffset:0},{name:"plugin.js",text:e.from(h.b),cursorOffset:0}],w=function(t){function n(){var t,i;Object(o.a)(this,n);for(var u=arguments.length,s=new Array(u),c=0;c<u;c++)s[c]=arguments[c];return(i=Object(a.a)(this,(t=Object(l.a)(n)).call.apply(t,[this].concat(s)))).sourceFileMapCache=new E,i.assemblerWorker=void 0,i.state={gist:{id:"",loadCount:0,loading:!1},sourceFiles:{selected:0,files:x},disassembly:[],prg:e.from([]),diagnosticsIndex:0,diagnostics:[],helpVisible:!1},i.setGistLoadingStatus=function(e){i.setState(function(t){return{gist:Object(r.a)({},t.gist,{loading:e})}})},i.loadGist=function(t){if(null===t)return window.history.replaceState({},"",decodeURIComponent("".concat(window.location.pathname))),void i.setState(function(e){return{gist:Object(r.a)({},e.gist,{gistId:t,loadCount:e.gist.loadCount+1}),sourceFiles:{files:x,selected:0}}});i.setGistLoadingStatus(!0),fetch("https://api.github.com/gists/".concat(t),{headers:{Accept:"application/vnd.github.v3.base64"}}).then(function(e){if(200!==e.status)throw new Error("Gist load failed with HTTP status code ".concat(e.status,": ").concat(e.statusText));return e}).then(function(e){return e.json()}).then(function(n){i.setGistLoadingStatus(!1),function(e,t){var n=new URLSearchParams(window.location.search);n.set(e,t),window.history.replaceState({},"",decodeURIComponent("".concat(window.location.pathname,"?").concat(n)))}("gist_id",t),i.setState(function(a){var l=[],i=0,o=!0,u=!1,s=void 0;try{for(var c,f=Object.values(n.files)[Symbol.iterator]();!(o=(c=f.next()).done);o=!0){var d=c.value;l.push({name:d.filename,text:e.from(d.content,"base64"),cursorOffset:0}),"main.asm"===d.filename&&(i=l.length-1)}}catch(p){u=!0,s=p}finally{try{o||null==f.return||f.return()}finally{if(u)throw s}}return l.push({name:"c64.asm",text:e.from(h.a),cursorOffset:0}),{gist:Object(r.a)({},a.gist,{gistId:t,loadCount:a.gist.loadCount+1}),sourceFiles:{files:l,selected:i}}},function(){return i.recompile()})}).catch(function(e){console.log(e),i.setState(function(e){return{gist:Object(r.a)({},e.gist,{loading:!1})}})})},i.getCurrentSource=function(){return i.state.sourceFiles.files[i.state.sourceFiles.selected]},i.updateCurrentSourceFile=function(e,t){return Object(r.a)({},e,{files:e.files.map(function(n,r){return r===e.selected?t(n):n})})},i.handleWorkerMessage=function(e){0===e.data.diagnostics.length?i.setState({prg:e.data.prg,disassembly:e.data.disassembly,diagnostics:e.data.diagnostics}):i.setState({diagnostics:e.data.diagnostics})},i.handleKeyDown=function(e){"F4"===e.key&&(i.setState(function(t){if(0===t.diagnostics.length)return i.updateDiagnosticsIndexState(t,0);if(void 0===t.diagnosticsIndex)return i.updateDiagnosticsIndexState(t,0);if(e.shiftKey){var n=Math.max(0,t.diagnosticsIndex-1);return i.updateDiagnosticsIndexState(t,n)}var r=Math.min(t.diagnostics.length-1,t.diagnosticsIndex+1);return i.updateDiagnosticsIndexState(t,r)}),e.preventDefault()),"Escape"===e.key&&(i.setState({diagnosticsIndex:void 0,helpVisible:!1}),e.preventDefault())},i.findSourceForDiagnostic=function(e){var t=i.state.sourceFiles.selected;if(void 0===e)return t;for(var n=i.state.sourceFiles.files,r=0;r<n.length;r++){n[r].name===e.loc.source&&(t=r)}return t},i.updateDiagnosticsIndexState=function(e,t){var n=i.state.diagnostics[t],a=i.findSourceForDiagnostic(n);return e.sourceFiles.selected!==a?{diagnosticsIndex:t,sourceFiles:Object(r.a)({},e.sourceFiles,{selected:a})}:{diagnosticsIndex:t,sourceFiles:e.sourceFiles}},i.handleOnClickDiagnostic=function(e){i.setState(function(t){return i.updateDiagnosticsIndexState(t,e)})},i.debouncedCompile=function(e,t){var n=void 0;return function(){for(var r=this,a=arguments.length,l=new Array(a),i=0;i<a;i++)l[i]=arguments[i];clearTimeout(n),n=window.setTimeout(function(){return e.apply(r,l)},t)}}(function(e){C.useWebWorkers&&i.assemblerWorker&&i.assemblerWorker.postMessage(e)},250),i.recompile=function(){var e=i.sourceFileMapCache.update(i.state.sourceFiles.files),t=e.sourceFileMap;if(e.changed)if(C.useWebWorkers&&i.assemblerWorker)i.debouncedCompile({sourceFileMap:t}),i.setState({diagnosticsIndex:void 0});else{var n={readFileSync:function(e){if(e in t)return t[e];throw new Error("File not found ".concat(e))}},r=Object(f.assemble)("main.asm",n);if(0===r.errors.length){var a={isInstruction:r.debugInfo.info().isInstruction};i.setState({prg:r.prg,disassembly:Object(f.disassemble)(r.prg,a),diagnostics:[],diagnosticsIndex:void 0})}else i.setState({diagnostics:r.errors,diagnosticsIndex:void 0})}},i.handleSetSource=function(t){i.setState(function(n){return{sourceFiles:i.updateCurrentSourceFile(n.sourceFiles,function(n){return Object(r.a)({},n,{text:e.from(t)})})}},function(){return i.recompile()})},i.handleSetSourcePosition=function(e){i.setState(function(t){return{sourceFiles:i.updateCurrentSourceFile(t.sourceFiles,function(t){return Object(r.a)({},t,{cursorOffset:e})})}})},i.handleClearDiagnosticsSelectionOnKey=function(e){"F4"!==e.key&&"Shift"!==e.key&&void 0!==i.state.diagnosticsIndex&&i.setState({diagnosticsIndex:void 0})},i.handleClearDiagnosticsSelectionOnMouse=function(e){void 0!==i.state.diagnosticsIndex&&i.setState({diagnosticsIndex:void 0})},i.handleClickHelp=function(e){e.preventDefault(),i.setState({helpVisible:!0})},i.handleCloseHelp=function(){i.setState({helpVisible:!1})},i.handleSourceTabSelected=function(e){i.setState(function(t){return{sourceFiles:Object(r.a)({},t.sourceFiles,{selected:e})}})},i}return Object(i.a)(n,t),Object(u.a)(n,[{key:"componentDidMount",value:function(){var e=this;document.addEventListener("keydown",this.handleKeyDown),this.assemblerWorker=new Worker("worker.js"),null!==this.assemblerWorker&&this.assemblerWorker.addEventListener("message",function(t){e.handleWorkerMessage(t)});var t=new URLSearchParams(window.location.search).get("gist_id");null!==t&&this.loadGist(t)}},{key:"render",value:function(){var e=this,t=this.state.diagnostics,n=void 0;if(0!==t.length&&void 0!==this.state.diagnosticsIndex){var r=t[this.state.diagnosticsIndex];if(void 0!==r){var a=this.findSourceForDiagnostic(r),l=this.state.sourceFiles.files[a];n=Object(d.a)(l.text.toString(),r.loc)}}var i=this.state.diagnostics.filter(function(t){return t.loc.source===e.getCurrentSource().name});return c.a.createElement("div",{id:"root"},c.a.createElement("div",{id:"mainHeader"},c.a.createElement("div",{className:k.a.headerContainer},c.a.createElement("div",null,c.a.createElement("div",{className:k.a.appTitle},c.a.createElement("a",{href:"https://nurpax.github.io/c64jasm/"},"c64jasm")," online"),c.a.createElement("p",null,"A little experimental 6502 assembler for the C64")),c.a.createElement("div",{className:k.a.appHelpLinksContainer},c.a.createElement("div",{className:k.a.helpLink},c.a.createElement(S,{emoji:"\ud83d\udc49"}),"\xa0",c.a.createElement("a",{onClick:this.handleClickHelp,href:"/",target:"_blank"},"Help")),c.a.createElement("div",{className:k.a.githubLink},"(",c.a.createElement("a",{href:"https://github.com/nurpax/c64jasm-browser"},"source code"),")")))),c.a.createElement("div",{onKeyDown:this.handleClearDiagnosticsSelectionOnKey,onMouseDown:this.handleClearDiagnosticsSelectionOnMouse,onMouseUp:this.handleClearDiagnosticsSelectionOnMouse,id:"mainCode"},c.a.createElement(p.a,{key:"".concat(this.state.gist.id,"/").concat(this.state.gist.loadCount,"/").concat(this.getCurrentSource().name),defaultValue:this.getCurrentSource().text.toString(),defaultCursorOffset:this.getCurrentSource().cursorOffset,onSourceChanged:this.handleSetSource,onSourcePositionChanged:this.handleSetSourcePosition,diagnostics:i,errorCharOffset:n})),c.a.createElement("div",{id:"siteDisasm"},c.a.createElement(m.a,{disassembly:this.state.disassembly,prg:this.state.prg})),c.a.createElement("div",{id:"mainSourceTabs"},c.a.createElement(g.a,{key:this.state.gist.loadCount,setSelected:this.handleSourceTabSelected,selected:this.state.sourceFiles.selected,files:this.state.sourceFiles.files,onLoadGist:this.loadGist,loadingGist:this.state.gist.loading})),c.a.createElement("div",{id:"mainDiag"},c.a.createElement(v.a,{onClickItem:this.handleOnClickDiagnostic,diagnostics:this.state.diagnostics,selectedIndex:this.state.diagnosticsIndex})),c.a.createElement(y.a,{visible:this.state.helpVisible,onClose:this.handleCloseHelp}))}}]),n}(c.a.Component);t.a=w}).call(this,n(28).Buffer)},,,function(e,t,n){"use strict";n.d(t,"a",function(){return m});var r=n(5),a=n(6),l=n(4),i=n(1),o=n(2),u=n(0),s=n.n(u),c=n(39),f=n.n(c),h=n(15),d=n.n(h);function p(e){return s.a.createElement("div",null,s.a.createElement("a",{onClick:e.onClick,className:d.a.downloadButton,href:"/",target:"_blank"},"Download .PRG"))}var m=function(e){function t(){var e,n;Object(r.a)(this,t);for(var a=arguments.length,o=new Array(a),u=0;u<a;u++)o[u]=arguments[u];return(n=Object(l.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(o)))).handleDownloadPRG=function(e){e.preventDefault();var t=new Blob([n.props.prg]);f.a.saveAs(t,"c64jasm-online.prg")},n}return Object(o.a)(t,e),Object(a.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{className:d.a.layoutContainer},s.a.createElement("div",{className:d.a.heading},s.a.createElement("div",null,"Disassembly"),s.a.createElement(p,{onClick:this.handleDownloadPRG})),s.a.createElement("div",{className:d.a.disasmContainer},s.a.createElement("pre",null,this.props.disassembly.join("\n"))))}}]),t}(s.a.PureComponent)},,function(e,t,n){"use strict";n.d(t,"a",function(){return d});var r=n(5),a=n(6),l=n(4),i=n(1),o=n(2),u=n(0),s=n.n(u),c=n(11),f=n.n(c),h=function(e){function t(){var e,n;Object(r.a)(this,t);for(var a=arguments.length,o=new Array(a),u=0;u<a;u++)o[u]=arguments[u];return(n=Object(l.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(o)))).itemRef=s.a.createRef(),n}return Object(o.a)(t,e),Object(a.a)(t,[{key:"componentDidUpdate",value:function(e,t,n){this.itemRef&&this.itemRef.current&&this.props.selected&&this.itemRef.current.scrollIntoView({behavior:"smooth",block:"center"})}},{key:"render",value:function(){var e=this,t=this.props.error,n=t.loc,r=t.msg,a=this.props.selected?" ".concat(f.a.selected):"";return s.a.createElement("div",{ref:this.itemRef,className:"".concat(f.a.diagItem).concat(a),onClick:function(){return e.props.onClickItem(e.props.index)}},s.a.createElement("span",{className:"".concat(f.a.error).concat(a)},n.source,":",n.start.line,":",n.start.column,": error:")," ",r)}}]),t}(s.a.Component),d=function(e){function t(){var e,n;Object(r.a)(this,t);for(var a=arguments.length,o=new Array(a),u=0;u<a;u++)o[u]=arguments[u];return(n=Object(l.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(o)))).handleOnClickItem=function(e){n.props.onClickItem(e)},n}return Object(o.a)(t,e),Object(a.a)(t,[{key:"render",value:function(){var e=this,t=this.props.diagnostics;return s.a.createElement("div",{className:f.a.layoutContainer},s.a.createElement("div",{className:f.a.heading},"Diagnostics"),s.a.createElement("div",{className:f.a.diagnostics},s.a.createElement("div",{className:f.a.diagnosticsBox},t.map(function(t,n){return s.a.createElement(h,{key:JSON.stringify(t.loc),index:n,error:t,selected:n===e.props.selectedIndex,onClickItem:e.handleOnClickItem})}))))}}]),t}(s.a.PureComponent)},function(e,t,n){"use strict";n.d(t,"a",function(){return S});var r=n(23),a=n(5),l=n(6),i=n(4),o=n(1),u=n(2),s=n(0),c=n.n(s),f=n(8),h=n.n(f),d=n(7),p=n.n(d),m=n(25),v=function(e){function t(){var e,n;Object(a.a)(this,t);for(var r=arguments.length,l=new Array(r),u=0;u<r;u++)l[u]=arguments[u];return(n=Object(i.a)(this,(e=Object(o.a)(t)).call.apply(e,[this].concat(l)))).state={gistIdOrUrl:""},n.handleSubmit=function(e){e.preventDefault();var t=n.state.gistIdOrUrl.split("/");t.length>0&&n.props.onSubmit(t[t.length-1])},n.handleInputChange=function(e){n.setState({gistIdOrUrl:e.target.value})},n.handlePreventBlur=function(e){e.preventDefault()},n}return Object(u.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this;return c.a.createElement("form",{onSubmit:this.handleSubmit,onBlur:function(){return e.props.onCancel()},className:p()(h.a.gist,h.a.gistInputContainer)},c.a.createElement("input",{placeholder:"Gist ID or URL",onChange:this.handleInputChange,value:this.state.gistIdOrUrl,onKeyDown:function(t){"Escape"===t.key&&e.props.onCancel()},autoFocus:!0,spellCheck:!1,type:"text"}),c.a.createElement("button",{onMouseDown:this.handlePreventBlur,type:"submit"},"Go!"))}}]),t}(c.a.Component),g=function(e){function t(){var e,n;Object(a.a)(this,t);for(var r=arguments.length,l=new Array(r),u=0;u<r;u++)l[u]=arguments[u];return(n=Object(i.a)(this,(e=Object(o.a)(t)).call.apply(e,[this].concat(l)))).state={editing:!1},n.handleOpenLoadInput=function(){n.setState(function(e){return{editing:!e.editing}})},n.handleResetWorkspace=function(){n.props.onLoadGist(null)},n}return Object(u.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this;return this.props.loadingGist?c.a.createElement("div",{className:h.a.gistContainer},c.a.createElement("div",{className:h.a.loadingText},"Loading gist..")):c.a.createElement("div",{className:h.a.gistContainer},this.state.editing&&c.a.createElement(v,{onCancel:function(){return e.setState({editing:!1})},onSubmit:function(t){e.setState({editing:!1}),""!==t&&e.props.onLoadGist(t)}}),!this.state.editing&&c.a.createElement("div",{className:p()(h.a.gist,h.a.gistLoadButtonContainer)},c.a.createElement("button",{onClick:this.handleOpenLoadInput,title:"Load source files from a GitHub public Gist"},"Load Gist")))}}]),t}(c.a.PureComponent),y=function(e){function t(){var e,n;Object(a.a)(this,t);for(var r=arguments.length,l=new Array(r),u=0;u<r;u++)l[u]=arguments[u];return(n=Object(i.a)(this,(e=Object(o.a)(t)).call.apply(e,[this].concat(l)))).handleTabClick=function(e,t){n.props.setSelected(t)},n}return Object(u.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=this.props.sortIdx.map(function(t){var n=e.props.filenames[t];return c.a.createElement("div",{key:n,className:p()(h.a.tab,t===e.props.selected?h.a.active:""),onClick:function(n){return e.handleTabClick(n,t)}},n)});return c.a.createElement("div",{className:h.a.tabContainer},t)}}]),t}(c.a.PureComponent);function b(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(var n=e[0],r=t[0],a=0;a<n.length;a++)if(n[a]!==r[a])return!1;return!0}function k(e){return e.slice(2+(e.lastIndexOf(".")-1>>>0))}function C(e){return c.a.createElement("div",{className:p()(h.a.gist)},c.a.createElement("div",{className:h.a.gistResetButtonContainer},c.a.createElement("button",{onClick:function(){return e.onLoadGist(null)},title:"Reset the workspace.  Cannot be undone."},"Reset Workspace")))}var S=function(e){function t(){var e,n;Object(a.a)(this,t);for(var l=arguments.length,u=new Array(l),s=0;s<l;s++)u[s]=arguments[s];return(n=Object(i.a)(this,(e=Object(o.a)(t)).call.apply(e,[this].concat(u)))).getFilenames=Object(m.a)(function(e){return e},b),n.getSortOrder=Object(m.a)(function(e){return function(e){for(var t=[],n=0;n<e.length;n++)t.push([e[n],n]);return t.sort(function(e,t){var n=Object(r.a)(e,2),a=n[0],l=(n[1],Object(r.a)(t,2)),i=l[0],o=(l[1],k(a)),u=k(i);return o===u?a.localeCompare(i):o.localeCompare(u)}),t.map(function(e){var t=Object(r.a)(e,2);return t[0],t[1]})}(e)}),n}return Object(u.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.getFilenames(this.props.files.map(function(e){return e.name})),t=this.getSortOrder(e);return c.a.createElement("div",{className:h.a.container},c.a.createElement("div",{className:h.a.heading},"Source files"),c.a.createElement(y,{filenames:e,sortIdx:t,selected:this.props.selected,setSelected:this.props.setSelected}),c.a.createElement(g,{onLoadGist:this.props.onLoadGist,loadingGist:this.props.loadingGist}),c.a.createElement(C,{onLoadGist:this.props.onLoadGist}))}}]),t}(c.a.Component)},function(e,t,n){"use strict";var r=n(22),a=n(5),l=n(6),i=n(4),o=n(1),u=n(2),s=n(0),c=n.n(s),f=n(36),h=n.n(f),d=n(7),p=n.n(d),m=n(37),v=n(21);function g(e,t){g=function(e,t){return new i(e,t)};var n=Object(r.a)(RegExp),a=RegExp.prototype,l=new WeakMap;function i(e,t){var r=n.call(this,e);return l.set(r,t),r}function o(e,t){var n=l.get(t);return Object.keys(n).reduce(function(t,r){return t[r]=e[n[r]],t},Object.create(null))}return Object(u.a)(i,n),i.prototype.exec=function(e){var t=a.exec.call(this,e);return t&&(t.groups=o(t,this)),t},i.prototype[Symbol.replace]=function(e,t){if("string"===typeof t){var n=l.get(this);return a[Symbol.replace].call(this,e,t.replace(/\$<([^>]+)>/g,function(e,t){return"$"+n[t]}))}if("function"===typeof t){var r=this;return a[Symbol.replace].call(this,e,function(){var e=[];return e.push.apply(e,arguments),"object"!==typeof e[e.length-1]&&e.push(o(e,r)),t.apply(this,e)})}return a[Symbol.replace].call(this,e,t)},g.apply(this,arguments)}function y(e){var t=[],n=g(/^([^;]*)(;.*)?$/,{code:1,comment:2}).exec(e);if(!n)throw new Error("internal error");var r=n.groups.code,a=n.groups.comment;return void 0!==r&&t.push({text:r,color:"normal"}),void 0!==a&&t.push({text:a,color:"comment"}),t}var b=n(3),k=n.n(b);function C(e,t){C=function(e,t){return new i(e,t)};var n=Object(r.a)(RegExp),a=RegExp.prototype,l=new WeakMap;function i(e,t){var r=n.call(this,e);return l.set(r,t),r}function o(e,t){var n=l.get(t);return Object.keys(n).reduce(function(t,r){return t[r]=e[n[r]],t},Object.create(null))}return Object(u.a)(i,n),i.prototype.exec=function(e){var t=a.exec.call(this,e);return t&&(t.groups=o(t,this)),t},i.prototype[Symbol.replace]=function(e,t){if("string"===typeof t){var n=l.get(this);return a[Symbol.replace].call(this,e,t.replace(/\$<([^>]+)>/g,function(e,t){return"$"+n[t]}))}if("function"===typeof t){var r=this;return a[Symbol.replace].call(this,e,function(){var e=[];return e.push.apply(e,arguments),"object"!==typeof e[e.length-1]&&e.push(o(e,r)),t.apply(this,e)})}return a[Symbol.replace].call(this,e,t)},C.apply(this,arguments)}n.d(t,"a",function(){return O});var S=4;function E(e,t){for(var n=0,r=0;r<t;r++){if(e.length<r)return;"\t"===e[r]?n+=S:n++}return n}function x(e){var t=0;if(!e.text)return null;var n=!0,r=!1,a=void 0;try{for(var l,i=e.text[Symbol.iterator]();!(n=(l=i.next()).done);n=!0){"\t"===l.value?t+=S:t++}}catch(m){r=!0,a=m}finally{try{n||null==i.return||i.return()}finally{if(r)throw a}}var o=Array(t).fill(!1),u=!0,f=!1,h=void 0;try{for(var d,p=e.errors[Symbol.iterator]();!(u=(d=p.next()).done);u=!0){var m=d.value,v=E(e.text,m.start.column-1);if(void 0===v)return null;var g=m.start.line===m.end.line?E(e.text,m.end.column-1):v+1;if(void 0===g)return null;for(var y=v;y<g;y++)o[y]=!0}}catch(m){f=!0,h=m}finally{try{u||null==p.return||p.return()}finally{if(f)throw h}}for(var b=function(e){var t=void 0,n=[],r=!0,a=!1,l=void 0;try{for(var i,o=e[Symbol.iterator]();!(r=(i=o.next()).done);r=!0){var u=i.value;t!==u?(t=u,n.push({code:t,count:1})):n[n.length-1].count++}}catch(m){a=!0,l=m}finally{try{r||null==o.return||o.return()}finally{if(a)throw l}}return n}(o),C=[],x=0;x<b.length;x++){var w=b[x];w.code?C.push(c.a.createElement("pre",{key:x,style:{display:"inline-block"},className:k.a.highlightError}," ".repeat(w.count))):C.push(c.a.createElement("pre",{key:x,style:{display:"inline-block"}}," ".repeat(w.count)))}return c.a.createElement(s.Fragment,null,C)}var w=c.a.forwardRef(function(e,t){for(var n=[],r=e.startRow;r<e.startRow+e.numRows+2;r++){var a=r===e.currentLine&&k.a.textareaHighlightRowCurrent,l=e.lineToErrors.get(r);if(l){var i=e.textLines[r];n.push(c.a.createElement("div",{className:p()(k.a.textareaHighlightRow,a),key:r},c.a.createElement(x,{text:i,errors:l})))}else n.push(c.a.createElement("div",{className:p()(k.a.textareaHighlightRow,a),key:r}))}return c.a.createElement("div",{ref:t,className:p()(k.a.overlayCommon,k.a.textareaHighlightOverlay)},n)}),A=c.a.forwardRef(function(e,t){for(var n=[],r={normal:k.a.hiliteNormal,comment:k.a.hiliteComment},a=e.startRow;a<e.startRow+e.numRows+2;a++){var l=[];if(a<e.textLines.length)for(var i=y(e.textLines[a]),o=0;o<i.length;o++){var u=i[o],s=u.text,f=u.color;l.push(c.a.createElement("pre",{key:o,className:r[f],style:{display:"inline-block"}},s))}n.push(c.a.createElement("div",{className:k.a.textareaSyntaxHighlightRow,key:a},l))}return c.a.createElement("div",{ref:t,className:p()(k.a.overlayCommon,k.a.textareaSyntaxHighlightOverlay),style:{width:"".concat(e.fixedDims.width,"px"),height:"".concat(e.fixedDims.height,"px")}},c.a.createElement("div",{style:{marginLeft:"-".concat(e.scrollLeft,"px")}},n))}),_=c.a.forwardRef(function(e,t){for(var n=[],r=e.startRow;r<e.startRow+e.numRows+2;r++){var a="".concat(r+1),l=r===e.currentLine&&k.a.gutterRowSelected,i=r>=0&&r<e.numTextRows?a.padStart(4," "):"";n.push(c.a.createElement("div",{className:p()(k.a.gutterRow,l),key:r},i))}return c.a.createElement("div",{ref:t,className:k.a.gutter,style:{height:"".concat(e.height,"px")}},n)}),O=function(e){function t(e){var n;Object(a.a)(this,t),(n=Object(i.a)(this,Object(o.a)(t).call(this,e))).editorLineHeight=0,n.resizeObserver=void 0,n.textareaRef=c.a.createRef(),n.gutterRef=c.a.createRef(),n.highlighterRef=c.a.createRef(),n.syntaxHighlighterRef=c.a.createRef(),n.handleScroll=function(e){var t=e.nativeEvent.target,r=t.scrollTop,a=t.scrollLeft;n.setState({scrollTop:r,scrollLeft:a})},n.handleSourceChanged=function(e){n.props.onSourceChanged(e.target.value),n.setState({textLines:e.target.value.split("\n")})},n.updateCursorState=function(){if(n.textareaRef.current){var e=n.textareaRef.current;if(e.selectionStart===e.selectionEnd){var t=e.selectionStart,r=Object(v.b)(n.textareaRef.current.value,t);n.setState({currentLine:r})}else n.setState({currentLine:void 0});n.props.onSourcePositionChanged(e.selectionStart)}},n.handleSelect=function(e){n.updateCursorState()},n.handleKeyDown=function(e){n.updateCursorState()},n.handleKeyUp=function(e){n.updateCursorState()},n.handleMouseDown=function(e){if(n.textareaRef.current){var t=e.nativeEvent.offsetY+n.state.scrollTop;n.setState({currentLine:Math.min(n.state.textLines.length-1,Math.floor(t/n.editorLineHeight))})}},n.state={scrollTop:0,scrollLeft:0,currentLine:0,textLines:n.props.defaultValue.split("\n"),textareaDims:{width:0,height:0}};var r=getComputedStyle(document.documentElement).getPropertyValue("--code-window-line-height"),l=C(/^[ ]*([0-9]+)px$/,{height:1}).exec(r);if(!l)throw new Error("failed querying css var --code-window-line-height"+r);return n.editorLineHeight=parseInt(l.groups.height),n.resizeObserver=new m.a(function(e){var t=e[0];n.setState({textareaDims:{width:t.contentRect.width,height:t.contentRect.height}})}),n}return Object(u.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.textareaRef.current&&(h.a.watch(this.textareaRef.current),this.textareaRef.current.spellcheck=!1,this.textareaRef.current.selectionStart=this.props.defaultCursorOffset,this.textareaRef.current.selectionEnd=this.props.defaultCursorOffset,this.textareaRef.current.focus(),this.resizeObserver.observe(this.textareaRef.current))}},{key:"componentWillUnmount",value:function(){this.textareaRef.current&&this.resizeObserver.unobserve(this.textareaRef.current)}},{key:"componentDidUpdate",value:function(e,t){if(this.textareaRef.current&&void 0!==this.props.errorCharOffset&&(this.textareaRef.current.focus(),this.textareaRef.current.setSelectionRange(this.props.errorCharOffset,this.props.errorCharOffset)),t.scrollTop!==this.state.scrollTop){var n=this.state.scrollTop%this.editorLineHeight;this.gutterRef.current&&(this.gutterRef.current.scrollTop=n),this.highlighterRef.current&&(this.highlighterRef.current.scrollTop=n),this.syntaxHighlighterRef.current&&(this.syntaxHighlighterRef.current.scrollTop=n)}}},{key:"render",value:function(){var e=new Map;this.props.diagnostics.forEach(function(t){var n=t.loc,r=n.start.line-1,a=e.has(r)?e.get(r):[];a.push(n),e.set(r,a)});var t=Math.floor(this.state.scrollTop/this.editorLineHeight),n=0!==this.state.textareaDims.height?Math.ceil(this.state.textareaDims.height/this.editorLineHeight):1;return c.a.createElement("div",{className:k.a.layoutContainer},c.a.createElement("div",{className:k.a.heading},"Assembly"),c.a.createElement("div",{className:k.a.editorContainer},c.a.createElement(_,{ref:this.gutterRef,startRow:t,numRows:n,numTextRows:this.state.textLines.length,currentLine:this.state.currentLine,height:this.state.textareaDims.height}),c.a.createElement("div",{className:k.a.textContainer,onMouseDown:this.handleMouseDown},c.a.createElement(w,{ref:this.highlighterRef,startRow:t,numRows:n,currentLine:this.state.currentLine,textLines:this.state.textLines,lineToErrors:e}),c.a.createElement("textarea",{className:p()(k.a.overlayCommon,k.a.textarea),defaultValue:this.props.defaultValue,wrap:"off",onKeyUp:this.handleKeyUp,onKeyDown:this.handleKeyDown,onSelect:this.handleSelect,onScroll:this.handleScroll,ref:this.textareaRef,onChange:this.handleSourceChanged}),c.a.createElement(A,{ref:this.syntaxHighlighterRef,startRow:t,fixedDims:this.state.textareaDims,scrollLeft:this.state.scrollLeft,numRows:n,textLines:this.state.textLines}))))}}]),t}(c.a.Component)},function(e,t,n){"use strict";var r=n(5),a=n(6),l=n(4),i=n(1),o=n(2),u=n(0),s=n.n(u),c=n(20),f=n.n(c),h=n(7),d=n.n(h),p=n(26),m=n.n(p);function v(e){return s.a.createElement("div",{className:m.a.buttonContainer},s.a.createElement("a",{title:"Close Help",href:"/",target:"_blank",className:m.a.close,onClick:function(t){t.preventDefault(),e.onClose()}}))}var g=n(10),y=n.n(g),b=n(13),k=document.getElementById("modal-root"),C=function(e){function t(e){var n;return Object(r.a)(this,t),(n=Object(l.a)(this,Object(i.a)(t).call(this,e))).el=void 0,n.el=document.createElement("div"),n}return Object(o.a)(t,e),Object(a.a)(t,[{key:"componentDidMount",value:function(){k.appendChild(this.el)}},{key:"componentWillUnmount",value:function(){k.removeChild(this.el)}},{key:"render",value:function(){return f.a.createPortal(this.props.children,this.el)}}]),t}(s.a.Component);function S(e){return s.a.createElement("pre",{className:y.a.asm},function(e){var t,n,r=e.split("\n");for(t=0;t<r.length&&0===r[t].trim().length;t++);for(n=r.length-1;n>=0&&0===r[n].trim().length;n--);return r.slice(t,n+1).join("\n")}(e.text))}var E=function(e){function t(){return Object(r.a)(this,t),Object(l.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(o.a)(t,e),Object(a.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{className:d()(y.a.helpContents,y.a.maxWidth)},s.a.createElement("div",{className:y.a.headingContainer},s.a.createElement("div",{className:y.a.closeButtonContainer},s.a.createElement(v,{onClose:this.props.onClose})),s.a.createElement("h1",null,"c64jasm online ")),s.a.createElement("p",null,s.a.createElement("a",{href:"https://nurpax.github.io/c64jasm/"},"c64jasm")," is a 6502 assembler written in JavaScript. You can run it either on the command line using Node or link it into a web app."),s.a.createElement("p",null,s.a.createElement("a",{href:"https://nurpax.github.io/c64jasm-browser/"},"c64jasm online")," is an interactive assembler demo site where you can write 6502 assembly with live error reporting and disassembly."),s.a.createElement("p",null,"Developed by Janne Hellsten, contact me through ",s.a.createElement("a",{href:"https://twitter.com/nurpax"},"@nurpax")),s.a.createElement("h3",null,"Example projects"),s.a.createElement("p",null,"C64jasm online supports loading source files from GitHub gists. Here's a list of example projects (click on the links to load):"),s.a.createElement("ul",null,s.a.createElement("li",null,s.a.createElement(function(e){return s.a.createElement(u.Fragment,null,s.a.createElement("a",{href:"".concat("/c64jasm-browser","/?gist_id=").concat(e.id)},e.text),"\xa0(",s.a.createElement("a",{href:"https://gist.github.com/nurpax/".concat(e.id)},"view on GitHub"),")")},{id:"4996160f290fa1b9470520d7be0ca25e",text:"Sine sprites"}))),s.a.createElement("h3",null,"Examples"),s.a.createElement("p",null,"Simple instructions and expressions:"),s.a.createElement(S,{text:"\n    lda #2+2  ; expression in an immediate field\n    sta $d020 ; set border color\n        "}),s.a.createElement("p",null,"Labels:"),s.a.createElement(S,{text:"\nentry: {\n    jsr func\n\n    ldx #8\nloop: ; label local to 'entry' scope\n    dex\n    bpl loop\n}\n\nfunc: {\n    ldx #7\nloop: ; label local to 'func' scope\n    sta buf, x   ; store to buf\n    dex\n    bpl loop\n    rts\n\nbuf: !fill 8, 0    ; 8 byte array\n}\n        "}),s.a.createElement("p",null,"Declaring and using variables:"),s.a.createElement(S,{text:"\n!let num_sprites = 4\n!let sprite_mask = (1<<num_sprites)-1\n\n    lda #sprite_mask\n    sta $d015 ; enable sprites 0-3\n        "}),s.a.createElement("p",null,"Conditional compilation and repetition:"),s.a.createElement(S,{text:"\n!let num_sprites = 4\n    lda #13  ; ptr to sprite data 1 (==address/64)\n    ldx #14  ; ptr to sprite data 2\n\n!for i in range(num_sprites) {\n    !if (i < 2) {\n        sta $07f8+i   ; sprite data 1 from A\n    } else {\n        stx $07f8+i   ; sprite data 2 from X\n    }\n}\n        "}),s.a.createElement("p",null,"Define and use macro macro:"),s.a.createElement(S,{text:"\n!macro set_border(color) {\n    lda #color\n    sta $d020\n}\n\n+set_border(13)  ; expand\n        "}),s.a.createElement("p",null,"A complete C64 program.  To compile a C64 ",s.a.createElement("code",null,".prg")," you need to insert a BASIC startup sequence at the beginning of your output ",s.a.createElement("code",null,".prg")," -- you can use the ",s.a.createElement("code",null,"c64::basic_entry")," macro to do this. The source code to these macros is shown in a later section."),s.a.createElement(S,{text:'\n!include "c64.asm"\n\n+c64::basic_start(entry)\n\nentry: {\n    lda #0\n}\n        '}),s.a.createElement("h3",null,"Built-in support macros"),s.a.createElement("p",null,"The c64jasm online site includes a small built in macro library.  You can find its source code below."),s.a.createElement("p",null,"The builtin ",s.a.createElement("code",null,"c64.asm")," contents:"),s.a.createElement(S,{text:b.a}))}}]),t}(s.a.Component),x=function(e){function t(){return Object(r.a)(this,t),Object(l.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(o.a)(t,e),Object(a.a)(t,[{key:"render",value:function(){var e=this.props.visible;return s.a.createElement(C,null,s.a.createElement("div",{className:d()(e?y.a.helpModalContainer:y.a.hidden)},s.a.createElement("div",{className:y.a.circleReveal},s.a.createElement(E,{onClose:this.props.onClose}))))}}]),t}(s.a.Component);t.a=x},function(e,t,n){e.exports=n(45)},function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),l=n(20),i=n.n(l),o=(n(50),n(35));i.a.render(a.a.createElement(o.a,null),document.getElementById("viewport_root"))},,,,,function(e,t,n){},,,,function(e,t,n){"use strict";(function(e,r){var a=n(30),l=n(31),i=n(58),o=n(17),u=n(18);Object.defineProperty(t,"__esModule",{value:!0});var s=n(32),c=n(19),f=n(62),h=n(33),d=n(68),p=n(34),m=n(69),v=n(71);function g(e){return{value:e,errors:!0}}function y(e){return{value:e,errors:!1}}function b(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.some(function(e){return void 0!==e&&e.errors})}t.platformC64={name:"c64",defaultStartPC:2049};var k=function(){function e(t,n){o(this,e),this.syms=new Map,this.parent=null,this.children=new Map,this.parent=t,this.name=n}return u(e,[{key:"enter",value:function(t){var n=this.children.get(t);if(void 0!==n)return n;var r=new e(this,t);return this.children.set(t,r),r}},{key:"leave",value:function(){return this.parent}},{key:"findSymbol",value:function(e){for(var t=this;null!==t;t=t.parent){var n=t.syms.get(e);if(void 0!==n)return n}}},{key:"findSymbolPath",value:function(e){if(1==e.length)return this.findSymbol(e[0]);for(var t=this;void 0==t.children.get(e[0]);)if(null==(t=t.parent))return;for(var n=0;n<e.length-1;n++)if(void 0==(t=t.children.get(e[n])))return;return t.syms.get(e[e.length-1])}},{key:"addSymbol",value:function(e,t,n){this.syms.set(e,Object.assign({},t,{seen:n}))}},{key:"updateSymbol",value:function(e,t,n){for(var r=this;null!==r;r=r.parent){if(void 0!==r.syms.get(e))return void r.syms.set(e,Object.assign({},t,{seen:n}))}}}]),e}(),C=function(){function e(){o(this,e),this.passCount=0,this.root=new k(null,""),this.curSymtab=this.root,this.anonScopeCount=0}return u(e,[{key:"startPass",value:function(e){this.curSymtab=this.root,this.anonScopeCount=0,this.passCount=e}},{key:"withAnonScope",value:function(e){var t="__anon_scope_".concat(this.anonScopeCount);this.anonScopeCount++,this.withLabelScope(t,e)}},{key:"withLabelScope",value:function(e,t){this.curSymtab=this.curSymtab.enter(e),t(),this.curSymtab=this.curSymtab.leave()}},{key:"findPath",value:function(e,t){return t?this.root.findSymbolPath(e):this.curSymtab.findSymbolPath(e)}},{key:"findQualifiedSym",value:function(e,t){return this.findPath(e,t)}},{key:"symbolSeen",value:function(e){var t=this.curSymtab.syms.get(e);return void 0!==t&&t.seen==this.passCount}},{key:"declareLabelSymbol",value:function(e,t){var n=e.name,r=e.loc,a=this.curSymtab.syms.get(n);if(void 0==a){var l={type:"label",data:y({addr:t,loc:r})};return this.curSymtab.addSymbol(n,l,this.passCount),!1}if("label"!==a.type)throw new Error("ICE: declareLabelSymbol should be called only on labels");if(a.data.value.addr!==t){var i={type:"label",data:Object.assign({},a.data,{value:Object.assign({},a.data.value,{addr:t})})};return this.curSymtab.updateSymbol(n,i,this.passCount),!0}return this.curSymtab.updateSymbol(n,a,this.passCount),!1}},{key:"declareVar",value:function(e,t){this.curSymtab.addSymbol(e,{type:"var",data:t},this.passCount)}},{key:"updateVar",value:function(e,t){var n={type:"var",data:t};this.curSymtab.updateSymbol(e,n,this.passCount)}},{key:"findMacro",value:function(e,t){var n=this.findPath(e,t);if(void 0!==n&&"macro"==n.type)return n.data}},{key:"declareMacro",value:function(e,t){this.curSymtab.addSymbol(e,{type:"macro",data:t},this.passCount)}},{key:"dumpLabels",value:function(e){var t=[],n=function(e,n){t.push({prefix:"".concat(e,"/").concat(n.name),sym:n})};n("",this.root);for(var r=[];t.length>0;){var a=t.pop(),l=!0,o=!1,u=void 0;try{for(var s,c=a.sym.syms[Symbol.iterator]();!(l=(s=c.next()).done);l=!0){var f=s.value,h=i(f,2),d=h[0],p=h[1];"label"==p.type&&r.push({name:"".concat(a.prefix,"/").concat(d),addr:p.data.value.addr,size:0})}}catch(_){o=!0,u=_}finally{try{l||null==c.return||c.return()}finally{if(o)throw u}}var m=!0,v=!1,g=void 0;try{for(var y,b=a.sym.children[Symbol.iterator]();!(m=(y=b.next()).done);m=!0){var k=y.value,C=i(k,2),S=(C[0],C[1]);n(a.prefix,S)}}catch(_){v=!0,g=_}finally{try{m||null==b.return||b.return()}finally{if(v)throw g}}}var E=r.sort(function(e,t){return e.addr-t.addr}),x=E.length;if(x>0){for(var w=1;w<x;w++)E[w-1].size=E[w].addr-E[w-1].addr;var A=E[x-1];A.size=e-A.addr}return E}}]),e}();function S(e){return{source:e,start:{offset:0,line:0,column:0},end:{offset:0,line:0,column:0}}}function E(e){var t=typeof e;return"object"===t&&e instanceof Array?"array":t}function x(e){return"".concat(e.absolute?"::":"").concat(e.path.join("::"))}var w=function(e,t,n){var r=n(e.value,t.value);return y("boolean"==typeof r?r?1:0:r)},A=function(e,t){if(b(e))return g(0);var n=t(e.value);return y("boolean"==typeof n?n?1:0:n)},_="undefined"!==typeof e&&null!=e.versions&&null!=e.versions.node;var O=function(){function e(n){var r=this;o(this,e),this.binary=[],this.parseCache=new m.default,this.pluginCache=new Map,this.includeStack=[],this.initialPC=0,this.codePC=0,this.codePCSet=!1,this.pass=0,this.needPass=!1,this.scopes=new C,this.errorList=[],this.warningList=[],this.outOfRangeBranches=[],this.debugInfo=new v.DebugInfoTracker,this.errors=function(){return r.formatErrors(r.errorList,"error")},this.warnings=function(){return r.formatErrors(r.warningList,"warning")},this.readFileSyncFunc=n.readFileSync,this.platform=n.platformOptions||t.platformC64}return u(e,[{key:"readFileSync",value:function(e,t){return this.readFileSyncFunc(e,t)}},{key:"prg",value:function(){var e=255&this.initialPC,t=this.initialPC>>8&255;return r.from([e,t].concat(this.binary))}},{key:"parse",value:function(e,t){var n=this,r=void 0==t?S(e):t;return this.parseCache.parse(e,t,function(e,t){return n.guardedReadFileSync(e,r)})}},{key:"requirePlugin",value:function(e,t){var n=this.pluginCache.get(e);if(void 0!==n)return n;var r=this.makeSourceRelativePath(e);try{var a=y(_?f(c.resolve(r)):function(e){var t={exports:{}};return Function("module",e.toString())(t),t.exports}(this.guardedReadFileSync("".concat(r,".js"),t)));return this.pluginCache.set(e,a),a}catch(l){return this.addError("Plugin load failed: ".concat(r,".js: ").concat(l.message),t),g(0)}}},{key:"peekSourceStack",value:function(){var e=this.includeStack.length;return this.includeStack[e-1]}},{key:"pushSource",value:function(e){this.includeStack.push(e)}},{key:"popSource",value:function(){this.includeStack.pop()}},{key:"anyErrors",value:function(){return 0!==this.errorList.length}},{key:"formatErrors",value:function(e,t){var n=new Set(e.map(function(e){return JSON.stringify(e)}));return l(n).map(function(e){var n=JSON.parse(e),r=n.loc,a=n.msg,l="<unknown>:1:1: ".concat(t,": ").concat(a);return r&&(l="".concat(r.source,":").concat(r.start.line,":").concat(r.start.column,": ").concat(t,": ").concat(a)),{loc:r,msg:a,formatted:l}})}},{key:"addError",value:function(e,t){this.errorList.push({msg:e,loc:t})}},{key:"addWarning",value:function(e,t){this.warningList.push({msg:e,loc:t})}},{key:"startPass",value:function(e){this.codePC=this.platform.defaultStartPC,this.codePCSet=!1,this.pass=e,this.needPass=!1,this.binary=[],this.errorList=[],this.scopes.startPass(e),this.outOfRangeBranches=[],this.debugInfo=new v.DebugInfoTracker}},{key:"emitBasicHeader",value:function(){var e=this;this.emit(12),this.emit(8),this.emit(0),this.emit(0),this.emit(158);[1e4,1e3,100,10,1].forEach(function(t){2061>=t&&e.emit(48+2061/t%10)}),this.emit(0),this.emit(0),this.emit(0)}},{key:"emitBinary",value:function(e){var t=e.filename,n=this.evalExprToString(t,"!binary filename"),r=y(0),a=void 0;if(null!==e.size&&(null!==e.offset&&(r=this.evalExprToInt(e.offset,"!binary offset")),null!==e.size&&(a=this.evalExprToInt(e.size,"!binary size"))),!b(n,r,a)){var l=this.makeSourceRelativePath(n.value),i=this.guardedReadFileSync(l,e.loc),o=i.byteLength;a&&(o=a.value);for(var u=0;u<o;u++)this.emit(i.readUInt8(u+r.value))}}},{key:"evalExprType",value:function(e,t,n){var r=this.evalExpr(e),a=r.errors,l=r.value;return a||typeof l===t?r:(this.addError("Expecting ".concat(n," to be '").concat(t,"' type, got '").concat(E(l),"'"),e.loc),{errors:!0,value:l})}},{key:"evalExprToInt",value:function(e,t){return this.evalExprType(e,"number",t)}},{key:"evalExprToString",value:function(e,t){return this.evalExprType(e,"string",t)}},{key:"evalExpr",value:function(e){var t=this;switch(e.type){case"binary":var n=this.evalExpr(e.left),r=this.evalExpr(e.right);if(b(n,r))return g(0);if(typeof n.value!==typeof r.value)return this.addError("Binary expression operands are expected to be of the same type.  Got: '".concat(E(n.value),"' (left), '").concat(E(r.value),"' (right)"),e.loc),g(0);if("string"!==typeof n.value&&"number"!==typeof n.value)return this.addError("Binary expression operands can only operator on numbers or strings.  Got: '".concat(E(n.value),"'"),e.loc),g(0);if("string"==typeof n.value){var o=["+","==","<","<=",">",">="];if(o.indexOf(e.op)<0)return this.addError("'".concat(e.op,"' operator is not supported for strings.  Valid operators for strings are: ").concat(o.join(", ")),e.loc),g(0)}switch(e.op){case"+":return w(n,r,function(e,t){return e+t});case"-":return w(n,r,function(e,t){return e-t});case"*":return w(n,r,function(e,t){return e*t});case"/":return w(n,r,function(e,t){return e/t});case"%":return w(n,r,function(e,t){return e%t});case"&":return w(n,r,function(e,t){return e&t});case"|":return w(n,r,function(e,t){return e|t});case"^":return w(n,r,function(e,t){return e^t});case"<<":return w(n,r,function(e,t){return e<<t});case">>":return w(n,r,function(e,t){return e>>t});case"==":return w(n,r,function(e,t){return e==t});case"!=":return w(n,r,function(e,t){return e!=t});case"<":return w(n,r,function(e,t){return e<t});case"<=":return w(n,r,function(e,t){return e<=t});case">":return w(n,r,function(e,t){return e>t});case">=":return w(n,r,function(e,t){return e>=t});case"&&":return w(n,r,function(e,t){return e&&t});case"||":return w(n,r,function(e,t){return e||t});default:throw new Error("Unhandled binary operator ".concat(e.op))}case"unary":var u=this.evalExprToInt(e.expr,"operand");if(u.errors)return u;switch(e.op){case"+":return A(u,function(e){return+e});case"-":return A(u,function(e){return-e});case"~":return A(u,function(e){return~e});default:throw new Error("Unhandled unary operator ".concat(e.op))}case"literal":return y(e.lit);case"array":var s=e.list.map(function(e){return t.evalExpr(e)});return{value:s.map(function(e){return e.value}),errors:b.apply(void 0,l(s))};case"object":var c=e.props.map(function(e){var n=t.evalExpr(e.val);return["literal"===e.key.type?e.key.lit:e.key.name,n]});return{value:c.reduce(function(e,t){var n=i(t,2),r=n[0],l=n[1];return Object.assign({},e,a({},r,l.value))},{}),errors:b.apply(void 0,l(c.map(function(e){var t=i(e,2);t[0];return t[1]})))};case"ident":throw new Error("should not see an ident here -- if you do, it is probably a wrong type node in parser");case"qualified-ident":var f=this.scopes.findQualifiedSym(e.path,e.absolute);if(void 0==f)return this.pass>=1?(this.addError("Undefined symbol '".concat(x(e),"'"),e.loc),g(0)):(this.needPass=!0,y(0));switch(f.type){case"label":return{errors:f.data.errors,value:f.data.value.addr};case"var":return f.seen<this.pass&&this.addError("Undeclared variable '".concat(x(e),"'"),e.loc),f.data;case"macro":return this.addError("Must have a label or a variable identifier here, got macro name",e.loc),g(0)}break;case"member":var h=this.evalExpr(e.object);if(b(h))return g(0);var d=h.value;if(void 0==d)return this.addError("Cannot access properties of an undefined object",e.loc),g(0);var p=function(e,n){return e in d||(t.addError("Property '".concat(e,"' does not exist in object"),n),!1)},m=function(e,n){if("ident"!==e.property.type)t.addError("".concat(n," property must be a string, got ").concat(E(e.property.type)),e.loc);else if(p(e.property.name,e.property.loc))return y(d[e.property.name]);return g(0)};if(d instanceof Array){if(!e.computed)return m(e,"Array");var v=this.evalExprToInt(e.property,"array index"),k=v.errors,C=v.value;return k?g(0):C in d?y(d[C]):(this.addError("Out of bounds array index ".concat(C),e.property.loc),g(0))}if("object"==typeof d){if(e.computed){var S=this.evalExpr(e.property),_=S.errors,O=S.value;return _?g(0):"string"!==typeof O&&"number"!==typeof O?(this.addError("Object property must be a string or an integer, got ".concat(E(O)),e.loc),g(0)):p(O,e.property.loc)?y(d[O]):g(0)}return m(e,"Object")}return 0!==this.pass?(h.errors||(e.computed?this.addError("Cannot use []-operator on non-array/object values",e.loc):this.addError("Cannot use the dot-operator on non-object values",e.loc)),g(0)):y(0);case"callfunc":var j=this.evalExpr(e.callee),L=e.args.map(function(e){return t.evalExpr(e)});if(j.errors)return g(0);if("function"!==typeof j.value)return this.addError("Callee must be a function type.  Got '".concat(E(j),"'"),e.loc),g(0);if(b.apply(void 0,l(L)))return g(0);try{return y(j.value(L.map(function(e){return e.value})))}catch(I){return"qualified-ident"==e.callee.type?this.addError("Call to '".concat(x(e.callee),"' failed with an error: ").concat(I.message),e.loc):this.addError("Plugin call failed with an error: ".concat(I.message),e.loc),g(0)}}throw new Error("should be unreachable?")}},{key:"setInitialPC",value:function(e){if(this.codePCSet)throw new Error("PC already set -- shouldn't happen");this.codePC=e,this.codePCSet=!0,this.initialPC=e}},{key:"topLevelSourceLoc",value:function(){return S(this.includeStack[0])}},{key:"emit",value:function(e){this.codePCSet||(this.setInitialPC(this.platform.defaultStartPC),this.addWarning("Starting program counter not set with '* = addr'.  Defaulting to platform default $".concat(d.toHex16(this.codePC)),this.topLevelSourceLoc())),this.binary.push(e),this.codePC+=1}},{key:"emit16",value:function(e){this.emit(255&e),this.emit(e>>8&255)}},{key:"checkSingle",value:function(e){return null!==e&&(this.emit(e),!0)}},{key:"checkImm",value:function(e,t){if(null===t||null===e)return!1;var n=this.evalExprToInt(e,"immediate");return b(n)||(this.emit(t),this.emit(n.value)),!0}},{key:"checkAbs",value:function(e,t,n){if(null===t||null===e)return!1;var r=this.evalExprToInt(e,"absolute address");if(b(r))return!0;var a=r.value;if(8===n){if(a<0||a>=1<<n)return!1;this.emit(t),this.emit(a)}else this.emit(t),this.emit16(a);return!0}},{key:"checkBranch",value:function(e,t){if(null===t||null===e)return!1;var n=this.evalExpr(e);if(b(n))return!0;if("number"!==typeof n.value)return this.addError("Expecting branch label to evaluate to integer, got ".concat(E(n.value)),e.loc),!0;var r=n.value-this.codePC-2;return this.emit(t),(r>127||r<-128)&&this.outOfRangeBranches.push({loc:e.loc,offset:r}),this.emit(255&r),!0}},{key:"setPC",value:function(e){var t=this.evalExprToInt(e,"pc");if(!b(t)){var n=t.value;if(this.codePCSet)for(this.codePC>n&&this.addError("Cannot set program counter to a smaller value than current (current: $".concat(d.toHex16(this.codePC),", trying to set $").concat(d.toHex16(n),")"),e.loc);this.codePC<n;)this.emit(0);else this.setInitialPC(n)}}},{key:"guardedReadFileSync",value:function(e,t){try{return this.readFileSync(e)}catch(n){return this.addError("Couldn't open file '".concat(e,"'"),t),r.from([])}}},{key:"fileInclude",value:function(e){var t=this.evalExprToString(e.filename,"!include filename");if(!b(t)){var n=t.value,r=this.makeSourceRelativePath(n);this.pushSource(r),this.assemble(r,e.loc),this.popSource()}}},{key:"fillBytes",value:function(e){var t=this.evalExprToInt(e.numBytes,"!fill num_bytes"),n=this.evalExprToInt(e.fillValue,"!fill value");if(!b(t,n)){var r=n.value;if(r<0||r>=256)this.addError("!fill value to repeat must be in 8-bit range, '".concat(r,"' given"),e.fillValue.loc);else{var a=t.value;if(a<0)this.addError("!fill repeat count must be >= 0, got ".concat(a),e.numBytes.loc);else for(var l=0;l<a;l++)this.emit(r)}}}},{key:"alignBytes",value:function(e){var t=this.evalExprToInt(e.alignBytes,"alignment");if(!b(t)){var n=t.value;if(n<1)this.addError("Alignment must be a positive integer, ".concat(n," given"),e.alignBytes.loc);else if(0==(n&n-1))for(;0!=(this.codePC&n-1);)this.emit(0);else this.addError("Alignment must be a power of two, ".concat(n," given"),e.loc)}}},{key:"withAnonScope",value:function(e,t){if(null!==e)return this.withLabelScope(e,t);this.scopes.withAnonScope(t)}},{key:"withLabelScope",value:function(e,t){this.scopes.withLabelScope(e,t)}},{key:"emit8or16",value:function(e,t){8!=t?this.emit16(e):this.emit(e)}},{key:"emitData",value:function(e,t){for(var n=0;n<e.length;n++){var r=this.evalExpr(e[n]);if(!b(r)){var a=r.value;if("number"==typeof a)this.emit8or16(a,t);else if(a instanceof Array)for(var l in a)this.emit8or16(a[l],t);else this.addError("Only literal (int constants) or array types can be emitted.  Got ".concat(E(a)),e[n].loc)}}}},{key:"makeFunction",value:function(e,t){var n=this;return function(t){return e.apply(void 0,[{readFileSync:function(e){return n.readFileSync(e)},resolveRelative:function(e){return n.makeSourceRelativePath(e)}}].concat(l(t)))}}},{key:"bindFunction",value:function(e,t,n){this.scopes.declareVar(e.name,y(this.makeFunction(t,n)))}},{key:"bindPlugin",value:function(e,t){var n=e.moduleName;if(b(t))this.scopes.declareVar(n.name,g(0));else{var r=t.value;if("function"==typeof r&&this.bindFunction(n,r,e.loc),"object"==typeof r){var a={},l=Object.keys(r);for(var i in l){var o=l[i],u=r[o];a[o]=this.makeFunction(u,e.loc)}this.scopes.declareVar(n.name,y(a))}}}},{key:"checkDirectives",value:function(e,t){var n=this;switch(e.type){case"data":this.emitData(e.values,e.dataSize===p.DataSize.Byte?8:16);break;case"fill":this.fillBytes(e);break;case"align":this.alignBytes(e);break;case"setpc":this.setPC(e.pc);break;case"binary":this.emitBinary(e);break;case"include":this.fileInclude(e);break;case"error":var r=this.evalExprToString(e.error,"error message");if(!b(r))return void this.addError(r.value,e.loc);break;case"if":var a=e.cases,l=e.elseBranch,o=function(e){var r,l=i(a[e],2),o=l[0],u=l[1],s=n.evalExpr(o);if(!b(s)&&(!0===(r=s.value)||0!=r))return{v:n.withAnonScope(t,function(){n.assembleLines(u)})}};for(var u in a){var s=o(u);if("object"===typeof s)return s.v}return this.withAnonScope(t,function(){n.assembleLines(l)});case"for":var c=function(){var r=e.index,a=e.list,l=e.body,i=(e.loc,n.evalExpr(a));if(b(i))return{v:void 0};var o=i.value;if(!(o instanceof Array))return n.addError("for-loop range must be an array expression (e.g., a range() or an array)",a.loc),{v:void 0};for(var u=function(e){var a=null;null!==t&&(a="".concat(t,"__").concat(e)),n.withAnonScope(a,function(){return n.scopes.declareVar(r.name,y(o[e])),n.assembleLines(l)})},s=0;s<o.length;s++)u(s);return"break"}();switch(c){case"break":break;default:if("object"===typeof c)return c.v}case"macro":var f=e.name;e.args,e.body;if(void 0!==this.scopes.findMacro([f.name],!1)&&this.scopes.symbolSeen(f.name))return void this.addError("Macro '".concat(f.name,"' already defined"),f.loc);this.scopes.declareMacro(f.name,e);break;case"callmacro":var h=e.name,d=e.args,m=this.scopes.findMacro(h.path,h.absolute),v=d.map(function(e){return n.evalExpr(e)});if(void 0==m)return void this.addError("Undefined macro '".concat(x(h),"'"),h.loc);if(m.args.length!==d.length)return void this.addError("Macro '".concat(x(h),"' declared with ").concat(m.args.length," args but called here with ").concat(d.length),h.loc);this.withAnonScope(t,function(){for(var e=0;e<v.length;e++){var t=m.args[e].ident.name;n.scopes.declareVar(t,v[e])}n.assembleLines(m.body)});break;case"let":var g=e.name,k=this.scopes.findQualifiedSym([g.name],!1),C=this.evalExpr(e.value);if(void 0!==k&&this.scopes.symbolSeen(g.name))return void this.addError("Variable '".concat(g.name,"' already defined"),e.loc);this.scopes.declareVar(g.name,C);break;case"assign":var S=e.name;if(1!==e.name.path.length||e.name.absolute)return void this.addError("Only symbol names in the current (or owning) scopes are allowed for assignment",e.loc);var E=this.scopes.findQualifiedSym(e.name.path,e.name.absolute);if(void 0==E)return void this.addError("Assignment to undeclared variable '".concat(x(S),"'"),e.loc);if("var"!==E.type)return void this.addError("Assignment to symbol '".concat(x(S),"' that is not a variable.  Its type is '").concat(E.type,"'"),e.loc);var w=this.evalExpr(e.value);this.scopes.updateVar(S.path[0],w);break;case"load-plugin":var A=this.evalExprToString(e.filename,"plugin filename");if(b(A))return;var _=this.requirePlugin(A.value,e.loc);this.bindPlugin(e,_);break;case"filescope":return void this.addError("The !filescope directive is only allowed as the first directive in a source file",e.loc);default:return void this.addError("unknown directive ".concat(e.type),e.loc)}}},{key:"assembleLines",value:function(e){var t=this;if(null!==e&&0!=e.length&&0!=e.length){for(var n=function(e){for(var n=0;n<e.length;n++)t.debugInfo.startLine(e[n].loc,t.codePC),t.assembleLine(e[n]),t.debugInfo.endLine(t.codePC)},r=0;r<e.length;){var a=e[r],l=a.label,i=a.stmt,o=a.scopedStmts;if(null!=l||null!=i||null!=o)break;r++}if(!(r>=e.length)){var u=e[r];return null!=u.stmt&&"filescope"==u.stmt.type?(this.checkAndDeclareLabel(u.stmt.name),this.withLabelScope(u.stmt.name.name,function(){return n(e.slice(r+1))})):n(e)}}}},{key:"checkAndDeclareLabel",value:function(e){this.scopes.symbolSeen(e.name)?this.addError("Symbol '".concat(e.name,"' already defined"),e.loc):this.scopes.declareLabelSymbol(e,this.codePC)&&(this.needPass=!0)}},{key:"assembleLine",value:function(e){var t=this;if(null!=e.label||null!=e.stmt||null!=e.scopedStmts){null!==e.label&&this.checkAndDeclareLabel(e.label);var n=e.scopedStmts;if(null==n){if(null!==e.stmt)if("insn"===e.stmt.type){var r=e.stmt.insn,a=s.default[r.mnemonic.toUpperCase()];void 0!==a?function(e){var n=t.codePC;e();var r=t.codePC;t.debugInfo.markAsInstruction(n,r)}(function(){null===r.imm&&null===r.abs&&null===r.absx&&null===r.absy&&null===r.absind&&t.checkSingle(a[10])||t.checkImm(r.imm,a[0])||t.checkAbs(r.abs,a[1],8)||t.checkAbs(r.absx,a[2],8)||t.checkAbs(r.absy,a[3],8)||t.checkAbs(r.absx,a[5],16)||t.checkAbs(r.absy,a[6],16)||t.checkAbs(r.absind,a[7],16)||t.checkAbs(r.indx,a[8],8)||t.checkAbs(r.indy,a[9],8)||t.checkAbs(r.abs,a[4],16)||t.checkBranch(r.abs,a[11])||t.addError("Couldn't encode instruction '".concat(r.mnemonic,"'"),e.loc)}):this.addError("Unknown mnemonic '".concat(r.mnemonic,"'"),e.loc)}else this.checkDirectives(e.stmt,null==e.label?null:e.label.name)}else{if(!e.label)throw new Error("ICE: line.label cannot be undefined");this.withLabelScope(e.label.name,function(){t.assembleLines(n)})}}}},{key:"makeSourceRelativePath",value:function(e){var t=this.peekSourceStack();return c.join(c.dirname(t),e)}},{key:"assemble",value:function(e,t){try{var n=this.parse(e,t);this.assembleLines(n)}catch(r){if(!("name"in r&&"SyntaxError"==r.name)){if("name"in r&&"semantic"==r.name)return;throw r}this.addError("Syntax error: ".concat(r.message),Object.assign({},r.location,{source:this.peekSourceStack()}))}}},{key:"_requireType",value:function(e,t){if(typeof e==t)return e;this.addError("Expecting a ".concat(t," value, got ").concat(E(e)),e.loc)}},{key:"requireString",value:function(e){return this._requireType(e,"string")}},{key:"requireNumber",value:function(e){return this._requireType(e,"number")}},{key:"registerPlugins",value:function(){var e=this,t=function(t,n){e.scopes.declareVar(t,y(n))};t("loadJson",function(t){var n=e.requireString(t[0]),r=e.makeSourceRelativePath(n);return JSON.parse(e.readFileSync(r,"utf-8"))}),t("range",function(t){var n=0,r=void 0;if(1==t.length)r=e.requireNumber(t[0]);else{if(2!=t.length)throw new Error("Invalid number of args to 'range'.  Expecting 1 or 2 arguments.");n=e.requireNumber(t[0]),r=e.requireNumber(t[1])}if(r==n)return[];if(r<n)throw new Error("range 'end' must be larger or equal to 'start'");return Array(r-n).fill(null).map(function(e,t){return t+n})});var n={},r=!0,a=!1,l=void 0;try{for(var i,o=Object.getOwnPropertyNames(Math)[Symbol.iterator]();!(r=(i=o.next()).done);r=!0){var u=i.value,s=Math;n[u]="random"===u?function(){throw new Error("Math.random() not allowed as it will lead to non-reproducible builds")}:s[u]}}catch(c){a=!0,l=c}finally{try{r||null==o.return||o.return()}finally{if(a)throw l}}t("Math",n)}},{key:"dumpLabels",value:function(){return this.scopes.dumpLabels(this.codePC)}}]),e}(),j={readFileSync:h.readFileSync};t.assemble=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:j,n=new O(t);n.pushSource(e);var a=0;do{if(n.startPass(a),n.registerPlugins(),n.assemble(e,S(e)),a>0&&n.anyErrors())return{prg:r.from([]),labels:[],debugInfo:void 0,errors:n.errors(),warnings:n.warnings()};if(a>10)return void console.error("Exceeded max pass limit ".concat(10));if(a+=1,!n.needPass&&0!=n.outOfRangeBranches.length){for(var l in n.outOfRangeBranches){var i=n.outOfRangeBranches[l];n.addError("Branch target too far (must fit in signed 8-bit range, got ".concat(i.offset,")"),i.loc)}break}}while(n.needPass);return n.popSource(),{prg:n.prg(),errors:n.errors(),warnings:n.warnings(),labels:n.dumpLabels(),debugInfo:n.debugInfo}}}).call(this,n(29),n(28).Buffer)},,,,,,,,,,,,,function(e,t){function n(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id=67},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.toHex16=function(e){return e.toString(16).padStart(4,"0")}},function(e,t,n){"use strict";var r=n(17),a=n(18);Object.defineProperty(t,"__esModule",{value:!0});var l=n(70),i=function(){function e(){r(this,e),this.filenameToSource=new Map,this.sourceToAst=new Map}return a(e,[{key:"getFileContents",value:function(e,t,n){var r=this.filenameToSource.get(e);if(void 0!==r)return r;var a=n(e,t);return this.filenameToSource.set(e,a),a}},{key:"parse",value:function(e,t,n){var r=this.getFileContents(e,t,n),a=this.sourceToAst.get(e);if(void 0!==a)return a;var i=l.parse(r.toString(),{source:e});return this.sourceToAst.set(e,i),i}}]),e}();t.default=i},function(e,t,n){"use strict";var r=n(30),a=n(31);function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(n,!0).forEach(function(t){r(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function o(e,t,n,r){this.message=e,this.expected=t,this.found=n,this.location=r,this.name="SyntaxError","function"===typeof Error.captureStackTrace&&Error.captureStackTrace(this,o)}!function(e,t){function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n}(o,Error),o.buildMessage=function(e,t){var n={literal:function(e){return'"'+a(e.text)+'"'},class:function(e){var t,n="";for(t=0;t<e.parts.length;t++)n+=e.parts[t]instanceof Array?l(e.parts[t][0])+"-"+l(e.parts[t][1]):l(e.parts[t]);return"["+(e.inverted?"^":"")+n+"]"},any:function(e){return"any character"},end:function(e){return"end of input"},other:function(e){return e.description}};function r(e){return e.charCodeAt(0).toString(16).toUpperCase()}function a(e){return e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(e){return"\\x0"+r(e)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(e){return"\\x"+r(e)})}function l(e){return e.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(e){return"\\x0"+r(e)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(e){return"\\x"+r(e)})}return"Expected "+function(e){var t,r,a,l=new Array(e.length);for(t=0;t<e.length;t++)l[t]=(a=e[t],n[a.type](a));if(l.sort(),l.length>0){for(t=1,r=1;t<l.length;t++)l[t-1]!==l[t]&&(l[r]=l[t],r++);l.length=r}switch(l.length){case 1:return l[0];case 2:return l[0]+" or "+l[1];default:return l.slice(0,-1).join(", ")+", or "+l[l.length-1]}}(e)+" but "+function(e){return e?'"'+a(e)+'"':"end of input"}(t)+" found."},e.exports={SyntaxError:o,parse:function(e,t){t=void 0!==t?t:{};var r,l={},u={statements:Xr},s=Xr,c="\n",f=Mr("\n",!1),h=function(e,t){return hl(e,t,1)},d=function(e){return e},p=function(e,t){return sl.mkAsmLine(e,null,t,dl())},m=function(e,t){return sl.mkAsmLine(e,t,null,dl())},v=function(e){return sl.mkAsmLine(e,null,null,dl())},g=function(e){return sl.mkAsmLine(null,e,null,dl())},y=function(e){return sl.mkAsmLine(null,e,null,dl())},b=function(){return sl.mkAsmLine(null,null,null,dl())},k=function(e){return e},C=function(e){return sl.mkInsn(e,dl())},S=":",E=Mr(":",!1),x=function(e){return sl.mkLabel(e,dl())},w=function(e){return sl.mkSetPC(e,dl())},A=function(e,t){var n="byte"==e?sl.DataSize.Byte:sl.DataSize.Word;return sl.mkData(n,t,dl())},_=function(e,t){return sl.mkFill(e,t,dl())},O=function(e){return sl.mkInclude(e,dl())},j=function(e,t){var n=null,r=null;return null!==t&&(n=t[1],r=t[3]),sl.mkBinary(e,n,r,dl())},L=function(e,t,n,r){var l=[e].concat(a(n.map(function(e){return e.condition}))),i=[t].concat(a(n.map(function(e){return e.trueBranch}))),o=l.map(function(e,t){return[e,i[t]]});return sl.mkIfElse(o,r,dl())},I="in",R=Mr("in",!1),P=function(e,t,n){return sl.mkFor(e,t,n,dl())},D=function(e,t,n){return sl.mkMacro(e,t,n,dl())},T="+",F=Mr("+",!1),B=function(e,t){return sl.mkCallMacro(e,t,dl())},N=function(e,t){return sl.mkLet(e,t,dl())},M=function(e,t){return sl.mkAssign(e,t,dl())},H="as",U=Mr("as",!1),G=function(e,t){return sl.mkLoadPlugin(e,t,dl())},W=function(e){return sl.mkError(e,dl())},$=function(e){return sl.mkAlign(e,dl())},V=function(e){return sl.mkFilescope(e,dl())},X=function(e,t){return{condition:e,trueBranch:t}},z=function(e){return e},Y='"',q=Mr('"',!1),K=function(e){return sl.mkLiteral(e.join(""),dl())},Z={type:"any"},Q=function(e){return e},J=function(e){return sl.mkIdent(e,dl())},ee=function(e,t){return hl(e,t,1)},te=function(e){return sl.mkMacroArg(e)},ne=function(e,t){return fl(e,t,null,dl())},re="x",ae=Mr("x",!1),le=function(e,t){return function(e,t,n){return i({},cl,{mnemonic:e,indx:t,loc:n})}(e,t,dl())},ie="y",oe=Mr("y",!1),ue=function(e,t){return function(e,t,n){return i({},cl,{mnemonic:e,indy:t,loc:n})}(e,t,dl())},se=function(e,t){return function(e,t,n){return i({},cl,{mnemonic:e,absind:t,loc:n})}(e,t,dl())},ce=function(e,t,n){return"x"===n?function(e,t,n){return i({},cl,{mnemonic:e,absx:t,loc:n})}(e,t,dl()):function(e,t,n){return i({},cl,{mnemonic:e,absy:t,loc:n})}(e,t,dl())},fe=function(e,t){return fl(e,null,t,dl())},he=function(e){return fl(e,null,null,dl())},de=function(){return Nr()},pe=function(e){return e},me="::",ve=Mr("::",!1),ge=function(e,t){return sl.mkScopeQualifiedIdent(hl(e,t,1),!1,dl())},ye=function(e,t){return sl.mkScopeQualifiedIdent(hl(e,t,1),!0,dl())},be=function(e){return sl.mkIdent(e,dl())},ke=function(e){return e},Ce="#",Se=Mr("#",!1),Ee=function(e,t){if(null!==e){if("lo"===e)return sl.mkBinaryOp("&",t,sl.mkLiteral(255,dl(),dl()));var n=sl.mkLiteral(8,dl()),r=sl.mkLiteral(255,dl());return sl.mkBinaryOp("&",sl.mkBinaryOp(">>",t,n,dl()),r,dl())}return t},xe=function(){return"lo"},we=function(){return"hi"},Ae=function(e){return e},_e=function(e,t){return t.reduce(function(e,t){return sl.mkBinaryOp(t[0],e,t[1],dl())},e)},Oe=function(e,t){return sl.mkUnary(e,t,dl())},je=function(e){return e},Le=function(e,t){return{property:t,computed:!0}},Ie=function(e,t){return{property:sl.mkIdent(t,dl()),computed:!1}},Re=function(e,t){return t.reduce(function(e,t){return sl.mkMember(e,t.property,t.computed,dl())},e)},Pe=function(e,t){return sl.mkCallFunc(e,t,dl())},De=function(e){return sl.mkLiteral(e,dl())},Te=function(e){return e},Fe=function(e){return e},Be="$",Ne=Mr("$",!1),Me=function(e){return parseInt(e,16)},He="%",Ue=Mr("%",!1),Ge=function(e){return parseInt(e,2)},We=function(e){return e},$e=".",Ve=Mr(".",!1),Xe=function(){return parseFloat(Nr())},ze="0",Ye=Mr("0",!1),qe=/^[1-9]/,Ke=Hr([["1","9"]],!1,!1),Ze="e",Qe=Mr("e",!0),Je=/^[+\-]/,et=Hr(["+","-"],!1,!1),tt=function(e){return sl.mkExprArray(null===e?[]:e,dl())},nt=function(){return sl.mkExprObject([],dl())},rt=function(e){return sl.mkExprObject(e,dl())},at=function(e,t){return hl(e,t,2)},lt=function(e,t){return{key:e,val:t}},it=/^[a-zA-Z_]/,ot=Hr([["a","z"],["A","Z"],"_"],!1,!1),ut=/^[a-zA-Z_0-9]/,st=Hr([["a","z"],["A","Z"],"_",["0","9"]],!1,!1),ct=/^[0-9]/,ft=Hr([["0","9"]],!1,!1),ht=/^[0-1]/,dt=Hr([["0","1"]],!1,!1),pt=/^[0-9a-f]/i,mt=Hr([["0","9"],["a","f"]],!1,!0),vt=Ur("whitespace"),gt="\t",yt=Mr("\t",!1),bt="\v",kt=Mr("\v",!1),Ct="\f",St=Mr("\f",!1),Et=" ",xt=Mr(" ",!1),wt="\xa0",At=Mr("\xa0",!1),_t="\ufeff",Ot=Mr("\ufeff",!1),jt=/^[ \xA0\u1680\u2000-\u200A\u202F\u205F\u3000]/,Lt=Hr([" ","\xa0","\u1680",["\u2000","\u200a"],"\u202f","\u205f","\u3000"],!1,!1),It=";",Rt=Mr(";",!1),Pt=Ur("end of line"),Dt="\r\n",Tt=Mr("\r\n",!1),Ft="\r",Bt=Mr("\r",!1),Nt="\u2028",Mt=Mr("\u2028",!1),Ht="\u2029",Ut=Mr("\u2029",!1),Gt="!align",Wt=Mr("!align",!1),$t="!byte",Vt=Mr("!byte",!1),Xt=function(){return"byte"},zt="!word",Yt=Mr("!word",!1),qt=function(){return"word"},Kt="!binary",Zt=Mr("!binary",!1),Qt="!let",Jt=Mr("!let",!1),en="!macro",tn=Mr("!macro",!1),nn="!if",rn=Mr("!if",!1),an="else",ln=Mr("else",!1),on="elif",un=Mr("elif",!1),sn="!error",cn=Mr("!error",!1),fn="!for",hn=Mr("!for",!1),dn="!include",pn=Mr("!include",!1),mn="!fill",vn=Mr("!fill",!1),gn="!use",yn=Mr("!use",!1),bn="!filescope",kn=Mr("!filescope",!1),Cn="[",Sn=Mr("[",!1),En=function(e){return e},xn="]",wn=Mr("]",!1),An="(",_n=Mr("(",!1),On=")",jn=Mr(")",!1),Ln="{",In=Mr("{",!1),Rn="}",Pn=Mr("}",!1),Dn=(Mr("->",!1),Mr("++",!1),Mr("--",!1),"&"),Tn=Mr("&",!1),Fn=/^[&]/,Bn=Hr(["&"],!1,!1),Nn="*",Mn=Mr("*",!1),Hn=/^[=]/,Un=Hr(["="],!1,!1),Gn=/^[+=]/,Wn=Hr(["+","="],!1,!1),$n="-",Vn=Mr("-",!1),Xn=/^[\-=>]/,zn=Hr(["-","=",">"],!1,!1),Yn="~",qn=Mr("~",!1),Kn="!",Zn=Mr("!",!1),Qn="/",Jn=Mr("/",!1),er=/^[=>]/,tr=Hr(["=",">"],!1,!1),nr="<<",rr=Mr("<<",!1),ar=">>",lr=Mr(">>",!1),ir="<",or=Mr("<",!1),ur=">",sr=Mr(">",!1),cr="<=",fr=Mr("<=",!1),hr=">=",dr=Mr(">=",!1),pr="==",mr=Mr("==",!1),vr="!=",gr=Mr("!=",!1),yr="^",br=Mr("^",!1),kr="|",Cr=Mr("|",!1),Sr="&&",Er=Mr("&&",!1),xr="||",wr=Mr("||",!1),Ar=(Mr("?",!1),/^[>]/),_r=Hr([">"],!1,!1),Or=(Mr("...",!1),"="),jr=Mr("=",!1),Lr=(Mr("*=",!1),Mr("/=",!1),Mr("%=",!1),Mr("+=",!1),Mr("-=",!1),Mr("<<=",!1),Mr(">>=",!1),Mr("&=",!1),Mr("^=",!1),Mr("|=",!1),","),Ir=Mr(",",!1),Rr=0,Pr=0,Dr=[{line:1,column:1}],Tr=0,Fr=[],Br=0;if("startRule"in t){if(!(t.startRule in u))throw new Error("Can't start parsing from rule \""+t.startRule+'".');s=u[t.startRule]}function Nr(){return e.substring(Pr,Rr)}function Mr(e,t){return{type:"literal",text:e,ignoreCase:t}}function Hr(e,t,n){return{type:"class",parts:e,inverted:t,ignoreCase:n}}function Ur(e){return{type:"other",description:e}}function Gr(t){var n,r=Dr[t];if(r)return r;for(n=t-1;!Dr[n];)n--;for(r={line:(r=Dr[n]).line,column:r.column};n<t;)10===e.charCodeAt(n)?(r.line++,r.column=1):r.column++,n++;return Dr[t]=r,r}function Wr(e,t){var n=Gr(e),r=Gr(t);return{start:{offset:e,line:n.line,column:n.column},end:{offset:t,line:r.line,column:r.column}}}function $r(e){Rr<Tr||(Rr>Tr&&(Tr=Rr,Fr=[]),Fr.push(e))}function Vr(e,t,n){return new o(o.buildMessage(e,t),e,t,n)}function Xr(){var t,n,r,a,i,o;if(t=Rr,(n=zr())!==l){for(r=[],a=Rr,10===e.charCodeAt(Rr)?(i=c,Rr++):(i=l,0===Br&&$r(f)),i!==l&&(o=zr())!==l?a=i=[i,o]:(Rr=a,a=l);a!==l;)r.push(a),a=Rr,10===e.charCodeAt(Rr)?(i=c,Rr++):(i=l,0===Br&&$r(f)),i!==l&&(o=zr())!==l?a=i=[i,o]:(Rr=a,a=l);r!==l?(Pr=t,t=n=h(n,r)):(Rr=t,t=l)}else Rr=t,t=l;return t}function zr(){var e,t,n;return e=Rr,Ia()!==l&&(t=function(){var e,t,n,r;return e=Rr,(t=qr())!==l&&(n=Ha())!==l&&(r=Xr())!==l&&Ua()!==l?(Pr=e,t=p(t,r),e=t):(Rr=e,e=l),e===l&&(e=Rr,(t=qr())!==l&&(n=Yr())!==l?(Pr=e,t=m(t,n),e=t):(Rr=e,e=l),e===l&&(e=Rr,(t=qr())!==l&&(Pr=e,t=v(t)),(e=t)===l&&(e=Rr,(t=Yr())!==l&&(Pr=e,t=g(t)),(e=t)===l&&(e=Rr,(t=function(){var e,t,n;return e=Rr,(t=$a())!==l&&ol()!==l&&(n=ga())!==l?(Pr=e,t=w(n),e=t):(Rr=e,e=l),e}())!==l&&(Pr=e,t=y(t)),(e=t)===l&&(e=Rr,(t=Ia())!==l&&(Pr=e,t=b()),e=t))))),e}())!==l?((n=Da())===l&&(n=null),n!==l?(Pr=e,e=d(t)):(Rr=e,e=l)):(Rr=e,e=l),e}function Yr(){var t,n;return t=Rr,(n=function(){var t,n,r,a,i,o,u,s,c,f;if(t=Rr,(n=function(){var t,n;return t=Rr,e.substr(Rr,5)===$t?(n=$t,Rr+=5):(n=l,0===Br&&$r(Vt)),n!==l&&Ia()!==l?(Pr=t,n=Xt(),t=n):(Rr=t,t=l),t}())===l&&(n=function(){var t,n;return t=Rr,e.substr(Rr,5)===zt?(n=zt,Rr+=5):(n=l,0===Br&&$r(Yt)),n!==l&&Ia()!==l?(Pr=t,n=qt(),t=n):(Rr=t,t=l),t}()),n!==l&&(r=ea())!==l?(Pr=t,n=A(n,r),t=n):(Rr=t,t=l),t===l&&(t=Rr,(n=function(){var t,n,r;return t=Rr,e.substr(Rr,5)===mn?(n=mn,Rr+=5):(n=l,0===Br&&$r(vn)),n!==l&&(r=Ia())!==l?t=n=[n,r]:(Rr=t,t=l),t}())!==l&&(r=ga())!==l&&(a=ul())!==l&&(i=ga())!==l?(Pr=t,n=_(r,i),t=n):(Rr=t,t=l),t===l&&(t=Rr,(n=function(){var t,n,r;return t=Rr,e.substr(Rr,8)===dn?(n=dn,Rr+=8):(n=l,0===Br&&$r(pn)),n!==l&&(r=Ia())!==l?t=n=[n,r]:(Rr=t,t=l),t}())!==l&&(r=ga())!==l?(Pr=t,n=O(r),t=n):(Rr=t,t=l),t===l&&(t=Rr,(n=function(){var t,n,r;return t=Rr,e.substr(Rr,7)===Kt?(n=Kt,Rr+=7):(n=l,0===Br&&$r(Zt)),n!==l&&(r=Ia())!==l?t=n=[n,r]:(Rr=t,t=l),t}())!==l&&(r=ga())!==l?(a=Rr,(i=ul())!==l?((o=ga())===l&&(o=null),o!==l&&(u=ul())!==l&&(s=ga())!==l?a=i=[i,o,u,s]:(Rr=a,a=l)):(Rr=a,a=l),a===l&&(a=null),a!==l?(Pr=t,n=j(r,a),t=n):(Rr=t,t=l)):(Rr=t,t=l),t===l)))){if(t=Rr,(n=function(){var t,n,r;return t=Rr,e.substr(Rr,3)===nn?(n=nn,Rr+=3):(n=l,0===Br&&$r(rn)),n!==l&&(r=Ia())!==l?t=n=[n,r]:(Rr=t,t=l),t}())!==l)if((r=Na())!==l)if((a=ga())!==l)if((i=Ma())!==l)if((o=Ha())!==l)if((u=Xr())!==l)if((s=Ua())!==l){for(c=[],f=Kr();f!==l;)c.push(f),f=Kr();c!==l?((f=function(){var t,n,r;return t=Rr,(n=function(){var t,n,r;return t=Rr,e.substr(Rr,4)===an?(n=an,Rr+=4):(n=l,0===Br&&$r(ln)),n!==l&&(r=Ia())!==l?t=n=[n,r]:(Rr=t,t=l),t}())!==l&&Ha()!==l&&(r=Xr())!==l&&Ua()!==l?(Pr=t,n=z(r),t=n):(Rr=t,t=l),t}())===l&&(f=null),f!==l?(Pr=t,n=L(a,u,c,f),t=n):(Rr=t,t=l)):(Rr=t,t=l)}else Rr=t,t=l;else Rr=t,t=l;else Rr=t,t=l;else Rr=t,t=l;else Rr=t,t=l;else Rr=t,t=l;else Rr=t,t=l;t===l&&(t=Rr,(n=function(){var t,n,r;return t=Rr,e.substr(Rr,4)===fn?(n=fn,Rr+=4):(n=l,0===Br&&$r(hn)),n!==l&&(r=Ia())!==l?t=n=[n,r]:(Rr=t,t=l),t}())!==l&&(r=aa())!==l?(e.substr(Rr,2)===I?(a=I,Rr+=2):(a=l,0===Br&&$r(R)),a!==l&&(i=Ia())!==l&&(o=ga())!==l&&(u=Ha())!==l&&(s=Xr())!==l&&(c=Ua())!==l?(Pr=t,n=P(r,o,s),t=n):(Rr=t,t=l)):(Rr=t,t=l),t===l&&(t=Rr,(n=function(){var t,n,r;return t=Rr,e.substr(Rr,6)===en?(n=en,Rr+=6):(n=l,0===Br&&$r(tn)),n!==l&&(r=Ia())!==l?t=n=[n,r]:(Rr=t,t=l),t}())!==l&&(r=function(){var e,t;return e=Rr,(t=la())!==l&&(Pr=e,t=J(t)),e=t}())!==l&&(a=Na())!==l?((i=function(){var e,t,n,r,a,i;if(e=Rr,(t=Jr())!==l){for(n=[],r=Rr,(a=ul())!==l&&(i=Jr())!==l?r=a=[a,i]:(Rr=r,r=l);r!==l;)n.push(r),r=Rr,(a=ul())!==l&&(i=Jr())!==l?r=a=[a,i]:(Rr=r,r=l);n!==l?(Pr=e,t=ee(t,n),e=t):(Rr=e,e=l)}else Rr=e,e=l;return e}())===l&&(i=null),i!==l&&(o=Ma())!==l&&(u=Ha())!==l&&(s=Xr())!==l&&(c=Ua())!==l?(Pr=t,n=D(r,i,s),t=n):(Rr=t,t=l)):(Rr=t,t=l),t===l&&(t=Rr,43===e.charCodeAt(Rr)?(n=T,Rr++):(n=l,0===Br&&$r(F)),n!==l&&(r=ra())!==l&&(a=Na())!==l?((i=ea())===l&&(i=null),i!==l&&(o=Ma())!==l?(Pr=t,n=B(r,i),t=n):(Rr=t,t=l)):(Rr=t,t=l),t===l&&(t=Rr,(n=function(){var t,n,r;return t=Rr,e.substr(Rr,4)===Qt?(n=Qt,Rr+=4):(n=l,0===Br&&$r(Jt)),n!==l&&(r=Ia())!==l?t=n=[n,r]:(Rr=t,t=l),t}())!==l&&(r=aa())!==l&&(a=ol())!==l&&(i=ga())!==l?(Pr=t,n=N(r,i),t=n):(Rr=t,t=l),t===l&&(t=Rr,(n=ra())!==l&&(r=ol())!==l&&(a=ga())!==l?(Pr=t,n=M(n,a),t=n):(Rr=t,t=l),t===l&&(t=Rr,(n=function(){var t,n,r;return t=Rr,e.substr(Rr,4)===gn?(n=gn,Rr+=4):(n=l,0===Br&&$r(yn)),n!==l&&(r=Ia())!==l?t=n=[n,r]:(Rr=t,t=l),t}())!==l&&(r=Zr())!==l?(e.substr(Rr,2)===H?(a=H,Rr+=2):(a=l,0===Br&&$r(U)),a!==l&&(i=Ia())!==l&&(o=aa())!==l?(Pr=t,n=G(r,o),t=n):(Rr=t,t=l)):(Rr=t,t=l),t===l&&(t=Rr,(n=function(){var t,n,r;return t=Rr,e.substr(Rr,6)===sn?(n=sn,Rr+=6):(n=l,0===Br&&$r(cn)),n!==l&&(r=Ia())!==l?t=n=[n,r]:(Rr=t,t=l),t}())!==l&&(r=Zr())!==l?(Pr=t,n=W(r),t=n):(Rr=t,t=l),t===l&&(t=Rr,(n=function(){var t,n,r;return t=Rr,e.substr(Rr,6)===Gt?(n=Gt,Rr+=6):(n=l,0===Br&&$r(Wt)),n!==l&&(r=Ia())!==l?t=n=[n,r]:(Rr=t,t=l),t}())!==l&&(r=ga())!==l?(Pr=t,n=$(r),t=n):(Rr=t,t=l),t===l&&(t=Rr,(n=function(){var t,n,r;return t=Rr,e.substr(Rr,10)===bn?(n=bn,Rr+=10):(n=l,0===Br&&$r(kn)),n!==l&&(r=Ia())!==l?t=n=[n,r]:(Rr=t,t=l),t}())!==l&&(r=aa())!==l?(Pr=t,n=V(r),t=n):(Rr=t,t=l))))))))))}return t}())!==l&&(Pr=t,n=k(n)),(t=n)===l&&(t=Rr,(n=function(){var t,n,r,a,i,o,u;return t=Rr,(n=ia())!==l&&(r=function(){var t,n,r,a;return t=Rr,35===e.charCodeAt(Rr)?(n=Ce,Rr++):(n=l,0===Br&&$r(Se)),n!==l?((r=function(){var e,t;return e=Rr,(t=Za())!==l&&(Pr=e,t=xe()),(e=t)===l&&(e=Rr,(t=Qa())!==l&&(Pr=e,t=we()),e=t),e}())===l&&(r=null),r!==l&&(a=ga())!==l?(Pr=t,n=Ee(r,a),t=n):(Rr=t,t=l)):(Rr=t,t=l),t}())!==l?(Pr=t,n=ne(n,r),t=n):(Rr=t,t=l),t===l&&(t=Rr,(n=ia())!==l&&(r=Na())!==l&&(a=oa())!==l&&(i=ul())!==l?(120===e.charCodeAt(Rr)?(o=re,Rr++):(o=l,0===Br&&$r(ae)),o!==l&&(u=Ia())!==l&&Ma()!==l?(Pr=t,n=le(n,a),t=n):(Rr=t,t=l)):(Rr=t,t=l),t===l&&(t=Rr,(n=ia())!==l&&(r=Na())!==l&&(a=oa())!==l&&(i=Ma())!==l&&(o=ul())!==l?(121===e.charCodeAt(Rr)?(u=ie,Rr++):(u=l,0===Br&&$r(oe)),u!==l&&Ia()!==l?(Pr=t,n=ue(n,a),t=n):(Rr=t,t=l)):(Rr=t,t=l),t===l&&(t=Rr,(n=ia())!==l&&(r=Na())!==l&&(a=oa())!==l&&(i=Ma())!==l?(Pr=t,n=se(n,a),t=n):(Rr=t,t=l),t===l&&(t=Rr,(n=ia())!==l&&(r=oa())!==l&&(a=ul())!==l?(120===e.charCodeAt(Rr)?(i=re,Rr++):(i=l,0===Br&&$r(ae)),i===l&&(121===e.charCodeAt(Rr)?(i=ie,Rr++):(i=l,0===Br&&$r(oe))),i!==l&&(o=Ia())!==l?(Pr=t,n=ce(n,r,i),t=n):(Rr=t,t=l)):(Rr=t,t=l),t===l&&(t=Rr,(n=ia())!==l&&(r=oa())!==l?(Pr=t,n=fe(n,r),t=n):(Rr=t,t=l),t===l&&(t=Rr,(n=ia())!==l&&(Pr=t,n=he(n)),t=n)))))),t}())!==l&&(Pr=t,n=C(n)),t=n),t}function qr(){var t,n,r;return t=Rr,(n=ta())!==l?(58===e.charCodeAt(Rr)?(r=S,Rr++):(r=l,0===Br&&$r(E)),r!==l&&Ia()!==l?(Pr=t,t=n=x(n)):(Rr=t,t=l)):(Rr=t,t=l),t}function Kr(){var t,n,r;return t=Rr,function(){var t,n,r;return t=Rr,e.substr(Rr,4)===on?(n=on,Rr+=4):(n=l,0===Br&&$r(un)),n!==l&&(r=Ia())!==l?t=n=[n,r]:(Rr=t,t=l),t}()!==l&&Na()!==l&&(n=ga())!==l&&Ma()!==l&&Ha()!==l&&(r=Xr())!==l&&Ua()!==l?(Pr=t,t=X(n,r)):(Rr=t,t=l),t}function Zr(){var t,n,r,a;if(t=Rr,34===e.charCodeAt(Rr)?(n=Y,Rr++):(n=l,0===Br&&$r(q)),n!==l){for(r=[],a=Qr();a!==l;)r.push(a),a=Qr();r!==l?(34===e.charCodeAt(Rr)?(a=Y,Rr++):(a=l,0===Br&&$r(q)),a!==l&&Ia()!==l?(Pr=t,t=n=K(r)):(Rr=t,t=l)):(Rr=t,t=l)}else Rr=t,t=l;return t}function Qr(){var t,n,r;return t=Rr,n=Rr,Br++,34===e.charCodeAt(Rr)?(r=Y,Rr++):(r=l,0===Br&&$r(q)),Br--,r===l?n=void 0:(Rr=n,n=l),n!==l?(e.length>Rr?(r=e.charAt(Rr),Rr++):(r=l,0===Br&&$r(Z)),r!==l?(Pr=t,t=n=Q(r)):(Rr=t,t=l)):(Rr=t,t=l),t}function Jr(){var e,t;return e=Rr,(t=aa())!==l&&(Pr=e,t=te(t)),e=t}function ea(){var e,t,n,r,a,i;if(e=Rr,(t=ga())!==l){for(n=[],r=Rr,(a=ul())!==l&&(i=ga())!==l?r=a=[a,i]:(Rr=r,r=l);r!==l;)n.push(r),r=Rr,(a=ul())!==l&&(i=ga())!==l?r=a=[a,i]:(Rr=r,r=l);n!==l?(Pr=e,e=t=ee(t,n)):(Rr=e,e=l)}else Rr=e,e=l;return e}function ta(){var e,t,n,r,a;if(e=Rr,t=Rr,n=[],(r=Aa())!==l)for(;r!==l;)n.push(r),r=Aa();else n=l;if(n!==l){for(r=[],a=_a();a!==l;)r.push(a),a=_a();r!==l?t=n=[n,r]:(Rr=t,t=l)}else Rr=t,t=l;return t!==l&&(Pr=e,t=de()),e=t}function na(){var e,t;return e=Rr,(t=ta())!==l&&Ia()!==l?(Pr=e,e=t=pe(t)):(Rr=e,e=l),e}function ra(){var t,n,r,a,i,o,u;if(t=Rr,(n=ta())!==l){for(r=[],a=Rr,e.substr(Rr,2)===me?(i=me,Rr+=2):(i=l,0===Br&&$r(ve)),i!==l&&(o=ta())!==l?a=i=[i,o]:(Rr=a,a=l);a!==l;)r.push(a),a=Rr,e.substr(Rr,2)===me?(i=me,Rr+=2):(i=l,0===Br&&$r(ve)),i!==l&&(o=ta())!==l?a=i=[i,o]:(Rr=a,a=l);r!==l&&(a=Ia())!==l?(Pr=t,t=n=ge(n,r)):(Rr=t,t=l)}else Rr=t,t=l;if(t===l)if(t=Rr,e.substr(Rr,2)===me?(n=me,Rr+=2):(n=l,0===Br&&$r(ve)),n!==l)if((r=ta())!==l){for(a=[],i=Rr,e.substr(Rr,2)===me?(o=me,Rr+=2):(o=l,0===Br&&$r(ve)),o!==l&&(u=ta())!==l?i=o=[o,u]:(Rr=i,i=l);i!==l;)a.push(i),i=Rr,e.substr(Rr,2)===me?(o=me,Rr+=2):(o=l,0===Br&&$r(ve)),o!==l&&(u=ta())!==l?i=o=[o,u]:(Rr=i,i=l);a!==l&&(i=Ia())!==l?(Pr=t,t=n=ye(r,a)):(Rr=t,t=l)}else Rr=t,t=l;else Rr=t,t=l;return t}function aa(){var e,t;return e=Rr,(t=la())!==l&&(Pr=e,t=be(t)),e=t}function la(){var e,t;return e=Rr,(t=ta())!==l&&Ia()!==l?(Pr=e,e=t=ke(t)):(Rr=e,e=l),e}function ia(){var e,t;return e=Rr,(t=ta())!==l&&Ia()!==l?(Pr=e,e=t=pe(t)):(Rr=e,e=l),e}function oa(){var e,t;return e=Rr,(t=ga())!==l&&(Pr=e,t=Ae(t)),e=t}function ua(){var e,t,n,r,a,i;if(e=Rr,(t=ya())!==l){for(n=[],r=Rr,(a=$a())===l&&(a=za())===l&&(a=Ya()),a!==l&&(i=ya())!==l?r=a=[a,i]:(Rr=r,r=l);r!==l;)n.push(r),r=Rr,(a=$a())===l&&(a=za())===l&&(a=Ya()),a!==l&&(i=ya())!==l?r=a=[a,i]:(Rr=r,r=l);n!==l?(Pr=e,e=t=_e(t,n)):(Rr=e,e=l)}else Rr=e,e=l;return e===l&&(e=ka()),e}function sa(){var e,t,n,r,a,i;if(e=Rr,(t=ua())!==l){for(n=[],r=Rr,(a=Va())===l&&(a=Xa()),a!==l&&(i=ua())!==l?r=a=[a,i]:(Rr=r,r=l);r!==l;)n.push(r),r=Rr,(a=Va())===l&&(a=Xa()),a!==l&&(i=ua())!==l?r=a=[a,i]:(Rr=r,r=l);n!==l?(Pr=e,e=t=_e(t,n)):(Rr=e,e=l)}else Rr=e,e=l;return e}function ca(){var e,t,n,r,a,i;if(e=Rr,(t=sa())!==l){for(n=[],r=Rr,(a=qa())===l&&(a=Ka()),a!==l&&(i=sa())!==l?r=a=[a,i]:(Rr=r,r=l);r!==l;)n.push(r),r=Rr,(a=qa())===l&&(a=Ka()),a!==l&&(i=sa())!==l?r=a=[a,i]:(Rr=r,r=l);n!==l?(Pr=e,e=t=_e(t,n)):(Rr=e,e=l)}else Rr=e,e=l;return e}function fa(){var e,t,n,r,a,i;if(e=Rr,(t=ca())!==l){for(n=[],r=Rr,(a=Ja())===l&&(a=el())===l&&(a=Za())===l&&(a=Qa()),a!==l&&(i=ca())!==l?r=a=[a,i]:(Rr=r,r=l);r!==l;)n.push(r),r=Rr,(a=Ja())===l&&(a=el())===l&&(a=Za())===l&&(a=Qa()),a!==l&&(i=ca())!==l?r=a=[a,i]:(Rr=r,r=l);n!==l?(Pr=e,e=t=_e(t,n)):(Rr=e,e=l)}else Rr=e,e=l;return e}function ha(){var e,t,n,r,a,i;if(e=Rr,(t=fa())!==l){for(n=[],r=Rr,(a=tl())===l&&(a=nl()),a!==l&&(i=fa())!==l?r=a=[a,i]:(Rr=r,r=l);r!==l;)n.push(r),r=Rr,(a=tl())===l&&(a=nl()),a!==l&&(i=fa())!==l?r=a=[a,i]:(Rr=r,r=l);n!==l?(Pr=e,e=t=_e(t,n)):(Rr=e,e=l)}else Rr=e,e=l;return e}function da(){var e,t,n,r,a,i;if(e=Rr,(t=ha())!==l){for(n=[],r=Rr,(a=Wa())!==l&&(i=ha())!==l?r=a=[a,i]:(Rr=r,r=l);r!==l;)n.push(r),r=Rr,(a=Wa())!==l&&(i=ha())!==l?r=a=[a,i]:(Rr=r,r=l);n!==l?(Pr=e,e=t=_e(t,n)):(Rr=e,e=l)}else Rr=e,e=l;return e}function pa(){var e,t,n,r,a,i;if(e=Rr,(t=da())!==l){for(n=[],r=Rr,(a=rl())!==l&&(i=da())!==l?r=a=[a,i]:(Rr=r,r=l);r!==l;)n.push(r),r=Rr,(a=rl())!==l&&(i=da())!==l?r=a=[a,i]:(Rr=r,r=l);n!==l?(Pr=e,e=t=_e(t,n)):(Rr=e,e=l)}else Rr=e,e=l;return e}function ma(){var e,t,n,r,a,i;if(e=Rr,(t=pa())!==l){for(n=[],r=Rr,(a=al())!==l&&(i=pa())!==l?r=a=[a,i]:(Rr=r,r=l);r!==l;)n.push(r),r=Rr,(a=al())!==l&&(i=pa())!==l?r=a=[a,i]:(Rr=r,r=l);n!==l?(Pr=e,e=t=_e(t,n)):(Rr=e,e=l)}else Rr=e,e=l;return e}function va(){var e,t,n,r,a,i;if(e=Rr,(t=ma())!==l){for(n=[],r=Rr,(a=ll())!==l&&(i=ma())!==l?r=a=[a,i]:(Rr=r,r=l);r!==l;)n.push(r),r=Rr,(a=ll())!==l&&(i=ma())!==l?r=a=[a,i]:(Rr=r,r=l);n!==l?(Pr=e,e=t=_e(t,n)):(Rr=e,e=l)}else Rr=e,e=l;return e}function ga(){var e,t,n,r,a,i;if(e=Rr,(t=va())!==l){for(n=[],r=Rr,(a=il())!==l&&(i=va())!==l?r=a=[a,i]:(Rr=r,r=l);r!==l;)n.push(r),r=Rr,(a=il())!==l&&(i=va())!==l?r=a=[a,i]:(Rr=r,r=l);n!==l?(Pr=e,e=t=_e(t,n)):(Rr=e,e=l)}else Rr=e,e=l;return e}function ya(){var t,n,r;return(t=function(){var e;return(e=function(){var e,t,n;return e=Rr,(t=ba())!==l&&Na()!==l?((n=ea())===l&&(n=null),n!==l&&Ma()!==l?(Pr=e,t=Pe(t,n),e=t):(Rr=e,e=l)):(Rr=e,e=l),e}())===l&&(e=ba()),e}())===l&&(t=Rr,(n=function(){var t,n;return t=Rr,(n=Va())===l&&(n=Xa())===l&&(n=function(){var t,n;return t=Rr,126===e.charCodeAt(Rr)?(n=Yn,Rr++):(n=l,0===Br&&$r(qn)),n!==l&&Ia()!==l?(Pr=t,n=En(n),t=n):(Rr=t,t=l),t}())===l&&(n=function(){var t,n,r,a;return t=Rr,33===e.charCodeAt(Rr)?(n=Kn,Rr++):(n=l,0===Br&&$r(Zn)),n!==l?(r=Rr,Br++,Hn.test(e.charAt(Rr))?(a=e.charAt(Rr),Rr++):(a=l,0===Br&&$r(Un)),Br--,a===l?r=void 0:(Rr=r,r=l),r!==l&&(a=Ia())!==l?(Pr=t,n=En(n),t=n):(Rr=t,t=l)):(Rr=t,t=l),t}()),n!==l&&(Pr=t,n=je(n)),t=n}())!==l&&(r=ya())!==l?(Pr=t,t=n=Oe(n,r)):(Rr=t,t=l)),t}function ba(){var e,t,n,r,a;if(e=Rr,(t=ka())!==l){for(n=[],r=Rr,Fa()!==l&&(a=ga())!==l&&Ba()!==l?(Pr=r,r=Le(t,a)):(Rr=r,r=l),r===l&&(r=Rr,Ga()!==l&&(a=na())!==l?(Pr=r,r=Ie(t,a)):(Rr=r,r=l));r!==l;)n.push(r),r=Rr,Fa()!==l&&(a=ga())!==l&&Ba()!==l?(Pr=r,r=Le(t,a)):(Rr=r,r=l),r===l&&(r=Rr,Ga()!==l&&(a=na())!==l?(Pr=r,r=Ie(t,a)):(Rr=r,r=l));n!==l?(Pr=e,e=t=Re(t,n)):(Rr=e,e=l)}else Rr=e,e=l;return e}function ka(){var e,t,n;return e=Rr,(t=Ca())!==l&&(Pr=e,t=De(t)),(e=t)===l&&(e=Rr,(t=ra())!==l&&(Pr=e,t=pe(t)),(e=t)===l&&(e=Rr,(t=Zr())!==l&&(Pr=e,t=Te(t)),(e=t)===l&&(e=function(){var e,t,n;return e=Rr,(t=Fa())!==l?((n=ea())===l&&(n=null),n!==l&&Ba()!==l?(Pr=e,t=tt(n),e=t):(Rr=e,e=l)):(Rr=e,e=l),e}())===l&&(e=function(){var e,t,n;return e=Rr,(t=Ha())!==l&&Pa()!==l&&(n=Ua())!==l?(Pr=e,t=nt(),e=t):(Rr=e,e=l),e===l&&(e=Rr,(t=Ha())!==l&&Pa()!==l&&(n=xa())!==l&&Pa()!==l&&Ua()!==l?(Pr=e,t=rt(n),e=t):(Rr=e,e=l),e===l&&(e=Rr,(t=Ha())!==l&&Pa()!==l&&(n=xa())!==l&&Pa()!==l&&ul()!==l&&Pa()!==l&&Ua()!==l?(Pr=e,t=rt(n),e=t):(Rr=e,e=l))),e}())===l&&(e=Rr,(t=Na())!==l&&(n=ga())!==l&&Ma()!==l?(Pr=e,e=t=Fe(n)):(Rr=e,e=l)))),e}function Ca(){var t,n,r,a,i;if(t=Rr,36===e.charCodeAt(Rr)?(n=Be,Rr++):(n=l,0===Br&&$r(Ne)),n!==l){if(r=Rr,a=[],(i=La())!==l)for(;i!==l;)a.push(i),i=La();else a=l;(r=a!==l?e.substring(r,Rr):a)!==l&&(a=Ia())!==l?(Pr=t,t=n=Me(r)):(Rr=t,t=l)}else Rr=t,t=l;if(t===l){if(t=Rr,37===e.charCodeAt(Rr)?(n=He,Rr++):(n=l,0===Br&&$r(Ue)),n!==l){if(r=Rr,a=[],(i=ja())!==l)for(;i!==l;)a.push(i),i=ja();else a=l;(r=a!==l?e.substring(r,Rr):a)!==l&&(a=Ia())!==l?(Pr=t,t=n=Ge(r)):(Rr=t,t=l)}else Rr=t,t=l;t===l&&(t=Rr,(n=function(){var t,n,r,a,i;if(t=Rr,(n=Sa())!==l)if(46===e.charCodeAt(Rr)?(r=$e,Rr++):(r=l,0===Br&&$r(Ve)),r!==l){for(a=[],i=Oa();i!==l;)a.push(i),i=Oa();a!==l?((i=Ea())===l&&(i=null),i!==l?(Pr=t,n=Xe(),t=n):(Rr=t,t=l)):(Rr=t,t=l)}else Rr=t,t=l;else Rr=t,t=l;if(t===l){if(t=Rr,46===e.charCodeAt(Rr)?(n=$e,Rr++):(n=l,0===Br&&$r(Ve)),n!==l){if(r=[],(a=Oa())!==l)for(;a!==l;)r.push(a),a=Oa();else r=l;r!==l?((a=Ea())===l&&(a=null),a!==l?(Pr=t,n=Xe(),t=n):(Rr=t,t=l)):(Rr=t,t=l)}else Rr=t,t=l;t===l&&(t=Rr,(n=Sa())!==l?((r=Ea())===l&&(r=null),r!==l?(Pr=t,n=Xe(),t=n):(Rr=t,t=l)):(Rr=t,t=l))}return t}())!==l&&(r=Ia())!==l?(Pr=t,t=n=We(n)):(Rr=t,t=l))}return t}function Sa(){var t,n,r,a;if(48===e.charCodeAt(Rr)?(t=ze,Rr++):(t=l,0===Br&&$r(Ye)),t===l)if(t=Rr,(n=function(){var t;return qe.test(e.charAt(Rr))?(t=e.charAt(Rr),Rr++):(t=l,0===Br&&$r(Ke)),t}())!==l){for(r=[],a=Oa();a!==l;)r.push(a),a=Oa();r!==l?t=n=[n,r]:(Rr=t,t=l)}else Rr=t,t=l;return t}function Ea(){var t,n,r;return t=Rr,(n=function(){var t;return e.substr(Rr,1).toLowerCase()===Ze?(t=e.charAt(Rr),Rr++):(t=l,0===Br&&$r(Qe)),t}())!==l&&(r=function(){var t,n,r,a;if(t=Rr,Je.test(e.charAt(Rr))?(n=e.charAt(Rr),Rr++):(n=l,0===Br&&$r(et)),n===l&&(n=null),n!==l){if(r=[],(a=Oa())!==l)for(;a!==l;)r.push(a),a=Oa();else r=l;r!==l?t=n=[n,r]:(Rr=t,t=l)}else Rr=t,t=l;return t}())!==l?t=n=[n,r]:(Rr=t,t=l),t}function xa(){var e,t,n,r,a,i,o;if(e=Rr,(t=wa())!==l){for(n=[],r=Rr,(a=ul())!==l&&(i=Pa())!==l&&(o=wa())!==l?r=a=[a,i,o]:(Rr=r,r=l);r!==l;)n.push(r),r=Rr,(a=ul())!==l&&(i=Pa())!==l&&(o=wa())!==l?r=a=[a,i,o]:(Rr=r,r=l);n!==l?(Pr=e,e=t=at(t,n)):(Rr=e,e=l)}else Rr=e,e=l;return e}function wa(){var t,n,r;return t=Rr,(n=function(){var e,t;return(e=aa())===l&&(e=Zr())===l&&(e=Rr,(t=Ca())!==l&&(Pr=e,t=De(t)),e=t),e}())!==l&&function(){var t,n,r,a;return t=Rr,58===e.charCodeAt(Rr)?(n=S,Rr++):(n=l,0===Br&&$r(E)),n!==l?(r=Rr,Br++,Ar.test(e.charAt(Rr))?(a=e.charAt(Rr),Rr++):(a=l,0===Br&&$r(_r)),Br--,a===l?r=void 0:(Rr=r,r=l),r!==l&&(a=Ia())!==l?(Pr=t,n=En(n),t=n):(Rr=t,t=l)):(Rr=t,t=l),t}()!==l&&(r=ga())!==l?(Pr=t,t=n=lt(n,r)):(Rr=t,t=l),t}function Aa(){var t;return it.test(e.charAt(Rr))?(t=e.charAt(Rr),Rr++):(t=l,0===Br&&$r(ot)),t}function _a(){var t;return ut.test(e.charAt(Rr))?(t=e.charAt(Rr),Rr++):(t=l,0===Br&&$r(st)),t}function Oa(){var t;return ct.test(e.charAt(Rr))?(t=e.charAt(Rr),Rr++):(t=l,0===Br&&$r(ft)),t}function ja(){var t;return ht.test(e.charAt(Rr))?(t=e.charAt(Rr),Rr++):(t=l,0===Br&&$r(dt)),t}function La(){var t;return pt.test(e.charAt(Rr))?(t=e.charAt(Rr),Rr++):(t=l,0===Br&&$r(mt)),t}function Ia(){var e,t;for(Br++,e=[],t=Ra();t!==l;)e.push(t),t=Ra();return Br--,e===l&&(t=l,0===Br&&$r(vt)),e}function Ra(){var t;return Br++,9===e.charCodeAt(Rr)?(t=gt,Rr++):(t=l,0===Br&&$r(yt)),t===l&&(11===e.charCodeAt(Rr)?(t=bt,Rr++):(t=l,0===Br&&$r(kt)),t===l&&(12===e.charCodeAt(Rr)?(t=Ct,Rr++):(t=l,0===Br&&$r(St)),t===l&&(32===e.charCodeAt(Rr)?(t=Et,Rr++):(t=l,0===Br&&$r(xt)),t===l&&(160===e.charCodeAt(Rr)?(t=wt,Rr++):(t=l,0===Br&&$r(At)),t===l&&(65279===e.charCodeAt(Rr)?(t=_t,Rr++):(t=l,0===Br&&$r(Ot)),t===l&&(t=function(){var t;return jt.test(e.charAt(Rr))?(t=e.charAt(Rr),Rr++):(t=l,0===Br&&$r(Lt)),t}())))))),Br--,t===l&&0===Br&&$r(vt),t}function Pa(){var e,t;for(e=[],(t=Ra())===l&&(t=Ta())===l&&(t=Da());t!==l;)e.push(t),(t=Ra())===l&&(t=Ta())===l&&(t=Da());return e}function Da(){var t,n,r,a,i,o;if(t=Rr,59===e.charCodeAt(Rr)?(n=It,Rr++):(n=l,0===Br&&$r(Rt)),n!==l){for(r=[],a=Rr,i=Rr,Br++,10===e.charCodeAt(Rr)?(o=c,Rr++):(o=l,0===Br&&$r(f)),Br--,o===l?i=void 0:(Rr=i,i=l),i!==l?(e.length>Rr?(o=e.charAt(Rr),Rr++):(o=l,0===Br&&$r(Z)),o!==l?a=i=[i,o]:(Rr=a,a=l)):(Rr=a,a=l);a!==l;)r.push(a),a=Rr,i=Rr,Br++,10===e.charCodeAt(Rr)?(o=c,Rr++):(o=l,0===Br&&$r(f)),Br--,o===l?i=void 0:(Rr=i,i=l),i!==l?(e.length>Rr?(o=e.charAt(Rr),Rr++):(o=l,0===Br&&$r(Z)),o!==l?a=i=[i,o]:(Rr=a,a=l)):(Rr=a,a=l);r!==l?t=n=[n,r]:(Rr=t,t=l)}else Rr=t,t=l;return t}function Ta(){var t;return Br++,10===e.charCodeAt(Rr)?(t=c,Rr++):(t=l,0===Br&&$r(f)),t===l&&(e.substr(Rr,2)===Dt?(t=Dt,Rr+=2):(t=l,0===Br&&$r(Tt)),t===l&&(13===e.charCodeAt(Rr)?(t=Ft,Rr++):(t=l,0===Br&&$r(Bt)),t===l&&(8232===e.charCodeAt(Rr)?(t=Nt,Rr++):(t=l,0===Br&&$r(Mt)),t===l&&(8233===e.charCodeAt(Rr)?(t=Ht,Rr++):(t=l,0===Br&&$r(Ut)))))),Br--,t===l&&0===Br&&$r(Pt),t}function Fa(){var t,n;return t=Rr,91===e.charCodeAt(Rr)?(n=Cn,Rr++):(n=l,0===Br&&$r(Sn)),n!==l&&Ia()!==l?(Pr=t,t=n=En(n)):(Rr=t,t=l),t}function Ba(){var t,n;return t=Rr,93===e.charCodeAt(Rr)?(n=xn,Rr++):(n=l,0===Br&&$r(wn)),n!==l&&Ia()!==l?(Pr=t,t=n=En(n)):(Rr=t,t=l),t}function Na(){var t,n;return t=Rr,40===e.charCodeAt(Rr)?(n=An,Rr++):(n=l,0===Br&&$r(_n)),n!==l&&Ia()!==l?(Pr=t,t=n=En(n)):(Rr=t,t=l),t}function Ma(){var t,n;return t=Rr,41===e.charCodeAt(Rr)?(n=On,Rr++):(n=l,0===Br&&$r(jn)),n!==l&&Ia()!==l?(Pr=t,t=n=En(n)):(Rr=t,t=l),t}function Ha(){var t,n;return t=Rr,123===e.charCodeAt(Rr)?(n=Ln,Rr++):(n=l,0===Br&&$r(In)),n!==l&&Ia()!==l?(Pr=t,t=n=En(n)):(Rr=t,t=l),t}function Ua(){var t,n;return t=Rr,125===e.charCodeAt(Rr)?(n=Rn,Rr++):(n=l,0===Br&&$r(Pn)),n!==l&&Ia()!==l?(Pr=t,t=n=En(n)):(Rr=t,t=l),t}function Ga(){var t,n;return t=Rr,46===e.charCodeAt(Rr)?(n=$e,Rr++):(n=l,0===Br&&$r(Ve)),n!==l&&Ia()!==l?(Pr=t,t=n=En(n)):(Rr=t,t=l),t}function Wa(){var t,n,r,a;return t=Rr,38===e.charCodeAt(Rr)?(n=Dn,Rr++):(n=l,0===Br&&$r(Tn)),n!==l?(r=Rr,Br++,Fn.test(e.charAt(Rr))?(a=e.charAt(Rr),Rr++):(a=l,0===Br&&$r(Bn)),Br--,a===l?r=void 0:(Rr=r,r=l),r!==l&&(a=Ia())!==l?(Pr=t,t=n=En(n)):(Rr=t,t=l)):(Rr=t,t=l),t}function $a(){var t,n,r,a;return t=Rr,42===e.charCodeAt(Rr)?(n=Nn,Rr++):(n=l,0===Br&&$r(Mn)),n!==l?(r=Rr,Br++,Hn.test(e.charAt(Rr))?(a=e.charAt(Rr),Rr++):(a=l,0===Br&&$r(Un)),Br--,a===l?r=void 0:(Rr=r,r=l),r!==l&&(a=Ia())!==l?(Pr=t,t=n=En(n)):(Rr=t,t=l)):(Rr=t,t=l),t}function Va(){var t,n,r,a;return t=Rr,43===e.charCodeAt(Rr)?(n=T,Rr++):(n=l,0===Br&&$r(F)),n!==l?(r=Rr,Br++,Gn.test(e.charAt(Rr))?(a=e.charAt(Rr),Rr++):(a=l,0===Br&&$r(Wn)),Br--,a===l?r=void 0:(Rr=r,r=l),r!==l&&(a=Ia())!==l?(Pr=t,t=n=En(n)):(Rr=t,t=l)):(Rr=t,t=l),t}function Xa(){var t,n,r,a;return t=Rr,45===e.charCodeAt(Rr)?(n=$n,Rr++):(n=l,0===Br&&$r(Vn)),n!==l?(r=Rr,Br++,Xn.test(e.charAt(Rr))?(a=e.charAt(Rr),Rr++):(a=l,0===Br&&$r(zn)),Br--,a===l?r=void 0:(Rr=r,r=l),r!==l&&(a=Ia())!==l?(Pr=t,t=n=En(n)):(Rr=t,t=l)):(Rr=t,t=l),t}function za(){var t,n,r,a;return t=Rr,47===e.charCodeAt(Rr)?(n=Qn,Rr++):(n=l,0===Br&&$r(Jn)),n!==l?(r=Rr,Br++,Hn.test(e.charAt(Rr))?(a=e.charAt(Rr),Rr++):(a=l,0===Br&&$r(Un)),Br--,a===l?r=void 0:(Rr=r,r=l),r!==l&&(a=Ia())!==l?(Pr=t,t=n=En(n)):(Rr=t,t=l)):(Rr=t,t=l),t}function Ya(){var t,n,r,a;return t=Rr,37===e.charCodeAt(Rr)?(n=He,Rr++):(n=l,0===Br&&$r(Ue)),n!==l?(r=Rr,Br++,er.test(e.charAt(Rr))?(a=e.charAt(Rr),Rr++):(a=l,0===Br&&$r(tr)),Br--,a===l?r=void 0:(Rr=r,r=l),r!==l&&(a=Ia())!==l?(Pr=t,t=n=En(n)):(Rr=t,t=l)):(Rr=t,t=l),t}function qa(){var t,n,r,a;return t=Rr,e.substr(Rr,2)===nr?(n=nr,Rr+=2):(n=l,0===Br&&$r(rr)),n!==l?(r=Rr,Br++,Hn.test(e.charAt(Rr))?(a=e.charAt(Rr),Rr++):(a=l,0===Br&&$r(Un)),Br--,a===l?r=void 0:(Rr=r,r=l),r!==l&&(a=Ia())!==l?(Pr=t,t=n=En(n)):(Rr=t,t=l)):(Rr=t,t=l),t}function Ka(){var t,n,r,a;return t=Rr,e.substr(Rr,2)===ar?(n=ar,Rr+=2):(n=l,0===Br&&$r(lr)),n!==l?(r=Rr,Br++,Hn.test(e.charAt(Rr))?(a=e.charAt(Rr),Rr++):(a=l,0===Br&&$r(Un)),Br--,a===l?r=void 0:(Rr=r,r=l),r!==l&&(a=Ia())!==l?(Pr=t,t=n=En(n)):(Rr=t,t=l)):(Rr=t,t=l),t}function Za(){var t,n,r,a;return t=Rr,60===e.charCodeAt(Rr)?(n=ir,Rr++):(n=l,0===Br&&$r(or)),n!==l?(r=Rr,Br++,Hn.test(e.charAt(Rr))?(a=e.charAt(Rr),Rr++):(a=l,0===Br&&$r(Un)),Br--,a===l?r=void 0:(Rr=r,r=l),r!==l&&(a=Ia())!==l?(Pr=t,t=n=En(n)):(Rr=t,t=l)):(Rr=t,t=l),t}function Qa(){var t,n,r,a;return t=Rr,62===e.charCodeAt(Rr)?(n=ur,Rr++):(n=l,0===Br&&$r(sr)),n!==l?(r=Rr,Br++,Hn.test(e.charAt(Rr))?(a=e.charAt(Rr),Rr++):(a=l,0===Br&&$r(Un)),Br--,a===l?r=void 0:(Rr=r,r=l),r!==l&&(a=Ia())!==l?(Pr=t,t=n=En(n)):(Rr=t,t=l)):(Rr=t,t=l),t}function Ja(){var t,n;return t=Rr,e.substr(Rr,2)===cr?(n=cr,Rr+=2):(n=l,0===Br&&$r(fr)),n!==l&&Ia()!==l?(Pr=t,t=n=En(n)):(Rr=t,t=l),t}function el(){var t,n;return t=Rr,e.substr(Rr,2)===hr?(n=hr,Rr+=2):(n=l,0===Br&&$r(dr)),n!==l&&Ia()!==l?(Pr=t,t=n=En(n)):(Rr=t,t=l),t}function tl(){var t,n;return t=Rr,e.substr(Rr,2)===pr?(n=pr,Rr+=2):(n=l,0===Br&&$r(mr)),n!==l&&Ia()!==l?(Pr=t,t=n=En(n)):(Rr=t,t=l),t}function nl(){var t,n;return t=Rr,e.substr(Rr,2)===vr?(n=vr,Rr+=2):(n=l,0===Br&&$r(gr)),n!==l&&Ia()!==l?(Pr=t,t=n=En(n)):(Rr=t,t=l),t}function rl(){var t,n,r,a;return t=Rr,94===e.charCodeAt(Rr)?(n=yr,Rr++):(n=l,0===Br&&$r(br)),n!==l?(r=Rr,Br++,Hn.test(e.charAt(Rr))?(a=e.charAt(Rr),Rr++):(a=l,0===Br&&$r(Un)),Br--,a===l?r=void 0:(Rr=r,r=l),r!==l&&(a=Ia())!==l?(Pr=t,t=n=En(n)):(Rr=t,t=l)):(Rr=t,t=l),t}function al(){var t,n,r,a;return t=Rr,124===e.charCodeAt(Rr)?(n=kr,Rr++):(n=l,0===Br&&$r(Cr)),n!==l?(r=Rr,Br++,Hn.test(e.charAt(Rr))?(a=e.charAt(Rr),Rr++):(a=l,0===Br&&$r(Un)),Br--,a===l?r=void 0:(Rr=r,r=l),r!==l&&(a=Ia())!==l?(Pr=t,t=n=En(n)):(Rr=t,t=l)):(Rr=t,t=l),t}function ll(){var t,n;return t=Rr,e.substr(Rr,2)===Sr?(n=Sr,Rr+=2):(n=l,0===Br&&$r(Er)),n!==l&&Ia()!==l?(Pr=t,t=n=En(n)):(Rr=t,t=l),t}function il(){var t,n;return t=Rr,e.substr(Rr,2)===xr?(n=xr,Rr+=2):(n=l,0===Br&&$r(wr)),n!==l&&Ia()!==l?(Pr=t,t=n=En(n)):(Rr=t,t=l),t}function ol(){var t,n,r,a;return t=Rr,61===e.charCodeAt(Rr)?(n=Or,Rr++):(n=l,0===Br&&$r(jr)),n!==l?(r=Rr,Br++,61===e.charCodeAt(Rr)?(a=Or,Rr++):(a=l,0===Br&&$r(jr)),Br--,a===l?r=void 0:(Rr=r,r=l),r!==l&&(a=Ia())!==l?(Pr=t,t=n=En(n)):(Rr=t,t=l)):(Rr=t,t=l),t}function ul(){var t,n;return t=Rr,44===e.charCodeAt(Rr)?(n=Lr,Rr++):(n=l,0===Br&&$r(Ir)),n!==l&&Ia()!==l?(Pr=t,t=n=En(n)):(Rr=t,t=l),t}var sl=n(34),cl=(sl.objectToAst,{mnemonic:null,imm:null,abs:null,absx:null,absy:null,absind:null,indx:null,indy:null});function fl(e,t,n,r){return i({},cl,{mnemonic:e,imm:t,abs:n,loc:r})}function hl(e,t,n){return[e].concat(function(e,t){return e.map(function(e){return e[t]})}(t,n))}function dl(){return i({},Wr(Pr,Rr),{source:t.source})}if((r=s())!==l&&Rr===e.length)return r;throw r!==l&&Rr<e.length&&$r({type:"end"}),Vr(Fr,Tr<e.length?e.charAt(Tr):null,Tr<e.length?Wr(Tr,Tr+1):Wr(Tr,Tr))}}},function(e,t,n){"use strict";var r=n(17),a=n(18);Object.defineProperty(t,"__esModule",{value:!0});var l=n(19),i=n(72),o=function(){function e(){r(this,e),this.lineStack=[],this.pcToLocs={},this.insnBitset=new i}return a(e,[{key:"startLine",value:function(e,t){var n={source:l.resolve(e.source),lineNo:e.start.line};this.lineStack.push({loc:n,pc:t})}},{key:"endLine",value:function(e){var t=this.lineStack.pop();if(!t)throw new Error("internal compiler error, mismatching start/end lines in debugInfo");if(e-t.pc>0){var n=this.pcToLocs[t.pc]||[];n.push(t.loc),this.pcToLocs[t.pc]=n}}},{key:"markAsInstruction",value:function(e,t){for(var n=e;n<t;n++)this.insnBitset.add(n)}},{key:"info",value:function(){var e=this.insnBitset.clone();return{pcToLocs:this.pcToLocs,isInstruction:function(t){return e.has(t)}}}}]),e}();t.DebugInfoTracker=o},,function(e,t,n){"use strict";var r=n(17),a=n(18);Object.defineProperty(t,"__esModule",{value:!0});var l=n(32);function i(e){return"".concat(e.toString(16).toUpperCase().padStart(2,"0"))}function o(e){return"".concat(e.toString(16).toUpperCase().padStart(4,"0"))}var u=function(){function e(t,n){var a=this;r(this,e),this.buf=t,this.byte=function(){var e=a.buf.readUInt8(a.curOffs);return a.curOffs++,e},this.print=function(e,t,n){var r=i(t[0]),l=t.length>=2?i(t[1]):"  ",u=t.length>=3?i(t[2]):"  ";a.output.push("".concat(o(e),": ").concat(r," ").concat(l," ").concat(u,"     ").concat(n))},this.output=[],this.curAddr=t.readUInt8(0)+(t.readUInt8(1)<<8),this.curOffs=2,this.disasmOptions=n,this.opToDecl={},Object.keys(l.default).forEach(function(e){for(var t=l.default[e],n=0;n<t.length;n++){var r=t[n];null!==r&&(a.opToDecl[r]={mnemonic:e,decode:t})}})}return a(e,[{key:"disImm",value:function(e,t){var n=this.curAddr,r=this.byte();this.print(n,[t,r],"".concat(e," #").concat(i(r)))}},{key:"disZp",value:function(e,t){var n=this.curAddr,r=this.byte();this.print(n,[t,r],"".concat(e," $").concat(i(r)))}},{key:"disZpX",value:function(e,t){var n=this.curAddr,r=this.byte();this.print(n,[t,r],"".concat(e," $").concat(i(r),",X"))}},{key:"disZpY",value:function(e,t){var n=this.curAddr,r=this.byte();this.print(n,[t,r],"".concat(e," $").concat(i(r),",Y"))}},{key:"disAbs",value:function(e,t){var n=this.curAddr,r=this.byte(),a=this.byte();this.print(n,[t,r,a],"".concat(e," $").concat(o(r+256*a)))}},{key:"disAbsX",value:function(e,t){var n=this.curAddr,r=this.byte(),a=this.byte();this.print(n,[t,r,a],"".concat(e," $").concat(o(r+256*a),",X"))}},{key:"disAbsY",value:function(e,t){var n=this.curAddr,r=this.byte(),a=this.byte();this.print(n,[t,r,a],"".concat(e," $").concat(o(r+256*a),",Y"))}},{key:"disInd",value:function(e,t){var n=this.curAddr,r=this.byte(),a=this.byte();this.print(n,[t,r,a],"".concat(e," ($").concat(o(r+256*a),")"))}},{key:"disIndX",value:function(e,t){var n=this.curAddr,r=this.byte();this.print(n,[t,r],"".concat(e," ($").concat(i(r),",X)"))}},{key:"disIndY",value:function(e,t){var n=this.curAddr,r=this.byte();this.print(n,[t,r],"".concat(e," ($").concat(i(r),"),Y"))}},{key:"disSingle",value:function(e,t){var n=this.curAddr;this.print(n,[t],"".concat(e))}},{key:"disBranch",value:function(e,t){var n=this.curAddr,r=this.byte(),a=n+(r>=128?-(256-r):r)+2;this.print(n,[t,r],"".concat(e," $").concat(o(a)))}},{key:"disUnknown",value:function(e){this.print(this.curAddr,[e],"")}},{key:"disassemble",value:function(){var e=this.buf.byteLength,t=function(e){return!0};this.disasmOptions&&this.disasmOptions.isInstruction&&(t=this.disasmOptions.isInstruction);for(var n=this.curOffs;this.curOffs<e;){this.curAddr+=this.curOffs-n,n=this.curOffs;var r=this.byte(),a=this.opToDecl[r];if(t(this.curAddr)&&void 0!==a){var l=a.decode.indexOf(r);if(0===l){this.disImm(a.mnemonic,r);continue}if(1===l){this.disZp(a.mnemonic,r);continue}if(2===l){this.disZpX(a.mnemonic,r);continue}if(3===l){this.disZpY(a.mnemonic,r);continue}if(4===l){this.disAbs(a.mnemonic,r);continue}if(5===l){this.disAbsX(a.mnemonic,r);continue}if(6===l){this.disAbsY(a.mnemonic,r);continue}if(7===l){this.disInd(a.mnemonic,r);continue}if(8===l){this.disIndX(a.mnemonic,r);continue}if(9===l){this.disIndY(a.mnemonic,r);continue}if(10===l){this.disSingle(a.mnemonic,r);continue}if(11===l){this.disBranch(a.mnemonic,r);continue}}else this.disUnknown(r)}return this.output}}]),e}();t.disassemble=function(e,t){return new u(e,t).disassemble()}}],[[44,1,2]]]);
//# sourceMappingURL=main.a00a46ec.chunk.js.map