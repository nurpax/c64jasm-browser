(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[,function(n,e,t){n.exports={heading:"Editor_heading__3jsuC",layoutContainer:"Editor_layoutContainer__2bFri",editorContainer:"Editor_editorContainer__1wXnR",textarea:"Editor_textarea__28EdL",textareaHighlightOverlay:"Editor_textareaHighlightOverlay__1opTU",textareaHighlightRow:"Editor_textareaHighlightRow__1R6Ia",textareaHighlightRowCurrent:"Editor_textareaHighlightRowCurrent__25KL2",highlightError:"Editor_highlightError__1YeA5",gutter:"Editor_gutter__3CDcX",gutterRow:"Editor_gutterRow__1DNMN",gutterRowSelected:"Editor_gutterRowSelected__3GiGf"}},,,,,,function(n,e,t){n.exports={layoutContainer:"DiagnosticsList_layoutContainer__3Yxfa",diagnostics:"DiagnosticsList_diagnostics__U_t5K",heading:"DiagnosticsList_heading__f0lgX",diagnosticsBox:"DiagnosticsList_diagnosticsBox__NbaZi",diagItem:"DiagnosticsList_diagItem__3otDW",selected:"DiagnosticsList_selected__jbDsD",error:"DiagnosticsList_error__1cDSO"}},,,,,function(n,e,t){n.exports={heading:"Disasm_heading__2ZRjL",layoutContainer:"Disasm_layoutContainer__36ehI",disasmContainer:"Disasm_disasmContainer__2QplX"}},function(n,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=t(29);e.assemble=r.assemble;var l=t(54);e.disassemble=l.disassemble},,,,function(n,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default={ADC:[105,101,117,null,109,125,121,null,97,113,null,null],AND:[41,37,53,null,45,61,57,null,33,49,null,null],ASL:[null,6,22,null,14,30,null,null,null,null,10,null],BIT:[null,36,null,null,44,null,null,null,null,null,null,null],BPL:[null,null,null,null,null,null,null,null,null,null,null,16],BMI:[null,null,null,null,null,null,null,null,null,null,null,48],BVC:[null,null,null,null,null,null,null,null,null,null,null,80],BVS:[null,null,null,null,null,null,null,null,null,null,null,112],BCC:[null,null,null,null,null,null,null,null,null,null,null,144],BCS:[null,null,null,null,null,null,null,null,null,null,null,176],BNE:[null,null,null,null,null,null,null,null,null,null,null,208],BEQ:[null,null,null,null,null,null,null,null,null,null,null,240],BRK:[null,null,null,null,null,null,null,null,null,null,0,null],CMP:[201,197,213,null,205,221,217,null,193,209,null,null],CPX:[224,228,null,null,236,null,null,null,null,null,null,null],CPY:[192,196,null,null,204,null,null,null,null,null,null,null],DEC:[null,198,214,null,206,222,null,null,null,null,null,null],EOR:[73,69,85,null,77,93,89,null,65,81,null,null],CLC:[null,null,null,null,null,null,null,null,null,null,24,null],SEC:[null,null,null,null,null,null,null,null,null,null,56,null],CLI:[null,null,null,null,null,null,null,null,null,null,88,null],SEI:[null,null,null,null,null,null,null,null,null,null,120,null],CLV:[null,null,null,null,null,null,null,null,null,null,184,null],CLD:[null,null,null,null,null,null,null,null,null,null,216,null],SED:[null,null,null,null,null,null,null,null,null,null,248,null],INC:[null,230,246,null,238,254,null,null,null,null,null,null],JMP:[null,null,null,null,76,null,null,108,null,null,null,null],JSR:[null,null,null,null,32,null,null,null,null,null,null,null],LDA:[169,165,181,null,173,189,185,null,161,177,null,null],LDX:[162,166,null,182,174,null,190,null,null,null,null,null],LDY:[160,164,180,null,172,188,null,null,null,null,null,null],LSR:[null,70,86,null,78,94,null,null,null,null,74,null],NOP:[null,null,null,null,null,null,null,null,null,null,234,null],ORA:[9,5,21,null,13,29,25,null,1,17,null,null],TAX:[null,null,null,null,null,null,null,null,null,null,170,null],TXA:[null,null,null,null,null,null,null,null,null,null,138,null],DEX:[null,null,null,null,null,null,null,null,null,null,202,null],INX:[null,null,null,null,null,null,null,null,null,null,232,null],TAY:[null,null,null,null,null,null,null,null,null,null,168,null],TYA:[null,null,null,null,null,null,null,null,null,null,152,null],DEY:[null,null,null,null,null,null,null,null,null,null,136,null],INY:[null,null,null,null,null,null,null,null,null,null,200,null],ROR:[null,102,118,null,110,126,null,null,null,null,106,null],ROL:[null,38,54,null,46,62,null,null,null,null,42,null],RTI:[null,null,null,null,null,null,null,null,null,null,64,null],RTS:[null,null,null,null,null,null,null,null,null,null,96,null],SBC:[233,229,245,null,237,253,249,null,225,241,null,null],STA:[null,133,149,null,141,157,153,null,129,145,null,null],TXS:[null,null,null,null,null,null,null,null,null,null,154,null],TSX:[null,null,null,null,null,null,null,null,null,null,186,null],PHA:[null,null,null,null,null,null,null,null,null,null,72,null],PLA:[null,null,null,null,null,null,null,null,null,null,104,null],PHP:[null,null,null,null,null,null,null,null,null,null,8,null],PLP:[null,null,null,null,null,null,null,null,null,null,40,null],STX:[null,134,null,150,142,null,null,null,null,null,null,null],STY:[null,132,148,null,140,null,null,null,null,null,null,null],"---":[null,null,null,null,null,null,null,null,null,null,null,null]}},,function(n,e,t){"use strict";function r(n,e){return{type:"literal",lit:n,loc:e}}Object.defineProperty(e,"__esModule",{value:!0}),e.mkLiteral=r,e.mkScopeQualifiedIdent=function(n,e,t){return{type:"qualified-ident",path:n,absolute:e,loc:t}},e.mkIdent=function(n,e){return{type:"ident",name:n,loc:e}},e.mkUnary=function(n,e,t){return{type:"unary",op:n,expr:e,loc:t}},e.mkBinaryOp=function(n,e,t,r){return{type:"binary",op:n,left:e,right:t,loc:r}},e.mkExprArray=function(n,e){return{type:"array",list:n,loc:e}},e.mkCallFunc=function(n,e,t){return{type:"callfunc",callee:n,args:null==e?[]:e,loc:t}},e.mkMember=function(n,e,t,r){return{type:"member",object:n,property:e,computed:t,loc:r}},function(n){n[n.Byte=0]="Byte",n[n.Word=1]="Word"}(e.DataSize||(e.DataSize={})),e.mkLabel=function(n,e){return{name:n,loc:e}},e.mkInsn=function(n,e){return{type:"insn",insn:n,loc:e}},e.mkSetPC=function(n,e){return{type:"setpc",pc:n,loc:e}},e.mkData=function(n,e,t){return{type:"data",values:e,dataSize:n,loc:t}},e.mkFill=function(n,e,t){return{type:"fill",numBytes:n,fillValue:e,loc:t}},e.mkAlign=function(n,e){return{type:"align",alignBytes:n,loc:e}},e.mkInclude=function(n,e){return{type:"include",filename:n,loc:e}},e.mkError=function(n,e){return{type:"error",error:n,loc:e}},e.mkBinary=function(n,e,t,r){return{type:"binary",filename:n,size:e,offset:t,loc:r}},e.mkIfElse=function(n,e,t){return{type:"if",cases:n,elseBranch:null!==e?e:[],loc:t}},e.mkFor=function(n,e,t,r){return{type:"for",index:n,list:e,body:t,loc:r}},e.mkMacroArg=function(n){return{ident:n}},e.mkMacro=function(n,e,t,r){return{type:"macro",name:n,args:null==e?[]:e,body:t,loc:r}},e.mkCallMacro=function(n,e,t){return{type:"callmacro",name:n,args:null==e?[]:e,loc:t}},e.mkLet=function(n,e,t){return{type:"let",name:n,value:e,loc:t}},e.mkAssign=function(n,e,t){return{type:"assign",name:n,value:e,loc:t}},e.mkLoadPlugin=function(n,e,t){return{type:"load-plugin",filename:n,moduleName:e,loc:t}},e.mkFilescope=function(n,e){return{type:"filescope",name:n,loc:e}},e.mkAsmLine=function(n,e,t,r){return{label:n,stmt:e,scopedStmts:t,loc:r}},e.objectToAst=function n(e,t){return Array.isArray(e)?{type:"array",values:e.map(function(e){return n(e,t)}),loc:t}:"object"===typeof e?{type:"object",props:Object.keys(e).map(function(r){return{key:r,val:n(e[r],t)}}),loc:t}:"number"===typeof e?r(e,t):"string"===typeof e?r(e,t):void 0}},,,function(n,e,t){n.exports={appTitle:"App_appTitle__2SEQk"}},function(n,e,t){n.exports=t(56)},,,,,function(n,e,t){},function(n,e,t){"use strict";(function(n){var r=t(16),l=t(37),u=t(8),a=t(9);Object.defineProperty(e,"__esModule",{value:!0});var i=t(17),o=t(10),s=t(42),c=t(18),f=t(48),h=t(19),d=t(49),v=t(53);function p(n){return{value:n,errors:!0}}function m(n){return{value:n,errors:!1}}function y(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return e.some(function(n){return void 0!==n&&n.errors})}var b=function(){function n(e,t){u(this,n),this.syms=new Map,this.parent=null,this.children=new Map,this.parent=e,this.name=t}return a(n,[{key:"enter",value:function(e){var t=this.children.get(e);if(void 0!==t)return t;var r=new n(this,e);return this.children.set(e,r),r}},{key:"leave",value:function(){return this.parent}},{key:"findSymbol",value:function(n){for(var e=this;null!==e;e=e.parent){var t=e.syms.get(n);if(void 0!==t)return t}}},{key:"findSymbolPath",value:function(n){if(1==n.length)return this.findSymbol(n[0]);for(var e=this;void 0==e.children.get(n[0]);)if(null==(e=e.parent))return;for(var t=0;t<n.length-1;t++)if(void 0==(e=e.children.get(n[t])))return;return e.syms.get(n[n.length-1])}},{key:"addSymbol",value:function(n,e,t){this.syms.set(n,Object.assign({},e,{seen:t}))}},{key:"updateSymbol",value:function(n,e,t){for(var r=this;null!==r;r=r.parent){if(void 0!==r.syms.get(n))return void r.syms.set(n,Object.assign({},e,{seen:t}))}}}]),n}(),g=function(){function n(){u(this,n),this.passCount=0,this.root=new b(null,""),this.curSymtab=this.root,this.anonScopeCount=0}return a(n,[{key:"startPass",value:function(n){this.curSymtab=this.root,this.anonScopeCount=0,this.passCount=n}},{key:"withAnonScope",value:function(n){var e="__anon_scope_".concat(this.anonScopeCount);this.anonScopeCount++,this.withLabelScope(e,n)}},{key:"withLabelScope",value:function(n,e){this.curSymtab=this.curSymtab.enter(n),e(),this.curSymtab=this.curSymtab.leave()}},{key:"findPath",value:function(n,e){return e?this.root.findSymbolPath(n):this.curSymtab.findSymbolPath(n)}},{key:"findQualifiedSym",value:function(n,e){return this.findPath(n,e)}},{key:"symbolSeen",value:function(n){var e=this.curSymtab.syms.get(n);return void 0!==e&&e.seen==this.passCount}},{key:"declareLabelSymbol",value:function(n,e){var t=n.name,r=n.loc,l=this.curSymtab.syms.get(t);if(void 0==l){var u={type:"label",data:m({addr:e,loc:r})};return this.curSymtab.addSymbol(t,u,this.passCount),!1}if("label"!==l.type)throw new Error("ICE: declareLabelSymbol should be called only on labels");if(l.data.value.addr!==e){var a={type:"label",data:Object.assign({},l.data,{value:Object.assign({},l.data.value,{addr:e})})};return this.curSymtab.updateSymbol(t,a,this.passCount),!0}return this.curSymtab.updateSymbol(t,l,this.passCount),!1}},{key:"declareVar",value:function(n,e){this.curSymtab.addSymbol(n,{type:"var",data:e},this.passCount)}},{key:"updateVar",value:function(n,e){var t={type:"var",data:e};this.curSymtab.updateSymbol(n,t,this.passCount)}},{key:"findMacro",value:function(n,e){var t=this.findPath(n,e);if(void 0!==t&&"macro"==t.type)return t.data}},{key:"declareMacro",value:function(n,e){this.curSymtab.addSymbol(n,{type:"macro",data:e},this.passCount)}},{key:"dumpLabels",value:function(n){var e=[],t=function(n,t){e.push({prefix:"".concat(n,"/").concat(t.name),sym:t})};t("",this.root);for(var r=[];e.length>0;){var u=e.pop(),a=!0,i=!1,o=void 0;try{for(var s,c=u.sym.syms[Symbol.iterator]();!(a=(s=c.next()).done);a=!0){var f=s.value,h=l(f,2),d=h[0],v=h[1];"label"==v.type&&r.push({name:"".concat(u.prefix,"/").concat(d),addr:v.data.value.addr,size:0})}}catch(L){i=!0,o=L}finally{try{a||null==c.return||c.return()}finally{if(i)throw o}}var p=!0,m=!1,y=void 0;try{for(var b,g=u.sym.children[Symbol.iterator]();!(p=(b=g.next()).done);p=!0){var k=b.value,S=l(k,2),E=(S[0],S[1]);t(u.prefix,E)}}catch(L){m=!0,y=L}finally{try{p||null==g.return||g.return()}finally{if(m)throw y}}}var A=r.sort(function(n,e){return n.addr-e.addr}),x=A.length;if(x>0){for(var C=1;C<x;C++)A[C-1].size=A[C].addr-A[C-1].addr;var w=A[x-1];w.size=n-w.addr}return A}}]),n}();function k(n){return{source:n,start:{offset:0,line:0,column:0},end:{offset:0,line:0,column:0}}}function S(n){var e=typeof n;return"object"===e&&n instanceof Array?"array":e}function E(n){return"".concat(n.absolute?"::":"").concat(n.path.join("::"))}var A=function(n,e,t){var r=t(n.value,e.value);return m("boolean"==typeof r?r?1:0:r)},x=function(n,e){if(y(n))return p(0);var t=e(n.value);return m("boolean"==typeof t?t?1:0:t)},C=function(){function e(n){var t=this;u(this,e),this.binary=[],this.parseCache=new d.default,this.pluginCache=new Map,this.includeStack=[],this.codePC=0,this.pass=0,this.needPass=!1,this.scopes=new g,this.errorList=[],this.outOfRangeBranches=[],this.debugInfo=new v.DebugInfoTracker,this.errors=function(){var n=new Set(t.errorList.map(function(n){return JSON.stringify(n)}));return r(n).map(function(n){var e=JSON.parse(n),t=e.loc,r=e.msg,l="<unknown>:1:1: error: ".concat(r);return t&&(l="".concat(t.source,":").concat(t.start.line,":").concat(t.start.column,": error: ").concat(r)),{loc:t,msg:r,formatted:l}})},this.readFileSyncFunc=n.readFileSync}return a(e,[{key:"readFileSync",value:function(n,e){return this.readFileSyncFunc(n,e)}},{key:"prg",value:function(){return n.from([1,8].concat(this.binary))}},{key:"parse",value:function(n,e){var t=this,r=void 0==e?k(n):e;return this.parseCache.parse(n,e,function(n,e){return t.guardedReadFileSync(n,r)})}},{key:"requirePlugin",value:function(n){var e=this.pluginCache.get(n);if(void 0!==e)return e;var t=s(o.resolve(this.makeSourceRelativePath(n)));return this.pluginCache.set(n,t),t}},{key:"peekSourceStack",value:function(){var n=this.includeStack.length;return this.includeStack[n-1]}},{key:"pushSource",value:function(n){this.includeStack.push(n)}},{key:"popSource",value:function(){this.includeStack.pop()}},{key:"anyErrors",value:function(){return 0!==this.errorList.length}},{key:"addError",value:function(n,e){this.errorList.push({msg:n,loc:e})}},{key:"startPass",value:function(n){this.codePC=2049,this.pass=n,this.needPass=!1,this.binary=[],this.errorList=[],this.scopes.startPass(n),this.outOfRangeBranches=[],this.debugInfo=new v.DebugInfoTracker}},{key:"emitBasicHeader",value:function(){var n=this;this.emit(12),this.emit(8),this.emit(0),this.emit(0),this.emit(158);[1e4,1e3,100,10,1].forEach(function(e){2061>=e&&n.emit(48+2061/e%10)}),this.emit(0),this.emit(0),this.emit(0)}},{key:"emitBinary",value:function(n){var e=n.filename,t=this.evalExprToString(e,"!binary filename"),r=m(0),l=void 0;if(null!==n.size&&(null!==n.offset&&(r=this.evalExprToInt(n.offset,"!binary offset")),null!==n.size&&(l=this.evalExprToInt(n.size,"!binary size"))),!y(t,r,l)){var u=this.makeSourceRelativePath(t.value),a=this.guardedReadFileSync(u,n.loc),i=a.byteLength;l&&(i=l.value);for(var o=0;o<i;o++)this.emit(a.readUInt8(o+r.value))}}},{key:"evalExprType",value:function(n,e,t){var r=this.evalExpr(n),l=r.errors,u=r.value;return l||typeof u===e?r:(this.addError("Expecting ".concat(t," to be '").concat(e,"' type, got '").concat(S(u),"'"),n.loc),{errors:!0,value:u})}},{key:"evalExprToInt",value:function(n,e){return this.evalExprType(n,"number",e)}},{key:"evalExprToString",value:function(n,e){return this.evalExprType(n,"string",e)}},{key:"evalExpr",value:function(n){var e=this;switch(n.type){case"binary":var t=this.evalExpr(n.left),l=this.evalExpr(n.right);if(y(t,l))return p(0);if(typeof t.value!==typeof l.value)return this.addError("Binary expression operands are expected to be of the same type.  Got: '".concat(S(t.value),"' (left), '").concat(S(l.value),"' (right)"),n.loc),p(0);if("string"!==typeof t.value&&"number"!==typeof t.value)return this.addError("Binary expression operands can only operator on numbers or strings.  Got: '".concat(S(t.value),"'"),n.loc),p(0);if("string"==typeof t.value){var u=["+","==","<","<=",">",">="];if(u.indexOf(n.op)<0)return this.addError("'".concat(n.op,"' operator is not supported for strings.  Valid operators for strings are: ").concat(u.join(", ")),n.loc),p(0)}switch(n.op){case"+":return A(t,l,function(n,e){return n+e});case"-":return A(t,l,function(n,e){return n-e});case"*":return A(t,l,function(n,e){return n*e});case"/":return A(t,l,function(n,e){return n/e});case"%":return A(t,l,function(n,e){return n%e});case"&":return A(t,l,function(n,e){return n&e});case"|":return A(t,l,function(n,e){return n|e});case"^":return A(t,l,function(n,e){return n^e});case"<<":return A(t,l,function(n,e){return n<<e});case">>":return A(t,l,function(n,e){return n>>e});case"==":return A(t,l,function(n,e){return n==e});case"!=":return A(t,l,function(n,e){return n!=e});case"<":return A(t,l,function(n,e){return n<e});case"<=":return A(t,l,function(n,e){return n<=e});case">":return A(t,l,function(n,e){return n>e});case">=":return A(t,l,function(n,e){return n>=e});case"&&":return A(t,l,function(n,e){return n&&e});case"||":return A(t,l,function(n,e){return n||e});default:throw new Error("Unhandled binary operator ".concat(n.op))}case"unary":var a=this.evalExprToInt(n.expr,"operand");if(a.errors)return a;switch(n.op){case"+":return x(a,function(n){return+n});case"-":return x(a,function(n){return-n});case"~":return x(a,function(n){return~n});default:throw new Error("Unhandled unary operator ".concat(n.op))}case"literal":return m(n.lit);case"array":var i=n.list.map(function(n){return e.evalExpr(n)});return{value:i.map(function(n){return n.value}),errors:y.apply(void 0,r(i))};case"ident":throw new Error("should not see an ident here -- if you do, it is probably a wrong type node in parser");case"qualified-ident":var o=this.scopes.findQualifiedSym(n.path,n.absolute);if(void 0==o)return this.pass>=1?(this.addError("Undefined symbol '".concat(E(n),"'"),n.loc),p(0)):(this.needPass=!0,m(0));switch(o.type){case"label":return{errors:o.data.errors,value:o.data.value.addr};case"var":return o.seen<this.pass&&this.addError("Undeclared variable '".concat(E(n)),n.loc),o.data;case"macro":return this.addError("Must have a label or a variable identifier here, got macro name",n.loc),p(0)}break;case"member":var s=this.evalExpr(n.object),c=s.value;if(void 0==c)return this.addError("Cannot access properties of an unresolved symbol'",n.loc),p(0);var f=function(n,t){return n in c||(e.addError("Property '".concat(n,"' does not exist in object"),t),!1)},h=function(n,t){if("ident"!==n.property.type)e.addError("".concat(t," property must be a string, got ").concat(S(n.property.type)),n.loc);else if(f(n.property.name,n.property.loc))return m(c[n.property.name]);return p(0)};if(c instanceof Array){if(!n.computed)return h(n,"Array");var d=this.evalExprToInt(n.property,"array index"),v=d.errors,b=d.value;return v?p(0):b in c?m(c[b]):(this.addError("Out of bounds array index ".concat(b),n.property.loc),p(0))}if("object"==typeof c){if(n.computed){var g=this.evalExpr(n.property),k=g.errors,C=g.value;return k?p(0):"string"!==typeof C&&"number"!==typeof C?(this.addError("Object property must be a string or an integer, got ".concat(S(C)),n.loc),p(0)):f(C,n.property.loc)?m(c[C]):p(0)}return h(n,"Object")}return 0!==this.pass?(s.errors||(n.computed?this.addError("Cannot use []-operator on non-array/object values",n.loc):this.addError("Cannot use the dot-operator on non-object values",n.loc)),p(0)):m(0);case"callfunc":var w=this.evalExpr(n.callee),L=n.args.map(function(n){return e.evalExpr(n)});if(w.errors)return p(0);if("function"!==typeof w.value)return this.addError("Callee must be a function type.  Got '".concat(S(w),"'"),n.loc),p(0);if(y.apply(void 0,r(L)))return p(0);try{return m(w.value(L.map(function(n){return n.value})))}catch(I){return"qualified-ident"==n.callee.type?this.addError("Call to '".concat(E(n.callee),"' failed with an error: ").concat(I.message),n.loc):this.addError("Plugin call failed with an error: ".concat(I.message),n.loc),p(0)}}throw new Error("should be unreachable?")}},{key:"emit",value:function(n){this.binary.push(n),this.codePC+=1}},{key:"emit16",value:function(n){this.emit(255&n),this.emit(n>>8&255)}},{key:"checkSingle",value:function(n){return null!==n&&(this.emit(n),!0)}},{key:"checkImm",value:function(n,e){if(null===e||null===n)return!1;var t=this.evalExprToInt(n,"immediate");return y(t)||(this.emit(e),this.emit(t.value)),!0}},{key:"checkAbs",value:function(n,e,t){if(null===e||null===n)return!1;var r=this.evalExprToInt(n,"absolute address");if(y(r))return!0;var l=r.value;if(8===t){if(l<0||l>=1<<t)return!1;this.emit(e),this.emit(l)}else this.emit(e),this.emit16(l);return!0}},{key:"checkBranch",value:function(n,e){if(null===e||null===n)return!1;var t=this.evalExpr(n);if(y(t))return!0;if("number"!==typeof t.value)return this.addError("Expecting branch label to evaluate to integer, got ".concat(S(t.value)),n.loc),!0;var r=t.value-this.codePC-2;return this.emit(e),(r>127||r<-128)&&this.outOfRangeBranches.push({loc:n.loc,offset:r}),this.emit(255&r),!0}},{key:"setPC",value:function(n){var e=this.evalExprToInt(n,"pc");if(!y(e)){var t=e.value;for(this.codePC>t&&this.addError("Cannot set program counter to a smaller value than current (current: $".concat(f.toHex16(this.codePC),", trying to set $").concat(f.toHex16(t),")"),n.loc);this.codePC<t;)this.emit(0)}}},{key:"guardedReadFileSync",value:function(e,t){try{return this.readFileSync(e)}catch(r){return this.addError("Couldn't open file '".concat(e,"'"),t),n.from([])}}},{key:"fileInclude",value:function(n){var e=this.evalExprToString(n.filename,"!include filename");if(!y(e)){var t=e.value,r=this.makeSourceRelativePath(t);this.pushSource(r),this.assemble(r,n.loc),this.popSource()}}},{key:"fillBytes",value:function(n){var e=this.evalExprToInt(n.numBytes,"!fill num_bytes"),t=this.evalExprToInt(n.fillValue,"!fill value");if(!y(e,t)){var r=t.value;if(r<0||r>=256)this.addError("!fill value to repeat must be in 8-bit range, '".concat(r,"' given"),n.fillValue.loc);else{var l=e.value;if(l<0)this.addError("!fill repeat count must be >= 0, got ".concat(l),n.numBytes.loc);else for(var u=0;u<l;u++)this.emit(r)}}}},{key:"alignBytes",value:function(n){var e=this.evalExprToInt(n.alignBytes,"alignment");if(!y(e)){var t=e.value;if(t<1)this.addError("Alignment must be a positive integer, ".concat(t," given"),n.alignBytes.loc);else if(0==(t&t-1))for(;0!=(this.codePC&t-1);)this.emit(0);else this.addError("Alignment must be a power of two, ".concat(t," given"),n.loc)}}},{key:"withAnonScope",value:function(n,e){if(null!==n)return this.withLabelScope(n,e);this.scopes.withAnonScope(e)}},{key:"withLabelScope",value:function(n,e){this.scopes.withLabelScope(n,e)}},{key:"emit8or16",value:function(n,e){8!=e?this.emit16(n):this.emit(n)}},{key:"emitData",value:function(n,e){for(var t=0;t<n.length;t++){var r=this.evalExpr(n[t]);if(!y(r)){var l=r.value;if("number"==typeof l)this.emit8or16(l,e);else if(l instanceof Array)for(var u in l)this.emit8or16(l[u],e);else this.addError("Only literal (int constants) or array types can be emitted.  Got ".concat(S(l)),n[t].loc)}}}},{key:"makeFunction",value:function(n,e){var t=this;return function(e){return n.apply(void 0,[{readFileSync:function(n){return t.readFileSync(n)},resolveRelative:function(n){return t.makeSourceRelativePath(n)}}].concat(r(e)))}}},{key:"bindFunction",value:function(n,e,t){this.scopes.declareVar(n.name,m(this.makeFunction(e,t)))}},{key:"bindPlugin",value:function(n,e){var t=n.moduleName;if("function"==typeof e&&this.bindFunction(t,e,n.loc),"object"==typeof e){var r={},l=Object.keys(e);for(var u in l){var a=l[u],i=e[a];r[a]=this.makeFunction(i,n.loc)}this.scopes.declareVar(t.name,m(r))}}},{key:"checkDirectives",value:function(n,e){var t=this;switch(n.type){case"data":this.emitData(n.values,n.dataSize===h.DataSize.Byte?8:16);break;case"fill":this.fillBytes(n);break;case"align":this.alignBytes(n);break;case"setpc":this.setPC(n.pc);break;case"binary":this.emitBinary(n);break;case"include":this.fileInclude(n);break;case"error":var r=this.evalExprToString(n.error,"error message");if(!y(r))return void this.addError(r.value,n.loc);break;case"if":var u=n.cases,a=n.elseBranch,i=function(n){var r,a=l(u[n],2),i=a[0],o=a[1],s=t.evalExpr(i);if(!y(s)&&(!0===(r=s.value)||0!=r))return{v:t.withAnonScope(e,function(){t.assembleLines(o)})}};for(var o in u){var s=i(o);if("object"===typeof s)return s.v}return this.withAnonScope(e,function(){t.assembleLines(a)});case"for":var c=function(){var r=n.index,l=n.list,u=n.body,a=(n.loc,t.evalExpr(l));if(y(a))return{v:void 0};var i=a.value;if(!(i instanceof Array))return t.addError("for-loop range must be an array expression (e.g., a range() or an array)",l.loc),{v:void 0};for(var o=function(n){var l=null;null!==e&&(l="".concat(e,"__").concat(n)),t.withAnonScope(l,function(){return t.scopes.declareVar(r.name,m(i[n])),t.assembleLines(u)})},s=0;s<i.length;s++)o(s);return"break"}();switch(c){case"break":break;default:if("object"===typeof c)return c.v}case"macro":var f=n.name;n.args,n.body;if(void 0!==this.scopes.findMacro([f.name],!1)&&this.scopes.symbolSeen(f.name))return void this.addError("Macro '".concat(f.name,"' already defined"),f.loc);this.scopes.declareMacro(f.name,n);break;case"callmacro":var d=n.name,v=n.args,p=this.scopes.findMacro(d.path,d.absolute),b=v.map(function(n){return t.evalExpr(n)});if(void 0==p)return void this.addError("Undefined macro '".concat(E(d),"'"),d.loc);if(p.args.length!==v.length)return void this.addError("Macro '".concat(E(d),"' declared with ").concat(p.args.length," args but called here with ").concat(v.length),d.loc);this.withAnonScope(e,function(){for(var n=0;n<b.length;n++){var e=p.args[n].ident.name;t.scopes.declareVar(e,b[n])}t.assembleLines(p.body)});break;case"let":var g=n.name,k=this.scopes.findQualifiedSym([g.name],!1),S=this.evalExpr(n.value);if(void 0!==k&&this.scopes.symbolSeen(g.name))return void this.addError("Variable '".concat(g.name,"' already defined"),n.loc);this.scopes.declareVar(g.name,S);break;case"assign":var A=n.name;if(1!==n.name.path.length||n.name.absolute)return void this.addError("Only symbol names in the current (or owning) scopes are allowed for assignment",n.loc);var x=this.scopes.findQualifiedSym(n.name.path,n.name.absolute);if(void 0==x)return void this.addError("Assignment to undeclared variable '".concat(E(A),"'"),n.loc);if("var"!==x.type)return void this.addError("Assignment to symbol '".concat(E(A),"' that is not a variable.  Its type is '").concat(x.type,"'"),n.loc);var C=this.evalExpr(n.value);this.scopes.updateVar(A.path[0],C);break;case"load-plugin":var w=this.evalExprToString(n.filename,"plugin filename");if(y(w))return;var L=this.requirePlugin(w.value);this.bindPlugin(n,L);break;case"filescope":return void this.addError("The !filescope directive is only allowed as the first directive in a source file",n.loc);default:return void this.addError("unknown directive ".concat(n.type),n.loc)}}},{key:"assembleLines",value:function(n){var e=this;if(null!==n&&0!=n.length&&0!=n.length){for(var t=function(n){for(var t=0;t<n.length;t++)e.debugInfo.startLine(n[t].loc,e.codePC),e.assembleLine(n[t]),e.debugInfo.endLine(e.codePC)},r=0;r<n.length;){var l=n[r],u=l.label,a=l.stmt,i=l.scopedStmts;if(null!=u||null!=a||null!=i)break;r++}if(!(r>=n.length)){var o=n[r];return null!=o.stmt&&"filescope"==o.stmt.type?(this.checkAndDeclareLabel(o.stmt.name),this.withLabelScope(o.stmt.name.name,function(){return t(n.slice(r+1))})):t(n)}}}},{key:"checkAndDeclareLabel",value:function(n){this.scopes.symbolSeen(n.name)?this.addError("Symbol '".concat(n.name,"' already defined"),n.loc):this.scopes.declareLabelSymbol(n,this.codePC)&&(this.needPass=!0)}},{key:"assembleLine",value:function(n){var e=this;if(null!=n.label||null!=n.stmt||null!=n.scopedStmts){null!==n.label&&this.checkAndDeclareLabel(n.label);var t=n.scopedStmts;if(null==t){if(null!==n.stmt)if("insn"===n.stmt.type){var r=n.stmt.insn,l=i.default[r.mnemonic.toUpperCase()];if(void 0!==l){if(null===r.imm&&null===r.abs&&null===r.absx&&null===r.absy&&null===r.absind&&this.checkSingle(l[10]))return;if(this.checkImm(r.imm,l[0]))return;if(this.checkAbs(r.abs,l[1],8))return;if(this.checkAbs(r.absx,l[2],8))return;if(this.checkAbs(r.absy,l[3],8))return;if(this.checkAbs(r.absx,l[5],16))return;if(this.checkAbs(r.absy,l[6],16))return;if(this.checkAbs(r.absind,l[7],16))return;if(this.checkAbs(r.indx,l[8],8))return;if(this.checkAbs(r.indy,l[9],8))return;if(this.checkAbs(r.abs,l[4],16))return;if(this.checkBranch(r.abs,l[11]))return;this.addError("Couldn't encode instruction '".concat(r.mnemonic,"'"),n.loc)}else this.addError("Unknown mnemonic '".concat(r.mnemonic,"'"),n.loc)}else this.checkDirectives(n.stmt,null==n.label?null:n.label.name)}else{if(!n.label)throw new Error("ICE: line.label cannot be undefined");this.withLabelScope(n.label.name,function(){e.assembleLines(t)})}}}},{key:"makeSourceRelativePath",value:function(n){var e=this.peekSourceStack();return o.join(o.dirname(e),n)}},{key:"assemble",value:function(n,e){try{var t=this.parse(n,e);this.assembleLines(t)}catch(r){if(!("name"in r&&"SyntaxError"==r.name)){if("name"in r&&"semantic"==r.name)return;throw r}this.addError("Syntax error: ".concat(r.message),Object.assign({},r.location,{source:this.peekSourceStack()}))}}},{key:"_requireType",value:function(n,e){if(typeof n==e)return n;this.addError("Expecting a ".concat(e," value, got ").concat(S(n)),n.loc)}},{key:"requireString",value:function(n){return this._requireType(n,"string")}},{key:"requireNumber",value:function(n){return this._requireType(n,"number")}},{key:"registerPlugins",value:function(){var n=this,e=function(e,t){n.scopes.declareVar(e,m(t))};e("loadJson",function(e){var t=n.requireString(e[0]),r=n.makeSourceRelativePath(t);return JSON.parse(n.readFileSync(r,"utf-8"))}),e("range",function(e){var t=0,r=void 0;if(1==e.length)r=n.requireNumber(e[0]);else{if(2!=e.length)throw new Error("Invalid number of args to 'range'.  Expecting 1 or 2 arguments.");t=n.requireNumber(e[0]),r=n.requireNumber(e[1])}if(r==t)return[];if(r<t)throw new Error("range 'end' must be larger or equal to 'start'");return Array(r-t).fill(null).map(function(n,e){return e+t})})}},{key:"dumpLabels",value:function(){return this.scopes.dumpLabels(this.codePC)}}]),e}(),w={readFileSync:c.readFileSync};e.assemble=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:w,r=new C(t);r.pushSource(e);var l=0;do{if(r.startPass(l),r.registerPlugins(),r.assemble(e,k(e)),l>0&&r.anyErrors())return{prg:n.from([]),labels:[],debugInfo:void 0,errors:r.errors()};if(l>10)return void console.error("Exceeded max pass limit ".concat(10));if(l+=1,!r.needPass&&0!=r.outOfRangeBranches.length){for(var u in r.outOfRangeBranches){var a=r.outOfRangeBranches[u];r.addError("Branch target too far (must fit in signed 8-bit range, got ".concat(a.offset,")"),a.loc)}break}}while(r.needPass);return r.popSource(),{prg:r.prg(),errors:r.errors(),labels:r.dumpLabels(),debugInfo:r.debugInfo}}}).call(this,t(30).Buffer)},,,,,,,,,,,,,,,,,,function(n,e){function t(n){var e=new Error("Cannot find module '"+n+"'");throw e.code="MODULE_NOT_FOUND",e}t.keys=function(){return[]},t.resolve=t,n.exports=t,t.id=47},function(n,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.toHex16=function(n){return n.toString(16).padStart(4,"0")}},function(n,e,t){"use strict";var r=t(8),l=t(9);Object.defineProperty(e,"__esModule",{value:!0});var u=t(50),a=function(){function n(){r(this,n),this.filenameToSource=new Map,this.sourceToAst=new Map}return l(n,[{key:"getFileContents",value:function(n,e,t){var r=this.filenameToSource.get(n);if(void 0!==r)return r;var l=t(n,e);return this.filenameToSource.set(n,l),l}},{key:"parse",value:function(n,e,t){var r=this.getFileContents(n,e,t),l=this.sourceToAst.get(n);if(void 0!==l)return l;var a=u.parse(r.toString(),{source:n});return this.sourceToAst.set(n,a),a}}]),n}();e.default=a},function(n,e,t){"use strict";var r=t(51),l=t(16);function u(n,e,t,r){this.message=n,this.expected=e,this.found=t,this.location=r,this.name="SyntaxError","function"===typeof Error.captureStackTrace&&Error.captureStackTrace(this,u)}!function(n,e){function t(){this.constructor=n}t.prototype=e.prototype,n.prototype=new t}(u,Error),u.buildMessage=function(n,e){var t={literal:function(n){return'"'+l(n.text)+'"'},class:function(n){var e,t="";for(e=0;e<n.parts.length;e++)t+=n.parts[e]instanceof Array?u(n.parts[e][0])+"-"+u(n.parts[e][1]):u(n.parts[e]);return"["+(n.inverted?"^":"")+t+"]"},any:function(n){return"any character"},end:function(n){return"end of input"},other:function(n){return n.description}};function r(n){return n.charCodeAt(0).toString(16).toUpperCase()}function l(n){return n.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(n){return"\\x0"+r(n)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(n){return"\\x"+r(n)})}function u(n){return n.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(n){return"\\x0"+r(n)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(n){return"\\x"+r(n)})}return"Expected "+function(n){var e,r,l,u=new Array(n.length);for(e=0;e<n.length;e++)u[e]=(l=n[e],t[l.type](l));if(u.sort(),u.length>0){for(e=1,r=1;e<u.length;e++)u[e-1]!==u[e]&&(u[r]=u[e],r++);u.length=r}switch(u.length){case 1:return u[0];case 2:return u[0]+" or "+u[1];default:return u.slice(0,-1).join(", ")+", or "+u[u.length-1]}}(n)+" but "+function(n){return n?'"'+l(n)+'"':"end of input"}(e)+" found."},n.exports={SyntaxError:u,parse:function(n,e){e=void 0!==e?e:{};var a,i={},o={statements:sr},s=sr,c="\n",f=tr("\n",!1),h=function(n,e){return kl(n,e,1)},d=";",v=tr(";",!1),p={type:"any"},m=function(n){return n},y=function(n,e){return yl.mkAsmLine(n,null,e,Sl())},b=function(n,e){return yl.mkAsmLine(n,e,null,Sl())},g=function(n){return yl.mkAsmLine(n,null,null,Sl())},k=function(n){return yl.mkAsmLine(null,n,null,Sl())},S=function(n){return yl.mkAsmLine(null,n,null,Sl())},E=function(){return yl.mkAsmLine(null,null,null,Sl())},A=function(n){return n},x=function(n){return yl.mkInsn(n,Sl())},C=":",w=tr(":",!1),L=function(n){return yl.mkLabel(n,Sl())},I=function(n){return yl.mkSetPC(n,Sl())},_=function(n,e){var t="byte"==n?yl.DataSize.Byte:yl.DataSize.Word;return yl.mkData(t,e,Sl())},O=function(n,e){return yl.mkFill(n,e,Sl())},R=function(n){return yl.mkInclude(n,Sl())},T=function(n,e){var t=null,r=null;return null!==e&&(t=e[1],r=e[3]),yl.mkBinary(n,t,r,Sl())},D=function(n,e,t,r){var u=[n].concat(l(t.map(function(n){return n.condition}))),a=[e].concat(l(t.map(function(n){return n.trueBranch}))),i=u.map(function(n,e){return[n,a[e]]});return yl.mkIfElse(i,r,Sl())},j="in",P=tr("in",!1),B=function(n,e,t){return yl.mkFor(n,e,t,Sl())},M=function(n,e,t){return yl.mkMacro(n,e,t,Sl())},F="+",N=tr("+",!1),U=function(n,e){return yl.mkCallMacro(n,e,Sl())},X=function(n,e){return yl.mkLet(n,e,Sl())},W=function(n,e){return yl.mkAssign(n,e,Sl())},z="as",Y=tr("as",!1),V=function(n,e){return yl.mkLoadPlugin(n,e,Sl())},H=function(n){return yl.mkError(n,Sl())},q=function(n){return yl.mkAlign(n,Sl())},K=function(n){return yl.mkFilescope(n,Sl())},$=function(n,e){return{condition:n,trueBranch:e}},Z=function(n){return n},Q='"',J=tr('"',!1),G=function(n){return yl.mkLiteral(n.join(""),Sl())},nn=function(n){return n},en=function(n){return yl.mkIdent(n,Sl())},tn=function(n,e){return kl(n,e,1)},rn=function(n){return yl.mkMacroArg(n)},ln=function(n,e){return gl(n,e,null,Sl())},un="x",an=tr("x",!1),on=function(n,e){return function(n,e,t){return r({},bl,{mnemonic:n,indx:e,loc:t})}(n,e,Sl())},sn="y",cn=tr("y",!1),fn=function(n,e){return function(n,e,t){return r({},bl,{mnemonic:n,indy:e,loc:t})}(n,e,Sl())},hn=function(n,e){return function(n,e,t){return r({},bl,{mnemonic:n,absind:e,loc:t})}(n,e,Sl())},dn=function(n,e,t){return"x"===t?function(n,e,t){return r({},bl,{mnemonic:n,absx:e,loc:t})}(n,e,Sl()):function(n,e,t){return r({},bl,{mnemonic:n,absy:e,loc:t})}(n,e,Sl())},vn=function(n,e){return gl(n,null,e,Sl())},pn=function(n){return gl(n,null,null,Sl())},mn=function(){return n.substring(Qt,Zt)},yn=function(n){return n},bn="::",gn=tr("::",!1),kn=function(n,e){return yl.mkScopeQualifiedIdent(kl(n,e,1),!1,Sl())},Sn=function(n,e){return yl.mkScopeQualifiedIdent(kl(n,e,1),!0,Sl())},En=function(n){return yl.mkIdent(n,Sl())},An=function(n){return n},xn="#",Cn=tr("#",!1),wn=function(n,e){if(null!==n){if("lo"===n)return yl.mkBinaryOp("&",e,yl.mkLiteral(255,Sl(),Sl()));var t=yl.mkLiteral(8,Sl()),r=yl.mkLiteral(255,Sl());return yl.mkBinaryOp("&",yl.mkBinaryOp(">>",e,t,Sl()),r,Sl())}return e},Ln=function(){return"lo"},In=function(){return"hi"},_n=function(n){return n},On=function(n,e){return e.reduce(function(n,e){return yl.mkBinaryOp(e[0],n,e[1],Sl())},n)},Rn=function(n,e){return yl.mkUnary(n,e,Sl())},Tn=function(n){return n},Dn=function(n,e){return{property:e,computed:!0}},jn=function(n,e){return{property:yl.mkIdent(e,Sl()),computed:!1}},Pn=function(n,e){return e.reduce(function(n,e){return yl.mkMember(n,e.property,e.computed,Sl())},n)},Bn=function(n,e){return yl.mkCallFunc(n,e,Sl())},Mn=function(n){return yl.mkLiteral(n,Sl())},Fn=function(n){return n},Nn=function(n){return n},Un="$",Xn=tr("$",!0),Wn=function(n){return parseInt(n,16)},zn="%",Yn=tr("%",!1),Vn=function(n){return parseInt(n,2)},Hn=function(n){return parseInt(n,10)},qn=function(n){return yl.mkExprArray(null===n?[]:n,Sl())},Kn=/^[a-zA-Z_]/,$n=rr([["a","z"],["A","Z"],"_"],!1,!1),Zn=/^[a-zA-Z_0-9]/,Qn=rr([["a","z"],["A","Z"],"_",["0","9"]],!1,!1),Jn=/^[0-9]/,Gn=rr([["0","9"]],!1,!1),ne=/^[0-1]/,ee=rr([["0","1"]],!1,!1),te=/^[0-9a-f]/,re=rr([["0","9"],["a","f"]],!1,!1),le=lr("whitespace"),ue=/^[ \t\r]/,ae=rr([" ","\t","\r"],!1,!1),ie="!align",oe=tr("!align",!1),se="!byte",ce=tr("!byte",!1),fe=function(){return"byte"},he="!word",de=tr("!word",!1),ve=function(){return"word"},pe="!binary",me=tr("!binary",!1),ye="!let",be=tr("!let",!1),ge="!macro",ke=tr("!macro",!1),Se="!if",Ee=tr("!if",!1),Ae="else",xe=tr("else",!1),Ce="elif",we=tr("elif",!1),Le="!error",Ie=tr("!error",!1),_e="!for",Oe=tr("!for",!1),Re="!include",Te=tr("!include",!1),De="!fill",je=tr("!fill",!1),Pe="!use",Be=tr("!use",!1),Me="!filescope",Fe=tr("!filescope",!1),Ne="[",Ue=tr("[",!1),Xe=function(n){return n},We="]",ze=tr("]",!1),Ye="(",Ve=tr("(",!1),He=")",qe=tr(")",!1),Ke="{",$e=tr("{",!1),Ze="}",Qe=tr("}",!1),Je=".",Ge=tr(".",!1),nt=(tr("->",!1),tr("++",!1),tr("--",!1),"&"),et=tr("&",!1),tt=/^[&]/,rt=rr(["&"],!1,!1),lt="*",ut=tr("*",!1),at=/^[=]/,it=rr(["="],!1,!1),ot=/^[+=]/,st=rr(["+","="],!1,!1),ct="-",ft=tr("-",!1),ht=/^[\-=>]/,dt=rr(["-","=",">"],!1,!1),vt="~",pt=tr("~",!1),mt="!",yt=tr("!",!1),bt="/",gt=tr("/",!1),kt=/^[=>]/,St=rr(["=",">"],!1,!1),Et="<<",At=tr("<<",!1),xt=">>",Ct=tr(">>",!1),wt="<",Lt=tr("<",!1),It=">",_t=tr(">",!1),Ot="<=",Rt=tr("<=",!1),Tt=">=",Dt=tr(">=",!1),jt="==",Pt=tr("==",!1),Bt="!=",Mt=tr("!=",!1),Ft="^",Nt=tr("^",!1),Ut="|",Xt=tr("|",!1),Wt="&&",zt=tr("&&",!1),Yt="||",Vt=tr("||",!1),Ht=(tr("?",!1),rr([">"],!1,!1),tr("...",!1),"="),qt=tr("=",!1),Kt=(tr("*=",!1),tr("/=",!1),tr("%=",!1),tr("+=",!1),tr("-=",!1),tr("<<=",!1),tr(">>=",!1),tr("&=",!1),tr("^=",!1),tr("|=",!1),","),$t=tr(",",!1),Zt=0,Qt=0,Jt=[{line:1,column:1}],Gt=0,nr=[],er=0;if("startRule"in e){if(!(e.startRule in o))throw new Error("Can't start parsing from rule \""+e.startRule+'".');s=o[e.startRule]}function tr(n,e){return{type:"literal",text:n,ignoreCase:e}}function rr(n,e,t){return{type:"class",parts:n,inverted:e,ignoreCase:t}}function lr(n){return{type:"other",description:n}}function ur(e){var t,r=Jt[e];if(r)return r;for(t=e-1;!Jt[t];)t--;for(r={line:(r=Jt[t]).line,column:r.column};t<e;)10===n.charCodeAt(t)?(r.line++,r.column=1):r.column++,t++;return Jt[e]=r,r}function ar(n,e){var t=ur(n),r=ur(e);return{start:{offset:n,line:t.line,column:t.column},end:{offset:e,line:r.line,column:r.column}}}function ir(n){Zt<Gt||(Zt>Gt&&(Gt=Zt,nr=[]),nr.push(n))}function or(n,e,t){return new u(u.buildMessage(n,e),n,e,t)}function sr(){var e,t,r,l,u,a;if(e=Zt,(t=cr())!==i){for(r=[],l=Zt,10===n.charCodeAt(Zt)?(u=c,Zt++):(u=i,0===er&&ir(f)),u!==i&&(a=cr())!==i?l=u=[u,a]:(Zt=l,l=i);l!==i;)r.push(l),l=Zt,10===n.charCodeAt(Zt)?(u=c,Zt++):(u=i,0===er&&ir(f)),u!==i&&(a=cr())!==i?l=u=[u,a]:(Zt=l,l=i);r!==i?(Qt=e,e=t=h(t,r)):(Zt=e,e=i)}else Zt=e,e=i;return e}function cr(){var e,t,r,l,u,a,o,s;if(e=Zt,zr()!==i)if((t=function(){var n,e,t,r;return n=Zt,(e=hr())!==i&&(t=Kr())!==i&&(r=sr())!==i&&$r()!==i?(Qt=n,e=y(e,r),n=e):(Zt=n,n=i),n===i&&(n=Zt,(e=hr())!==i&&(t=fr())!==i?(Qt=n,e=b(e,t),n=e):(Zt=n,n=i),n===i&&(n=Zt,(e=hr())!==i&&(Qt=n,e=g(e)),(n=e)===i&&(n=Zt,(e=fr())!==i&&(Qt=n,e=k(e)),(n=e)===i&&(n=Zt,(e=function(){var n,e,t;return n=Zt,(e=Jr())!==i&&pl()!==i&&(t=jr())!==i?(Qt=n,e=I(t),n=e):(Zt=n,n=i),n}())!==i&&(Qt=n,e=S(e)),(n=e)===i&&(n=Zt,(e=zr())!==i&&(Qt=n,e=E()),n=e))))),n}())!==i){if(r=Zt,59===n.charCodeAt(Zt)?(l=d,Zt++):(l=i,0===er&&ir(v)),l!==i){for(u=[],a=Zt,o=Zt,er++,10===n.charCodeAt(Zt)?(s=c,Zt++):(s=i,0===er&&ir(f)),er--,s===i?o=void 0:(Zt=o,o=i),o!==i?(n.length>Zt?(s=n.charAt(Zt),Zt++):(s=i,0===er&&ir(p)),s!==i?a=o=[o,s]:(Zt=a,a=i)):(Zt=a,a=i);a!==i;)u.push(a),a=Zt,o=Zt,er++,10===n.charCodeAt(Zt)?(s=c,Zt++):(s=i,0===er&&ir(f)),er--,s===i?o=void 0:(Zt=o,o=i),o!==i?(n.length>Zt?(s=n.charAt(Zt),Zt++):(s=i,0===er&&ir(p)),s!==i?a=o=[o,s]:(Zt=a,a=i)):(Zt=a,a=i);u!==i?r=l=[l,u]:(Zt=r,r=i)}else Zt=r,r=i;r===i&&(r=null),r!==i?(Qt=e,e=m(t)):(Zt=e,e=i)}else Zt=e,e=i;else Zt=e,e=i;return e}function fr(){var e,t;return e=Zt,(t=function(){var e,t,r,l,u,a,o,s,c,f;if(e=Zt,(t=function(){var e,t;return e=Zt,n.substr(Zt,5)===se?(t=se,Zt+=5):(t=i,0===er&&ir(ce)),t!==i&&zr()!==i?(Qt=e,t=fe(),e=t):(Zt=e,e=i),e}())===i&&(t=function(){var e,t;return e=Zt,n.substr(Zt,5)===he?(t=he,Zt+=5):(t=i,0===er&&ir(de)),t!==i&&zr()!==i?(Qt=e,t=ve(),e=t):(Zt=e,e=i),e}()),t!==i&&(r=yr())!==i?(Qt=e,t=_(t,r),e=t):(Zt=e,e=i),e===i&&(e=Zt,(t=function(){var e,t,r;return e=Zt,n.substr(Zt,5)===De?(t=De,Zt+=5):(t=i,0===er&&ir(je)),t!==i&&(r=zr())!==i?e=t=[t,r]:(Zt=e,e=i),e}())!==i&&(r=jr())!==i&&(l=ml())!==i&&(u=jr())!==i?(Qt=e,t=O(r,u),e=t):(Zt=e,e=i),e===i&&(e=Zt,(t=function(){var e,t,r;return e=Zt,n.substr(Zt,8)===Re?(t=Re,Zt+=8):(t=i,0===er&&ir(Te)),t!==i&&(r=zr())!==i?e=t=[t,r]:(Zt=e,e=i),e}())!==i&&(r=jr())!==i?(Qt=e,t=R(r),e=t):(Zt=e,e=i),e===i&&(e=Zt,(t=function(){var e,t,r;return e=Zt,n.substr(Zt,7)===pe?(t=pe,Zt+=7):(t=i,0===er&&ir(me)),t!==i&&(r=zr())!==i?e=t=[t,r]:(Zt=e,e=i),e}())!==i&&(r=jr())!==i?(l=Zt,(u=ml())!==i?((a=jr())===i&&(a=null),a!==i&&(o=ml())!==i&&(s=jr())!==i?l=u=[u,a,o,s]:(Zt=l,l=i)):(Zt=l,l=i),l===i&&(l=null),l!==i?(Qt=e,t=T(r,l),e=t):(Zt=e,e=i)):(Zt=e,e=i),e===i)))){if(e=Zt,(t=function(){var e,t,r;return e=Zt,n.substr(Zt,3)===Se?(t=Se,Zt+=3):(t=i,0===er&&ir(Ee)),t!==i&&(r=zr())!==i?e=t=[t,r]:(Zt=e,e=i),e}())!==i)if((r=Hr())!==i)if((l=jr())!==i)if((u=qr())!==i)if((a=Kr())!==i)if((o=sr())!==i)if((s=$r())!==i){for(c=[],f=dr();f!==i;)c.push(f),f=dr();c!==i?((f=function(){var e,t,r;return e=Zt,(t=function(){var e,t,r;return e=Zt,n.substr(Zt,4)===Ae?(t=Ae,Zt+=4):(t=i,0===er&&ir(xe)),t!==i&&(r=zr())!==i?e=t=[t,r]:(Zt=e,e=i),e}())!==i&&Kr()!==i&&(r=sr())!==i&&$r()!==i?(Qt=e,t=Z(r),e=t):(Zt=e,e=i),e}())===i&&(f=null),f!==i?(Qt=e,t=D(l,o,c,f),e=t):(Zt=e,e=i)):(Zt=e,e=i)}else Zt=e,e=i;else Zt=e,e=i;else Zt=e,e=i;else Zt=e,e=i;else Zt=e,e=i;else Zt=e,e=i;else Zt=e,e=i;e===i&&(e=Zt,(t=function(){var e,t,r;return e=Zt,n.substr(Zt,4)===_e?(t=_e,Zt+=4):(t=i,0===er&&ir(Oe)),t!==i&&(r=zr())!==i?e=t=[t,r]:(Zt=e,e=i),e}())!==i&&(r=Sr())!==i?(n.substr(Zt,2)===j?(l=j,Zt+=2):(l=i,0===er&&ir(P)),l!==i&&(u=zr())!==i&&(a=jr())!==i&&(o=Kr())!==i&&(s=sr())!==i&&(c=$r())!==i?(Qt=e,t=B(r,a,s),e=t):(Zt=e,e=i)):(Zt=e,e=i),e===i&&(e=Zt,(t=function(){var e,t,r;return e=Zt,n.substr(Zt,6)===ge?(t=ge,Zt+=6):(t=i,0===er&&ir(ke)),t!==i&&(r=zr())!==i?e=t=[t,r]:(Zt=e,e=i),e}())!==i&&(r=function(){var n,e;return n=Zt,(e=Er())!==i&&(Qt=n,e=en(e)),n=e}())!==i&&(l=Hr())!==i?((u=function(){var n,e,t,r,l,u;if(n=Zt,(e=mr())!==i){for(t=[],r=Zt,(l=ml())!==i&&(u=mr())!==i?r=l=[l,u]:(Zt=r,r=i);r!==i;)t.push(r),r=Zt,(l=ml())!==i&&(u=mr())!==i?r=l=[l,u]:(Zt=r,r=i);t!==i?(Qt=n,e=tn(e,t),n=e):(Zt=n,n=i)}else Zt=n,n=i;return n}())===i&&(u=null),u!==i&&(a=qr())!==i&&(o=Kr())!==i&&(s=sr())!==i&&(c=$r())!==i?(Qt=e,t=M(r,u,s),e=t):(Zt=e,e=i)):(Zt=e,e=i),e===i&&(e=Zt,43===n.charCodeAt(Zt)?(t=F,Zt++):(t=i,0===er&&ir(N)),t!==i&&(r=kr())!==i&&(l=Hr())!==i?((u=yr())===i&&(u=null),u!==i&&(a=qr())!==i?(Qt=e,t=U(r,u),e=t):(Zt=e,e=i)):(Zt=e,e=i),e===i&&(e=Zt,(t=function(){var e,t,r;return e=Zt,n.substr(Zt,4)===ye?(t=ye,Zt+=4):(t=i,0===er&&ir(be)),t!==i&&(r=zr())!==i?e=t=[t,r]:(Zt=e,e=i),e}())!==i&&(r=Sr())!==i&&(l=pl())!==i&&(u=jr())!==i?(Qt=e,t=X(r,u),e=t):(Zt=e,e=i),e===i&&(e=Zt,(t=kr())!==i&&(r=pl())!==i&&(l=jr())!==i?(Qt=e,t=W(t,l),e=t):(Zt=e,e=i),e===i&&(e=Zt,(t=function(){var e,t,r;return e=Zt,n.substr(Zt,4)===Pe?(t=Pe,Zt+=4):(t=i,0===er&&ir(Be)),t!==i&&(r=zr())!==i?e=t=[t,r]:(Zt=e,e=i),e}())!==i&&(r=vr())!==i?(n.substr(Zt,2)===z?(l=z,Zt+=2):(l=i,0===er&&ir(Y)),l!==i&&(u=zr())!==i&&(a=Sr())!==i?(Qt=e,t=V(r,a),e=t):(Zt=e,e=i)):(Zt=e,e=i),e===i&&(e=Zt,(t=function(){var e,t,r;return e=Zt,n.substr(Zt,6)===Le?(t=Le,Zt+=6):(t=i,0===er&&ir(Ie)),t!==i&&(r=zr())!==i?e=t=[t,r]:(Zt=e,e=i),e}())!==i&&(r=vr())!==i?(Qt=e,t=H(r),e=t):(Zt=e,e=i),e===i&&(e=Zt,(t=function(){var e,t,r;return e=Zt,n.substr(Zt,6)===ie?(t=ie,Zt+=6):(t=i,0===er&&ir(oe)),t!==i&&(r=zr())!==i?e=t=[t,r]:(Zt=e,e=i),e}())!==i&&(r=jr())!==i?(Qt=e,t=q(r),e=t):(Zt=e,e=i),e===i&&(e=Zt,(t=function(){var e,t,r;return e=Zt,n.substr(Zt,10)===Me?(t=Me,Zt+=10):(t=i,0===er&&ir(Fe)),t!==i&&(r=zr())!==i?e=t=[t,r]:(Zt=e,e=i),e}())!==i&&(r=Sr())!==i?(Qt=e,t=K(r),e=t):(Zt=e,e=i))))))))))}return e}())!==i&&(Qt=e,t=A(t)),(e=t)===i&&(e=Zt,(t=function(){var e,t,r,l,u,a,o;return e=Zt,(t=Ar())!==i&&(r=function(){var e,t,r,l;return e=Zt,35===n.charCodeAt(Zt)?(t=xn,Zt++):(t=i,0===er&&ir(Cn)),t!==i?((r=function(){var n,e;return n=Zt,(e=ul())!==i&&(Qt=n,e=Ln()),(n=e)===i&&(n=Zt,(e=al())!==i&&(Qt=n,e=In()),n=e),n}())===i&&(r=null),r!==i&&(l=jr())!==i?(Qt=e,t=wn(r,l),e=t):(Zt=e,e=i)):(Zt=e,e=i),e}())!==i?(Qt=e,t=ln(t,r),e=t):(Zt=e,e=i),e===i&&(e=Zt,(t=Ar())!==i&&(r=Hr())!==i&&(l=xr())!==i&&(u=ml())!==i?(120===n.charCodeAt(Zt)?(a=un,Zt++):(a=i,0===er&&ir(an)),a!==i&&(o=zr())!==i&&qr()!==i?(Qt=e,t=on(t,l),e=t):(Zt=e,e=i)):(Zt=e,e=i),e===i&&(e=Zt,(t=Ar())!==i&&(r=Hr())!==i&&(l=xr())!==i&&(u=qr())!==i&&(a=ml())!==i?(121===n.charCodeAt(Zt)?(o=sn,Zt++):(o=i,0===er&&ir(cn)),o!==i&&zr()!==i?(Qt=e,t=fn(t,l),e=t):(Zt=e,e=i)):(Zt=e,e=i),e===i&&(e=Zt,(t=Ar())!==i&&(r=Hr())!==i&&(l=xr())!==i&&(u=qr())!==i?(Qt=e,t=hn(t,l),e=t):(Zt=e,e=i),e===i&&(e=Zt,(t=Ar())!==i&&(r=xr())!==i&&(l=ml())!==i?(120===n.charCodeAt(Zt)?(u=un,Zt++):(u=i,0===er&&ir(an)),u===i&&(121===n.charCodeAt(Zt)?(u=sn,Zt++):(u=i,0===er&&ir(cn))),u!==i&&(a=zr())!==i?(Qt=e,t=dn(t,r,u),e=t):(Zt=e,e=i)):(Zt=e,e=i),e===i&&(e=Zt,(t=Ar())!==i&&(r=xr())!==i?(Qt=e,t=vn(t,r),e=t):(Zt=e,e=i),e===i&&(e=Zt,(t=Ar())!==i&&(Qt=e,t=pn(t)),e=t)))))),e}())!==i&&(Qt=e,t=x(t)),e=t),e}function hr(){var e,t,r;return e=Zt,(t=br())!==i?(58===n.charCodeAt(Zt)?(r=C,Zt++):(r=i,0===er&&ir(w)),r!==i&&zr()!==i?(Qt=e,e=t=L(t)):(Zt=e,e=i)):(Zt=e,e=i),e}function dr(){var e,t,r;return e=Zt,function(){var e,t,r;return e=Zt,n.substr(Zt,4)===Ce?(t=Ce,Zt+=4):(t=i,0===er&&ir(we)),t!==i&&(r=zr())!==i?e=t=[t,r]:(Zt=e,e=i),e}()!==i&&Hr()!==i&&(t=jr())!==i&&qr()!==i&&Kr()!==i&&(r=sr())!==i&&$r()!==i?(Qt=e,e=$(t,r)):(Zt=e,e=i),e}function vr(){var e,t,r,l;if(e=Zt,34===n.charCodeAt(Zt)?(t=Q,Zt++):(t=i,0===er&&ir(J)),t!==i){for(r=[],l=pr();l!==i;)r.push(l),l=pr();r!==i?(34===n.charCodeAt(Zt)?(l=Q,Zt++):(l=i,0===er&&ir(J)),l!==i&&zr()!==i?(Qt=e,e=t=G(r)):(Zt=e,e=i)):(Zt=e,e=i)}else Zt=e,e=i;return e}function pr(){var e,t,r;return e=Zt,t=Zt,er++,34===n.charCodeAt(Zt)?(r=Q,Zt++):(r=i,0===er&&ir(J)),er--,r===i?t=void 0:(Zt=t,t=i),t!==i?(n.length>Zt?(r=n.charAt(Zt),Zt++):(r=i,0===er&&ir(p)),r!==i?(Qt=e,e=t=nn(r)):(Zt=e,e=i)):(Zt=e,e=i),e}function mr(){var n,e;return n=Zt,(e=Sr())!==i&&(Qt=n,e=rn(e)),n=e}function yr(){var n,e,t,r,l,u;if(n=Zt,(e=jr())!==i){for(t=[],r=Zt,(l=ml())!==i&&(u=jr())!==i?r=l=[l,u]:(Zt=r,r=i);r!==i;)t.push(r),r=Zt,(l=ml())!==i&&(u=jr())!==i?r=l=[l,u]:(Zt=r,r=i);t!==i?(Qt=n,n=e=tn(e,t)):(Zt=n,n=i)}else Zt=n,n=i;return n}function br(){var n,e,t,r,l;if(n=Zt,e=Zt,t=[],(r=Fr())!==i)for(;r!==i;)t.push(r),r=Fr();else t=i;if(t!==i){for(r=[],l=Nr();l!==i;)r.push(l),l=Nr();r!==i?e=t=[t,r]:(Zt=e,e=i)}else Zt=e,e=i;return e!==i&&(Qt=n,e=mn()),n=e}function gr(){var n,e;return n=Zt,(e=br())!==i&&zr()!==i?(Qt=n,n=e=yn(e)):(Zt=n,n=i),n}function kr(){var e,t,r,l,u,a,o;if(e=Zt,(t=br())!==i){for(r=[],l=Zt,n.substr(Zt,2)===bn?(u=bn,Zt+=2):(u=i,0===er&&ir(gn)),u!==i&&(a=br())!==i?l=u=[u,a]:(Zt=l,l=i);l!==i;)r.push(l),l=Zt,n.substr(Zt,2)===bn?(u=bn,Zt+=2):(u=i,0===er&&ir(gn)),u!==i&&(a=br())!==i?l=u=[u,a]:(Zt=l,l=i);r!==i&&(l=zr())!==i?(Qt=e,e=t=kn(t,r)):(Zt=e,e=i)}else Zt=e,e=i;if(e===i)if(e=Zt,n.substr(Zt,2)===bn?(t=bn,Zt+=2):(t=i,0===er&&ir(gn)),t!==i)if((r=br())!==i){for(l=[],u=Zt,n.substr(Zt,2)===bn?(a=bn,Zt+=2):(a=i,0===er&&ir(gn)),a!==i&&(o=br())!==i?u=a=[a,o]:(Zt=u,u=i);u!==i;)l.push(u),u=Zt,n.substr(Zt,2)===bn?(a=bn,Zt+=2):(a=i,0===er&&ir(gn)),a!==i&&(o=br())!==i?u=a=[a,o]:(Zt=u,u=i);l!==i&&(u=zr())!==i?(Qt=e,e=t=Sn(r,l)):(Zt=e,e=i)}else Zt=e,e=i;else Zt=e,e=i;return e}function Sr(){var n,e;return n=Zt,(e=Er())!==i&&(Qt=n,e=En(e)),n=e}function Er(){var n,e;return n=Zt,(e=br())!==i&&zr()!==i?(Qt=n,n=e=An(e)):(Zt=n,n=i),n}function Ar(){var n,e;return n=Zt,(e=br())!==i&&zr()!==i?(Qt=n,n=e=yn(e)):(Zt=n,n=i),n}function xr(){var n,e;return n=Zt,(e=jr())!==i&&(Qt=n,e=_n(e)),n=e}function Cr(){var n,e,t,r,l,u;if(n=Zt,(e=Pr())!==i){for(t=[],r=Zt,(l=Jr())===i&&(l=el())===i&&(l=tl()),l!==i&&(u=Pr())!==i?r=l=[l,u]:(Zt=r,r=i);r!==i;)t.push(r),r=Zt,(l=Jr())===i&&(l=el())===i&&(l=tl()),l!==i&&(u=Pr())!==i?r=l=[l,u]:(Zt=r,r=i);t!==i?(Qt=n,n=e=On(e,t)):(Zt=n,n=i)}else Zt=n,n=i;return n===i&&(n=Mr()),n}function wr(){var n,e,t,r,l,u;if(n=Zt,(e=Cr())!==i){for(t=[],r=Zt,(l=Gr())===i&&(l=nl()),l!==i&&(u=Cr())!==i?r=l=[l,u]:(Zt=r,r=i);r!==i;)t.push(r),r=Zt,(l=Gr())===i&&(l=nl()),l!==i&&(u=Cr())!==i?r=l=[l,u]:(Zt=r,r=i);t!==i?(Qt=n,n=e=On(e,t)):(Zt=n,n=i)}else Zt=n,n=i;return n}function Lr(){var n,e,t,r,l,u;if(n=Zt,(e=wr())!==i){for(t=[],r=Zt,(l=rl())===i&&(l=ll()),l!==i&&(u=wr())!==i?r=l=[l,u]:(Zt=r,r=i);r!==i;)t.push(r),r=Zt,(l=rl())===i&&(l=ll()),l!==i&&(u=wr())!==i?r=l=[l,u]:(Zt=r,r=i);t!==i?(Qt=n,n=e=On(e,t)):(Zt=n,n=i)}else Zt=n,n=i;return n}function Ir(){var n,e,t,r,l,u;if(n=Zt,(e=Lr())!==i){for(t=[],r=Zt,(l=il())===i&&(l=ol())===i&&(l=ul())===i&&(l=al()),l!==i&&(u=Lr())!==i?r=l=[l,u]:(Zt=r,r=i);r!==i;)t.push(r),r=Zt,(l=il())===i&&(l=ol())===i&&(l=ul())===i&&(l=al()),l!==i&&(u=Lr())!==i?r=l=[l,u]:(Zt=r,r=i);t!==i?(Qt=n,n=e=On(e,t)):(Zt=n,n=i)}else Zt=n,n=i;return n}function _r(){var n,e,t,r,l,u;if(n=Zt,(e=Ir())!==i){for(t=[],r=Zt,(l=sl())===i&&(l=cl()),l!==i&&(u=Ir())!==i?r=l=[l,u]:(Zt=r,r=i);r!==i;)t.push(r),r=Zt,(l=sl())===i&&(l=cl()),l!==i&&(u=Ir())!==i?r=l=[l,u]:(Zt=r,r=i);t!==i?(Qt=n,n=e=On(e,t)):(Zt=n,n=i)}else Zt=n,n=i;return n}function Or(){var n,e,t,r,l,u;if(n=Zt,(e=_r())!==i){for(t=[],r=Zt,(l=Qr())!==i&&(u=_r())!==i?r=l=[l,u]:(Zt=r,r=i);r!==i;)t.push(r),r=Zt,(l=Qr())!==i&&(u=_r())!==i?r=l=[l,u]:(Zt=r,r=i);t!==i?(Qt=n,n=e=On(e,t)):(Zt=n,n=i)}else Zt=n,n=i;return n}function Rr(){var n,e,t,r,l,u;if(n=Zt,(e=Or())!==i){for(t=[],r=Zt,(l=fl())!==i&&(u=Or())!==i?r=l=[l,u]:(Zt=r,r=i);r!==i;)t.push(r),r=Zt,(l=fl())!==i&&(u=Or())!==i?r=l=[l,u]:(Zt=r,r=i);t!==i?(Qt=n,n=e=On(e,t)):(Zt=n,n=i)}else Zt=n,n=i;return n}function Tr(){var n,e,t,r,l,u;if(n=Zt,(e=Rr())!==i){for(t=[],r=Zt,(l=hl())!==i&&(u=Rr())!==i?r=l=[l,u]:(Zt=r,r=i);r!==i;)t.push(r),r=Zt,(l=hl())!==i&&(u=Rr())!==i?r=l=[l,u]:(Zt=r,r=i);t!==i?(Qt=n,n=e=On(e,t)):(Zt=n,n=i)}else Zt=n,n=i;return n}function Dr(){var n,e,t,r,l,u;if(n=Zt,(e=Tr())!==i){for(t=[],r=Zt,(l=dl())!==i&&(u=Tr())!==i?r=l=[l,u]:(Zt=r,r=i);r!==i;)t.push(r),r=Zt,(l=dl())!==i&&(u=Tr())!==i?r=l=[l,u]:(Zt=r,r=i);t!==i?(Qt=n,n=e=On(e,t)):(Zt=n,n=i)}else Zt=n,n=i;return n}function jr(){var n,e,t,r,l,u;if(n=Zt,(e=Dr())!==i){for(t=[],r=Zt,(l=vl())!==i&&(u=Dr())!==i?r=l=[l,u]:(Zt=r,r=i);r!==i;)t.push(r),r=Zt,(l=vl())!==i&&(u=Dr())!==i?r=l=[l,u]:(Zt=r,r=i);t!==i?(Qt=n,n=e=On(e,t)):(Zt=n,n=i)}else Zt=n,n=i;return n}function Pr(){var e,t,r;return(e=function(){var n;return(n=function(){var n,e,t;return n=Zt,(e=Br())!==i&&Hr()!==i?((t=yr())===i&&(t=null),t!==i&&qr()!==i?(Qt=n,e=Bn(e,t),n=e):(Zt=n,n=i)):(Zt=n,n=i),n}())===i&&(n=Br()),n}())===i&&(e=Zt,(t=function(){var e,t;return e=Zt,(t=Gr())===i&&(t=nl())===i&&(t=function(){var e,t;return e=Zt,126===n.charCodeAt(Zt)?(t=vt,Zt++):(t=i,0===er&&ir(pt)),t!==i&&zr()!==i?(Qt=e,t=Xe(t),e=t):(Zt=e,e=i),e}())===i&&(t=function(){var e,t,r,l;return e=Zt,33===n.charCodeAt(Zt)?(t=mt,Zt++):(t=i,0===er&&ir(yt)),t!==i?(r=Zt,er++,at.test(n.charAt(Zt))?(l=n.charAt(Zt),Zt++):(l=i,0===er&&ir(it)),er--,l===i?r=void 0:(Zt=r,r=i),r!==i&&(l=zr())!==i?(Qt=e,t=Xe(t),e=t):(Zt=e,e=i)):(Zt=e,e=i),e}()),t!==i&&(Qt=e,t=Tn(t)),e=t}())!==i&&(r=Pr())!==i?(Qt=e,e=t=Rn(t,r)):(Zt=e,e=i)),e}function Br(){var n,e,t,r,l;if(n=Zt,(e=Mr())!==i){for(t=[],r=Zt,Yr()!==i&&(l=jr())!==i&&Vr()!==i?(Qt=r,r=Dn(e,l)):(Zt=r,r=i),r===i&&(r=Zt,Zr()!==i&&(l=gr())!==i?(Qt=r,r=jn(e,l)):(Zt=r,r=i));r!==i;)t.push(r),r=Zt,Yr()!==i&&(l=jr())!==i&&Vr()!==i?(Qt=r,r=Dn(e,l)):(Zt=r,r=i),r===i&&(r=Zt,Zr()!==i&&(l=gr())!==i?(Qt=r,r=jn(e,l)):(Zt=r,r=i));t!==i?(Qt=n,n=e=Pn(e,t)):(Zt=n,n=i)}else Zt=n,n=i;return n}function Mr(){var e,t,r;return e=Zt,(t=function(){var e,t,r,l,u;if(e=Zt,n.substr(Zt,1).toLowerCase()===Un?(t=n.charAt(Zt),Zt++):(t=i,0===er&&ir(Xn)),t!==i){if(r=Zt,l=[],(u=Wr())!==i)for(;u!==i;)l.push(u),u=Wr();else l=i;(r=l!==i?n.substring(r,Zt):l)!==i&&(l=zr())!==i?(Qt=e,t=Wn(r),e=t):(Zt=e,e=i)}else Zt=e,e=i;if(e===i){if(e=Zt,37===n.charCodeAt(Zt)?(t=zn,Zt++):(t=i,0===er&&ir(Yn)),t!==i){if(r=Zt,l=[],(u=Xr())!==i)for(;u!==i;)l.push(u),u=Xr();else l=i;(r=l!==i?n.substring(r,Zt):l)!==i&&(l=zr())!==i?(Qt=e,t=Vn(r),e=t):(Zt=e,e=i)}else Zt=e,e=i;if(e===i){if(e=Zt,t=Zt,r=[],(l=Ur())!==i)for(;l!==i;)r.push(l),l=Ur();else r=i;(t=r!==i?n.substring(t,Zt):r)!==i&&(r=zr())!==i?(Qt=e,t=Hn(t),e=t):(Zt=e,e=i)}}return e}())!==i&&(Qt=e,t=Mn(t)),(e=t)===i&&(e=Zt,(t=kr())!==i&&(Qt=e,t=yn(t)),(e=t)===i&&(e=Zt,(t=vr())!==i&&(Qt=e,t=Fn(t)),(e=t)===i&&(e=function(){var n,e,t;return n=Zt,(e=Yr())!==i?((t=yr())===i&&(t=null),t!==i&&Vr()!==i?(Qt=n,e=qn(t),n=e):(Zt=n,n=i)):(Zt=n,n=i),n}())===i&&(e=Zt,(t=Hr())!==i&&(r=jr())!==i&&qr()!==i?(Qt=e,e=t=Nn(r)):(Zt=e,e=i)))),e}function Fr(){var e;return Kn.test(n.charAt(Zt))?(e=n.charAt(Zt),Zt++):(e=i,0===er&&ir($n)),e}function Nr(){var e;return Zn.test(n.charAt(Zt))?(e=n.charAt(Zt),Zt++):(e=i,0===er&&ir(Qn)),e}function Ur(){var e;return Jn.test(n.charAt(Zt))?(e=n.charAt(Zt),Zt++):(e=i,0===er&&ir(Gn)),e}function Xr(){var e;return ne.test(n.charAt(Zt))?(e=n.charAt(Zt),Zt++):(e=i,0===er&&ir(ee)),e}function Wr(){var e;return te.test(n.charAt(Zt))?(e=n.charAt(Zt),Zt++):(e=i,0===er&&ir(re)),e}function zr(){var e,t;for(er++,e=[],ue.test(n.charAt(Zt))?(t=n.charAt(Zt),Zt++):(t=i,0===er&&ir(ae));t!==i;)e.push(t),ue.test(n.charAt(Zt))?(t=n.charAt(Zt),Zt++):(t=i,0===er&&ir(ae));return er--,e===i&&(t=i,0===er&&ir(le)),e}function Yr(){var e,t;return e=Zt,91===n.charCodeAt(Zt)?(t=Ne,Zt++):(t=i,0===er&&ir(Ue)),t!==i&&zr()!==i?(Qt=e,e=t=Xe(t)):(Zt=e,e=i),e}function Vr(){var e,t;return e=Zt,93===n.charCodeAt(Zt)?(t=We,Zt++):(t=i,0===er&&ir(ze)),t!==i&&zr()!==i?(Qt=e,e=t=Xe(t)):(Zt=e,e=i),e}function Hr(){var e,t;return e=Zt,40===n.charCodeAt(Zt)?(t=Ye,Zt++):(t=i,0===er&&ir(Ve)),t!==i&&zr()!==i?(Qt=e,e=t=Xe(t)):(Zt=e,e=i),e}function qr(){var e,t;return e=Zt,41===n.charCodeAt(Zt)?(t=He,Zt++):(t=i,0===er&&ir(qe)),t!==i&&zr()!==i?(Qt=e,e=t=Xe(t)):(Zt=e,e=i),e}function Kr(){var e,t;return e=Zt,123===n.charCodeAt(Zt)?(t=Ke,Zt++):(t=i,0===er&&ir($e)),t!==i&&zr()!==i?(Qt=e,e=t=Xe(t)):(Zt=e,e=i),e}function $r(){var e,t;return e=Zt,125===n.charCodeAt(Zt)?(t=Ze,Zt++):(t=i,0===er&&ir(Qe)),t!==i&&zr()!==i?(Qt=e,e=t=Xe(t)):(Zt=e,e=i),e}function Zr(){var e,t;return e=Zt,46===n.charCodeAt(Zt)?(t=Je,Zt++):(t=i,0===er&&ir(Ge)),t!==i&&zr()!==i?(Qt=e,e=t=Xe(t)):(Zt=e,e=i),e}function Qr(){var e,t,r,l;return e=Zt,38===n.charCodeAt(Zt)?(t=nt,Zt++):(t=i,0===er&&ir(et)),t!==i?(r=Zt,er++,tt.test(n.charAt(Zt))?(l=n.charAt(Zt),Zt++):(l=i,0===er&&ir(rt)),er--,l===i?r=void 0:(Zt=r,r=i),r!==i&&(l=zr())!==i?(Qt=e,e=t=Xe(t)):(Zt=e,e=i)):(Zt=e,e=i),e}function Jr(){var e,t,r,l;return e=Zt,42===n.charCodeAt(Zt)?(t=lt,Zt++):(t=i,0===er&&ir(ut)),t!==i?(r=Zt,er++,at.test(n.charAt(Zt))?(l=n.charAt(Zt),Zt++):(l=i,0===er&&ir(it)),er--,l===i?r=void 0:(Zt=r,r=i),r!==i&&(l=zr())!==i?(Qt=e,e=t=Xe(t)):(Zt=e,e=i)):(Zt=e,e=i),e}function Gr(){var e,t,r,l;return e=Zt,43===n.charCodeAt(Zt)?(t=F,Zt++):(t=i,0===er&&ir(N)),t!==i?(r=Zt,er++,ot.test(n.charAt(Zt))?(l=n.charAt(Zt),Zt++):(l=i,0===er&&ir(st)),er--,l===i?r=void 0:(Zt=r,r=i),r!==i&&(l=zr())!==i?(Qt=e,e=t=Xe(t)):(Zt=e,e=i)):(Zt=e,e=i),e}function nl(){var e,t,r,l;return e=Zt,45===n.charCodeAt(Zt)?(t=ct,Zt++):(t=i,0===er&&ir(ft)),t!==i?(r=Zt,er++,ht.test(n.charAt(Zt))?(l=n.charAt(Zt),Zt++):(l=i,0===er&&ir(dt)),er--,l===i?r=void 0:(Zt=r,r=i),r!==i&&(l=zr())!==i?(Qt=e,e=t=Xe(t)):(Zt=e,e=i)):(Zt=e,e=i),e}function el(){var e,t,r,l;return e=Zt,47===n.charCodeAt(Zt)?(t=bt,Zt++):(t=i,0===er&&ir(gt)),t!==i?(r=Zt,er++,at.test(n.charAt(Zt))?(l=n.charAt(Zt),Zt++):(l=i,0===er&&ir(it)),er--,l===i?r=void 0:(Zt=r,r=i),r!==i&&(l=zr())!==i?(Qt=e,e=t=Xe(t)):(Zt=e,e=i)):(Zt=e,e=i),e}function tl(){var e,t,r,l;return e=Zt,37===n.charCodeAt(Zt)?(t=zn,Zt++):(t=i,0===er&&ir(Yn)),t!==i?(r=Zt,er++,kt.test(n.charAt(Zt))?(l=n.charAt(Zt),Zt++):(l=i,0===er&&ir(St)),er--,l===i?r=void 0:(Zt=r,r=i),r!==i&&(l=zr())!==i?(Qt=e,e=t=Xe(t)):(Zt=e,e=i)):(Zt=e,e=i),e}function rl(){var e,t,r,l;return e=Zt,n.substr(Zt,2)===Et?(t=Et,Zt+=2):(t=i,0===er&&ir(At)),t!==i?(r=Zt,er++,at.test(n.charAt(Zt))?(l=n.charAt(Zt),Zt++):(l=i,0===er&&ir(it)),er--,l===i?r=void 0:(Zt=r,r=i),r!==i&&(l=zr())!==i?(Qt=e,e=t=Xe(t)):(Zt=e,e=i)):(Zt=e,e=i),e}function ll(){var e,t,r,l;return e=Zt,n.substr(Zt,2)===xt?(t=xt,Zt+=2):(t=i,0===er&&ir(Ct)),t!==i?(r=Zt,er++,at.test(n.charAt(Zt))?(l=n.charAt(Zt),Zt++):(l=i,0===er&&ir(it)),er--,l===i?r=void 0:(Zt=r,r=i),r!==i&&(l=zr())!==i?(Qt=e,e=t=Xe(t)):(Zt=e,e=i)):(Zt=e,e=i),e}function ul(){var e,t,r,l;return e=Zt,60===n.charCodeAt(Zt)?(t=wt,Zt++):(t=i,0===er&&ir(Lt)),t!==i?(r=Zt,er++,at.test(n.charAt(Zt))?(l=n.charAt(Zt),Zt++):(l=i,0===er&&ir(it)),er--,l===i?r=void 0:(Zt=r,r=i),r!==i&&(l=zr())!==i?(Qt=e,e=t=Xe(t)):(Zt=e,e=i)):(Zt=e,e=i),e}function al(){var e,t,r,l;return e=Zt,62===n.charCodeAt(Zt)?(t=It,Zt++):(t=i,0===er&&ir(_t)),t!==i?(r=Zt,er++,at.test(n.charAt(Zt))?(l=n.charAt(Zt),Zt++):(l=i,0===er&&ir(it)),er--,l===i?r=void 0:(Zt=r,r=i),r!==i&&(l=zr())!==i?(Qt=e,e=t=Xe(t)):(Zt=e,e=i)):(Zt=e,e=i),e}function il(){var e,t;return e=Zt,n.substr(Zt,2)===Ot?(t=Ot,Zt+=2):(t=i,0===er&&ir(Rt)),t!==i&&zr()!==i?(Qt=e,e=t=Xe(t)):(Zt=e,e=i),e}function ol(){var e,t;return e=Zt,n.substr(Zt,2)===Tt?(t=Tt,Zt+=2):(t=i,0===er&&ir(Dt)),t!==i&&zr()!==i?(Qt=e,e=t=Xe(t)):(Zt=e,e=i),e}function sl(){var e,t;return e=Zt,n.substr(Zt,2)===jt?(t=jt,Zt+=2):(t=i,0===er&&ir(Pt)),t!==i&&zr()!==i?(Qt=e,e=t=Xe(t)):(Zt=e,e=i),e}function cl(){var e,t;return e=Zt,n.substr(Zt,2)===Bt?(t=Bt,Zt+=2):(t=i,0===er&&ir(Mt)),t!==i&&zr()!==i?(Qt=e,e=t=Xe(t)):(Zt=e,e=i),e}function fl(){var e,t,r,l;return e=Zt,94===n.charCodeAt(Zt)?(t=Ft,Zt++):(t=i,0===er&&ir(Nt)),t!==i?(r=Zt,er++,at.test(n.charAt(Zt))?(l=n.charAt(Zt),Zt++):(l=i,0===er&&ir(it)),er--,l===i?r=void 0:(Zt=r,r=i),r!==i&&(l=zr())!==i?(Qt=e,e=t=Xe(t)):(Zt=e,e=i)):(Zt=e,e=i),e}function hl(){var e,t,r,l;return e=Zt,124===n.charCodeAt(Zt)?(t=Ut,Zt++):(t=i,0===er&&ir(Xt)),t!==i?(r=Zt,er++,at.test(n.charAt(Zt))?(l=n.charAt(Zt),Zt++):(l=i,0===er&&ir(it)),er--,l===i?r=void 0:(Zt=r,r=i),r!==i&&(l=zr())!==i?(Qt=e,e=t=Xe(t)):(Zt=e,e=i)):(Zt=e,e=i),e}function dl(){var e,t;return e=Zt,n.substr(Zt,2)===Wt?(t=Wt,Zt+=2):(t=i,0===er&&ir(zt)),t!==i&&zr()!==i?(Qt=e,e=t=Xe(t)):(Zt=e,e=i),e}function vl(){var e,t;return e=Zt,n.substr(Zt,2)===Yt?(t=Yt,Zt+=2):(t=i,0===er&&ir(Vt)),t!==i&&zr()!==i?(Qt=e,e=t=Xe(t)):(Zt=e,e=i),e}function pl(){var e,t,r,l;return e=Zt,61===n.charCodeAt(Zt)?(t=Ht,Zt++):(t=i,0===er&&ir(qt)),t!==i?(r=Zt,er++,61===n.charCodeAt(Zt)?(l=Ht,Zt++):(l=i,0===er&&ir(qt)),er--,l===i?r=void 0:(Zt=r,r=i),r!==i&&(l=zr())!==i?(Qt=e,e=t=Xe(t)):(Zt=e,e=i)):(Zt=e,e=i),e}function ml(){var e,t;return e=Zt,44===n.charCodeAt(Zt)?(t=Kt,Zt++):(t=i,0===er&&ir($t)),t!==i&&zr()!==i?(Qt=e,e=t=Xe(t)):(Zt=e,e=i),e}var yl=t(19),bl=(yl.objectToAst,{mnemonic:null,imm:null,abs:null,absx:null,absy:null,absind:null,indx:null,indy:null});function gl(n,e,t,l){return r({},bl,{mnemonic:n,imm:e,abs:t,loc:l})}function kl(n,e,t){return[n].concat(function(n,e){return n.map(function(n){return n[e]})}(e,t))}function Sl(){return r({},ar(Qt,Zt),{source:e.source})}if((a=s())!==i&&Zt===n.length)return a;throw a!==i&&Zt<n.length&&ir({type:"end"}),or(nr,Gt<n.length?n.charAt(Gt):null,Gt<n.length?ar(Gt,Gt+1):ar(Gt,Gt))}}},,,function(n,e,t){"use strict";var r=t(8),l=t(9);Object.defineProperty(e,"__esModule",{value:!0});var u=t(10),a=function(){function n(){r(this,n),this.lineStack=[],this.pcToLocs={}}return l(n,[{key:"startLine",value:function(n,e){var t={source:u.resolve(n.source),lineNo:n.start.line};this.lineStack.push({loc:t,pc:e})}},{key:"endLine",value:function(n){var e=this.lineStack.pop();if(!e)throw new Error("internal compiler error, mismatching start/end lines in debugInfo");if(n-e.pc>0){var t=this.pcToLocs[e.pc]||[];t.push(e.loc),this.pcToLocs[e.pc]=t}}},{key:"info",value:function(){return{pcToLocs:this.pcToLocs}}}]),n}();e.DebugInfoTracker=a},function(n,e,t){"use strict";var r=t(8),l=t(9);Object.defineProperty(e,"__esModule",{value:!0});var u=t(17);function a(n){return"".concat(n.toString(16).toUpperCase().padStart(2,"0"))}function i(n){return"".concat(n.toString(16).toUpperCase().padStart(4,"0"))}var o=function(){function n(e){var t=this;r(this,n),this.buf=e,this.byte=function(){var n=t.buf.readUInt8(t.curOffs);return t.curOffs++,n},this.print=function(n,e,r){var l=a(e[0]),u=e.length>=2?a(e[1]):"  ",o=e.length>=3?a(e[2]):"  ";t.output.push("".concat(i(n),": ").concat(l," ").concat(u," ").concat(o,"     ").concat(r))},this.output=[],this.curAddr=e.readUInt8(0)+(e.readUInt8(1)<<8),this.curOffs=2,this.opToDecl={},Object.keys(u.default).forEach(function(n){for(var e=u.default[n],r=0;r<e.length;r++){var l=e[r];null!==l&&(t.opToDecl[l]={mnemonic:n,decode:e})}})}return l(n,[{key:"disImm",value:function(n,e){var t=this.curAddr,r=this.byte();this.print(t,[e,r],"".concat(n," #").concat(a(r)))}},{key:"disZp",value:function(n,e){var t=this.curAddr,r=this.byte();this.print(t,[e,r],"".concat(n," $").concat(a(r)))}},{key:"disZpX",value:function(n,e){var t=this.curAddr,r=this.byte();this.print(t,[e,r],"".concat(n," $").concat(a(r),",X"))}},{key:"disZpY",value:function(n,e){var t=this.curAddr,r=this.byte();this.print(t,[e,r],"".concat(n," $").concat(a(r),",Y"))}},{key:"disAbs",value:function(n,e){var t=this.curAddr,r=this.byte(),l=this.byte();this.print(t,[e,r,l],"".concat(n," $").concat(i(r+256*l)))}},{key:"disAbsX",value:function(n,e){var t=this.curAddr,r=this.byte(),l=this.byte();this.print(t,[e,r,l],"".concat(n," $").concat(i(r+256*l),",X"))}},{key:"disAbsY",value:function(n,e){var t=this.curAddr,r=this.byte(),l=this.byte();this.print(t,[e,r,l],"".concat(n," $").concat(i(r+256*l),",Y"))}},{key:"disInd",value:function(n,e){var t=this.curAddr,r=this.byte(),l=this.byte();this.print(t,[e,r,l],"".concat(n," ($").concat(i(r+256*l),")"))}},{key:"disIndX",value:function(n,e){var t=this.curAddr,r=this.byte();this.print(t,[e,r],"".concat(n," ($").concat(a(r),",X)"))}},{key:"disIndY",value:function(n,e){var t=this.curAddr,r=this.byte();this.print(t,[e,r],"".concat(n," ($").concat(a(r),"),Y"))}},{key:"disSingle",value:function(n,e){var t=this.curAddr;this.print(t,[e],"".concat(n))}},{key:"disBranch",value:function(n,e){var t=this.curAddr,r=this.byte(),l=t+(r>=128?-(256-r):r)+2;this.print(t,[e,r],"".concat(n," $").concat(i(l)))}},{key:"disUnknown",value:function(n){this.print(this.curAddr,[n],"")}},{key:"disassemble",value:function(){for(var n=this.buf.byteLength,e=this.curOffs;this.curOffs<n;){this.curAddr+=this.curOffs-e,e=this.curOffs;var t=this.byte(),r=this.opToDecl[t];if(void 0!==r){var l=r.decode.indexOf(t);if(0===l){this.disImm(r.mnemonic,t);continue}if(1===l){this.disZp(r.mnemonic,t);continue}if(2===l){this.disZpX(r.mnemonic,t);continue}if(3===l){this.disZpY(r.mnemonic,t);continue}if(4===l){this.disAbs(r.mnemonic,t);continue}if(5===l){this.disAbsX(r.mnemonic,t);continue}if(6===l){this.disAbsY(r.mnemonic,t);continue}if(7===l){this.disInd(r.mnemonic,t);continue}if(8===l){this.disIndX(r.mnemonic,t);continue}if(9===l){this.disIndY(r.mnemonic,t);continue}if(10===l){this.disSingle(r.mnemonic,t);continue}if(11===l){this.disBranch(r.mnemonic,t);continue}}else this.disUnknown(t)}return this.output}}]),n}();e.disassemble=function(n){return new o(n).disassemble()}},,function(n,e,t){"use strict";t.r(e);var r=t(0),l=t.n(r),u=t(20),a=t.n(u),i=(t(28),t(2)),o=t(3),s=t(5),c=t(4),f=t(6),h=t(13);var d=t(21),v=t.n(d),p=t(11),m=t.n(p),y=t(1),b=t.n(y),g=16,k=4;function S(n,e){for(var t=0,r=0;r<e;r++){if(n.length<r)return;"\t"===n[r]?t+=k:t++}return t}function E(n){var e=0;if(!n.text)return null;var t=!0,u=!1,a=void 0;try{for(var i,o=n.text[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){"\t"===i.value?e+=k:e++}}catch(p){u=!0,a=p}finally{try{t||null==o.return||o.return()}finally{if(u)throw a}}var s=Array(e).fill(!1),c=!0,f=!1,h=void 0;try{for(var d,v=n.errors[Symbol.iterator]();!(c=(d=v.next()).done);c=!0){var p=d.value,m=S(n.text,p.start.column-1);if(void 0===m)return null;var y=p.start.line===p.end.line?S(n.text,p.end.column-1):m+1;if(void 0===y)return null;for(var g=m;g<y;g++)s[g]=!0}}catch(p){f=!0,h=p}finally{try{c||null==v.return||v.return()}finally{if(f)throw h}}for(var E=function(n){var e=void 0,t=[],r=!0,l=!1,u=void 0;try{for(var a,i=n[Symbol.iterator]();!(r=(a=i.next()).done);r=!0){var o=a.value;e!==o?(e=o,t.push({code:e,count:1})):t[t.length-1].count++}}catch(p){l=!0,u=p}finally{try{r||null==i.return||i.return()}finally{if(l)throw u}}return t}(s),A=[],x=0;x<E.length;x++){var C=E[x];C.code?A.push(l.a.createElement("pre",{key:x,style:{display:"inline-block"},className:b.a.highlightError}," ".repeat(C.count))):A.push(l.a.createElement("pre",{key:x,style:{display:"inline-block"}}," ".repeat(C.count)))}return l.a.createElement(r.Fragment,null,A)}var A=l.a.forwardRef(function(n,e){for(var t=[],r=n.startRow;r<n.startRow+n.numRows+2;r++){var u=r===n.currentLine&&b.a.textareaHighlightRowCurrent,a=n.lineToErrors.get(r);if(a){var i=n.textLines[r];t.push(l.a.createElement("div",{className:m()(b.a.textareaHighlightRow,u),key:r},l.a.createElement(E,{text:i,errors:a})))}else t.push(l.a.createElement("div",{className:m()(b.a.textareaHighlightRow,u),key:r}))}return l.a.createElement("div",{ref:e,className:b.a.textareaHighlightOverlay},t)}),x=l.a.forwardRef(function(n,e){for(var t=[],r=n.startRow;r<n.startRow+n.numRows+2;r++){var u="".concat(r+1),a=r===n.currentLine&&b.a.gutterRowSelected,i=r>=0&&r<n.numTextRows?u.padStart(4," "):"";t.push(l.a.createElement("div",{className:m()(b.a.gutterRow,a),key:r},i))}return l.a.createElement("div",{ref:e,className:b.a.gutter},t)}),C=function(n){function e(){var n,t;Object(i.a)(this,e);for(var r=arguments.length,u=new Array(r),a=0;a<r;a++)u[a]=arguments[a];return(t=Object(s.a)(this,(n=Object(c.a)(e)).call.apply(n,[this].concat(u)))).state={scrollTop:0,currentLine:void 0,textLines:[]},t.textareaRef=l.a.createRef(),t.gutterRef=l.a.createRef(),t.highlighterRef=l.a.createRef(),t.handleScroll=function(n){var e=n.nativeEvent.target.scrollTop;t.setState({scrollTop:e})},t.handleSourceChanged=function(n){t.props.onSourceChanged(n.target.value),t.setState({textLines:n.target.value.split("\n")})},t.updateCursorState=function(){if(t.textareaRef&&t.textareaRef.current){var n=t.textareaRef.current;if(n.selectionStart===n.selectionEnd){var e=n.selectionStart,r=function(n,e){for(var t=n.split("\n"),r=0,l=0;l<t.length;l++)if(e<(r+=t[l].length+1))return l}(t.textareaRef.current.value,e);t.setState({currentLine:r})}else t.setState({currentLine:void 0})}},t.handleSelect=function(n){t.updateCursorState()},t.handleKeyDown=function(n){t.updateCursorState()},t.handleKeyUp=function(n){t.updateCursorState()},t.handleMouseDown=function(n){if(t.textareaRef&&t.textareaRef.current){var e=n.nativeEvent.offsetY+t.state.scrollTop;t.setState({currentLine:Math.min(t.state.textLines.length-1,Math.floor(e/g))})}},t}return Object(f.a)(e,n),Object(o.a)(e,[{key:"componentDidMount",value:function(){this.textareaRef&&this.textareaRef.current&&(v.a.watch(this.textareaRef.current),this.textareaRef.current.spellcheck=!1)}},{key:"componentDidUpdate",value:function(n,e){if(this.textareaRef&&this.textareaRef.current&&void 0!==this.props.errorCharOffset&&(this.textareaRef.current.focus(),this.textareaRef.current.setSelectionRange(this.props.errorCharOffset,this.props.errorCharOffset)),e.scrollTop!==this.state.scrollTop){var t=this.state.scrollTop%g;this.gutterRef&&this.gutterRef.current&&(this.gutterRef.current.scrollTop=t),this.highlighterRef&&this.highlighterRef.current&&(this.highlighterRef.current.scrollTop=t)}}},{key:"render",value:function(){var n=new Map;this.props.diagnostics.forEach(function(e){var t=e.loc,r=t.start.line-1,l=n.has(r)?n.get(r):[];l.push(t),n.set(r,l)});var e=Math.floor(this.state.scrollTop/g);return l.a.createElement("div",{className:b.a.layoutContainer},l.a.createElement("div",{className:b.a.heading},"Assembly"),l.a.createElement("div",{className:b.a.editorContainer},l.a.createElement(x,{ref:this.gutterRef,startRow:e,numRows:31,numTextRows:this.state.textLines.length,currentLine:this.state.currentLine}),l.a.createElement("div",{className:b.a.textContainer,onMouseDown:this.handleMouseDown},l.a.createElement(A,{ref:this.highlighterRef,startRow:e,numRows:31,currentLine:this.state.currentLine,textLines:this.state.textLines,lineToErrors:n}),l.a.createElement("textarea",{wrap:"off",onKeyUp:this.handleKeyUp,onKeyDown:this.handleKeyDown,onSelect:this.handleSelect,onScroll:this.handleScroll,ref:this.textareaRef,onChange:this.handleSourceChanged,className:b.a.textarea}))))}}]),e}(l.a.Component),w=t(12),L=t.n(w),I=function(n){function e(){return Object(i.a)(this,e),Object(s.a)(this,Object(c.a)(e).apply(this,arguments))}return Object(f.a)(e,n),Object(o.a)(e,[{key:"render",value:function(){return l.a.createElement("div",{className:L.a.layoutContainer},l.a.createElement("div",{className:L.a.heading},"Disassembly"),l.a.createElement("div",{className:L.a.disasmContainer},l.a.createElement("pre",null,this.props.disassembly.join("\n"))))}}]),e}(l.a.Component),_=t(7),O=t.n(_),R=function(n){function e(){var n,t;Object(i.a)(this,e);for(var r=arguments.length,u=new Array(r),a=0;a<r;a++)u[a]=arguments[a];return(t=Object(s.a)(this,(n=Object(c.a)(e)).call.apply(n,[this].concat(u)))).itemRef=l.a.createRef(),t}return Object(f.a)(e,n),Object(o.a)(e,[{key:"componentDidUpdate",value:function(n,e,t){this.itemRef&&this.itemRef.current&&this.props.selected&&this.itemRef.current.scrollIntoView({behavior:"smooth",block:"center"})}},{key:"render",value:function(){var n=this,e=this.props.error,t=e.loc,r=e.msg,u=this.props.selected?" ".concat(O.a.selected):"";return l.a.createElement("div",{ref:this.itemRef,className:"".concat(O.a.diagItem).concat(u),onClick:function(){return n.props.onClickItem(n.props.index)}},l.a.createElement("span",{className:"".concat(O.a.error).concat(u)},"main.asm:",t.start.line,":",t.start.column,": error:")," ",r)}}]),e}(l.a.Component),T=function(n){function e(){var n,t;Object(i.a)(this,e);for(var r=arguments.length,l=new Array(r),u=0;u<r;u++)l[u]=arguments[u];return(t=Object(s.a)(this,(n=Object(c.a)(e)).call.apply(n,[this].concat(l)))).handleOnClickItem=function(n){t.props.onClickItem(n)},t}return Object(f.a)(e,n),Object(o.a)(e,[{key:"render",value:function(){var n=this,e=this.props.diagnostics;return l.a.createElement("div",{className:O.a.layoutContainer},l.a.createElement("div",{className:O.a.heading},"Diagnostics"),l.a.createElement("div",{className:O.a.diagnostics},l.a.createElement("div",{className:O.a.diagnosticsBox},e.map(function(e,t){return l.a.createElement(R,{key:JSON.stringify(e.loc),index:t,error:e,selected:t===n.props.selectedIndex,onClickItem:n.handleOnClickItem})}))))}}]),e}(l.a.Component),D=t(22),j=t.n(D);var P={useWebWorkers:!0},B=function(n){function e(){var n,t;Object(i.a)(this,e);for(var r=arguments.length,l=new Array(r),u=0;u<r;u++)l[u]=arguments[u];return(t=Object(s.a)(this,(n=Object(c.a)(e)).call.apply(n,[this].concat(l)))).assemblerWorker=void 0,t.state={sourceCode:"",disassembly:[],diagnosticsIndex:0,diagnostics:[]},t.handleWorkerMessage=function(n){0===n.data.diagnostics.length?t.setState({disassembly:n.data.disassembly,diagnostics:n.data.diagnostics}):t.setState({diagnostics:n.data.diagnostics})},t.handleKeyDown=function(n){"F4"===n.key&&(t.setState(function(e){return 0===e.diagnostics.length?{diagnosticsIndex:0}:void 0===e.diagnosticsIndex?{diagnosticsIndex:0}:n.shiftKey?{diagnosticsIndex:Math.max(0,e.diagnosticsIndex-1)}:{diagnosticsIndex:Math.min(e.diagnostics.length-1,e.diagnosticsIndex+1)}}),n.preventDefault()),"Escape"===n.key&&(t.setState({diagnosticsIndex:void 0}),n.preventDefault())},t.handleOnClickDiagnostic=function(n){t.setState({diagnosticsIndex:n})},t.debouncedCompile=function(n,e){var t=void 0;return function(){for(var r=this,l=arguments.length,u=new Array(l),a=0;a<l;a++)u[a]=arguments[a];clearTimeout(t),t=window.setTimeout(function(){return n.apply(r,u)},e)}}(function(n){P.useWebWorkers&&t.assemblerWorker&&t.assemblerWorker.postMessage(n)},250),t.handleSetSource=function(n){if(P.useWebWorkers&&t.assemblerWorker)t.debouncedCompile({source:n}),t.setState({sourceCode:n,diagnosticsIndex:void 0});else{var e={readFileSync:function(e){return n}},r=Object(h.assemble)("foo.asm",e);0===r.errors.length?t.setState({sourceCode:n,disassembly:Object(h.disassemble)(r.prg),diagnostics:[],diagnosticsIndex:void 0}):t.setState({sourceCode:n,diagnostics:r.errors,diagnosticsIndex:void 0})}},t.handleClearDiagnosticsSelectionOnKey=function(n){"F4"!==n.key&&"Shift"!==n.key&&void 0!==t.state.diagnosticsIndex&&t.setState({diagnosticsIndex:void 0})},t.handleClearDiagnosticsSelectionOnMouse=function(n){void 0!==t.state.diagnosticsIndex&&t.setState({diagnosticsIndex:void 0})},t}return Object(f.a)(e,n),Object(o.a)(e,[{key:"componentDidMount",value:function(){var n=this;document.addEventListener("keydown",this.handleKeyDown),this.assemblerWorker=new Worker("worker.js"),null!==this.assemblerWorker&&this.assemblerWorker.addEventListener("message",function(e){n.handleWorkerMessage(e)})}},{key:"render",value:function(){var n=this.state.diagnostics,e=void 0;if(0!==n.length&&void 0!==this.state.diagnosticsIndex){var t=n[this.state.diagnosticsIndex];e=function(n,e){for(var t=n.split("\n"),r=0,l=0;l<e.start.line-1;l++)r+=t[l].length+1;return r+e.start.column-1}(this.state.sourceCode,t.loc)}return l.a.createElement(r.Fragment,null,l.a.createElement("header",{id:"pageHeader"},l.a.createElement("div",{className:j.a.appTitle},"Try ",l.a.createElement("a",{href:"https://nurpax.github.io/c64jasm/"},"c64jasm")," in a Browser")),l.a.createElement("div",{onKeyDown:this.handleClearDiagnosticsSelectionOnKey,onMouseDown:this.handleClearDiagnosticsSelectionOnMouse,onMouseUp:this.handleClearDiagnosticsSelectionOnMouse,id:"mainCode"},l.a.createElement(C,{onSourceChanged:this.handleSetSource,diagnostics:this.state.diagnostics,errorCharOffset:e})),l.a.createElement("div",{id:"siteDisasm"},l.a.createElement(I,{disassembly:this.state.disassembly})),l.a.createElement("div",{id:"mainDiag"},l.a.createElement(T,{onClickItem:this.handleOnClickDiagnostic,diagnostics:this.state.diagnostics,selectedIndex:this.state.diagnosticsIndex})),l.a.createElement("footer",{id:"pageFooter"}))}}]),e}(l.a.Component);a.a.render(l.a.createElement(B,null),document.getElementById("root"))}],[[23,1,2]]]);
//# sourceMappingURL=main.a1597aef.chunk.js.map