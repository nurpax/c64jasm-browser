(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[,,,function(e,t,n){e.exports={layoutContainer:"Editor_layoutContainer__2bFri",editorContainer:"Editor_editorContainer__1wXnR",overlayCommon:"Editor_overlayCommon__36_O2",textarea:"Editor_textarea__28EdL",textareaHighlightOverlay:"Editor_textareaHighlightOverlay__1opTU",textareaHighlightRow:"Editor_textareaHighlightRow__1R6Ia",textareaHighlightRowCurrent:"Editor_textareaHighlightRowCurrent__25KL2",highlightError:"Editor_highlightError__1YeA5",gutter:"Editor_gutter__3CDcX",gutterRow:"Editor_gutterRow__1DNMN",gutterRowSelected:"Editor_gutterRowSelected__3GiGf",textareaSyntaxHighlightOverlay:"Editor_textareaSyntaxHighlightOverlay__31QUS",textareaSyntaxHighlightRow:"Editor_textareaSyntaxHighlightRow__2NLii",hiliteNormal:"Editor_hiliteNormal__3ZDsF",hiliteComment:"Editor_hiliteComment__1s7LO"}},,,,,function(e,t,n){e.exports={container:"SourceTabs_container__2NQsa",tabContainer:"SourceTabs_tabContainer__2X9q3",gistContainer:"SourceTabs_gistContainer__1hQke",gistInputContainer:"SourceTabs_gistInputContainer__fGFjd",tab:"SourceTabs_tab__2FK_a",active:"SourceTabs_active__1mZcV",gist:"SourceTabs_gist__3Emgh",extraYMargin:"SourceTabs_extraYMargin__1uDab",gistLoadButtonContainer:"SourceTabs_gistLoadButtonContainer__3NcSa",gistResetButtonContainer:"SourceTabs_gistResetButtonContainer__3PwhC",loadingText:"SourceTabs_loadingText__3UiVE"}},,function(e,t,n){e.exports={helpModalContainer:"Help_helpModalContainer__10bLm",helpContents:"Help_helpContents__3Cbr8",headingContainer:"Help_headingContainer__jN87w",emph:"Help_emph__29_7I",hidden:"Help_hidden__2fGZK",circleReveal:"Help_circleReveal__2igbG",circle:"Help_circle__2jpkq",maxWidth:"Help_maxWidth__3MUy2",closeButtonContainer:"Help_closeButtonContainer__1TIMT",asm:"Help_asm__1yYjY"}},function(e,t,n){e.exports={layoutContainer:"DiagnosticsList_layoutContainer__3Yxfa",diagnostics:"DiagnosticsList_diagnostics__U_t5K",diagnosticsBox:"DiagnosticsList_diagnosticsBox__NbaZi",diagItem:"DiagnosticsList_diagItem__3otDW",selected:"DiagnosticsList_selected__jbDsD",error:"DiagnosticsList_error__1cDSO"}},,function(e,t,n){"use strict";n.d(t,"b",function(){return r}),n.d(t,"a",function(){return a});var r="\nmodule.exports = {\n  sintab: ({}, len, scale) => {\n      const res = Array(len).fill(0).map((v,i) => Math.sin(i/len * Math.PI * 2.0) * scale);\n      return res;\n  }\n}\n",a="\n!filescope c64\n!macro basic_start(addr) {\n* = $801\n    !byte $0c, $08, $00, $00, $9e\n    !for d in [10000, 1000, 100, 10, 1] {\n        !if (addr >= d) {\n            !byte $30 + (addr/d)%10\n        }\n    }\n    !byte 0, 0, 0\n}\n"},function(e,t,n){"use strict";function r(e){return e.slice(2+(e.lastIndexOf(".")-1>>>0))}n.d(t,"a",function(){return r})},,,,,,function(e,t,n){"use strict";function r(e,t){for(var n=e.split("\n"),r=0,a=0;a<t.start.line-1;a++)r+=n[a].length+1;return r+t.start.column-1}function a(e,t){for(var n=e.split("\n"),r=0,a=0;a<n.length;a++)if(t<(r+=n[a].length+1))return a}n.d(t,"a",function(){return r}),n.d(t,"b",function(){return a})},,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(55);t.assemble=r.assemble,t.platformC64=r.platformC64;var a=n(74);t.disassemble=a.disassemble},,function(e,t,n){e.exports={layoutContainer:"Disasm_layoutContainer__36ehI",disasmContainer:"Disasm_disasmContainer__2QplX"}},,function(e,t,n){e.exports={buttonContainer:"CloseButton_buttonContainer__28ZWo",close:"CloseButton_close__1cumB"}},function(e,t,n){e.exports={headerContainer:"App_headerContainer__qCdWC",appTitle:"App_appTitle__2SEQk"}},,,,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={ADC:[105,101,117,null,109,125,121,null,97,113,null,null],AND:[41,37,53,null,45,61,57,null,33,49,null,null],ASL:[null,6,22,null,14,30,null,null,null,null,10,null],BIT:[null,36,null,null,44,null,null,null,null,null,null,null],BPL:[null,null,null,null,null,null,null,null,null,null,null,16],BMI:[null,null,null,null,null,null,null,null,null,null,null,48],BVC:[null,null,null,null,null,null,null,null,null,null,null,80],BVS:[null,null,null,null,null,null,null,null,null,null,null,112],BCC:[null,null,null,null,null,null,null,null,null,null,null,144],BCS:[null,null,null,null,null,null,null,null,null,null,null,176],BNE:[null,null,null,null,null,null,null,null,null,null,null,208],BEQ:[null,null,null,null,null,null,null,null,null,null,null,240],BRK:[null,null,null,null,null,null,null,null,null,null,0,null],CMP:[201,197,213,null,205,221,217,null,193,209,null,null],CPX:[224,228,null,null,236,null,null,null,null,null,null,null],CPY:[192,196,null,null,204,null,null,null,null,null,null,null],DEC:[null,198,214,null,206,222,null,null,null,null,null,null],EOR:[73,69,85,null,77,93,89,null,65,81,null,null],CLC:[null,null,null,null,null,null,null,null,null,null,24,null],SEC:[null,null,null,null,null,null,null,null,null,null,56,null],CLI:[null,null,null,null,null,null,null,null,null,null,88,null],SEI:[null,null,null,null,null,null,null,null,null,null,120,null],CLV:[null,null,null,null,null,null,null,null,null,null,184,null],CLD:[null,null,null,null,null,null,null,null,null,null,216,null],SED:[null,null,null,null,null,null,null,null,null,null,248,null],INC:[null,230,246,null,238,254,null,null,null,null,null,null],JMP:[null,null,null,null,76,null,null,108,null,null,null,null],JSR:[null,null,null,null,32,null,null,null,null,null,null,null],LDA:[169,165,181,null,173,189,185,null,161,177,null,null],LDX:[162,166,null,182,174,null,190,null,null,null,null,null],LDY:[160,164,180,null,172,188,null,null,null,null,null,null],LSR:[null,70,86,null,78,94,null,null,null,null,74,null],NOP:[null,null,null,null,null,null,null,null,null,null,234,null],ORA:[9,5,21,null,13,29,25,null,1,17,null,null],TAX:[null,null,null,null,null,null,null,null,null,null,170,null],TXA:[null,null,null,null,null,null,null,null,null,null,138,null],DEX:[null,null,null,null,null,null,null,null,null,null,202,null],INX:[null,null,null,null,null,null,null,null,null,null,232,null],TAY:[null,null,null,null,null,null,null,null,null,null,168,null],TYA:[null,null,null,null,null,null,null,null,null,null,152,null],DEY:[null,null,null,null,null,null,null,null,null,null,136,null],INY:[null,null,null,null,null,null,null,null,null,null,200,null],ROR:[null,102,118,null,110,126,null,null,null,null,106,null],ROL:[null,38,54,null,46,62,null,null,null,null,42,null],RTI:[null,null,null,null,null,null,null,null,null,null,64,null],RTS:[null,null,null,null,null,null,null,null,null,null,96,null],SBC:[233,229,245,null,237,253,249,null,225,241,null,null],STA:[null,133,149,null,141,157,153,null,129,145,null,null],TXS:[null,null,null,null,null,null,null,null,null,null,154,null],TSX:[null,null,null,null,null,null,null,null,null,null,186,null],PHA:[null,null,null,null,null,null,null,null,null,null,72,null],PLA:[null,null,null,null,null,null,null,null,null,null,104,null],PHP:[null,null,null,null,null,null,null,null,null,null,8,null],PLP:[null,null,null,null,null,null,null,null,null,null,40,null],STX:[null,134,null,150,142,null,null,null,null,null,null,null],STY:[null,132,148,null,140,null,null,null,null,null,null,null],"---":[null,null,null,null,null,null,null,null,null,null,null,null]}},,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mkLiteral=function(e,t){return{type:"literal",lit:e,loc:t}},t.mkScopeQualifiedIdent=function(e,t,n){return{type:"qualified-ident",path:e,absolute:t,loc:n}},t.mkIdent=function(e,t){return{type:"ident",name:e,loc:t}},t.mkUnary=function(e,t,n){return{type:"unary",op:e,expr:t,loc:n}},t.mkBinaryOp=function(e,t,n,r){return{type:"binary",op:e,left:t,right:n,loc:r}},t.mkExprArray=function(e,t){return{type:"array",list:e,loc:t}},t.mkExprObject=function(e,t){return{type:"object",props:e,loc:t}},t.mkCallFunc=function(e,t,n){return{type:"callfunc",callee:e,args:null==t?[]:t,loc:n}},t.mkMember=function(e,t,n,r){return{type:"member",object:e,property:t,computed:n,loc:r}},function(e){e[e.Byte=0]="Byte",e[e.Word=1]="Word"}(t.DataSize||(t.DataSize={})),t.mkLabel=function(e,t){return{name:e,loc:t}},t.mkInsn=function(e,t){return{type:"insn",insn:e,loc:t}},t.mkSetPC=function(e,t){return{type:"setpc",pc:e,loc:t}},t.mkData=function(e,t,n){return{type:"data",values:t,dataSize:e,loc:n}},t.mkFill=function(e,t,n){return{type:"fill",numBytes:e,fillValue:t,loc:n}},t.mkAlign=function(e,t){return{type:"align",alignBytes:e,loc:t}},t.mkInclude=function(e,t){return{type:"include",filename:e,loc:t}},t.mkError=function(e,t){return{type:"error",error:e,loc:t}},t.mkBinary=function(e,t,n,r){return{type:"binary",filename:e,size:t,offset:n,loc:r}},t.mkIfElse=function(e,t,n){return{type:"if",cases:e,elseBranch:null!==t?t:[],loc:n}},t.mkFor=function(e,t,n,r){return{type:"for",index:e,list:t,body:n,loc:r}},t.mkMacroArg=function(e){return{ident:e}},t.mkMacro=function(e,t,n,r){return{type:"macro",name:e,args:null==t?[]:t,body:n,loc:r}},t.mkCallMacro=function(e,t,n){return{type:"callmacro",name:e,args:null==t?[]:t,loc:n}},t.mkLet=function(e,t,n){return{type:"let",name:e,value:t,loc:n}},t.mkAssign=function(e,t,n){return{type:"assign",name:e,value:t,loc:n}},t.mkStmtExpr=function(e,t){return{type:"statement-expr",expr:e,loc:t}},t.mkLoadPlugin=function(e,t,n){return{type:"load-plugin",filename:e,moduleName:t,loc:n}},t.mkFilescope=function(e,t){return{type:"filescope",name:e,loc:t}},t.mkAsmLine=function(e,t,n,r){return{label:e,stmt:t,scopedStmts:n,loc:r}}},function(e,t,n){"use strict";(function(e){var r=n(9),a=n(4),l=n(1),i=n(2),o=n(5),u=n(6),s=n(0),c=n.n(s),f=n(23),h=n(24),d=n.n(h),p=n(14),m=n(13),v=n(20),y=n(43),g=n(40),b=n(41),k=n(42),S=n(44),C=n(28),x=n.n(C),E={useWebWorkers:!0};var w=function(){function e(){Object(o.a)(this,e),this.cache={}}return Object(u.a)(e,[{key:"update",value:function(e){var t=!1,n=!0,r=!1,a=void 0;try{for(var l,i=e[Symbol.iterator]();!(n=(l=i.next()).done);n=!0){var o=l.value;this.cache[o.name]!==o.text&&(this.cache[o.name]=o.text,t=!0),this.cache[o.name]=o.text}}catch(u){r=!0,a=u}finally{try{n||null==i.return||i.return()}finally{if(r)throw a}}return{sourceFileMap:this.cache,changed:t}}}]),e}(),A=[{name:"main.asm",text:e.from(""),cursorOffset:0},{name:"c64.asm",text:e.from(m.a),cursorOffset:0},{name:"plugin.js",text:e.from(m.b),cursorOffset:0}],O=function(t){function n(){var t,i;Object(o.a)(this,n);for(var u=arguments.length,s=new Array(u),c=0;c<u;c++)s[c]=arguments[c];return(i=Object(a.a)(this,(t=Object(l.a)(n)).call.apply(t,[this].concat(s)))).sourceFileMapCache=new w,i.assemblerWorker=void 0,i.state={gist:{id:"",loadCount:0,loading:!1},sourceFiles:{selected:0,files:A},disassembly:[],prg:e.from([]),diagnosticsIndex:0,diagnostics:[],helpVisible:!1},i.setGistLoadingStatus=function(e){i.setState(function(t){return{gist:Object(r.a)({},t.gist,{loading:e})}})},i.loadGist=function(t){if(null===t)return window.history.replaceState({},"",decodeURIComponent("".concat(window.location.pathname))),void i.setState(function(n){return{gist:Object(r.a)({},n.gist,{gistId:t,loadCount:n.gist.loadCount+1}),sourceFiles:{files:A,selected:0},disassembly:[],prg:e.from([]),diagnosticsIndex:0,diagnostics:[]}});i.setGistLoadingStatus(!0),fetch("https://api.github.com/gists/".concat(t),{headers:{Accept:"application/vnd.github.v3.base64"}}).then(function(e){if(200!==e.status)throw new Error("Gist load failed with HTTP status code ".concat(e.status,": ").concat(e.statusText));return e}).then(function(e){return e.json()}).then(function(n){i.setGistLoadingStatus(!1),function(e,t){var n=new URLSearchParams(window.location.search);n.set(e,t),window.history.replaceState({},"",decodeURIComponent("".concat(window.location.pathname,"?").concat(n)))}("gist_id",t),i.setState(function(a){var l=[],i=0,o=!0,u=!1,s=void 0;try{for(var c,f=Object.values(n.files)[Symbol.iterator]();!(o=(c=f.next()).done);o=!0){var h=c.value;l.push({name:h.filename,text:e.from(h.content,"base64"),cursorOffset:0}),"main.asm"===h.filename&&(i=l.length-1)}}catch(d){u=!0,s=d}finally{try{o||null==f.return||f.return()}finally{if(u)throw s}}return l.push({name:"c64.asm",text:e.from(m.a),cursorOffset:0}),{gist:Object(r.a)({},a.gist,{gistId:t,loadCount:a.gist.loadCount+1}),sourceFiles:{files:l,selected:i}}},function(){return i.recompile()})}).catch(function(e){console.log(e),i.setState(function(e){return{gist:Object(r.a)({},e.gist,{loading:!1})}})})},i.getCurrentSource=function(){return i.state.sourceFiles.files[i.state.sourceFiles.selected]},i.updateCurrentSourceFile=function(e,t){return Object(r.a)({},e,{files:e.files.map(function(n,r){return r===e.selected?t(n):n})})},i.handleWorkerMessage=function(e){0===e.data.diagnostics.length?i.setState({prg:e.data.prg,disassembly:e.data.disassembly,diagnostics:e.data.diagnostics}):i.setState({diagnostics:e.data.diagnostics})},i.handleKeyDown=function(e){"F4"===e.key&&(i.setState(function(t){if(0===t.diagnostics.length)return i.updateDiagnosticsIndexState(t,0);if(void 0===t.diagnosticsIndex)return i.updateDiagnosticsIndexState(t,0);if(e.shiftKey){var n=Math.max(0,t.diagnosticsIndex-1);return i.updateDiagnosticsIndexState(t,n)}var r=Math.min(t.diagnostics.length-1,t.diagnosticsIndex+1);return i.updateDiagnosticsIndexState(t,r)}),e.preventDefault()),"Escape"===e.key&&(i.setState({diagnosticsIndex:void 0,helpVisible:!1}),e.preventDefault())},i.findSourceForDiagnostic=function(e){var t=i.state.sourceFiles.selected;if(void 0===e)return t;for(var n=i.state.sourceFiles.files,r=0;r<n.length;r++){n[r].name===e.loc.source&&(t=r)}return t},i.updateDiagnosticsIndexState=function(e,t){var n=i.state.diagnostics[t],a=i.findSourceForDiagnostic(n);return e.sourceFiles.selected!==a?{diagnosticsIndex:t,sourceFiles:Object(r.a)({},e.sourceFiles,{selected:a})}:{diagnosticsIndex:t,sourceFiles:e.sourceFiles}},i.handleOnClickDiagnostic=function(e){i.setState(function(t){return i.updateDiagnosticsIndexState(t,e)})},i.debouncedCompile=function(e,t){var n=void 0;return function(){for(var r=this,a=arguments.length,l=new Array(a),i=0;i<a;i++)l[i]=arguments[i];clearTimeout(n),n=window.setTimeout(function(){return e.apply(r,l)},t)}}(function(e){E.useWebWorkers&&i.assemblerWorker&&i.assemblerWorker.postMessage(e)},250),i.recompile=function(){var e=i.sourceFileMapCache.update(i.state.sourceFiles.files),t=e.sourceFileMap;if(e.changed)if(E.useWebWorkers&&i.assemblerWorker)i.debouncedCompile({sourceFileMap:t}),i.setState({diagnosticsIndex:void 0});else{var n={readFileSync:function(e){if(e in t)return t[e];throw new Error("File not found ".concat(e))}},r=Object(f.assemble)("main.asm",n);if(0===r.errors.length){var a={isInstruction:r.debugInfo.info().isInstruction};i.setState({prg:r.prg,disassembly:Object(f.disassemble)(r.prg,a),diagnostics:[],diagnosticsIndex:void 0})}else i.setState({diagnostics:r.errors,diagnosticsIndex:void 0})}},i.handleSetSource=function(t){i.setState(function(n){return{sourceFiles:i.updateCurrentSourceFile(n.sourceFiles,function(n){return Object(r.a)({},n,{text:e.from(t)})})}},function(){return i.recompile()})},i.handleSetSourcePosition=function(e){i.setState(function(t){return{sourceFiles:i.updateCurrentSourceFile(t.sourceFiles,function(t){return Object(r.a)({},t,{cursorOffset:e})})}})},i.handleClearDiagnosticsSelectionOnKey=function(e){"F4"!==e.key&&"Shift"!==e.key&&void 0!==i.state.diagnosticsIndex&&i.setState({diagnosticsIndex:void 0})},i.handleClearDiagnosticsSelectionOnMouse=function(e){void 0!==i.state.diagnosticsIndex&&i.setState({diagnosticsIndex:void 0})},i.handleClickHelp=function(){i.setState({helpVisible:!0})},i.handleCloseHelp=function(){i.setState({helpVisible:!1})},i.handleDownloadPRG=function(){var e=new Blob([i.state.prg]);d.a.saveAs(e,"c64jasm-online.prg")},i.handleDownloadDisasm=function(){var e=new Blob([i.state.disassembly.join("\n")],{type:"text/plain;charset=utf-8"});d.a.saveAs(e,"c64jasm-online.s")},i.handleSourceTabSelected=function(e){i.setState(function(t){return{sourceFiles:Object(r.a)({},t.sourceFiles,{selected:e})}})},i}return Object(i.a)(n,t),Object(u.a)(n,[{key:"componentDidMount",value:function(){var e=this;document.addEventListener("keydown",this.handleKeyDown),this.assemblerWorker=new Worker("worker.js"),null!==this.assemblerWorker&&this.assemblerWorker.addEventListener("message",function(t){e.handleWorkerMessage(t)});var t=new URLSearchParams(window.location.search).get("gist_id");null!==t&&this.loadGist(t)}},{key:"render",value:function(){var e=this,t=this.state.diagnostics,n=void 0;if(0!==t.length&&void 0!==this.state.diagnosticsIndex){var r=t[this.state.diagnosticsIndex];if(void 0!==r){var a=this.findSourceForDiagnostic(r),l=this.state.sourceFiles.files[a];n=Object(v.a)(l.text.toString(),r.loc)}}var i=this.state.diagnostics.filter(function(t){return t.loc.source===e.getCurrentSource().name});return c.a.createElement("div",{id:"root"},c.a.createElement("div",{id:"mainHeader"},c.a.createElement("div",{className:x.a.headerContainer},c.a.createElement("div",null,c.a.createElement("div",{className:x.a.appTitle},c.a.createElement("a",{href:"https://nurpax.github.io/c64jasm/"},"c64jasm")," online")))),c.a.createElement("div",{onKeyDown:this.handleClearDiagnosticsSelectionOnKey,onMouseDown:this.handleClearDiagnosticsSelectionOnMouse,onMouseUp:this.handleClearDiagnosticsSelectionOnMouse,id:"mainCode"},c.a.createElement(y.a,{key:"".concat(this.state.gist.id,"/").concat(this.state.gist.loadCount,"/").concat(this.getCurrentSource().name),defaultValue:this.getCurrentSource().text.toString(),defaultCursorOffset:this.getCurrentSource().cursorOffset,onSourceChanged:this.handleSetSource,onSourcePositionChanged:this.handleSetSourcePosition,diagnostics:i,errorCharOffset:n,sourceFileExt:Object(p.a)(this.getCurrentSource().name)})),c.a.createElement("div",{id:"siteDisasm"},c.a.createElement(g.a,{disassembly:this.state.disassembly})),c.a.createElement("div",{id:"mainSourceTabs"},c.a.createElement(k.a,{key:this.state.gist.loadCount,setSelected:this.handleSourceTabSelected,selected:this.state.sourceFiles.selected,files:this.state.sourceFiles.files,onLoadGist:this.loadGist,loadingGist:this.state.gist.loading,renderExtras:function(t){var n=t.Button;return c.a.createElement(c.a.Fragment,null,c.a.createElement(n,{text:"Reset Workspace",title:"Reset the workspace.  Cannot be undone.",onClick:function(){return e.loadGist(null)}}),c.a.createElement(n,{text:"Save PRG",title:"Download compiled binary as C64 .prg",yMargin:!0,onClick:e.handleDownloadPRG}),c.a.createElement(n,{text:"Save Disasm",title:"Download the output disassemble file",onClick:e.handleDownloadDisasm}),c.a.createElement(n,{text:"Help",title:"C64jasm online help",yMargin:!0,onClick:e.handleClickHelp}))}})),c.a.createElement("div",{id:"mainDiag"},c.a.createElement(b.a,{onClickItem:this.handleOnClickDiagnostic,diagnostics:this.state.diagnostics,selectedIndex:this.state.diagnosticsIndex})),c.a.createElement(S.a,{visible:this.state.helpVisible,onClose:this.handleCloseHelp}))}}]),n}(c.a.Component);t.a=O}).call(this,n(30).Buffer)},,,function(e,t,n){"use strict";n.d(t,"a",function(){return h});var r=n(5),a=n(6),l=n(4),i=n(1),o=n(2),u=n(0),s=n.n(u),c=n(25),f=n.n(c),h=function(e){function t(){return Object(r.a)(this,t),Object(l.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(o.a)(t,e),Object(a.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{className:f.a.layoutContainer},s.a.createElement("div",{className:"heading"},s.a.createElement("div",{className:"heading-pad"},"Disassembly")),s.a.createElement("div",{className:f.a.disasmContainer},s.a.createElement("pre",null,this.props.disassembly.join("\n"))))}}]),t}(s.a.PureComponent)},function(e,t,n){"use strict";n.d(t,"a",function(){return d});var r=n(5),a=n(6),l=n(4),i=n(1),o=n(2),u=n(0),s=n.n(u),c=n(11),f=n.n(c),h=function(e){function t(){var e,n;Object(r.a)(this,t);for(var a=arguments.length,o=new Array(a),u=0;u<a;u++)o[u]=arguments[u];return(n=Object(l.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(o)))).itemRef=s.a.createRef(),n}return Object(o.a)(t,e),Object(a.a)(t,[{key:"componentDidUpdate",value:function(e,t,n){this.itemRef&&this.itemRef.current&&this.props.selected&&this.itemRef.current.scrollIntoView({behavior:"smooth",block:"center"})}},{key:"render",value:function(){var e=this,t=this.props.error,n=t.loc,r=t.msg,a=this.props.selected?" ".concat(f.a.selected):"";return s.a.createElement("div",{ref:this.itemRef,className:"".concat(f.a.diagItem).concat(a),onClick:function(){return e.props.onClickItem(e.props.index)}},s.a.createElement("span",{className:"".concat(f.a.error).concat(a)},n.source,":",n.start.line,":",n.start.column,": error:")," ",r)}}]),t}(s.a.Component),d=function(e){function t(){var e,n;Object(r.a)(this,t);for(var a=arguments.length,o=new Array(a),u=0;u<a;u++)o[u]=arguments[u];return(n=Object(l.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(o)))).handleOnClickItem=function(e){n.props.onClickItem(e)},n}return Object(o.a)(t,e),Object(a.a)(t,[{key:"render",value:function(){var e=this,t=this.props.diagnostics;return s.a.createElement("div",{className:f.a.layoutContainer},s.a.createElement("div",{className:"heading"},s.a.createElement("div",{className:"heading-pad"},"Diagnostics")),s.a.createElement("div",{className:f.a.diagnostics},s.a.createElement("div",{className:f.a.diagnosticsBox},t.map(function(t,n){return s.a.createElement(h,{key:JSON.stringify(t.loc),index:n,error:t,selected:n===e.props.selectedIndex,onClickItem:e.handleOnClickItem})}))))}}]),t}(s.a.PureComponent)},function(e,t,n){"use strict";n.d(t,"a",function(){return C});var r=n(22),a=n(5),l=n(6),i=n(4),o=n(1),u=n(2),s=n(0),c=n.n(s),f=n(8),h=n.n(f),d=n(7),p=n.n(d),m=n(26),v=n(14),y=function(e){function t(){var e,n;Object(a.a)(this,t);for(var r=arguments.length,l=new Array(r),u=0;u<r;u++)l[u]=arguments[u];return(n=Object(i.a)(this,(e=Object(o.a)(t)).call.apply(e,[this].concat(l)))).state={gistIdOrUrl:""},n.handleSubmit=function(e){e.preventDefault();var t=n.state.gistIdOrUrl.split("/");t.length>0&&n.props.onSubmit(t[t.length-1])},n.handleInputChange=function(e){n.setState({gistIdOrUrl:e.target.value})},n.handlePreventBlur=function(e){e.preventDefault()},n}return Object(u.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this;return c.a.createElement("form",{onSubmit:this.handleSubmit,onBlur:function(){return e.props.onCancel()},className:p()(h.a.gist,h.a.gistInputContainer)},c.a.createElement("input",{placeholder:"Gist ID or URL",onChange:this.handleInputChange,value:this.state.gistIdOrUrl,onKeyDown:function(t){"Escape"===t.key&&e.props.onCancel()},autoFocus:!0,spellCheck:!1,type:"text"}),c.a.createElement("button",{onMouseDown:this.handlePreventBlur,type:"submit"},"Go!"))}}]),t}(c.a.Component),g=function(e){function t(){var e,n;Object(a.a)(this,t);for(var r=arguments.length,l=new Array(r),u=0;u<r;u++)l[u]=arguments[u];return(n=Object(i.a)(this,(e=Object(o.a)(t)).call.apply(e,[this].concat(l)))).state={editing:!1},n.handleOpenLoadInput=function(){n.setState(function(e){return{editing:!e.editing}})},n.handleResetWorkspace=function(){n.props.onLoadGist(null)},n}return Object(u.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this;return this.props.loadingGist?c.a.createElement("div",{className:h.a.gistContainer},c.a.createElement("div",{className:h.a.loadingText},"Loading gist..")):c.a.createElement("div",{className:h.a.gistContainer},this.state.editing&&c.a.createElement(y,{onCancel:function(){return e.setState({editing:!1})},onSubmit:function(t){e.setState({editing:!1}),""!==t&&e.props.onLoadGist(t)}}),!this.state.editing&&c.a.createElement("div",{className:p()(h.a.gist,h.a.gistLoadButtonContainer)},c.a.createElement("button",{onClick:this.handleOpenLoadInput,title:"Load source files from a GitHub public Gist"},"Load Gist")))}}]),t}(c.a.PureComponent),b=function(e){function t(){var e,n;Object(a.a)(this,t);for(var r=arguments.length,l=new Array(r),u=0;u<r;u++)l[u]=arguments[u];return(n=Object(i.a)(this,(e=Object(o.a)(t)).call.apply(e,[this].concat(l)))).handleTabClick=function(e,t){n.props.setSelected(t)},n}return Object(u.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=this.props.sortIdx.map(function(t){var n=e.props.filenames[t];return c.a.createElement("div",{key:n,className:p()(h.a.tab,t===e.props.selected?h.a.active:""),onClick:function(n){return e.handleTabClick(n,t)}},n)});return c.a.createElement("div",{className:h.a.tabContainer},t)}}]),t}(c.a.PureComponent);function k(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(var n=e[0],r=t[0],a=0;a<n.length;a++)if(n[a]!==r[a])return!1;return!0}function S(e){return c.a.createElement("div",{className:p()(h.a.gist,e.yMargin&&h.a.extraYMargin)},c.a.createElement("div",{className:h.a.gistResetButtonContainer},c.a.createElement("button",{onClick:e.onClick,title:e.title},e.text)))}var C=function(e){function t(){var e,n;Object(a.a)(this,t);for(var l=arguments.length,u=new Array(l),s=0;s<l;s++)u[s]=arguments[s];return(n=Object(i.a)(this,(e=Object(o.a)(t)).call.apply(e,[this].concat(u)))).getFilenames=Object(m.a)(function(e){return e},k),n.getSortOrder=Object(m.a)(function(e){return function(e){for(var t=[],n=0;n<e.length;n++)t.push([e[n],n]);return t.sort(function(e,t){var n=Object(r.a)(e,2),a=n[0],l=(n[1],Object(r.a)(t,2)),i=l[0],o=(l[1],Object(v.a)(a)),u=Object(v.a)(i);return o===u?a.localeCompare(i):o.localeCompare(u)}),t.map(function(e){var t=Object(r.a)(e,2);return t[0],t[1]})}(e)}),n}return Object(u.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.getFilenames(this.props.files.map(function(e){return e.name})),t=this.getSortOrder(e);return c.a.createElement("div",{className:h.a.container},c.a.createElement("div",{className:"heading"},c.a.createElement("div",{className:"heading-pad"},"Source files")),c.a.createElement(b,{filenames:e,sortIdx:t,selected:this.props.selected,setSelected:this.props.setSelected}),c.a.createElement(g,{onLoadGist:this.props.onLoadGist,loadingGist:this.props.loadingGist}),this.props.renderExtras&&this.props.renderExtras({Button:function(e){return c.a.createElement(S,e)}}))}}]),t}(c.a.Component)},function(e,t,n){"use strict";var r=n(21),a=n(5),l=n(6),i=n(4),o=n(1),u=n(2),s=n(0),c=n.n(s),f=n(38),h=n.n(f),d=n(7),p=n.n(d),m=n(39),v=n(20);function y(e,t){y=function(e,t){return new i(e,t)};var n=Object(r.a)(RegExp),a=RegExp.prototype,l=new WeakMap;function i(e,t){var r=n.call(this,e);return l.set(r,t),r}function o(e,t){var n=l.get(t);return Object.keys(n).reduce(function(t,r){return t[r]=e[n[r]],t},Object.create(null))}return Object(u.a)(i,n),i.prototype.exec=function(e){var t=a.exec.call(this,e);return t&&(t.groups=o(t,this)),t},i.prototype[Symbol.replace]=function(e,t){if("string"===typeof t){var n=l.get(this);return a[Symbol.replace].call(this,e,t.replace(/\$<([^>]+)>/g,function(e,t){return"$"+n[t]}))}if("function"===typeof t){var r=this;return a[Symbol.replace].call(this,e,function(){var e=[];return e.push.apply(e,arguments),"object"!==typeof e[e.length-1]&&e.push(o(e,r)),t.apply(this,e)})}return a[Symbol.replace].call(this,e,t)},y.apply(this,arguments)}function g(e){var t=[],n=y(/^([^;]*)(;.*)?$/,{code:1,comment:2}).exec(e);if(!n)throw new Error("internal error");var r=n.groups.code,a=n.groups.comment;return void 0!==r&&t.push({text:r,color:"normal"}),void 0!==a&&t.push({text:a,color:"comment"}),t}function b(e){var t=[],n=y(/^(.*)(\/\/.*)$/,{code:1,comment:2}).exec(e);if(!n)return[{text:e,color:"normal"}];var r=n.groups.code,a=n.groups.comment;return void 0!==r&&t.push({text:r,color:"normal"}),void 0!==a&&t.push({text:a,color:"comment"}),t}function k(e,t){var n={asm:g,inc:g,js:b}[e];return void 0!==n?n(t):[{text:t,color:"normal"}]}var S=n(3),C=n.n(S);function x(e,t){x=function(e,t){return new i(e,t)};var n=Object(r.a)(RegExp),a=RegExp.prototype,l=new WeakMap;function i(e,t){var r=n.call(this,e);return l.set(r,t),r}function o(e,t){var n=l.get(t);return Object.keys(n).reduce(function(t,r){return t[r]=e[n[r]],t},Object.create(null))}return Object(u.a)(i,n),i.prototype.exec=function(e){var t=a.exec.call(this,e);return t&&(t.groups=o(t,this)),t},i.prototype[Symbol.replace]=function(e,t){if("string"===typeof t){var n=l.get(this);return a[Symbol.replace].call(this,e,t.replace(/\$<([^>]+)>/g,function(e,t){return"$"+n[t]}))}if("function"===typeof t){var r=this;return a[Symbol.replace].call(this,e,function(){var e=[];return e.push.apply(e,arguments),"object"!==typeof e[e.length-1]&&e.push(o(e,r)),t.apply(this,e)})}return a[Symbol.replace].call(this,e,t)},x.apply(this,arguments)}n.d(t,"a",function(){return L});var E=4;function w(e,t){for(var n=0,r=0;r<t;r++){if(e.length<r)return;"\t"===e[r]?n+=E:n++}return n}function A(e){var t=0;if(!e.text)return null;var n=!0,r=!1,a=void 0;try{for(var l,i=e.text[Symbol.iterator]();!(n=(l=i.next()).done);n=!0){"\t"===l.value?t+=E:t++}}catch(m){r=!0,a=m}finally{try{n||null==i.return||i.return()}finally{if(r)throw a}}var o=Array(t).fill(!1),u=!0,f=!1,h=void 0;try{for(var d,p=e.errors[Symbol.iterator]();!(u=(d=p.next()).done);u=!0){var m=d.value,v=w(e.text,m.start.column-1);if(void 0===v)return null;var y=m.start.line===m.end.line?w(e.text,m.end.column-1):v+1;if(void 0===y)return null;for(var g=v;g<y;g++)o[g]=!0}}catch(m){f=!0,h=m}finally{try{u||null==p.return||p.return()}finally{if(f)throw h}}for(var b=function(e){var t=void 0,n=[],r=!0,a=!1,l=void 0;try{for(var i,o=e[Symbol.iterator]();!(r=(i=o.next()).done);r=!0){var u=i.value;t!==u?(t=u,n.push({code:t,count:1})):n[n.length-1].count++}}catch(m){a=!0,l=m}finally{try{r||null==o.return||o.return()}finally{if(a)throw l}}return n}(o),k=[],S=0;S<b.length;S++){var x=b[S];x.code?k.push(c.a.createElement("pre",{key:S,style:{display:"inline-block"},className:C.a.highlightError}," ".repeat(x.count))):k.push(c.a.createElement("pre",{key:S,style:{display:"inline-block"}}," ".repeat(x.count)))}return c.a.createElement(s.Fragment,null,k)}var O=c.a.forwardRef(function(e,t){for(var n=[],r=e.startRow;r<e.startRow+e.numRows+2;r++){var a=r===e.currentLine&&C.a.textareaHighlightRowCurrent,l=e.lineToErrors.get(r);if(l){var i=e.textLines[r];n.push(c.a.createElement("div",{className:p()(C.a.textareaHighlightRow,a),key:r},c.a.createElement(A,{text:i,errors:l})))}else n.push(c.a.createElement("div",{className:p()(C.a.textareaHighlightRow,a),key:r}))}return c.a.createElement("div",{ref:t,className:p()(C.a.overlayCommon,C.a.textareaHighlightOverlay)},n)}),_=c.a.forwardRef(function(e,t){for(var n=[],r={normal:C.a.hiliteNormal,comment:C.a.hiliteComment},a=e.startRow;a<e.startRow+e.numRows+2;a++){var l=[];if(a<e.textLines.length)for(var i=e.textLines[a],o=k(e.sourceFileExt,i),u=0;u<o.length;u++){var s=o[u],f=s.text,h=s.color;l.push(c.a.createElement("pre",{key:u,className:r[h],style:{display:"inline-block"}},f))}n.push(c.a.createElement("div",{className:C.a.textareaSyntaxHighlightRow,key:a},l))}return c.a.createElement("div",{ref:t,className:p()(C.a.overlayCommon,C.a.textareaSyntaxHighlightOverlay),style:{width:"".concat(e.fixedDims.width,"px"),height:"".concat(e.fixedDims.height,"px")}},c.a.createElement("div",{style:{marginLeft:"-".concat(e.scrollLeft,"px")}},n))}),j=c.a.forwardRef(function(e,t){for(var n=[],r=e.startRow;r<e.startRow+e.numRows+2;r++){var a="".concat(r+1),l=r===e.currentLine&&C.a.gutterRowSelected,i=r>=0&&r<e.numTextRows?a.padStart(4," "):"";n.push(c.a.createElement("div",{className:p()(C.a.gutterRow,l),key:r},i))}return c.a.createElement("div",{ref:t,className:C.a.gutter,style:{height:"".concat(e.height,"px")}},n)}),L=function(e){function t(e){var n;Object(a.a)(this,t),(n=Object(i.a)(this,Object(o.a)(t).call(this,e))).editorLineHeight=0,n.resizeObserver=void 0,n.textareaRef=c.a.createRef(),n.gutterRef=c.a.createRef(),n.highlighterRef=c.a.createRef(),n.syntaxHighlighterRef=c.a.createRef(),n.handleScroll=function(e){var t=e.nativeEvent.target,r=t.scrollTop,a=t.scrollLeft;n.setState({scrollTop:r,scrollLeft:a})},n.handleSourceChanged=function(e){n.props.onSourceChanged(e.target.value),n.setState({textLines:e.target.value.split("\n")})},n.updateCursorState=function(){if(n.textareaRef.current){var e=n.textareaRef.current;if(e.selectionStart===e.selectionEnd){var t=e.selectionStart,r=Object(v.b)(n.textareaRef.current.value,t);n.setState({currentLine:r})}else n.setState({currentLine:void 0});n.props.onSourcePositionChanged(e.selectionStart)}},n.handleSelect=function(e){n.updateCursorState()},n.handleKeyDown=function(e){n.updateCursorState()},n.handleKeyUp=function(e){n.updateCursorState()},n.handleMouseDown=function(e){if(n.textareaRef.current){var t=e.nativeEvent.offsetY+n.state.scrollTop;n.setState({currentLine:Math.min(n.state.textLines.length-1,Math.floor(t/n.editorLineHeight))})}},n.state={scrollTop:0,scrollLeft:0,currentLine:0,textLines:n.props.defaultValue.split("\n"),textareaDims:{width:0,height:0}};var r=getComputedStyle(document.documentElement).getPropertyValue("--code-window-line-height"),l=x(/^[ ]*([0-9]+)px$/,{height:1}).exec(r);if(!l)throw new Error("failed querying css var --code-window-line-height"+r);return n.editorLineHeight=parseInt(l.groups.height),n.resizeObserver=new m.a(function(e){var t=e[0];n.setState({textareaDims:{width:t.contentRect.width,height:t.contentRect.height}})}),n}return Object(u.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.textareaRef.current&&(h.a.watch(this.textareaRef.current),this.textareaRef.current.spellcheck=!1,this.textareaRef.current.selectionStart=this.props.defaultCursorOffset,this.textareaRef.current.selectionEnd=this.props.defaultCursorOffset,this.resizeObserver.observe(this.textareaRef.current),this.textareaRef.current.blur(),this.textareaRef.current.focus())}},{key:"componentWillUnmount",value:function(){this.textareaRef.current&&this.resizeObserver.unobserve(this.textareaRef.current)}},{key:"componentDidUpdate",value:function(e,t){if(this.textareaRef.current&&void 0!==this.props.errorCharOffset&&(this.textareaRef.current.setSelectionRange(this.props.errorCharOffset,this.props.errorCharOffset),this.textareaRef.current.blur(),this.textareaRef.current.focus()),t.scrollTop!==this.state.scrollTop){var n=this.state.scrollTop%this.editorLineHeight;this.gutterRef.current&&(this.gutterRef.current.scrollTop=n),this.highlighterRef.current&&(this.highlighterRef.current.scrollTop=n),this.syntaxHighlighterRef.current&&(this.syntaxHighlighterRef.current.scrollTop=n)}}},{key:"render",value:function(){var e=new Map;this.props.diagnostics.forEach(function(t){var n=t.loc,r=n.start.line-1,a=e.has(r)?e.get(r):[];a.push(n),e.set(r,a)});var t=Math.floor(this.state.scrollTop/this.editorLineHeight),n=0!==this.state.textareaDims.height?Math.ceil(this.state.textareaDims.height/this.editorLineHeight):1;return c.a.createElement("div",{className:C.a.layoutContainer},c.a.createElement("div",{className:"heading"},c.a.createElement("div",{className:"heading-pad"},"Assembly")),c.a.createElement("div",{className:C.a.editorContainer},c.a.createElement(j,{ref:this.gutterRef,startRow:t,numRows:n,numTextRows:this.state.textLines.length,currentLine:this.state.currentLine,height:this.state.textareaDims.height}),c.a.createElement("div",{className:C.a.textContainer,onMouseDown:this.handleMouseDown},c.a.createElement(O,{ref:this.highlighterRef,startRow:t,numRows:n,currentLine:this.state.currentLine,textLines:this.state.textLines,lineToErrors:e}),c.a.createElement("textarea",{className:p()(C.a.overlayCommon,C.a.textarea),defaultValue:this.props.defaultValue,wrap:"off",onKeyUp:this.handleKeyUp,onKeyDown:this.handleKeyDown,onSelect:this.handleSelect,onScroll:this.handleScroll,ref:this.textareaRef,onChange:this.handleSourceChanged}),c.a.createElement(_,{ref:this.syntaxHighlighterRef,startRow:t,fixedDims:this.state.textareaDims,scrollLeft:this.state.scrollLeft,numRows:n,textLines:this.state.textLines,sourceFileExt:this.props.sourceFileExt}))))}}]),t}(c.a.Component)},function(e,t,n){"use strict";var r=n(5),a=n(6),l=n(4),i=n(1),o=n(2),u=n(0),s=n.n(u),c=n(19),f=n.n(c),h=n(7),d=n.n(h),p=n(27),m=n.n(p);function v(e){return s.a.createElement("div",{className:m.a.buttonContainer},s.a.createElement("a",{title:"Close Help",href:"/",target:"_blank",className:m.a.close,onClick:function(t){t.preventDefault(),e.onClose()}}))}var y=n(10),g=n.n(y),b=n(13),k=document.getElementById("modal-root"),S=function(e){function t(e){var n;return Object(r.a)(this,t),(n=Object(l.a)(this,Object(i.a)(t).call(this,e))).el=void 0,n.el=document.createElement("div"),n}return Object(o.a)(t,e),Object(a.a)(t,[{key:"componentDidMount",value:function(){k.appendChild(this.el)}},{key:"componentWillUnmount",value:function(){k.removeChild(this.el)}},{key:"render",value:function(){return f.a.createPortal(this.props.children,this.el)}}]),t}(s.a.Component);function C(e){return s.a.createElement("pre",{className:g.a.asm},function(e){var t,n,r=e.split("\n");for(t=0;t<r.length&&0===r[t].trim().length;t++);for(n=r.length-1;n>=0&&0===r[n].trim().length;n--);return r.slice(t,n+1).join("\n")}(e.text))}var x=function(e){function t(){return Object(r.a)(this,t),Object(l.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(o.a)(t,e),Object(a.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{className:d()(g.a.helpContents,g.a.maxWidth)},s.a.createElement("div",{className:g.a.headingContainer},s.a.createElement("div",{className:g.a.closeButtonContainer},s.a.createElement(v,{onClose:this.props.onClose})),s.a.createElement("h1",null,"c64jasm online ")),s.a.createElement("p",null,s.a.createElement("a",{href:"https://nurpax.github.io/c64jasm/"},"c64jasm")," is a 6502 assembler written in JavaScript. You can run it either on the command line using Node or link it into a web app."),s.a.createElement("p",null,s.a.createElement("a",{href:"https://nurpax.github.io/c64jasm-browser/"},"c64jasm online")," is an interactive assembler demo site where you can write 6502 assembly with live error reporting and disassembly."),s.a.createElement("p",null,"Developed by Janne Hellsten, contact me through ",s.a.createElement("a",{href:"https://twitter.com/nurpax"},"@nurpax")),s.a.createElement("h3",null,"Example projects"),s.a.createElement("p",null,"C64jasm online supports loading source files from GitHub gists. Here's a list of example projects (click on the links to load):"),s.a.createElement("ul",null,s.a.createElement("li",null,s.a.createElement(function(e){return s.a.createElement(u.Fragment,null,s.a.createElement("a",{href:"".concat("/c64jasm-browser","/?gist_id=").concat(e.id)},e.text),"\xa0(",s.a.createElement("a",{href:"https://gist.github.com/nurpax/".concat(e.id)},"view on GitHub"),")")},{id:"4996160f290fa1b9470520d7be0ca25e",text:"Sine sprites"}))),s.a.createElement("h3",null,"Examples"),s.a.createElement("p",null,"Simple instructions and expressions:"),s.a.createElement(C,{text:"\n    lda #2+2  ; expression in an immediate field\n    sta $d020 ; set border color\n        "}),s.a.createElement("p",null,"Labels:"),s.a.createElement(C,{text:"\nentry: {\n    jsr func\n\n    ldx #8\nloop: ; label local to 'entry' scope\n    dex\n    bpl loop\n}\n\nfunc: {\n    ldx #7\nloop: ; label local to 'func' scope\n    sta buf, x   ; store to buf\n    dex\n    bpl loop\n    rts\n\nbuf: !fill 8, 0    ; 8 byte array\n}\n        "}),s.a.createElement("p",null,"Declaring and using variables:"),s.a.createElement(C,{text:"\n!let num_sprites = 4\n!let sprite_mask = (1<<num_sprites)-1\n\n    lda #sprite_mask\n    sta $d015 ; enable sprites 0-3\n        "}),s.a.createElement("p",null,"Conditional compilation and repetition:"),s.a.createElement(C,{text:"\n!let num_sprites = 4\n    lda #13  ; ptr to sprite data 1 (==address/64)\n    ldx #14  ; ptr to sprite data 2\n\n!for i in range(num_sprites) {\n    !if (i < 2) {\n        sta $07f8+i   ; sprite data 1 from A\n    } else {\n        stx $07f8+i   ; sprite data 2 from X\n    }\n}\n        "}),s.a.createElement("p",null,"Define and use macro macro:"),s.a.createElement(C,{text:"\n!macro set_border(color) {\n    lda #color\n    sta $d020\n}\n\n+set_border(13)  ; expand\n        "}),s.a.createElement("p",null,"A complete C64 program.  To compile a C64 ",s.a.createElement("code",null,".prg")," you need to insert a BASIC startup sequence at the beginning of your output ",s.a.createElement("code",null,".prg")," -- you can use the ",s.a.createElement("code",null,"c64::basic_entry")," macro to do this. The source code to these macros is shown in a later section."),s.a.createElement(C,{text:'\n!include "c64.asm"\n\n+c64::basic_start(entry)\n\nentry: {\n    lda #0\n}\n        '}),s.a.createElement("h3",null,"Built-in support macros"),s.a.createElement("p",null,"The c64jasm online site includes a small built in macro library.  You can find its source code below."),s.a.createElement("p",null,"The builtin ",s.a.createElement("code",null,"c64.asm")," contents:"),s.a.createElement(C,{text:b.a}))}}]),t}(s.a.Component),E=function(e){function t(){return Object(r.a)(this,t),Object(l.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(o.a)(t,e),Object(a.a)(t,[{key:"render",value:function(){var e=this.props.visible;return s.a.createElement(S,null,s.a.createElement("div",{className:d()(e?g.a.helpModalContainer:g.a.hidden)},s.a.createElement("div",{className:g.a.circleReveal},s.a.createElement(x,{onClose:this.props.onClose}))))}}]),t}(s.a.Component);t.a=E},function(e,t,n){e.exports=n(46)},function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),l=n(19),i=n.n(l),o=(n(51),n(37));i.a.render(a.a.createElement(o.a,null),document.getElementById("viewport_root"))},,,,,function(e,t,n){},,,,function(e,t,n){"use strict";(function(e,r){var a=n(32),l=n(33),i=n(59),o=n(16),u=n(17);Object.defineProperty(t,"__esModule",{value:!0});var s=n(34),c=n(18),f=n(63),h=n(35),d=n(69),p=n(36),m=n(70),v=n(72);function y(e){return{value:e,errors:!0}}function g(e){return{value:e,errors:!1}}function b(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.some(function(e){return void 0!==e&&e.errors})}t.platformC64={name:"c64",defaultStartPC:2049};var k=function(){function e(t,n){o(this,e),this.syms=new Map,this.parent=null,this.children=new Map,this.parent=t,this.name=n}return u(e,[{key:"newScope",value:function(t,n){var r=this.children.get(t);if(void 0!==r)return r;var a=new e(n,t);return this.children.set(t,a),a}},{key:"findSymbol",value:function(e){for(var t=this;null!==t;t=t.parent){var n=t.syms.get(e);if(void 0!==n)return n}}},{key:"findSymbolPath",value:function(e){if(1==e.length)return this.findSymbol(e[0]);for(var t=this;void 0==t.children.get(e[0]);)if(null==(t=t.parent))return;for(var n=0;n<e.length-1;n++)if(void 0==(t=t.children.get(e[n])))return;return t.syms.get(e[e.length-1])}},{key:"addSymbol",value:function(e,t,n){this.syms.set(e,Object.assign({},t,{seen:n}))}},{key:"updateSymbol",value:function(e,t,n){for(var r=this;null!==r;r=r.parent){if(void 0!==r.syms.get(e))return void r.syms.set(e,Object.assign({},t,{seen:n}))}}}]),e}(),S=function(){function e(){o(this,e),this.passCount=0,this.root=new k(null,""),this.curSymtab=this.root,this.anonScopeCount=0}return u(e,[{key:"startPass",value:function(e){this.curSymtab=this.root,this.anonScopeCount=0,this.passCount=e}},{key:"withAnonScope",value:function(e,t){var n="__anon_scope_".concat(this.anonScopeCount);this.anonScopeCount++,this.withLabelScope(n,e,t)}},{key:"withLabelScope",value:function(e,t,n){var r=this.curSymtab;this.curSymtab=this.curSymtab.newScope(e,n||r),t(),this.curSymtab=r}},{key:"findPath",value:function(e,t){return t?this.root.findSymbolPath(e):this.curSymtab.findSymbolPath(e)}},{key:"findQualifiedSym",value:function(e,t){return this.findPath(e,t)}},{key:"symbolSeen",value:function(e){var t=this.curSymtab.syms.get(e);return void 0!==t&&t.seen==this.passCount}},{key:"declareLabelSymbol",value:function(e,t){var n=e.name,r=e.loc,a=this.curSymtab.syms.get(n);if(void 0==a){var l={type:"label",data:g({addr:t,loc:r})};return this.curSymtab.addSymbol(n,l,this.passCount),!1}if("label"!==a.type)throw new Error("ICE: declareLabelSymbol should be called only on labels");if(a.data.value.addr!==t){var i={type:"label",data:Object.assign({},a.data,{value:Object.assign({},a.data.value,{addr:t})})};return this.curSymtab.updateSymbol(n,i,this.passCount),!0}return this.curSymtab.updateSymbol(n,a,this.passCount),!1}},{key:"declareVar",value:function(e,t){this.curSymtab.addSymbol(e,{type:"var",data:t},this.passCount)}},{key:"updateVar",value:function(e,t){var n={type:"var",data:t};this.curSymtab.updateSymbol(e,n,this.passCount)}},{key:"findMacro",value:function(e,t){var n=this.findPath(e,t);if(void 0!==n&&"macro"==n.type)return n}},{key:"declareMacro",value:function(e,t){this.curSymtab.addSymbol(e,{type:"macro",macro:t,declaredIn:this.curSymtab},this.passCount)}},{key:"dumpLabels",value:function(e){var t=[],n=function(e,n){t.push({prefix:"".concat(e,"/").concat(n.name),sym:n})};n("",this.root);for(var r=[];t.length>0;){var a=t.pop(),l=!0,o=!1,u=void 0;try{for(var s,c=a.sym.syms[Symbol.iterator]();!(l=(s=c.next()).done);l=!0){var f=s.value,h=i(f,2),d=h[0],p=h[1];"label"==p.type&&r.push({name:"".concat(a.prefix,"/").concat(d),addr:p.data.value.addr,size:0})}}catch(O){o=!0,u=O}finally{try{l||null==c.return||c.return()}finally{if(o)throw u}}var m=!0,v=!1,y=void 0;try{for(var g,b=a.sym.children[Symbol.iterator]();!(m=(g=b.next()).done);m=!0){var k=g.value,S=i(k,2),C=(S[0],S[1]);n(a.prefix,C)}}catch(O){v=!0,y=O}finally{try{m||null==b.return||b.return()}finally{if(v)throw y}}}var x=r.sort(function(e,t){return e.addr-t.addr}),E=x.length;if(E>0){for(var w=1;w<E;w++)x[w-1].size=x[w].addr-x[w-1].addr;var A=x[E-1];A.size=e-A.addr}return x}}]),e}();function C(e){return{source:e,start:{offset:0,line:0,column:0},end:{offset:0,line:0,column:0}}}function x(e){var t=typeof e;return"object"===t&&e instanceof Array?"array":t}function E(e){return"".concat(e.absolute?"::":"").concat(e.path.join("::"))}var w=function(e,t,n){var r=n(e.value,t.value);return g("boolean"==typeof r?r?1:0:r)},A=function(e,t){if(b(e))return y(0);var n=t(e.value);return g("boolean"==typeof n?n?1:0:n)},O="undefined"!==typeof e&&null!=e.versions&&null!=e.versions.node;var _=function(){function e(n){var r=this;o(this,e),this.binary=[],this.parseCache=new m.default,this.pluginCache=new Map,this.includeStack=[],this.initialPC=0,this.codePC=0,this.codePCSet=!1,this.pass=0,this.needPass=!1,this.scopes=new S,this.errorList=[],this.warningList=[],this.outOfRangeBranches=[],this.debugInfo=new v.DebugInfoTracker,this.errors=function(){return r.formatErrors(r.errorList,"error")},this.warnings=function(){return r.formatErrors(r.warningList,"warning")},this.readFileSyncFunc=n.readFileSync,this.platform=n.platformOptions||t.platformC64}return u(e,[{key:"readFileSync",value:function(e,t){return this.readFileSyncFunc(e,t)}},{key:"prg",value:function(){var e=255&this.initialPC,t=this.initialPC>>8&255;return r.from([e,t].concat(this.binary))}},{key:"parse",value:function(e,t){var n=this,r=void 0==t?C(e):t;return this.parseCache.parse(e,t,function(e,t){return n.guardedReadFileSync(e,r)})}},{key:"requirePlugin",value:function(e,t){var n=this.pluginCache.get(e);if(void 0!==n)return n;var r=this.makeSourceRelativePath(e);try{var a=g(O?f(c.resolve(r)):function(e){var t={exports:{}};return Function("module",e.toString())(t),t.exports}(this.guardedReadFileSync("".concat(r,".js"),t)));return this.pluginCache.set(e,a),a}catch(l){return this.addError("Plugin load failed: ".concat(r,".js: ").concat(l.message),t),y(0)}}},{key:"peekSourceStack",value:function(){var e=this.includeStack.length;return this.includeStack[e-1]}},{key:"pushSource",value:function(e){this.includeStack.push(e)}},{key:"popSource",value:function(){this.includeStack.pop()}},{key:"anyErrors",value:function(){return 0!==this.errorList.length}},{key:"formatErrors",value:function(e,t){var n=new Set(e.map(function(e){return JSON.stringify(e)}));return l(n).map(function(e){var n=JSON.parse(e),r=n.loc,a=n.msg,l="<unknown>:1:1: ".concat(t,": ").concat(a);return r&&(l="".concat(r.source,":").concat(r.start.line,":").concat(r.start.column,": ").concat(t,": ").concat(a)),{loc:r,msg:a,formatted:l}})}},{key:"addError",value:function(e,t){this.errorList.push({msg:e,loc:t})}},{key:"addWarning",value:function(e,t){this.warningList.push({msg:e,loc:t})}},{key:"startPass",value:function(e){this.codePC=this.platform.defaultStartPC,this.codePCSet=!1,this.pass=e,this.needPass=!1,this.binary=[],this.errorList=[],this.scopes.startPass(e),this.outOfRangeBranches=[],this.debugInfo=new v.DebugInfoTracker}},{key:"emitBasicHeader",value:function(){var e=this;this.emit(12),this.emit(8),this.emit(0),this.emit(0),this.emit(158);[1e4,1e3,100,10,1].forEach(function(t){2061>=t&&e.emit(48+2061/t%10)}),this.emit(0),this.emit(0),this.emit(0)}},{key:"emitBinary",value:function(e){var t=e.filename,n=this.evalExprToString(t,"!binary filename"),r=g(0),a=void 0;if(null!==e.size&&(null!==e.offset&&(r=this.evalExprToInt(e.offset,"!binary offset")),null!==e.size&&(a=this.evalExprToInt(e.size,"!binary size"))),!b(n,r,a)){var l=this.makeSourceRelativePath(n.value),i=this.guardedReadFileSync(l,e.loc),o=i.byteLength;a&&(o=a.value);for(var u=0;u<o;u++)this.emit(i.readUInt8(u+r.value))}}},{key:"evalExprType",value:function(e,t,n){var r=this.evalExpr(e),a=r.errors,l=r.value;return a||typeof l===t?r:(this.addError("Expecting ".concat(n," to be '").concat(t,"' type, got '").concat(x(l),"'"),e.loc),{errors:!0,value:l})}},{key:"evalExprToInt",value:function(e,t){return this.evalExprType(e,"number",t)}},{key:"evalExprToString",value:function(e,t){return this.evalExprType(e,"string",t)}},{key:"evalExpr",value:function(e){var t=this;switch(e.type){case"binary":var n=this.evalExpr(e.left),r=this.evalExpr(e.right);if(b(n,r))return y(0);if(typeof n.value!==typeof r.value)return this.addError("Binary expression operands are expected to be of the same type.  Got: '".concat(x(n.value),"' (left), '").concat(x(r.value),"' (right)"),e.loc),y(0);if("string"!==typeof n.value&&"number"!==typeof n.value)return this.addError("Binary expression operands can only operator on numbers or strings.  Got: '".concat(x(n.value),"'"),e.loc),y(0);if("string"==typeof n.value){var o=["+","==","<","<=",">",">="];if(o.indexOf(e.op)<0)return this.addError("'".concat(e.op,"' operator is not supported for strings.  Valid operators for strings are: ").concat(o.join(", ")),e.loc),y(0)}switch(e.op){case"+":return w(n,r,function(e,t){return e+t});case"-":return w(n,r,function(e,t){return e-t});case"*":return w(n,r,function(e,t){return e*t});case"/":return w(n,r,function(e,t){return e/t});case"%":return w(n,r,function(e,t){return e%t});case"&":return w(n,r,function(e,t){return e&t});case"|":return w(n,r,function(e,t){return e|t});case"^":return w(n,r,function(e,t){return e^t});case"<<":return w(n,r,function(e,t){return e<<t});case">>":return w(n,r,function(e,t){return e>>t});case"==":return w(n,r,function(e,t){return e==t});case"!=":return w(n,r,function(e,t){return e!=t});case"<":return w(n,r,function(e,t){return e<t});case"<=":return w(n,r,function(e,t){return e<=t});case">":return w(n,r,function(e,t){return e>t});case">=":return w(n,r,function(e,t){return e>=t});case"&&":return w(n,r,function(e,t){return e&&t});case"||":return w(n,r,function(e,t){return e||t});default:throw new Error("Unhandled binary operator ".concat(e.op))}case"unary":var u=this.evalExprToInt(e.expr,"operand");if(u.errors)return u;switch(e.op){case"+":return A(u,function(e){return+e});case"-":return A(u,function(e){return-e});case"~":return A(u,function(e){return~e});default:throw new Error("Unhandled unary operator ".concat(e.op))}case"literal":return g(e.lit);case"array":var s=e.list.map(function(e){return t.evalExpr(e)});return{value:s.map(function(e){return e.value}),errors:b.apply(void 0,l(s))};case"object":var c=e.props.map(function(e){var n=t.evalExpr(e.val);return["literal"===e.key.type?e.key.lit:e.key.name,n]});return{value:c.reduce(function(e,t){var n=i(t,2),r=n[0],l=n[1];return Object.assign({},e,a({},r,l.value))},{}),errors:b.apply(void 0,l(c.map(function(e){var t=i(e,2);t[0];return t[1]})))};case"ident":throw new Error("should not see an ident here -- if you do, it is probably a wrong type node in parser");case"qualified-ident":var f=this.scopes.findQualifiedSym(e.path,e.absolute);if(void 0==f)return this.pass>=1?(this.addError("Undefined symbol '".concat(E(e),"'"),e.loc),y(0)):(this.needPass=!0,g(0));switch(f.type){case"label":return{errors:f.data.errors,value:f.data.value.addr};case"var":return f.seen<this.pass&&this.addError("Undeclared variable '".concat(E(e),"'"),e.loc),f.data;case"macro":return this.addError("Must have a label or a variable identifier here, got macro name",e.loc),y(0)}break;case"member":var h=this.evalExpr(e.object);if(b(h))return y(0);var d=h.value;if(void 0==d)return this.addError("Cannot access properties of an undefined object",e.loc),y(0);var p=function(e,n){return e in d||(t.addError("Property '".concat(e,"' does not exist in object"),n),!1)},m=function(e,n){if("ident"!==e.property.type)t.addError("".concat(n," property must be a string, got ").concat(x(e.property.type)),e.loc);else if(p(e.property.name,e.property.loc))return g(d[e.property.name]);return y(0)};if(d instanceof Array){if(!e.computed)return m(e,"Array");var v=this.evalExprToInt(e.property,"array index"),k=v.errors,S=v.value;return k?y(0):S in d?g(d[S]):(this.addError("Out of bounds array index ".concat(S),e.property.loc),y(0))}if("object"==typeof d){if(e.computed){var C=this.evalExpr(e.property),O=C.errors,_=C.value;return O?y(0):"string"!==typeof _&&"number"!==typeof _?(this.addError("Object property must be a string or an integer, got ".concat(x(_)),e.loc),y(0)):p(_,e.property.loc)?g(d[_]):y(0)}return m(e,"Object")}return 0!==this.pass?(h.errors||(e.computed?this.addError("Cannot use []-operator on non-array/object values",e.loc):this.addError("Cannot use the dot-operator on non-object values",e.loc)),y(0)):g(0);case"callfunc":var j=this.evalExpr(e.callee),L=e.args.map(function(e){return t.evalExpr(e)});if(j.errors)return y(0);if("function"!==typeof j.value)return this.addError("Callee must be a function type.  Got '".concat(x(j),"'"),e.loc),y(0);if(b.apply(void 0,l(L)))return y(0);try{return g(j.value.apply(j,l(L.map(function(e){return e.value}))))}catch(I){return"qualified-ident"==e.callee.type?this.addError("Call to '".concat(E(e.callee),"' failed with an error: ").concat(I.message),e.loc):this.addError("Plugin call failed with an error: ".concat(I.message),e.loc),y(0)}}throw new Error("should be unreachable?")}},{key:"setInitialPC",value:function(e){if(this.codePCSet)throw new Error("PC already set -- shouldn't happen");this.codePC=e,this.codePCSet=!0,this.initialPC=e}},{key:"topLevelSourceLoc",value:function(){return C(this.includeStack[0])}},{key:"emit",value:function(e){this.codePCSet||(this.setInitialPC(this.platform.defaultStartPC),this.addWarning("Starting program counter not set with '* = addr'.  Defaulting to platform default $".concat(d.toHex16(this.codePC)),this.topLevelSourceLoc())),this.binary.push(e),this.codePC+=1}},{key:"emit16",value:function(e){this.emit(255&e),this.emit(e>>8&255)}},{key:"checkSingle",value:function(e){return null!==e&&(this.emit(e),!0)}},{key:"checkImm",value:function(e,t){if(null===t||null===e)return!1;var n=this.evalExprToInt(e,"immediate");return b(n)||(this.emit(t),this.emit(n.value)),!0}},{key:"checkAbs",value:function(e,t,n){if(null===t||null===e)return!1;var r=this.evalExprToInt(e,"absolute address");if(b(r))return!0;var a=r.value;if(8===n){if(a<0||a>=1<<n)return!1;this.emit(t),this.emit(a)}else this.emit(t),this.emit16(a);return!0}},{key:"checkBranch",value:function(e,t){if(null===t||null===e)return!1;var n=this.evalExpr(e);if(b(n))return!0;if("number"!==typeof n.value)return this.addError("Expecting branch label to evaluate to integer, got ".concat(x(n.value)),e.loc),!0;var r=n.value-this.codePC-2;return this.emit(t),(r>127||r<-128)&&this.outOfRangeBranches.push({loc:e.loc,offset:r}),this.emit(255&r),!0}},{key:"setPC",value:function(e){var t=this.evalExprToInt(e,"pc");if(!b(t)){var n=t.value;if(this.codePCSet)for(this.codePC>n&&this.addError("Cannot set program counter to a smaller value than current (current: $".concat(d.toHex16(this.codePC),", trying to set $").concat(d.toHex16(n),")"),e.loc);this.codePC<n;)this.emit(0);else this.setInitialPC(n)}}},{key:"guardedReadFileSync",value:function(e,t){try{return this.readFileSync(e)}catch(n){return this.addError("Couldn't open file '".concat(e,"'"),t),r.from([])}}},{key:"fileInclude",value:function(e){var t=this.evalExprToString(e.filename,"!include filename");if(!b(t)){var n=t.value,r=this.makeSourceRelativePath(n);this.pushSource(r),this.assemble(r,e.loc),this.popSource()}}},{key:"fillBytes",value:function(e){var t=this.evalExprToInt(e.numBytes,"!fill num_bytes"),n=this.evalExprToInt(e.fillValue,"!fill value");if(!b(t,n)){var r=n.value;if(r<0||r>=256)this.addError("!fill value to repeat must be in 8-bit range, '".concat(r,"' given"),e.fillValue.loc);else{var a=t.value;if(a<0)this.addError("!fill repeat count must be >= 0, got ".concat(a),e.numBytes.loc);else for(var l=0;l<a;l++)this.emit(r)}}}},{key:"alignBytes",value:function(e){var t=this.evalExprToInt(e.alignBytes,"alignment");if(!b(t)){var n=t.value;if(n<1)this.addError("Alignment must be a positive integer, ".concat(n," given"),e.alignBytes.loc);else if(0==(n&n-1))for(;0!=(this.codePC&n-1);)this.emit(0);else this.addError("Alignment must be a power of two, ".concat(n," given"),e.loc)}}},{key:"withAnonScope",value:function(e,t,n){if(null!==e)return this.withLabelScope(e,t,n);this.scopes.withAnonScope(t,n)}},{key:"withLabelScope",value:function(e,t,n){this.scopes.withLabelScope(e,t)}},{key:"emit8or16",value:function(e,t){8!=t?this.emit16(e):this.emit(e)}},{key:"emitData",value:function(e,t){for(var n=0;n<e.length;n++){var r=this.evalExpr(e[n]);if(!b(r)){var a=r.value;if("number"==typeof a)this.emit8or16(a,t);else if(a instanceof Array)for(var l in a)this.emit8or16(a[l],t);else this.addError("Only literal (int constants) or array types can be emitted.  Got ".concat(x(a)),e[n].loc)}}}},{key:"makeFunction",value:function(e,t){var n=this;return function(){for(var t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];return e.apply(null,[{readFileSync:function(e){return n.readFileSync(e)},resolveRelative:function(e){return n.makeSourceRelativePath(e)}}].concat(r))}}},{key:"bindFunction",value:function(e,t,n){this.scopes.declareVar(e.name,g(this.makeFunction(t,n)))}},{key:"bindPlugin",value:function(e,t){var n=e.moduleName;if(b(t))this.scopes.declareVar(n.name,y(0));else{var r=t.value;if("function"==typeof r&&this.bindFunction(n,r,e.loc),"object"==typeof r){var a={},l=Object.keys(r);for(var i in l){var o=l[i],u=r[o];a[o]="function"===typeof u?this.makeFunction(u,e.loc):u}this.scopes.declareVar(n.name,g(a))}}}},{key:"checkDirectives",value:function(e,t){var n=this;switch(e.type){case"data":this.emitData(e.values,e.dataSize===p.DataSize.Byte?8:16);break;case"fill":this.fillBytes(e);break;case"align":this.alignBytes(e);break;case"setpc":this.setPC(e.pc);break;case"binary":this.emitBinary(e);break;case"include":this.fileInclude(e);break;case"error":var r=this.evalExprToString(e.error,"error message");if(!b(r))return void this.addError(r.value,e.loc);break;case"if":var a=e.cases,l=e.elseBranch,o=function(e){var r,l=i(a[e],2),o=l[0],u=l[1],s=n.evalExpr(o);if(!b(s)&&(!0===(r=s.value)||0!=r))return{v:n.withAnonScope(t,function(){n.assembleLines(u)})}};for(var u in a){var s=o(u);if("object"===typeof s)return s.v}return this.withAnonScope(t,function(){n.assembleLines(l)});case"for":var c=function(){var r=e.index,a=e.list,l=e.body,i=(e.loc,n.evalExpr(a));if(b(i))return{v:void 0};var o=i.value;if(!(o instanceof Array))return n.addError("for-loop range must be an array expression (e.g., a range() or an array)",a.loc),{v:void 0};for(var u=function(e){var a=null;null!==t&&(a="".concat(t,"__").concat(e)),n.withAnonScope(a,function(){return n.scopes.declareVar(r.name,g(o[e])),n.assembleLines(l)})},s=0;s<o.length;s++)u(s);return"break"}();switch(c){case"break":break;default:if("object"===typeof c)return c.v}case"macro":var f=e.name;e.args,e.body;if(void 0!==this.scopes.findMacro([f.name],!1)&&this.scopes.symbolSeen(f.name))return void this.addError("Macro '".concat(f.name,"' already defined"),f.loc);this.scopes.declareMacro(f.name,e);break;case"callmacro":var h=e.name,d=e.args,m=this.scopes.findMacro(h.path,h.absolute),v=d.map(function(e){return n.evalExpr(e)});if(void 0==m)return void this.addError("Undefined macro '".concat(E(h),"'"),h.loc);var y=m.macro,k=m.declaredIn;if(y.args.length!==d.length)return void this.addError("Macro '".concat(E(h),"' declared with ").concat(y.args.length," args but called here with ").concat(d.length),h.loc);this.withAnonScope(t,function(){for(var e=0;e<v.length;e++){var t=y.args[e].ident.name;n.scopes.declareVar(t,v[e])}n.assembleLines(y.body)},k);break;case"let":var S=e.name,C=this.scopes.findQualifiedSym([S.name],!1),x=this.evalExpr(e.value);if(void 0!==C&&this.scopes.symbolSeen(S.name))return void this.addError("Variable '".concat(S.name,"' already defined"),e.loc);this.scopes.declareVar(S.name,x);break;case"assign":var w=e.name;if(1!==e.name.path.length||e.name.absolute)return void this.addError("Only symbol names in the current (or owning) scopes are allowed for assignment",e.loc);var A=this.scopes.findQualifiedSym(e.name.path,e.name.absolute);if(void 0==A)return void this.addError("Assignment to undeclared variable '".concat(E(w),"'"),e.loc);if("var"!==A.type)return void this.addError("Assignment to symbol '".concat(E(w),"' that is not a variable.  Its type is '").concat(A.type,"'"),e.loc);var O=this.evalExpr(e.value);this.scopes.updateVar(w.path[0],O);break;case"statement-expr":this.evalExpr(e.expr);break;case"load-plugin":var _=this.evalExprToString(e.filename,"plugin filename");if(b(_))return;var j=this.requirePlugin(_.value,e.loc);this.bindPlugin(e,j);break;case"filescope":return void this.addError("The !filescope directive is only allowed as the first directive in a source file",e.loc);default:return void this.addError("unknown directive ".concat(e.type),e.loc)}}},{key:"assembleLines",value:function(e){var t=this;if(null!==e&&0!=e.length&&0!=e.length){for(var n=function(e){for(var n=0;n<e.length;n++)t.debugInfo.startLine(e[n].loc,t.codePC),t.assembleLine(e[n]),t.debugInfo.endLine(t.codePC)},r=0;r<e.length;){var a=e[r],l=a.label,i=a.stmt,o=a.scopedStmts;if(null!=l||null!=i||null!=o)break;r++}if(!(r>=e.length)){var u=e[r];return null!=u.stmt&&"filescope"==u.stmt.type?(this.checkAndDeclareLabel(u.stmt.name),this.withLabelScope(u.stmt.name.name,function(){return n(e.slice(r+1))})):n(e)}}}},{key:"checkAndDeclareLabel",value:function(e){this.scopes.symbolSeen(e.name)?this.addError("Symbol '".concat(e.name,"' already defined"),e.loc):this.scopes.declareLabelSymbol(e,this.codePC)&&(this.needPass=!0)}},{key:"assembleLine",value:function(e){var t=this;if(null!=e.label||null!=e.stmt||null!=e.scopedStmts){null!==e.label&&this.checkAndDeclareLabel(e.label);var n=e.scopedStmts;if(null==n){if(null!==e.stmt)if("insn"===e.stmt.type){var r=e.stmt.insn,a=s.default[r.mnemonic.toUpperCase()];void 0!==a?function(e){var n=t.codePC;e();var r=t.codePC;t.debugInfo.markAsInstruction(n,r)}(function(){null===r.imm&&null===r.abs&&null===r.absx&&null===r.absy&&null===r.absind&&t.checkSingle(a[10])||t.checkImm(r.imm,a[0])||t.checkAbs(r.abs,a[1],8)||t.checkAbs(r.absx,a[2],8)||t.checkAbs(r.absy,a[3],8)||t.checkAbs(r.absx,a[5],16)||t.checkAbs(r.absy,a[6],16)||t.checkAbs(r.absind,a[7],16)||t.checkAbs(r.indx,a[8],8)||t.checkAbs(r.indy,a[9],8)||t.checkAbs(r.abs,a[4],16)||t.checkBranch(r.abs,a[11])||t.addError("Couldn't encode instruction '".concat(r.mnemonic,"'"),e.loc)}):this.addError("Unknown mnemonic '".concat(r.mnemonic,"'"),e.loc)}else this.checkDirectives(e.stmt,null==e.label?null:e.label.name)}else{if(!e.label)throw new Error("ICE: line.label cannot be undefined");this.withLabelScope(e.label.name,function(){t.assembleLines(n)})}}}},{key:"makeSourceRelativePath",value:function(e){var t=this.peekSourceStack();return c.join(c.dirname(t),e)}},{key:"assemble",value:function(e,t){try{var n=this.parse(e,t);this.assembleLines(n)}catch(r){if(!("name"in r&&"SyntaxError"==r.name)){if("name"in r&&"semantic"==r.name)return;throw r}this.addError("Syntax error: ".concat(r.message),Object.assign({},r.location,{source:this.peekSourceStack()}))}}},{key:"_requireType",value:function(e,t){if(typeof e==t)return e;this.addError("Expecting a ".concat(t," value, got ").concat(x(e)),e.loc)}},{key:"requireString",value:function(e){return this._requireType(e,"string")}},{key:"requireNumber",value:function(e){return this._requireType(e,"number")}},{key:"registerPlugins",value:function(){var e=this,t=function(t,n){e.scopes.declareVar(t,g(n))};t("loadJson",function(){var t=e.requireString(arguments.length<=0?void 0:arguments[0]),n=e.makeSourceRelativePath(t);return JSON.parse(e.readFileSync(n,"utf-8"))}),t("range",function(){var t=0,n=void 0;if(1==arguments.length)n=e.requireNumber(arguments.length<=0?void 0:arguments[0]);else{if(2!=arguments.length)throw new Error("Invalid number of args to 'range'.  Expecting 1 or 2 arguments.");t=e.requireNumber(arguments.length<=0?void 0:arguments[0]),n=e.requireNumber(arguments.length<=1?void 0:arguments[1])}if(n==t)return[];if(n<t)throw new Error("range 'end' must be larger or equal to 'start'");return Array(n-t).fill(null).map(function(e,n){return n+t})});var n={},r=!0,a=!1,l=void 0;try{for(var i,o=Object.getOwnPropertyNames(Math)[Symbol.iterator]();!(r=(i=o.next()).done);r=!0){var u=i.value,s=Math;n[u]="random"===u?function(){throw new Error("Math.random() not allowed as it will lead to non-reproducible builds")}:s[u]}}catch(c){a=!0,l=c}finally{try{r||null==o.return||o.return()}finally{if(a)throw l}}t("Math",n)}},{key:"dumpLabels",value:function(){return this.scopes.dumpLabels(this.codePC)}}]),e}(),j={readFileSync:h.readFileSync};t.assemble=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:j,n=new _(t);n.pushSource(e);var a=0;do{if(n.startPass(a),n.registerPlugins(),n.assemble(e,C(e)),a>0&&n.anyErrors())return{prg:r.from([]),labels:[],debugInfo:void 0,errors:n.errors(),warnings:n.warnings()};if(a>10)return void console.error("Exceeded max pass limit ".concat(10));if(a+=1,!n.needPass&&0!=n.outOfRangeBranches.length){for(var l in n.outOfRangeBranches){var i=n.outOfRangeBranches[l];n.addError("Branch target too far (must fit in signed 8-bit range, got ".concat(i.offset,")"),i.loc)}break}}while(n.needPass);return n.popSource(),{prg:n.prg(),errors:n.errors(),warnings:n.warnings(),labels:n.dumpLabels(),debugInfo:n.debugInfo}}}).call(this,n(31),n(30).Buffer)},,,,,,,,,,,,,function(e,t){function n(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id=68},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.toHex16=function(e){return e.toString(16).padStart(4,"0")}},function(e,t,n){"use strict";var r=n(16),a=n(17);Object.defineProperty(t,"__esModule",{value:!0});var l=n(71),i=function(){function e(){r(this,e),this.filenameToSource=new Map,this.sourceToAst=new Map}return a(e,[{key:"getFileContents",value:function(e,t,n){var r=this.filenameToSource.get(e);if(void 0!==r)return r;var a=n(e,t);return this.filenameToSource.set(e,a),a}},{key:"parse",value:function(e,t,n){var r=this.getFileContents(e,t,n),a=this.sourceToAst.get(e);if(void 0!==a)return a;var i=l.parse(r.toString(),{source:e});return this.sourceToAst.set(e,i),i}}]),e}();t.default=i},function(e,t,n){"use strict";var r=n(32),a=n(33);function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(n,!0).forEach(function(t){r(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function o(e,t,n,r){this.message=e,this.expected=t,this.found=n,this.location=r,this.name="SyntaxError","function"===typeof Error.captureStackTrace&&Error.captureStackTrace(this,o)}!function(e,t){function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n}(o,Error),o.buildMessage=function(e,t){var n={literal:function(e){return'"'+a(e.text)+'"'},class:function(e){var t,n="";for(t=0;t<e.parts.length;t++)n+=e.parts[t]instanceof Array?l(e.parts[t][0])+"-"+l(e.parts[t][1]):l(e.parts[t]);return"["+(e.inverted?"^":"")+n+"]"},any:function(e){return"any character"},end:function(e){return"end of input"},other:function(e){return e.description}};function r(e){return e.charCodeAt(0).toString(16).toUpperCase()}function a(e){return e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(e){return"\\x0"+r(e)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(e){return"\\x"+r(e)})}function l(e){return e.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(e){return"\\x0"+r(e)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(e){return"\\x"+r(e)})}return"Expected "+function(e){var t,r,a,l=new Array(e.length);for(t=0;t<e.length;t++)l[t]=(a=e[t],n[a.type](a));if(l.sort(),l.length>0){for(t=1,r=1;t<l.length;t++)l[t-1]!==l[t]&&(l[r]=l[t],r++);l.length=r}switch(l.length){case 1:return l[0];case 2:return l[0]+" or "+l[1];default:return l.slice(0,-1).join(", ")+", or "+l[l.length-1]}}(e)+" but "+function(e){return e?'"'+a(e)+'"':"end of input"}(t)+" found."},e.exports={SyntaxError:o,parse:function(e,t){t=void 0!==t?t:{};var r,l={},u={statements:Kr},s=Kr,c="\n",f=$r("\n",!1),h=function(e,t){return yl(e,t,1)},d=function(e){return e},p=function(e,t){return pl.mkAsmLine(e,null,t,gl())},m=function(e,t){return pl.mkAsmLine(e,t,null,gl())},v=function(e){return pl.mkAsmLine(e,null,null,gl())},y=function(e){return pl.mkAsmLine(null,e,null,gl())},g=function(e){return pl.mkAsmLine(null,e,null,gl())},b=function(){return pl.mkAsmLine(null,null,null,gl())},k=function(e){return e},S=function(e){return pl.mkInsn(e,gl())},C=":",x=$r(":",!1),E=function(e){return pl.mkLabel(e,gl())},w=function(e){return pl.mkSetPC(e,gl())},A=function(e,t){var n="byte"==e?pl.DataSize.Byte:pl.DataSize.Word;return pl.mkData(n,t,gl())},O=function(e,t){return pl.mkFill(e,t,gl())},_=function(e){return pl.mkInclude(e,gl())},j=function(e,t){var n=null,r=null;return null!==t&&(n=t[1],r=t[3]),pl.mkBinary(e,n,r,gl())},L=function(e,t,n,r){var l=[e].concat(a(n.map(function(e){return e.condition}))),i=[t].concat(a(n.map(function(e){return e.trueBranch}))),o=l.map(function(e,t){return[e,i[t]]});return pl.mkIfElse(o,r,gl())},I="in",R=$r("in",!1),P=function(e,t,n){return pl.mkFor(e,t,n,gl())},D=function(e,t,n){return pl.mkMacro(e,t,n,gl())},T="+",F=$r("+",!1),B=function(e,t){return pl.mkCallMacro(e,t,gl())},M=function(e,t){return pl.mkLet(e,t,gl())},N="as",H=$r("as",!1),U=function(e,t){return pl.mkLoadPlugin(e,t,gl())},G=function(e){return pl.mkError(e,gl())},$=function(e){return pl.mkAlign(e,gl())},W=function(e){return pl.mkFilescope(e,gl())},V=function(e){return e},Y=function(e,t){return{condition:e,trueBranch:t}},z=function(e){return e},X='"',q=$r('"',!1),K=function(e){return pl.mkLiteral(e.join(""),gl())},Z={type:"any"},Q=function(e){return e},J=function(e){return pl.mkIdent(e,gl())},ee=function(e,t){return yl(e,t,1)},te=function(e){return pl.mkMacroArg(e)},ne=function(e,t){return vl(e,t,null,gl())},re="x",ae=$r("x",!1),le=function(e,t){return function(e,t,n){return i({},ml,{mnemonic:e,indx:t,loc:n})}(e,t,gl())},ie="y",oe=$r("y",!1),ue=function(e,t){return function(e,t,n){return i({},ml,{mnemonic:e,indy:t,loc:n})}(e,t,gl())},se=function(e,t){return function(e,t,n){return i({},ml,{mnemonic:e,absind:t,loc:n})}(e,t,gl())},ce=function(e,t,n){return"x"===n?function(e,t,n){return i({},ml,{mnemonic:e,absx:t,loc:n})}(e,t,gl()):function(e,t,n){return i({},ml,{mnemonic:e,absy:t,loc:n})}(e,t,gl())},fe=function(e,t){return vl(e,null,t,gl())},he=function(e){return vl(e,null,null,gl())},de=function(){return Gr()},pe=function(e){return e},me="::",ve=$r("::",!1),ye=function(e,t){return pl.mkScopeQualifiedIdent(yl(e,t,1),!1,gl())},ge=function(e,t){return pl.mkScopeQualifiedIdent(yl(e,t,1),!0,gl())},be=function(e){return pl.mkIdent(e,gl())},ke=function(e){return e},Se="#",Ce=$r("#",!1),xe=function(e,t){if(null!==e){if("lo"===e)return pl.mkBinaryOp("&",t,pl.mkLiteral(255,gl(),gl()));var n=pl.mkLiteral(8,gl()),r=pl.mkLiteral(255,gl());return pl.mkBinaryOp("&",pl.mkBinaryOp(">>",t,n,gl()),r,gl())}return t},Ee=function(){return"lo"},we=function(){return"hi"},Ae=function(e){return e},Oe=function(e,t){return t.reduce(function(e,t){return pl.mkBinaryOp(t[0],e,t[1],gl())},e)},_e=function(e,t){return pl.mkUnary(e,t,gl())},je=function(e){return e},Le=function(e,t){return{property:t,computed:!0}},Ie=function(e,t){return{property:pl.mkIdent(t,gl()),computed:!1}},Re=function(e,t){return t.reduce(function(e,t){return pl.mkMember(e,t.property,t.computed,gl())},e)},Pe=function(e,t){return pl.mkCallFunc(e,t,gl())},De=function(e){return pl.mkLiteral(e,gl())},Te=function(e){return e},Fe=function(e){return e},Be="$",Me=$r("$",!1),Ne=function(e){return parseInt(e,16)},He="%",Ue=$r("%",!1),Ge=function(e){return parseInt(e,2)},$e=function(e){return e},We=".",Ve=$r(".",!1),Ye=function(){return parseFloat(Gr())},ze="0",Xe=$r("0",!1),qe=/^[1-9]/,Ke=Wr([["1","9"]],!1,!1),Ze="e",Qe=$r("e",!0),Je=/^[+\-]/,et=Wr(["+","-"],!1,!1),tt=function(e){return pl.mkExprArray(null===e?[]:e,gl())},nt=function(){return pl.mkExprObject([],gl())},rt=function(e){return pl.mkExprObject(e,gl())},at=function(e,t){return yl(e,t,2)},lt=function(e,t){return{key:e,val:t}},it=function(e){return pl.mkStmtExpr(e,gl())},ot=function(e,t){return pl.mkAssign(e,t,gl())},ut=/^[a-zA-Z_]/,st=Wr([["a","z"],["A","Z"],"_"],!1,!1),ct=/^[a-zA-Z_0-9]/,ft=Wr([["a","z"],["A","Z"],"_",["0","9"]],!1,!1),ht=/^[0-9]/,dt=Wr([["0","9"]],!1,!1),pt=/^[0-1]/,mt=Wr([["0","1"]],!1,!1),vt=/^[0-9a-f]/i,yt=Wr([["0","9"],["a","f"]],!1,!0),gt=Vr("whitespace"),bt="\t",kt=$r("\t",!1),St="\v",Ct=$r("\v",!1),xt="\f",Et=$r("\f",!1),wt=" ",At=$r(" ",!1),Ot="\xa0",_t=$r("\xa0",!1),jt="\ufeff",Lt=$r("\ufeff",!1),It=/^[ \xA0\u1680\u2000-\u200A\u202F\u205F\u3000]/,Rt=Wr([" ","\xa0","\u1680",["\u2000","\u200a"],"\u202f","\u205f","\u3000"],!1,!1),Pt=";",Dt=$r(";",!1),Tt=Vr("end of line"),Ft="\r\n",Bt=$r("\r\n",!1),Mt="\r",Nt=$r("\r",!1),Ht="\u2028",Ut=$r("\u2028",!1),Gt="\u2029",$t=$r("\u2029",!1),Wt="!align",Vt=$r("!align",!1),Yt="!byte",zt=$r("!byte",!1),Xt=function(){return"byte"},qt="!word",Kt=$r("!word",!1),Zt=function(){return"word"},Qt="!binary",Jt=$r("!binary",!1),en="!let",tn=$r("!let",!1),nn="!macro",rn=$r("!macro",!1),an="!if",ln=$r("!if",!1),on="else",un=$r("else",!1),sn="elif",cn=$r("elif",!1),fn="!error",hn=$r("!error",!1),dn="!for",pn=$r("!for",!1),mn="!include",vn=$r("!include",!1),yn="!fill",gn=$r("!fill",!1),bn="!use",kn=$r("!use",!1),Sn="!filescope",Cn=$r("!filescope",!1),xn="!!",En=$r("!!",!1),wn="[",An=$r("[",!1),On=function(e){return e},_n="]",jn=$r("]",!1),Ln="(",In=$r("(",!1),Rn=")",Pn=$r(")",!1),Dn="{",Tn=$r("{",!1),Fn="}",Bn=$r("}",!1),Mn=($r("->",!1),$r("++",!1),$r("--",!1),"&"),Nn=$r("&",!1),Hn=/^[&]/,Un=Wr(["&"],!1,!1),Gn="*",$n=$r("*",!1),Wn=/^[=]/,Vn=Wr(["="],!1,!1),Yn=/^[+=]/,zn=Wr(["+","="],!1,!1),Xn="-",qn=$r("-",!1),Kn=/^[\-=>]/,Zn=Wr(["-","=",">"],!1,!1),Qn="~",Jn=$r("~",!1),er="!",tr=$r("!",!1),nr="/",rr=$r("/",!1),ar=/^[=>]/,lr=Wr(["=",">"],!1,!1),ir="<<",or=$r("<<",!1),ur=">>",sr=$r(">>",!1),cr="<",fr=$r("<",!1),hr=">",dr=$r(">",!1),pr="<=",mr=$r("<=",!1),vr=">=",yr=$r(">=",!1),gr="==",br=$r("==",!1),kr="!=",Sr=$r("!=",!1),Cr="^",xr=$r("^",!1),Er="|",wr=$r("|",!1),Ar="&&",Or=$r("&&",!1),_r="||",jr=$r("||",!1),Lr=($r("?",!1),/^[>]/),Ir=Wr([">"],!1,!1),Rr=($r("...",!1),"="),Pr=$r("=",!1),Dr=($r("*=",!1),$r("/=",!1),$r("%=",!1),$r("+=",!1),$r("-=",!1),$r("<<=",!1),$r(">>=",!1),$r("&=",!1),$r("^=",!1),$r("|=",!1),","),Tr=$r(",",!1),Fr=0,Br=0,Mr=[{line:1,column:1}],Nr=0,Hr=[],Ur=0;if("startRule"in t){if(!(t.startRule in u))throw new Error("Can't start parsing from rule \""+t.startRule+'".');s=u[t.startRule]}function Gr(){return e.substring(Br,Fr)}function $r(e,t){return{type:"literal",text:e,ignoreCase:t}}function Wr(e,t,n){return{type:"class",parts:e,inverted:t,ignoreCase:n}}function Vr(e){return{type:"other",description:e}}function Yr(t){var n,r=Mr[t];if(r)return r;for(n=t-1;!Mr[n];)n--;for(r={line:(r=Mr[n]).line,column:r.column};n<t;)10===e.charCodeAt(n)?(r.line++,r.column=1):r.column++,n++;return Mr[t]=r,r}function zr(e,t){var n=Yr(e),r=Yr(t);return{start:{offset:e,line:n.line,column:n.column},end:{offset:t,line:r.line,column:r.column}}}function Xr(e){Fr<Nr||(Fr>Nr&&(Nr=Fr,Hr=[]),Hr.push(e))}function qr(e,t,n){return new o(o.buildMessage(e,t),e,t,n)}function Kr(){var t,n,r,a,i,o;if(t=Fr,(n=Zr())!==l){for(r=[],a=Fr,10===e.charCodeAt(Fr)?(i=c,Fr++):(i=l,0===Ur&&Xr(f)),i!==l&&(o=Zr())!==l?a=i=[i,o]:(Fr=a,a=l);a!==l;)r.push(a),a=Fr,10===e.charCodeAt(Fr)?(i=c,Fr++):(i=l,0===Ur&&Xr(f)),i!==l&&(o=Zr())!==l?a=i=[i,o]:(Fr=a,a=l);r!==l?(Br=t,t=n=h(n,r)):(Fr=t,t=l)}else Fr=t,t=l;return t}function Zr(){var e,t,n;return e=Fr,Fa()!==l&&(t=function(){var e,t,n,r;return e=Fr,(t=Jr())!==l&&(n=Va())!==l&&(r=Kr())!==l&&Ya()!==l?(Br=e,t=p(t,r),e=t):(Fr=e,e=l),e===l&&(e=Fr,(t=Jr())!==l&&(n=Qr())!==l?(Br=e,t=m(t,n),e=t):(Fr=e,e=l),e===l&&(e=Fr,(t=Jr())!==l&&(Br=e,t=v(t)),(e=t)===l&&(e=Fr,(t=Qr())!==l&&(Br=e,t=y(t)),(e=t)===l&&(e=Fr,(t=function(){var e,t,n;return e=Fr,(t=qa())!==l&&hl()!==l&&(n=Sa())!==l?(Br=e,t=w(n),e=t):(Fr=e,e=l),e}())!==l&&(Br=e,t=g(t)),(e=t)===l&&(e=Fr,(t=Fa())!==l&&(Br=e,t=b()),e=t))))),e}())!==l?((n=Na())===l&&(n=null),n!==l?(Br=e,e=d(t)):(Fr=e,e=l)):(Fr=e,e=l),e}function Qr(){var t,n;return t=Fr,(n=function(){var t,n,r,a,i,o,u,s,c,f;if(t=Fr,(n=function(){var t,n;return t=Fr,e.substr(Fr,5)===Yt?(n=Yt,Fr+=5):(n=l,0===Ur&&Xr(zt)),n!==l&&Fa()!==l?(Br=t,n=Xt(),t=n):(Fr=t,t=l),t}())===l&&(n=function(){var t,n;return t=Fr,e.substr(Fr,5)===qt?(n=qt,Fr+=5):(n=l,0===Ur&&Xr(Kt)),n!==l&&Fa()!==l?(Br=t,n=Zt(),t=n):(Fr=t,t=l),t}()),n!==l&&(r=aa())!==l?(Br=t,n=A(n,r),t=n):(Fr=t,t=l),t===l&&(t=Fr,(n=function(){var t,n,r;return t=Fr,e.substr(Fr,5)===yn?(n=yn,Fr+=5):(n=l,0===Ur&&Xr(gn)),n!==l&&(r=Fa())!==l?t=n=[n,r]:(Fr=t,t=l),t}())!==l&&(r=Sa())!==l&&(a=dl())!==l&&(i=Sa())!==l?(Br=t,n=O(r,i),t=n):(Fr=t,t=l),t===l&&(t=Fr,(n=function(){var t,n,r;return t=Fr,e.substr(Fr,8)===mn?(n=mn,Fr+=8):(n=l,0===Ur&&Xr(vn)),n!==l&&(r=Fa())!==l?t=n=[n,r]:(Fr=t,t=l),t}())!==l&&(r=Sa())!==l?(Br=t,n=_(r),t=n):(Fr=t,t=l),t===l&&(t=Fr,(n=function(){var t,n,r;return t=Fr,e.substr(Fr,7)===Qt?(n=Qt,Fr+=7):(n=l,0===Ur&&Xr(Jt)),n!==l&&(r=Fa())!==l?t=n=[n,r]:(Fr=t,t=l),t}())!==l&&(r=Sa())!==l?(a=Fr,(i=dl())!==l?((o=Sa())===l&&(o=null),o!==l&&(u=dl())!==l&&(s=Sa())!==l?a=i=[i,o,u,s]:(Fr=a,a=l)):(Fr=a,a=l),a===l&&(a=null),a!==l?(Br=t,n=j(r,a),t=n):(Fr=t,t=l)):(Fr=t,t=l),t===l)))){if(t=Fr,(n=function(){var t,n,r;return t=Fr,e.substr(Fr,3)===an?(n=an,Fr+=3):(n=l,0===Ur&&Xr(ln)),n!==l&&(r=Fa())!==l?t=n=[n,r]:(Fr=t,t=l),t}())!==l)if((r=$a())!==l)if((a=Sa())!==l)if((i=Wa())!==l)if((o=Va())!==l)if((u=Kr())!==l)if((s=Ya())!==l){for(c=[],f=ea();f!==l;)c.push(f),f=ea();c!==l?((f=function(){var t,n,r;return t=Fr,(n=function(){var t,n,r;return t=Fr,e.substr(Fr,4)===on?(n=on,Fr+=4):(n=l,0===Ur&&Xr(un)),n!==l&&(r=Fa())!==l?t=n=[n,r]:(Fr=t,t=l),t}())!==l&&Va()!==l&&(r=Kr())!==l&&Ya()!==l?(Br=t,n=z(r),t=n):(Fr=t,t=l),t}())===l&&(f=null),f!==l?(Br=t,n=L(a,u,c,f),t=n):(Fr=t,t=l)):(Fr=t,t=l)}else Fr=t,t=l;else Fr=t,t=l;else Fr=t,t=l;else Fr=t,t=l;else Fr=t,t=l;else Fr=t,t=l;else Fr=t,t=l;t===l&&(t=Fr,(n=function(){var t,n,r;return t=Fr,e.substr(Fr,4)===dn?(n=dn,Fr+=4):(n=l,0===Ur&&Xr(pn)),n!==l&&(r=Fa())!==l?t=n=[n,r]:(Fr=t,t=l),t}())!==l&&(r=ua())!==l?(e.substr(Fr,2)===I?(a=I,Fr+=2):(a=l,0===Ur&&Xr(R)),a!==l&&(i=Fa())!==l&&(o=Sa())!==l&&(u=Va())!==l&&(s=Kr())!==l&&(c=Ya())!==l?(Br=t,n=P(r,o,s),t=n):(Fr=t,t=l)):(Fr=t,t=l),t===l&&(t=Fr,(n=function(){var t,n,r;return t=Fr,e.substr(Fr,6)===nn?(n=nn,Fr+=6):(n=l,0===Ur&&Xr(rn)),n!==l&&(r=Fa())!==l?t=n=[n,r]:(Fr=t,t=l),t}())!==l&&(r=function(){var e,t;return e=Fr,(t=sa())!==l&&(Br=e,t=J(t)),e=t}())!==l&&(a=$a())!==l?((i=function(){var e,t,n,r,a,i;if(e=Fr,(t=ra())!==l){for(n=[],r=Fr,(a=dl())!==l&&(i=ra())!==l?r=a=[a,i]:(Fr=r,r=l);r!==l;)n.push(r),r=Fr,(a=dl())!==l&&(i=ra())!==l?r=a=[a,i]:(Fr=r,r=l);n!==l?(Br=e,t=ee(t,n),e=t):(Fr=e,e=l)}else Fr=e,e=l;return e}())===l&&(i=null),i!==l&&(o=Wa())!==l&&(u=Va())!==l&&(s=Kr())!==l&&(c=Ya())!==l?(Br=t,n=D(r,i,s),t=n):(Fr=t,t=l)):(Fr=t,t=l),t===l&&(t=Fr,43===e.charCodeAt(Fr)?(n=T,Fr++):(n=l,0===Ur&&Xr(F)),n!==l&&(r=oa())!==l&&(a=$a())!==l?((i=aa())===l&&(i=null),i!==l&&(o=Wa())!==l?(Br=t,n=B(r,i),t=n):(Fr=t,t=l)):(Fr=t,t=l),t===l&&(t=Fr,(n=function(){var t,n,r;return t=Fr,e.substr(Fr,4)===en?(n=en,Fr+=4):(n=l,0===Ur&&Xr(tn)),n!==l&&(r=Fa())!==l?t=n=[n,r]:(Fr=t,t=l),t}())!==l&&(r=ua())!==l&&(a=hl())!==l&&(i=Sa())!==l?(Br=t,n=M(r,i),t=n):(Fr=t,t=l),t===l&&(t=La())===l&&(t=Fr,(n=function(){var t,n,r;return t=Fr,e.substr(Fr,4)===bn?(n=bn,Fr+=4):(n=l,0===Ur&&Xr(kn)),n!==l&&(r=Fa())!==l?t=n=[n,r]:(Fr=t,t=l),t}())!==l&&(r=ta())!==l?(e.substr(Fr,2)===N?(a=N,Fr+=2):(a=l,0===Ur&&Xr(H)),a!==l&&(i=Fa())!==l&&(o=ua())!==l?(Br=t,n=U(r,o),t=n):(Fr=t,t=l)):(Fr=t,t=l),t===l&&(t=Fr,(n=function(){var t,n,r;return t=Fr,e.substr(Fr,6)===fn?(n=fn,Fr+=6):(n=l,0===Ur&&Xr(hn)),n!==l&&(r=Fa())!==l?t=n=[n,r]:(Fr=t,t=l),t}())!==l&&(r=ta())!==l?(Br=t,n=G(r),t=n):(Fr=t,t=l),t===l&&(t=Fr,(n=function(){var t,n,r;return t=Fr,e.substr(Fr,6)===Wt?(n=Wt,Fr+=6):(n=l,0===Ur&&Xr(Vt)),n!==l&&(r=Fa())!==l?t=n=[n,r]:(Fr=t,t=l),t}())!==l&&(r=Sa())!==l?(Br=t,n=$(r),t=n):(Fr=t,t=l),t===l&&(t=Fr,(n=function(){var t,n,r;return t=Fr,e.substr(Fr,10)===Sn?(n=Sn,Fr+=10):(n=l,0===Ur&&Xr(Cn)),n!==l&&(r=Fa())!==l?t=n=[n,r]:(Fr=t,t=l),t}())!==l&&(r=ua())!==l?(Br=t,n=W(r),t=n):(Fr=t,t=l),t===l&&(t=Fr,(n=function(){var t,n,r;return t=Fr,e.substr(Fr,2)===xn?(n=xn,Fr+=2):(n=l,0===Ur&&Xr(En)),n!==l&&(r=Fa())!==l?t=n=[n,r]:(Fr=t,t=l),t}())!==l&&(r=function(){var e,t;return(e=La())===l&&(e=Fr,(t=Sa())!==l&&(Br=e,t=it(t)),e=t),e}())!==l?(Br=t,n=V(r),t=n):(Fr=t,t=l))))))))))}return t}())!==l&&(Br=t,n=k(n)),(t=n)===l&&(t=Fr,(n=function(){var t,n,r,a,i,o,u;return t=Fr,(n=ca())!==l&&(r=function(){var t,n,r,a;return t=Fr,35===e.charCodeAt(Fr)?(n=Se,Fr++):(n=l,0===Ur&&Xr(Ce)),n!==l?((r=function(){var e,t;return e=Fr,(t=nl())!==l&&(Br=e,t=Ee()),(e=t)===l&&(e=Fr,(t=rl())!==l&&(Br=e,t=we()),e=t),e}())===l&&(r=null),r!==l&&(a=Sa())!==l?(Br=t,n=xe(r,a),t=n):(Fr=t,t=l)):(Fr=t,t=l),t}())!==l?(Br=t,n=ne(n,r),t=n):(Fr=t,t=l),t===l&&(t=Fr,(n=ca())!==l&&(r=$a())!==l&&(a=fa())!==l&&(i=dl())!==l?(120===e.charCodeAt(Fr)?(o=re,Fr++):(o=l,0===Ur&&Xr(ae)),o!==l&&(u=Fa())!==l&&Wa()!==l?(Br=t,n=le(n,a),t=n):(Fr=t,t=l)):(Fr=t,t=l),t===l&&(t=Fr,(n=ca())!==l&&(r=$a())!==l&&(a=fa())!==l&&(i=Wa())!==l&&(o=dl())!==l?(121===e.charCodeAt(Fr)?(u=ie,Fr++):(u=l,0===Ur&&Xr(oe)),u!==l&&Fa()!==l?(Br=t,n=ue(n,a),t=n):(Fr=t,t=l)):(Fr=t,t=l),t===l&&(t=Fr,(n=ca())!==l&&(r=$a())!==l&&(a=fa())!==l&&(i=Wa())!==l?(Br=t,n=se(n,a),t=n):(Fr=t,t=l),t===l&&(t=Fr,(n=ca())!==l&&(r=fa())!==l&&(a=dl())!==l?(120===e.charCodeAt(Fr)?(i=re,Fr++):(i=l,0===Ur&&Xr(ae)),i===l&&(121===e.charCodeAt(Fr)?(i=ie,Fr++):(i=l,0===Ur&&Xr(oe))),i!==l&&(o=Fa())!==l?(Br=t,n=ce(n,r,i),t=n):(Fr=t,t=l)):(Fr=t,t=l),t===l&&(t=Fr,(n=ca())!==l&&(r=fa())!==l?(Br=t,n=fe(n,r),t=n):(Fr=t,t=l),t===l&&(t=Fr,(n=ca())!==l&&(Br=t,n=he(n)),t=n)))))),t}())!==l&&(Br=t,n=S(n)),t=n),t}function Jr(){var t,n,r;return t=Fr,(n=la())!==l?(58===e.charCodeAt(Fr)?(r=C,Fr++):(r=l,0===Ur&&Xr(x)),r!==l&&Fa()!==l?(Br=t,t=n=E(n)):(Fr=t,t=l)):(Fr=t,t=l),t}function ea(){var t,n,r;return t=Fr,function(){var t,n,r;return t=Fr,e.substr(Fr,4)===sn?(n=sn,Fr+=4):(n=l,0===Ur&&Xr(cn)),n!==l&&(r=Fa())!==l?t=n=[n,r]:(Fr=t,t=l),t}()!==l&&$a()!==l&&(n=Sa())!==l&&Wa()!==l&&Va()!==l&&(r=Kr())!==l&&Ya()!==l?(Br=t,t=Y(n,r)):(Fr=t,t=l),t}function ta(){var t,n,r,a;if(t=Fr,34===e.charCodeAt(Fr)?(n=X,Fr++):(n=l,0===Ur&&Xr(q)),n!==l){for(r=[],a=na();a!==l;)r.push(a),a=na();r!==l?(34===e.charCodeAt(Fr)?(a=X,Fr++):(a=l,0===Ur&&Xr(q)),a!==l&&Fa()!==l?(Br=t,t=n=K(r)):(Fr=t,t=l)):(Fr=t,t=l)}else Fr=t,t=l;return t}function na(){var t,n,r;return t=Fr,n=Fr,Ur++,34===e.charCodeAt(Fr)?(r=X,Fr++):(r=l,0===Ur&&Xr(q)),Ur--,r===l?n=void 0:(Fr=n,n=l),n!==l?(e.length>Fr?(r=e.charAt(Fr),Fr++):(r=l,0===Ur&&Xr(Z)),r!==l?(Br=t,t=n=Q(r)):(Fr=t,t=l)):(Fr=t,t=l),t}function ra(){var e,t;return e=Fr,(t=ua())!==l&&(Br=e,t=te(t)),e=t}function aa(){var e,t,n,r,a,i;if(e=Fr,(t=Sa())!==l){for(n=[],r=Fr,(a=dl())!==l&&(i=Sa())!==l?r=a=[a,i]:(Fr=r,r=l);r!==l;)n.push(r),r=Fr,(a=dl())!==l&&(i=Sa())!==l?r=a=[a,i]:(Fr=r,r=l);n!==l?(Br=e,e=t=ee(t,n)):(Fr=e,e=l)}else Fr=e,e=l;return e}function la(){var e,t,n,r,a;if(e=Fr,t=Fr,n=[],(r=Ia())!==l)for(;r!==l;)n.push(r),r=Ia();else n=l;if(n!==l){for(r=[],a=Ra();a!==l;)r.push(a),a=Ra();r!==l?t=n=[n,r]:(Fr=t,t=l)}else Fr=t,t=l;return t!==l&&(Br=e,t=de()),e=t}function ia(){var e,t;return e=Fr,(t=la())!==l&&Fa()!==l?(Br=e,e=t=pe(t)):(Fr=e,e=l),e}function oa(){var t,n,r,a,i,o,u;if(t=Fr,(n=la())!==l){for(r=[],a=Fr,e.substr(Fr,2)===me?(i=me,Fr+=2):(i=l,0===Ur&&Xr(ve)),i!==l&&(o=la())!==l?a=i=[i,o]:(Fr=a,a=l);a!==l;)r.push(a),a=Fr,e.substr(Fr,2)===me?(i=me,Fr+=2):(i=l,0===Ur&&Xr(ve)),i!==l&&(o=la())!==l?a=i=[i,o]:(Fr=a,a=l);r!==l&&(a=Fa())!==l?(Br=t,t=n=ye(n,r)):(Fr=t,t=l)}else Fr=t,t=l;if(t===l)if(t=Fr,e.substr(Fr,2)===me?(n=me,Fr+=2):(n=l,0===Ur&&Xr(ve)),n!==l)if((r=la())!==l){for(a=[],i=Fr,e.substr(Fr,2)===me?(o=me,Fr+=2):(o=l,0===Ur&&Xr(ve)),o!==l&&(u=la())!==l?i=o=[o,u]:(Fr=i,i=l);i!==l;)a.push(i),i=Fr,e.substr(Fr,2)===me?(o=me,Fr+=2):(o=l,0===Ur&&Xr(ve)),o!==l&&(u=la())!==l?i=o=[o,u]:(Fr=i,i=l);a!==l&&(i=Fa())!==l?(Br=t,t=n=ge(r,a)):(Fr=t,t=l)}else Fr=t,t=l;else Fr=t,t=l;return t}function ua(){var e,t;return e=Fr,(t=sa())!==l&&(Br=e,t=be(t)),e=t}function sa(){var e,t;return e=Fr,(t=la())!==l&&Fa()!==l?(Br=e,e=t=ke(t)):(Fr=e,e=l),e}function ca(){var e,t;return e=Fr,(t=la())!==l&&Fa()!==l?(Br=e,e=t=pe(t)):(Fr=e,e=l),e}function fa(){var e,t;return e=Fr,(t=Sa())!==l&&(Br=e,t=Ae(t)),e=t}function ha(){var e,t,n,r,a,i;if(e=Fr,(t=Ca())!==l){for(n=[],r=Fr,(a=qa())===l&&(a=Qa())===l&&(a=Ja()),a!==l&&(i=Ca())!==l?r=a=[a,i]:(Fr=r,r=l);r!==l;)n.push(r),r=Fr,(a=qa())===l&&(a=Qa())===l&&(a=Ja()),a!==l&&(i=Ca())!==l?r=a=[a,i]:(Fr=r,r=l);n!==l?(Br=e,e=t=Oe(t,n)):(Fr=e,e=l)}else Fr=e,e=l;return e===l&&(e=Ea()),e}function da(){var e,t,n,r,a,i;if(e=Fr,(t=ha())!==l){for(n=[],r=Fr,(a=Ka())===l&&(a=Za()),a!==l&&(i=ha())!==l?r=a=[a,i]:(Fr=r,r=l);r!==l;)n.push(r),r=Fr,(a=Ka())===l&&(a=Za()),a!==l&&(i=ha())!==l?r=a=[a,i]:(Fr=r,r=l);n!==l?(Br=e,e=t=Oe(t,n)):(Fr=e,e=l)}else Fr=e,e=l;return e}function pa(){var e,t,n,r,a,i;if(e=Fr,(t=da())!==l){for(n=[],r=Fr,(a=el())===l&&(a=tl()),a!==l&&(i=da())!==l?r=a=[a,i]:(Fr=r,r=l);r!==l;)n.push(r),r=Fr,(a=el())===l&&(a=tl()),a!==l&&(i=da())!==l?r=a=[a,i]:(Fr=r,r=l);n!==l?(Br=e,e=t=Oe(t,n)):(Fr=e,e=l)}else Fr=e,e=l;return e}function ma(){var e,t,n,r,a,i;if(e=Fr,(t=pa())!==l){for(n=[],r=Fr,(a=al())===l&&(a=ll())===l&&(a=nl())===l&&(a=rl()),a!==l&&(i=pa())!==l?r=a=[a,i]:(Fr=r,r=l);r!==l;)n.push(r),r=Fr,(a=al())===l&&(a=ll())===l&&(a=nl())===l&&(a=rl()),a!==l&&(i=pa())!==l?r=a=[a,i]:(Fr=r,r=l);n!==l?(Br=e,e=t=Oe(t,n)):(Fr=e,e=l)}else Fr=e,e=l;return e}function va(){var e,t,n,r,a,i;if(e=Fr,(t=ma())!==l){for(n=[],r=Fr,(a=il())===l&&(a=ol()),a!==l&&(i=ma())!==l?r=a=[a,i]:(Fr=r,r=l);r!==l;)n.push(r),r=Fr,(a=il())===l&&(a=ol()),a!==l&&(i=ma())!==l?r=a=[a,i]:(Fr=r,r=l);n!==l?(Br=e,e=t=Oe(t,n)):(Fr=e,e=l)}else Fr=e,e=l;return e}function ya(){var e,t,n,r,a,i;if(e=Fr,(t=va())!==l){for(n=[],r=Fr,(a=Xa())!==l&&(i=va())!==l?r=a=[a,i]:(Fr=r,r=l);r!==l;)n.push(r),r=Fr,(a=Xa())!==l&&(i=va())!==l?r=a=[a,i]:(Fr=r,r=l);n!==l?(Br=e,e=t=Oe(t,n)):(Fr=e,e=l)}else Fr=e,e=l;return e}function ga(){var e,t,n,r,a,i;if(e=Fr,(t=ya())!==l){for(n=[],r=Fr,(a=ul())!==l&&(i=ya())!==l?r=a=[a,i]:(Fr=r,r=l);r!==l;)n.push(r),r=Fr,(a=ul())!==l&&(i=ya())!==l?r=a=[a,i]:(Fr=r,r=l);n!==l?(Br=e,e=t=Oe(t,n)):(Fr=e,e=l)}else Fr=e,e=l;return e}function ba(){var e,t,n,r,a,i;if(e=Fr,(t=ga())!==l){for(n=[],r=Fr,(a=sl())!==l&&(i=ga())!==l?r=a=[a,i]:(Fr=r,r=l);r!==l;)n.push(r),r=Fr,(a=sl())!==l&&(i=ga())!==l?r=a=[a,i]:(Fr=r,r=l);n!==l?(Br=e,e=t=Oe(t,n)):(Fr=e,e=l)}else Fr=e,e=l;return e}function ka(){var e,t,n,r,a,i;if(e=Fr,(t=ba())!==l){for(n=[],r=Fr,(a=cl())!==l&&(i=ba())!==l?r=a=[a,i]:(Fr=r,r=l);r!==l;)n.push(r),r=Fr,(a=cl())!==l&&(i=ba())!==l?r=a=[a,i]:(Fr=r,r=l);n!==l?(Br=e,e=t=Oe(t,n)):(Fr=e,e=l)}else Fr=e,e=l;return e}function Sa(){var e,t,n,r,a,i;if(e=Fr,(t=ka())!==l){for(n=[],r=Fr,(a=fl())!==l&&(i=ka())!==l?r=a=[a,i]:(Fr=r,r=l);r!==l;)n.push(r),r=Fr,(a=fl())!==l&&(i=ka())!==l?r=a=[a,i]:(Fr=r,r=l);n!==l?(Br=e,e=t=Oe(t,n)):(Fr=e,e=l)}else Fr=e,e=l;return e}function Ca(){var t,n,r;return(t=function(){var e;return(e=function(){var e,t,n;return e=Fr,(t=xa())!==l&&$a()!==l?((n=aa())===l&&(n=null),n!==l&&Wa()!==l?(Br=e,t=Pe(t,n),e=t):(Fr=e,e=l)):(Fr=e,e=l),e}())===l&&(e=xa()),e}())===l&&(t=Fr,(n=function(){var t,n;return t=Fr,(n=Ka())===l&&(n=Za())===l&&(n=function(){var t,n;return t=Fr,126===e.charCodeAt(Fr)?(n=Qn,Fr++):(n=l,0===Ur&&Xr(Jn)),n!==l&&Fa()!==l?(Br=t,n=On(n),t=n):(Fr=t,t=l),t}())===l&&(n=function(){var t,n,r,a;return t=Fr,33===e.charCodeAt(Fr)?(n=er,Fr++):(n=l,0===Ur&&Xr(tr)),n!==l?(r=Fr,Ur++,Wn.test(e.charAt(Fr))?(a=e.charAt(Fr),Fr++):(a=l,0===Ur&&Xr(Vn)),Ur--,a===l?r=void 0:(Fr=r,r=l),r!==l&&(a=Fa())!==l?(Br=t,n=On(n),t=n):(Fr=t,t=l)):(Fr=t,t=l),t}()),n!==l&&(Br=t,n=je(n)),t=n}())!==l&&(r=Ca())!==l?(Br=t,t=n=_e(n,r)):(Fr=t,t=l)),t}function xa(){var e,t,n,r,a;if(e=Fr,(t=Ea())!==l){for(n=[],r=Fr,Ua()!==l&&(a=Sa())!==l&&Ga()!==l?(Br=r,r=Le(t,a)):(Fr=r,r=l),r===l&&(r=Fr,za()!==l&&(a=ia())!==l?(Br=r,r=Ie(t,a)):(Fr=r,r=l));r!==l;)n.push(r),r=Fr,Ua()!==l&&(a=Sa())!==l&&Ga()!==l?(Br=r,r=Le(t,a)):(Fr=r,r=l),r===l&&(r=Fr,za()!==l&&(a=ia())!==l?(Br=r,r=Ie(t,a)):(Fr=r,r=l));n!==l?(Br=e,e=t=Re(t,n)):(Fr=e,e=l)}else Fr=e,e=l;return e}function Ea(){var e,t,n;return e=Fr,(t=wa())!==l&&(Br=e,t=De(t)),(e=t)===l&&(e=Fr,(t=oa())!==l&&(Br=e,t=pe(t)),(e=t)===l&&(e=Fr,(t=ta())!==l&&(Br=e,t=Te(t)),(e=t)===l&&(e=function(){var e,t,n;return e=Fr,(t=Ua())!==l?((n=aa())===l&&(n=null),n!==l&&Ga()!==l?(Br=e,t=tt(n),e=t):(Fr=e,e=l)):(Fr=e,e=l),e}())===l&&(e=function(){var e,t,n;return e=Fr,(t=Va())!==l&&Ma()!==l&&(n=Ya())!==l?(Br=e,t=nt(),e=t):(Fr=e,e=l),e===l&&(e=Fr,(t=Va())!==l&&Ma()!==l&&(n=_a())!==l&&Ma()!==l&&Ya()!==l?(Br=e,t=rt(n),e=t):(Fr=e,e=l),e===l&&(e=Fr,(t=Va())!==l&&Ma()!==l&&(n=_a())!==l&&Ma()!==l&&dl()!==l&&Ma()!==l&&Ya()!==l?(Br=e,t=rt(n),e=t):(Fr=e,e=l))),e}())===l&&(e=Fr,(t=$a())!==l&&(n=Sa())!==l&&Wa()!==l?(Br=e,e=t=Fe(n)):(Fr=e,e=l)))),e}function wa(){var t,n,r,a,i;if(t=Fr,36===e.charCodeAt(Fr)?(n=Be,Fr++):(n=l,0===Ur&&Xr(Me)),n!==l){if(r=Fr,a=[],(i=Ta())!==l)for(;i!==l;)a.push(i),i=Ta();else a=l;(r=a!==l?e.substring(r,Fr):a)!==l&&(a=Fa())!==l?(Br=t,t=n=Ne(r)):(Fr=t,t=l)}else Fr=t,t=l;if(t===l){if(t=Fr,37===e.charCodeAt(Fr)?(n=He,Fr++):(n=l,0===Ur&&Xr(Ue)),n!==l){if(r=Fr,a=[],(i=Da())!==l)for(;i!==l;)a.push(i),i=Da();else a=l;(r=a!==l?e.substring(r,Fr):a)!==l&&(a=Fa())!==l?(Br=t,t=n=Ge(r)):(Fr=t,t=l)}else Fr=t,t=l;t===l&&(t=Fr,(n=function(){var t,n,r,a,i;if(t=Fr,(n=Aa())!==l)if(46===e.charCodeAt(Fr)?(r=We,Fr++):(r=l,0===Ur&&Xr(Ve)),r!==l){for(a=[],i=Pa();i!==l;)a.push(i),i=Pa();a!==l?((i=Oa())===l&&(i=null),i!==l?(Br=t,n=Ye(),t=n):(Fr=t,t=l)):(Fr=t,t=l)}else Fr=t,t=l;else Fr=t,t=l;if(t===l){if(t=Fr,46===e.charCodeAt(Fr)?(n=We,Fr++):(n=l,0===Ur&&Xr(Ve)),n!==l){if(r=[],(a=Pa())!==l)for(;a!==l;)r.push(a),a=Pa();else r=l;r!==l?((a=Oa())===l&&(a=null),a!==l?(Br=t,n=Ye(),t=n):(Fr=t,t=l)):(Fr=t,t=l)}else Fr=t,t=l;t===l&&(t=Fr,(n=Aa())!==l?((r=Oa())===l&&(r=null),r!==l?(Br=t,n=Ye(),t=n):(Fr=t,t=l)):(Fr=t,t=l))}return t}())!==l&&(r=Fa())!==l?(Br=t,t=n=$e(n)):(Fr=t,t=l))}return t}function Aa(){var t,n,r,a;if(48===e.charCodeAt(Fr)?(t=ze,Fr++):(t=l,0===Ur&&Xr(Xe)),t===l)if(t=Fr,(n=function(){var t;return qe.test(e.charAt(Fr))?(t=e.charAt(Fr),Fr++):(t=l,0===Ur&&Xr(Ke)),t}())!==l){for(r=[],a=Pa();a!==l;)r.push(a),a=Pa();r!==l?t=n=[n,r]:(Fr=t,t=l)}else Fr=t,t=l;return t}function Oa(){var t,n,r;return t=Fr,(n=function(){var t;return e.substr(Fr,1).toLowerCase()===Ze?(t=e.charAt(Fr),Fr++):(t=l,0===Ur&&Xr(Qe)),t}())!==l&&(r=function(){var t,n,r,a;if(t=Fr,Je.test(e.charAt(Fr))?(n=e.charAt(Fr),Fr++):(n=l,0===Ur&&Xr(et)),n===l&&(n=null),n!==l){if(r=[],(a=Pa())!==l)for(;a!==l;)r.push(a),a=Pa();else r=l;r!==l?t=n=[n,r]:(Fr=t,t=l)}else Fr=t,t=l;return t}())!==l?t=n=[n,r]:(Fr=t,t=l),t}function _a(){var e,t,n,r,a,i,o;if(e=Fr,(t=ja())!==l){for(n=[],r=Fr,(a=dl())!==l&&(i=Ma())!==l&&(o=ja())!==l?r=a=[a,i,o]:(Fr=r,r=l);r!==l;)n.push(r),r=Fr,(a=dl())!==l&&(i=Ma())!==l&&(o=ja())!==l?r=a=[a,i,o]:(Fr=r,r=l);n!==l?(Br=e,e=t=at(t,n)):(Fr=e,e=l)}else Fr=e,e=l;return e}function ja(){var t,n,r;return t=Fr,(n=function(){var e,t;return(e=ua())===l&&(e=ta())===l&&(e=Fr,(t=wa())!==l&&(Br=e,t=De(t)),e=t),e}())!==l&&function(){var t,n,r,a;return t=Fr,58===e.charCodeAt(Fr)?(n=C,Fr++):(n=l,0===Ur&&Xr(x)),n!==l?(r=Fr,Ur++,Lr.test(e.charAt(Fr))?(a=e.charAt(Fr),Fr++):(a=l,0===Ur&&Xr(Ir)),Ur--,a===l?r=void 0:(Fr=r,r=l),r!==l&&(a=Fa())!==l?(Br=t,n=On(n),t=n):(Fr=t,t=l)):(Fr=t,t=l),t}()!==l&&(r=Sa())!==l?(Br=t,t=n=lt(n,r)):(Fr=t,t=l),t}function La(){var e,t,n;return e=Fr,(t=oa())!==l&&hl()!==l&&(n=Sa())!==l?(Br=e,e=t=ot(t,n)):(Fr=e,e=l),e}function Ia(){var t;return ut.test(e.charAt(Fr))?(t=e.charAt(Fr),Fr++):(t=l,0===Ur&&Xr(st)),t}function Ra(){var t;return ct.test(e.charAt(Fr))?(t=e.charAt(Fr),Fr++):(t=l,0===Ur&&Xr(ft)),t}function Pa(){var t;return ht.test(e.charAt(Fr))?(t=e.charAt(Fr),Fr++):(t=l,0===Ur&&Xr(dt)),t}function Da(){var t;return pt.test(e.charAt(Fr))?(t=e.charAt(Fr),Fr++):(t=l,0===Ur&&Xr(mt)),t}function Ta(){var t;return vt.test(e.charAt(Fr))?(t=e.charAt(Fr),Fr++):(t=l,0===Ur&&Xr(yt)),t}function Fa(){var e,t;for(Ur++,e=[],t=Ba();t!==l;)e.push(t),t=Ba();return Ur--,e===l&&(t=l,0===Ur&&Xr(gt)),e}function Ba(){var t;return Ur++,9===e.charCodeAt(Fr)?(t=bt,Fr++):(t=l,0===Ur&&Xr(kt)),t===l&&(11===e.charCodeAt(Fr)?(t=St,Fr++):(t=l,0===Ur&&Xr(Ct)),t===l&&(12===e.charCodeAt(Fr)?(t=xt,Fr++):(t=l,0===Ur&&Xr(Et)),t===l&&(32===e.charCodeAt(Fr)?(t=wt,Fr++):(t=l,0===Ur&&Xr(At)),t===l&&(160===e.charCodeAt(Fr)?(t=Ot,Fr++):(t=l,0===Ur&&Xr(_t)),t===l&&(65279===e.charCodeAt(Fr)?(t=jt,Fr++):(t=l,0===Ur&&Xr(Lt)),t===l&&(t=function(){var t;return It.test(e.charAt(Fr))?(t=e.charAt(Fr),Fr++):(t=l,0===Ur&&Xr(Rt)),t}())))))),Ur--,t===l&&0===Ur&&Xr(gt),t}function Ma(){var e,t;for(e=[],(t=Ba())===l&&(t=Ha())===l&&(t=Na());t!==l;)e.push(t),(t=Ba())===l&&(t=Ha())===l&&(t=Na());return e}function Na(){var t,n,r,a,i,o;if(t=Fr,59===e.charCodeAt(Fr)?(n=Pt,Fr++):(n=l,0===Ur&&Xr(Dt)),n!==l){for(r=[],a=Fr,i=Fr,Ur++,10===e.charCodeAt(Fr)?(o=c,Fr++):(o=l,0===Ur&&Xr(f)),Ur--,o===l?i=void 0:(Fr=i,i=l),i!==l?(e.length>Fr?(o=e.charAt(Fr),Fr++):(o=l,0===Ur&&Xr(Z)),o!==l?a=i=[i,o]:(Fr=a,a=l)):(Fr=a,a=l);a!==l;)r.push(a),a=Fr,i=Fr,Ur++,10===e.charCodeAt(Fr)?(o=c,Fr++):(o=l,0===Ur&&Xr(f)),Ur--,o===l?i=void 0:(Fr=i,i=l),i!==l?(e.length>Fr?(o=e.charAt(Fr),Fr++):(o=l,0===Ur&&Xr(Z)),o!==l?a=i=[i,o]:(Fr=a,a=l)):(Fr=a,a=l);r!==l?t=n=[n,r]:(Fr=t,t=l)}else Fr=t,t=l;return t}function Ha(){var t;return Ur++,10===e.charCodeAt(Fr)?(t=c,Fr++):(t=l,0===Ur&&Xr(f)),t===l&&(e.substr(Fr,2)===Ft?(t=Ft,Fr+=2):(t=l,0===Ur&&Xr(Bt)),t===l&&(13===e.charCodeAt(Fr)?(t=Mt,Fr++):(t=l,0===Ur&&Xr(Nt)),t===l&&(8232===e.charCodeAt(Fr)?(t=Ht,Fr++):(t=l,0===Ur&&Xr(Ut)),t===l&&(8233===e.charCodeAt(Fr)?(t=Gt,Fr++):(t=l,0===Ur&&Xr($t)))))),Ur--,t===l&&0===Ur&&Xr(Tt),t}function Ua(){var t,n;return t=Fr,91===e.charCodeAt(Fr)?(n=wn,Fr++):(n=l,0===Ur&&Xr(An)),n!==l&&Fa()!==l?(Br=t,t=n=On(n)):(Fr=t,t=l),t}function Ga(){var t,n;return t=Fr,93===e.charCodeAt(Fr)?(n=_n,Fr++):(n=l,0===Ur&&Xr(jn)),n!==l&&Fa()!==l?(Br=t,t=n=On(n)):(Fr=t,t=l),t}function $a(){var t,n;return t=Fr,40===e.charCodeAt(Fr)?(n=Ln,Fr++):(n=l,0===Ur&&Xr(In)),n!==l&&Fa()!==l?(Br=t,t=n=On(n)):(Fr=t,t=l),t}function Wa(){var t,n;return t=Fr,41===e.charCodeAt(Fr)?(n=Rn,Fr++):(n=l,0===Ur&&Xr(Pn)),n!==l&&Fa()!==l?(Br=t,t=n=On(n)):(Fr=t,t=l),t}function Va(){var t,n;return t=Fr,123===e.charCodeAt(Fr)?(n=Dn,Fr++):(n=l,0===Ur&&Xr(Tn)),n!==l&&Fa()!==l?(Br=t,t=n=On(n)):(Fr=t,t=l),t}function Ya(){var t,n;return t=Fr,125===e.charCodeAt(Fr)?(n=Fn,Fr++):(n=l,0===Ur&&Xr(Bn)),n!==l&&Fa()!==l?(Br=t,t=n=On(n)):(Fr=t,t=l),t}function za(){var t,n;return t=Fr,46===e.charCodeAt(Fr)?(n=We,Fr++):(n=l,0===Ur&&Xr(Ve)),n!==l&&Fa()!==l?(Br=t,t=n=On(n)):(Fr=t,t=l),t}function Xa(){var t,n,r,a;return t=Fr,38===e.charCodeAt(Fr)?(n=Mn,Fr++):(n=l,0===Ur&&Xr(Nn)),n!==l?(r=Fr,Ur++,Hn.test(e.charAt(Fr))?(a=e.charAt(Fr),Fr++):(a=l,0===Ur&&Xr(Un)),Ur--,a===l?r=void 0:(Fr=r,r=l),r!==l&&(a=Fa())!==l?(Br=t,t=n=On(n)):(Fr=t,t=l)):(Fr=t,t=l),t}function qa(){var t,n,r,a;return t=Fr,42===e.charCodeAt(Fr)?(n=Gn,Fr++):(n=l,0===Ur&&Xr($n)),n!==l?(r=Fr,Ur++,Wn.test(e.charAt(Fr))?(a=e.charAt(Fr),Fr++):(a=l,0===Ur&&Xr(Vn)),Ur--,a===l?r=void 0:(Fr=r,r=l),r!==l&&(a=Fa())!==l?(Br=t,t=n=On(n)):(Fr=t,t=l)):(Fr=t,t=l),t}function Ka(){var t,n,r,a;return t=Fr,43===e.charCodeAt(Fr)?(n=T,Fr++):(n=l,0===Ur&&Xr(F)),n!==l?(r=Fr,Ur++,Yn.test(e.charAt(Fr))?(a=e.charAt(Fr),Fr++):(a=l,0===Ur&&Xr(zn)),Ur--,a===l?r=void 0:(Fr=r,r=l),r!==l&&(a=Fa())!==l?(Br=t,t=n=On(n)):(Fr=t,t=l)):(Fr=t,t=l),t}function Za(){var t,n,r,a;return t=Fr,45===e.charCodeAt(Fr)?(n=Xn,Fr++):(n=l,0===Ur&&Xr(qn)),n!==l?(r=Fr,Ur++,Kn.test(e.charAt(Fr))?(a=e.charAt(Fr),Fr++):(a=l,0===Ur&&Xr(Zn)),Ur--,a===l?r=void 0:(Fr=r,r=l),r!==l&&(a=Fa())!==l?(Br=t,t=n=On(n)):(Fr=t,t=l)):(Fr=t,t=l),t}function Qa(){var t,n,r,a;return t=Fr,47===e.charCodeAt(Fr)?(n=nr,Fr++):(n=l,0===Ur&&Xr(rr)),n!==l?(r=Fr,Ur++,Wn.test(e.charAt(Fr))?(a=e.charAt(Fr),Fr++):(a=l,0===Ur&&Xr(Vn)),Ur--,a===l?r=void 0:(Fr=r,r=l),r!==l&&(a=Fa())!==l?(Br=t,t=n=On(n)):(Fr=t,t=l)):(Fr=t,t=l),t}function Ja(){var t,n,r,a;return t=Fr,37===e.charCodeAt(Fr)?(n=He,Fr++):(n=l,0===Ur&&Xr(Ue)),n!==l?(r=Fr,Ur++,ar.test(e.charAt(Fr))?(a=e.charAt(Fr),Fr++):(a=l,0===Ur&&Xr(lr)),Ur--,a===l?r=void 0:(Fr=r,r=l),r!==l&&(a=Fa())!==l?(Br=t,t=n=On(n)):(Fr=t,t=l)):(Fr=t,t=l),t}function el(){var t,n,r,a;return t=Fr,e.substr(Fr,2)===ir?(n=ir,Fr+=2):(n=l,0===Ur&&Xr(or)),n!==l?(r=Fr,Ur++,Wn.test(e.charAt(Fr))?(a=e.charAt(Fr),Fr++):(a=l,0===Ur&&Xr(Vn)),Ur--,a===l?r=void 0:(Fr=r,r=l),r!==l&&(a=Fa())!==l?(Br=t,t=n=On(n)):(Fr=t,t=l)):(Fr=t,t=l),t}function tl(){var t,n,r,a;return t=Fr,e.substr(Fr,2)===ur?(n=ur,Fr+=2):(n=l,0===Ur&&Xr(sr)),n!==l?(r=Fr,Ur++,Wn.test(e.charAt(Fr))?(a=e.charAt(Fr),Fr++):(a=l,0===Ur&&Xr(Vn)),Ur--,a===l?r=void 0:(Fr=r,r=l),r!==l&&(a=Fa())!==l?(Br=t,t=n=On(n)):(Fr=t,t=l)):(Fr=t,t=l),t}function nl(){var t,n,r,a;return t=Fr,60===e.charCodeAt(Fr)?(n=cr,Fr++):(n=l,0===Ur&&Xr(fr)),n!==l?(r=Fr,Ur++,Wn.test(e.charAt(Fr))?(a=e.charAt(Fr),Fr++):(a=l,0===Ur&&Xr(Vn)),Ur--,a===l?r=void 0:(Fr=r,r=l),r!==l&&(a=Fa())!==l?(Br=t,t=n=On(n)):(Fr=t,t=l)):(Fr=t,t=l),t}function rl(){var t,n,r,a;return t=Fr,62===e.charCodeAt(Fr)?(n=hr,Fr++):(n=l,0===Ur&&Xr(dr)),n!==l?(r=Fr,Ur++,Wn.test(e.charAt(Fr))?(a=e.charAt(Fr),Fr++):(a=l,0===Ur&&Xr(Vn)),Ur--,a===l?r=void 0:(Fr=r,r=l),r!==l&&(a=Fa())!==l?(Br=t,t=n=On(n)):(Fr=t,t=l)):(Fr=t,t=l),t}function al(){var t,n;return t=Fr,e.substr(Fr,2)===pr?(n=pr,Fr+=2):(n=l,0===Ur&&Xr(mr)),n!==l&&Fa()!==l?(Br=t,t=n=On(n)):(Fr=t,t=l),t}function ll(){var t,n;return t=Fr,e.substr(Fr,2)===vr?(n=vr,Fr+=2):(n=l,0===Ur&&Xr(yr)),n!==l&&Fa()!==l?(Br=t,t=n=On(n)):(Fr=t,t=l),t}function il(){var t,n;return t=Fr,e.substr(Fr,2)===gr?(n=gr,Fr+=2):(n=l,0===Ur&&Xr(br)),n!==l&&Fa()!==l?(Br=t,t=n=On(n)):(Fr=t,t=l),t}function ol(){var t,n;return t=Fr,e.substr(Fr,2)===kr?(n=kr,Fr+=2):(n=l,0===Ur&&Xr(Sr)),n!==l&&Fa()!==l?(Br=t,t=n=On(n)):(Fr=t,t=l),t}function ul(){var t,n,r,a;return t=Fr,94===e.charCodeAt(Fr)?(n=Cr,Fr++):(n=l,0===Ur&&Xr(xr)),n!==l?(r=Fr,Ur++,Wn.test(e.charAt(Fr))?(a=e.charAt(Fr),Fr++):(a=l,0===Ur&&Xr(Vn)),Ur--,a===l?r=void 0:(Fr=r,r=l),r!==l&&(a=Fa())!==l?(Br=t,t=n=On(n)):(Fr=t,t=l)):(Fr=t,t=l),t}function sl(){var t,n,r,a;return t=Fr,124===e.charCodeAt(Fr)?(n=Er,Fr++):(n=l,0===Ur&&Xr(wr)),n!==l?(r=Fr,Ur++,Wn.test(e.charAt(Fr))?(a=e.charAt(Fr),Fr++):(a=l,0===Ur&&Xr(Vn)),Ur--,a===l?r=void 0:(Fr=r,r=l),r!==l&&(a=Fa())!==l?(Br=t,t=n=On(n)):(Fr=t,t=l)):(Fr=t,t=l),t}function cl(){var t,n;return t=Fr,e.substr(Fr,2)===Ar?(n=Ar,Fr+=2):(n=l,0===Ur&&Xr(Or)),n!==l&&Fa()!==l?(Br=t,t=n=On(n)):(Fr=t,t=l),t}function fl(){var t,n;return t=Fr,e.substr(Fr,2)===_r?(n=_r,Fr+=2):(n=l,0===Ur&&Xr(jr)),n!==l&&Fa()!==l?(Br=t,t=n=On(n)):(Fr=t,t=l),t}function hl(){var t,n,r,a;return t=Fr,61===e.charCodeAt(Fr)?(n=Rr,Fr++):(n=l,0===Ur&&Xr(Pr)),n!==l?(r=Fr,Ur++,61===e.charCodeAt(Fr)?(a=Rr,Fr++):(a=l,0===Ur&&Xr(Pr)),Ur--,a===l?r=void 0:(Fr=r,r=l),r!==l&&(a=Fa())!==l?(Br=t,t=n=On(n)):(Fr=t,t=l)):(Fr=t,t=l),t}function dl(){var t,n;return t=Fr,44===e.charCodeAt(Fr)?(n=Dr,Fr++):(n=l,0===Ur&&Xr(Tr)),n!==l&&Fa()!==l?(Br=t,t=n=On(n)):(Fr=t,t=l),t}var pl=n(36),ml=(pl.objectToAst,{mnemonic:null,imm:null,abs:null,absx:null,absy:null,absind:null,indx:null,indy:null});function vl(e,t,n,r){return i({},ml,{mnemonic:e,imm:t,abs:n,loc:r})}function yl(e,t,n){return[e].concat(function(e,t){return e.map(function(e){return e[t]})}(t,n))}function gl(){return i({},zr(Br,Fr),{source:t.source})}if((r=s())!==l&&Fr===e.length)return r;throw r!==l&&Fr<e.length&&Xr({type:"end"}),qr(Hr,Nr<e.length?e.charAt(Nr):null,Nr<e.length?zr(Nr,Nr+1):zr(Nr,Nr))}}},function(e,t,n){"use strict";var r=n(16),a=n(17);Object.defineProperty(t,"__esModule",{value:!0});var l=n(18),i=n(73),o=function(){function e(){r(this,e),this.lineStack=[],this.pcToLocs={},this.insnBitset=new i}return a(e,[{key:"startLine",value:function(e,t){var n={source:l.resolve(e.source),lineNo:e.start.line};this.lineStack.push({loc:n,pc:t})}},{key:"endLine",value:function(e){var t=this.lineStack.pop();if(!t)throw new Error("internal compiler error, mismatching start/end lines in debugInfo");if(e-t.pc>0){var n=this.pcToLocs[t.pc]||[];n.push(t.loc),this.pcToLocs[t.pc]=n}}},{key:"markAsInstruction",value:function(e,t){for(var n=e;n<t;n++)this.insnBitset.add(n)}},{key:"info",value:function(){var e=this.insnBitset.clone();return{pcToLocs:this.pcToLocs,isInstruction:function(t){return e.has(t)}}}}]),e}();t.DebugInfoTracker=o},,function(e,t,n){"use strict";var r=n(16),a=n(17);Object.defineProperty(t,"__esModule",{value:!0});var l=n(34);function i(e){return"".concat(e.toString(16).toUpperCase().padStart(2,"0"))}function o(e){return"".concat(e.toString(16).toUpperCase().padStart(4,"0"))}function u(e,t){var n=0,r=e.length,a=[];for(n=0;n<r;n+=t){var l=e.slice(n,n+t);a.push(l)}return a}t.chunkArray=u;var s=function(){function e(t,n){var a=this;r(this,e),this.buf=t,this.outputPadChars="     ",this.outputBytesPerLine=1,this.bytes={startPC:0,bytes:[]},this.byte=function(){var e=a.buf.readUInt8(a.curOffs);return a.curOffs++,e},this.print=function(e,t,n){a.flushBytes();var r=i(t[0]),l=t.length>=2?i(t[1]):"  ",u=t.length>=3?i(t[2]):"  ";a.output.push("".concat(o(e),": ").concat(r," ").concat(l," ").concat(u).concat(a.outputPadChars).concat(n))},this.output=[],this.curAddr=t.readUInt8(0)+(t.readUInt8(1)<<8),this.curOffs=2,this.disasmOptions=n,this.disasmOptions&&this.disasmOptions.isInstruction&&(this.outputPadChars="                    ",this.outputBytesPerLine=8),this.opToDecl={},Object.keys(l.default).forEach(function(e){for(var t=l.default[e],n=0;n<t.length;n++){var r=t[n];null!==r&&(a.opToDecl[r]={mnemonic:e,decode:t})}})}return a(e,[{key:"flushBytes",value:function(){for(var e=u(this.bytes.bytes,this.outputBytesPerLine),t=this.bytes.startPC,n=0;n<e.length;n++,t+=this.outputBytesPerLine){var r=e[n].map(function(e){return i(e)}).join(" ");this.output.push("".concat(o(t),": ").concat(r))}this.bytes.bytes=[]}},{key:"disImm",value:function(e,t){var n=this.curAddr,r=this.byte();this.print(n,[t,r],"".concat(e," #$").concat(i(r)))}},{key:"disZp",value:function(e,t){var n=this.curAddr,r=this.byte();this.print(n,[t,r],"".concat(e," $").concat(i(r)))}},{key:"disZpX",value:function(e,t){var n=this.curAddr,r=this.byte();this.print(n,[t,r],"".concat(e," $").concat(i(r),",X"))}},{key:"disZpY",value:function(e,t){var n=this.curAddr,r=this.byte();this.print(n,[t,r],"".concat(e," $").concat(i(r),",Y"))}},{key:"disAbs",value:function(e,t){var n=this.curAddr,r=this.byte(),a=this.byte();this.print(n,[t,r,a],"".concat(e," $").concat(o(r+256*a)))}},{key:"disAbsX",value:function(e,t){var n=this.curAddr,r=this.byte(),a=this.byte();this.print(n,[t,r,a],"".concat(e," $").concat(o(r+256*a),",X"))}},{key:"disAbsY",value:function(e,t){var n=this.curAddr,r=this.byte(),a=this.byte();this.print(n,[t,r,a],"".concat(e," $").concat(o(r+256*a),",Y"))}},{key:"disInd",value:function(e,t){var n=this.curAddr,r=this.byte(),a=this.byte();this.print(n,[t,r,a],"".concat(e," ($").concat(o(r+256*a),")"))}},{key:"disIndX",value:function(e,t){var n=this.curAddr,r=this.byte();this.print(n,[t,r],"".concat(e," ($").concat(i(r),",X)"))}},{key:"disIndY",value:function(e,t){var n=this.curAddr,r=this.byte();this.print(n,[t,r],"".concat(e," ($").concat(i(r),"),Y"))}},{key:"disSingle",value:function(e,t){var n=this.curAddr;this.print(n,[t],"".concat(e))}},{key:"disBranch",value:function(e,t){var n=this.curAddr,r=this.byte(),a=n+(r>=128?-(256-r):r)+2;this.print(n,[t,r],"".concat(e," $").concat(o(a)))}},{key:"disUnknown",value:function(e){0!==this.bytes.bytes.length?this.bytes.bytes.push(e):(this.bytes.bytes=[e],this.bytes.startPC=this.curAddr)}},{key:"disassemble",value:function(){var e=this.buf.byteLength,t=function(e){return!0};this.disasmOptions&&this.disasmOptions.isInstruction&&(t=this.disasmOptions.isInstruction);for(var n=this.curOffs;this.curOffs<e;){this.curAddr+=this.curOffs-n,n=this.curOffs;var r=this.byte(),a=this.opToDecl[r];if(t(this.curAddr)&&void 0!==a){var l=a.decode.indexOf(r);if(0===l){this.disImm(a.mnemonic,r);continue}if(1===l){this.disZp(a.mnemonic,r);continue}if(2===l){this.disZpX(a.mnemonic,r);continue}if(3===l){this.disZpY(a.mnemonic,r);continue}if(4===l){this.disAbs(a.mnemonic,r);continue}if(5===l){this.disAbsX(a.mnemonic,r);continue}if(6===l){this.disAbsY(a.mnemonic,r);continue}if(7===l){this.disInd(a.mnemonic,r);continue}if(8===l){this.disIndX(a.mnemonic,r);continue}if(9===l){this.disIndY(a.mnemonic,r);continue}if(10===l){this.disSingle(a.mnemonic,r);continue}if(11===l){this.disBranch(a.mnemonic,r);continue}}else this.disUnknown(r)}return this.flushBytes(),this.output}}]),e}();t.disassemble=function(e,t){return new s(e,t).disassemble()}}],[[45,1,2]]]);
//# sourceMappingURL=main.62613fd9.chunk.js.map