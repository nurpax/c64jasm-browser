{"version":3,"sources":["DiagnosticsList.module.css","asmBuiltins.ts","types.ts","Editor.module.css","editing.ts","Disasm.module.css","CloseButton.module.css","App.module.css","App.tsx","Disasm.tsx","DiagnosticsList.tsx","SourceTabs.tsx","syntaxHighlighting.ts","Editor.tsx","CloseButton.tsx","Help.tsx","index.tsx","../node_modules/import-fresh sync","SourceTabs.module.css","Help.module.css"],"names":["module","exports","layoutContainer","diagnostics","diagnosticsBox","diagItem","selected","error","__webpack_require__","d","__webpack_exports__","plugin","c64","getFileExt","fname","slice","lastIndexOf","editorContainer","overlayCommon","textarea","textareaHighlightOverlay","textareaHighlightRow","textareaHighlightRowCurrent","highlightError","gutter","gutterRow","gutterRowSelected","textareaSyntaxHighlightOverlay","textareaSyntaxHighlightRow","hiliteNormal","hiliteComment","findCharOffset","source","loc","lines","split","offset","i","start","line","length","column","findLine","charOffset","disasmContainer","buttonContainer","close","headerContainer","appTitle","config","useWebWorkers","SourceFileMapCache","cache","newFiles","_step","changed","_iterator","Object","_Users_janne_dev_c64jasm_browser_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper__WEBPACK_IMPORTED_MODULE_3__","s","n","done","value","this","name","text","err","e","f","sourceFileMap","prebuiltFiles","Buffer","from","cursorOffset","asmBuiltins","App","sourceFileMapCache","assemblerWorker","undefined","state","gist","id","loadCount","loading","sourceFiles","files","disassembly","prg","diagnosticsIndex","helpVisible","setGistLoadingStatus","_this2","setState","prevState","_Users_janne_dev_c64jasm_browser_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_0__","loadGist","gistId","window","history","replaceState","decodeURIComponent","concat","location","pathname","fetch","headers","Accept","then","resp","status","Error","statusText","json","params","URLSearchParams","search","set","setQueryStringParameter","_step2","containsC64Macros","_iterator2","values","file","filename","push","content","recompile","catch","console","log","getCurrentSource","updateCurrentSourceFile","update","map","idx","handleWorkerMessage","data","handleKeyDown","key","updateDiagnosticsIndexState","shiftKey","newIdx","Math","max","min","preventDefault","findSourceForDiagnostic","diag","newTabIdx","handleOnClickDiagnostic","debouncedCompile","fn","delay","timeoutID","_this","_len","arguments","args","Array","_key","clearTimeout","setTimeout","apply","debounce","asmArgs","postMessage","_this2$sourceFileMapC","options","readFileSync","res","assemble","errors","disasmOptions","showCycles","showLabels","isInstruction","debugInfo","info","disassemble","labels","handleSetSource","sf","handleSetSourcePosition","handleClearDiagnosticsSelectionOnKey","handleClearDiagnosticsSelectionOnMouse","handleClickHelp","handleCloseHelp","handleDownloadPRG","blob","Blob","FileSaver","saveAs","handleDownloadDisasm","join","type","handleSourceTabSelected","_this3","document","addEventListener","Worker","msg","get","_this4","diags","editorErrorLoc","tabIdx","src","toString","currentTabDiagnostics","filter","react__WEBPACK_IMPORTED_MODULE_6___default","a","createElement","className","styles","href","onKeyDown","onMouseDown","onMouseUp","_Editor__WEBPACK_IMPORTED_MODULE_12__","defaultValue","defaultCursorOffset","onSourceChanged","onSourcePositionChanged","errorCharOffset","sourceFileExt","_Disasm__WEBPACK_IMPORTED_MODULE_13__","_SourceTabs__WEBPACK_IMPORTED_MODULE_15__","setSelected","onLoadGist","loadingGist","renderExtras","_ref","Button","Fragment","title","onClick","yMargin","_DiagnosticsList__WEBPACK_IMPORTED_MODULE_14__","onClickItem","selectedIndex","_Help__WEBPACK_IMPORTED_MODULE_16__","visible","onClose","React","Component","react__WEBPACK_IMPORTED_MODULE_4___default","props","PureComponent","Diagnostic","itemRef","createRef","prevProps","snapshot","current","scrollIntoView","behavior","block","_this$props$error","selectedClass","ref","index","DiagnosticsList","handleOnClickItem","JSON","stringify","LoadGistInput","gistIdOrUrl","handleSubmit","parts","onSubmit","handleInputChange","target","handlePreventBlur","react__WEBPACK_IMPORTED_MODULE_5___default","onBlur","onCancel","cn","gistInputContainer","placeholder","onChange","autoFocus","spellCheck","LoadGist","editing","handleOpenLoadInput","handleResetWorkspace","gistContainer","loadingText","gistLoadButtonContainer","Tabs","handleTabClick","_this5","_this6","tabs","sortIdx","filenames","tab","active","tabContainer","stringArrayEqual","newArgs","oldArgs","b","TabButton","extraYMargin","gistResetButtonContainer","getFilenames","memoizeOne","getSortOrder","arr","sort","_ref2","_ref3","_Users_janne_dev_c64jasm_browser_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__","fnA","_ref4","fnB","extA","extB","localeCompare","_ref5","_ref6","computeSortOrder","_ref7","container","syntaxHighlightAsm","match","wrapRegExp","code","comment","exec","groups","color","syntaxHighlightJS","syntaxHighlight","language","hilighter","asm","inc","js","tabLength","computeColumn","charIndex","col","ErrorSpans","lineLength","createForOfIteratorHelper","_step3","buf","fill","_iterator3","end","x","rled","cur","out","v","count","groupSame","spans","span","react_default","style","display","repeat","react","Highlighter","forwardRef","rows","startRow","numRows","currentLine","lineToErrors","textLines","SyntaxHighlighter","hilightStyles","normal","spanElts","j","_spans$j","width","fixedDims","height","marginLeft","scrollLeft","Gutter","str","numStr","numTextRows","padStart","_default","classCallCheck","_super","call","editorLineHeight","resizeObserver","textareaRef","gutterRef","highlighterRef","syntaxHighlighterRef","handleScroll","nativeEvent","scrollTop","handleSourceChanged","updateCursorState","r","selectionStart","selectionEnd","handleSelect","handleKeyUp","handleMouseDown","yoffs","offsetY","floor","textareaDims","cssVarLineHeight","getComputedStyle","documentElement","getPropertyValue","parseInt","ResizeObserver","entries","contentRect","indentTextarea","watch","spellcheck","observe","blur","focus","unobserve","setSelectionRange","vscroll","lineToErrorsMap","Map","forEach","lst","has","startCharRow","numEditorCharRows","ceil","textContainer","wrap","onKeyUp","onSelect","onScroll","CloseButton","modalRoot","getElementById","Modal","el","appendChild","removeChild","ReactDOM","createPortal","children","AsmBlock","trim","trimLineFeeds","HelpContents","GistLink","process","helpContents","maxWidth","headingContainer","closeButtonContainer","HelpModal","Help_Modal","helpModalContainer","hidden","circleReveal","Help_HelpContents","react__WEBPACK_IMPORTED_MODULE_0__","react__WEBPACK_IMPORTED_MODULE_0___default","react_dom__WEBPACK_IMPORTED_MODULE_1__","react_dom__WEBPACK_IMPORTED_MODULE_1___default","_App__WEBPACK_IMPORTED_MODULE_3__","render","webpackEmptyContext","req","keys","resolve","emph","circle"],"mappings":"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","file":"static/js/main.f56ec381.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"layoutContainer\":\"DiagnosticsList_layoutContainer__3Yxfa\",\"diagnostics\":\"DiagnosticsList_diagnostics__U_t5K\",\"diagnosticsBox\":\"DiagnosticsList_diagnosticsBox__NbaZi\",\"diagItem\":\"DiagnosticsList_diagItem__3otDW\",\"selected\":\"DiagnosticsList_selected__jbDsD\",\"error\":\"DiagnosticsList_error__1cDSO\"};","\nexport const plugin = `\nmodule.exports = {\n  sintab: ({}, len, scale) => {\n      const res = Array(len).fill(0).map((v,i) => Math.sin(i/len * Math.PI * 2.0) * scale);\n      return res;\n  }\n}\n`;\n\n\nexport const c64 = `\n!filescope c64\n!macro basic_start(addr) {\n* = $801\n    !byte $0c, $08, $00, $00, $9e\n    !for d in [10000, 1000, 100, 10, 1] {\n        !if (addr >= d) {\n            !byte $30 + (addr/d)%10\n        }\n    }\n    !byte 0, 0, 0\n}\n`;\n","\nimport { SourceLoc } from 'c64jasm';\n\nexport type Diag = { loc: SourceLoc, msg: string, formatted: string };\n\nexport interface SourceFile {\n  name: string;\n  text: Buffer;\n  cursorOffset: number;\n};\n\nexport function getFileExt(fname: string) {\n  return fname.slice((fname.lastIndexOf(\".\") - 1 >>> 0) + 2);\n}\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"layoutContainer\":\"Editor_layoutContainer__2bFri\",\"editorContainer\":\"Editor_editorContainer__1wXnR\",\"overlayCommon\":\"Editor_overlayCommon__36_O2\",\"textarea\":\"Editor_textarea__28EdL\",\"textareaHighlightOverlay\":\"Editor_textareaHighlightOverlay__1opTU\",\"textareaHighlightRow\":\"Editor_textareaHighlightRow__1R6Ia\",\"textareaHighlightRowCurrent\":\"Editor_textareaHighlightRowCurrent__25KL2\",\"highlightError\":\"Editor_highlightError__1YeA5\",\"gutter\":\"Editor_gutter__3CDcX\",\"gutterRow\":\"Editor_gutterRow__1DNMN\",\"gutterRowSelected\":\"Editor_gutterRowSelected__3GiGf\",\"textareaSyntaxHighlightOverlay\":\"Editor_textareaSyntaxHighlightOverlay__31QUS\",\"textareaSyntaxHighlightRow\":\"Editor_textareaSyntaxHighlightRow__2NLii\",\"hiliteNormal\":\"Editor_hiliteNormal__3ZDsF\",\"hiliteComment\":\"Editor_hiliteComment__1s7LO\"};","\nimport { SourceLoc } from 'c64jasm';\n\nexport function findCharOffset(source: string, loc: SourceLoc) {\n  const lines = source.split('\\n');\n  let offset = 0;\n  for (let i = 0; i < loc.start.line - 1; i++) {\n    offset += lines[i].length + 1;\n  }\n  return offset + loc.start.column - 1;\n}\n\nexport function findLine(source: string, charOffset: number) {\n  const lines = source.split('\\n');\n  let offset = 0;\n  for (let i = 0; i < lines.length; i++) {\n    offset += lines[i].length + 1;\n    if (charOffset < offset) {\n        return i;\n    }\n  }\n  return undefined;\n}\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"layoutContainer\":\"Disasm_layoutContainer__36ehI\",\"disasmContainer\":\"Disasm_disasmContainer__2QplX\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"buttonContainer\":\"CloseButton_buttonContainer__28ZWo\",\"close\":\"CloseButton_close__1cumB\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"headerContainer\":\"App_headerContainer__qCdWC\",\"appTitle\":\"App_appTitle__2SEQk\"};","import React from 'react';\n\nimport { assemble, disassemble } from 'c64jasm';\nimport FileSaver from 'file-saver';\n\nimport { Diag, SourceFile, getFileExt } from './types';\nimport * as asmBuiltins from './asmBuiltins';\nimport { findCharOffset }  from './editing';\n\nimport Editor from './Editor';\nimport Disasm from './Disasm';\nimport DiagnosticsList from './DiagnosticsList';\nimport SourceTabs from './SourceTabs';\nimport Help from './Help';\n\nimport styles from './App.module.css';\n\nconst config = { useWebWorkers: true };\n\nfunction setQueryStringParameter(name: string, value: string) {\n  const params = new URLSearchParams(window.location.search);\n  params.set(name, value);\n  window.history.replaceState({}, \"\", decodeURIComponent(`${window.location.pathname}?${params}`));\n}\n\nfunction clearQueryStringParameters() {\n  window.history.replaceState({}, \"\", decodeURIComponent(`${window.location.pathname}`));\n}\n\nexport function debounce<F extends (...params: any[]) => void>(fn: F, delay: number) {\n  let timeoutID: number|undefined = undefined;\n  return function(this: any, ...args: any[]) {\n    clearTimeout(timeoutID);\n    timeoutID = window.setTimeout(() => fn.apply(this, args), delay);\n  } as F;\n}\n\n\ninterface SourceFiles {\n  selected: number;\n  files: SourceFile[];\n};\n\ninterface AppState {\n  gist: {\n    id: string;\n    loadCount: number;\n    loading: boolean;\n  };\n  sourceFiles: SourceFiles;\n  disassembly: string[];\n  prg: Buffer;\n  diagnosticsIndex: number | undefined;\n  diagnostics: Diag[];\n  helpVisible: boolean;\n};\n\nclass SourceFileMapCache {\n  private cache: { [name: string]: Buffer } = {};\n\n  update(newFiles: SourceFile[]) {\n    let changed = false;\n    for (let source of newFiles) {\n      if (this.cache[source.name] !== source.text) {\n        this.cache[source.name] = source.text;\n        changed = true;\n      }\n      this.cache[source.name] = source.text;\n    }\n    return { sourceFileMap: this.cache, changed };\n  }\n}\n\nconst prebuiltFiles = [\n  { name: 'main.asm', text: Buffer.from(''), cursorOffset: 0 },\n  { name: 'c64.asm', text: Buffer.from(asmBuiltins.c64), cursorOffset: 0 },\n  { name: 'plugin.js', text: Buffer.from(asmBuiltins.plugin), cursorOffset: 0 }\n];\n\nclass App extends React.Component<{}, AppState> {\n\n  private sourceFileMapCache = new SourceFileMapCache();\n  private assemblerWorker: Worker | undefined = undefined;\n\n  state = {\n    gist: {\n      id: '',\n      loadCount: 0,\n      loading: false\n    },\n    sourceFiles: {\n      selected: 0,\n      files: prebuiltFiles\n    },\n    disassembly: [],\n    prg: Buffer.from([]),\n    diagnosticsIndex: 0,\n    diagnostics: [] as Diag[],\n    helpVisible: false\n  }\n\n  componentDidMount () {\n    document.addEventListener('keydown', this.handleKeyDown);\n\n    this.assemblerWorker = new Worker('worker.js');\n    if (this.assemblerWorker !== null) {\n      this.assemblerWorker.addEventListener('message', (msg: MessageEvent) => {\n        this.handleWorkerMessage(msg);\n      });\n    }\n\n    const urlParams = new URLSearchParams(window.location.search);\n    const gistId = urlParams.get('gist_id');\n    if (gistId !== null) {\n      this.loadGist(gistId);\n    }\n  }\n\n  setGistLoadingStatus = (loading: boolean) => {\n    this.setState(prevState => {\n      return {\n        gist: {\n          ...prevState.gist,\n          loading\n        }\n      }\n    });\n  }\n\n  loadGist = (gistId: string | null) => {\n    if (gistId === null) {\n      // Stick gist_id into the current browser URL\n      clearQueryStringParameters();\n      this.setState(prevState => {\n        return {\n          gist: {\n            ...prevState.gist,\n            gistId,\n            loadCount: prevState.gist.loadCount+1\n          },\n          sourceFiles: {\n            files: prebuiltFiles,\n            selected: 0\n          },\n          disassembly: [],\n          prg: Buffer.from([]),\n          diagnosticsIndex: 0,\n          diagnostics: [] as Diag[]\n        }\n      });\n      return;\n    }\n    this.setGistLoadingStatus(true);\n    fetch(`https://api.github.com/gists/${gistId}`, { headers: { 'Accept': 'application/vnd.github.v3.base64'} })\n      .then(resp => {\n        if (resp.status !== 200) {\n          throw new Error(`Gist load failed with HTTP status code ${resp.status}: ${resp.statusText}`);\n        }\n        return resp;\n      })\n      .then(resp => resp.json())\n      .then(json => {\n        this.setGistLoadingStatus(false);\n\n        // Stick gist_id into the current browser URL\n        setQueryStringParameter('gist_id', gistId);\n\n        this.setState(prevState => {\n          const files: SourceFile[] = [];\n          let selected = 0;\n          let containsC64Macros = false;\n          for (const file of Object.values(json.files) as any) {\n            if (file.filename === 'c64.asm') {\n              containsC64Macros = true;\n            }\n            files.push({\n              name: file.filename,\n              text: Buffer.from(file.content, 'base64'),\n              cursorOffset: 0\n            })\n            if (file.filename === 'main.asm') {\n              selected = files.length-1;\n            }\n          }\n          // Don't add c64.asm built-ins if a file with the same\n          // name was already included in the gist.\n          if (!containsC64Macros) {\n            files.push({ name: 'c64.asm', text: Buffer.from(asmBuiltins.c64), cursorOffset: 0 });\n          }\n          return {\n            gist: {\n              ...prevState.gist,\n              gistId,\n              loadCount: prevState.gist.loadCount+1\n            },\n            sourceFiles: {\n              files,\n              selected\n            }\n          }\n        }, () => this.recompile());\n      })\n      .catch(err => {\n        console.log(err);\n        // TODO show error in GUI.  The below code just\n        // recovers enough to make the UI usable\n        this.setState(prevState => {\n          return {\n            gist: {\n              ...prevState.gist,\n              loading: false\n            }\n          }\n        });\n      });\n  }\n\n  getCurrentSource = () => {\n    return this.state.sourceFiles.files[this.state.sourceFiles.selected];\n  }\n\n  updateCurrentSourceFile = (sourceFiles: SourceFiles, update: (source: SourceFile) => SourceFile): SourceFiles => {\n    return {\n      ...sourceFiles,\n      files: sourceFiles.files.map((e, idx) => {\n        return idx === sourceFiles.selected ? update(e) : e;\n      })\n    }\n  }\n\n  handleWorkerMessage = (e: any) => {\n    if (e.data.diagnostics.length === 0) {\n      this.setState({\n        prg: e.data.prg,\n        disassembly: e.data.disassembly,\n        diagnostics: e.data.diagnostics,\n      });\n    } else {\n      this.setState({\n        diagnostics: e.data.diagnostics,\n      });\n    }\n  };\n\n  handleKeyDown = (e: KeyboardEvent) => {\n    if (e.key === 'F4') {\n      this.setState((prevState) => {\n        if (prevState.diagnostics.length === 0) {\n          return this.updateDiagnosticsIndexState(prevState, 0);\n        }\n        if (prevState.diagnosticsIndex === undefined) {\n          return this.updateDiagnosticsIndexState(prevState, 0);\n        }\n        if (e.shiftKey) {\n          const newIdx = Math.max(0, prevState.diagnosticsIndex - 1);\n          return this.updateDiagnosticsIndexState(prevState, newIdx);\n        } else {\n          const newIdx = Math.min(prevState.diagnostics.length - 1, prevState.diagnosticsIndex + 1);\n          return this.updateDiagnosticsIndexState(prevState, newIdx);\n        }\n      })\n      e.preventDefault();\n    }\n    if (e.key === 'Escape') {\n      // Clear focus from diagnostics list and\n      // exit help if it happens to be visible.\n      this.setState({\n        diagnosticsIndex: undefined,\n        helpVisible: false\n      });\n      e.preventDefault();\n    }\n  }\n\n  findSourceForDiagnostic = (diag: Diag) => {\n    let newTabIdx = this.state.sourceFiles.selected;\n    if (diag === undefined) {\n      return newTabIdx;\n    }\n    const files = this.state.sourceFiles.files;\n    for (let i = 0; i < files.length; i++) {\n      const source = files[i];\n      if (source.name === diag.loc.source) {\n        newTabIdx = i;\n      }\n    }\n    return newTabIdx;\n  }\n\n  updateDiagnosticsIndexState = (prevState: AppState, idx: number) => {\n    const diag: Diag = this.state.diagnostics[idx];\n    const newTabIdx = this.findSourceForDiagnostic(diag);\n    if (prevState.sourceFiles.selected !== newTabIdx) {\n      return {\n        diagnosticsIndex: idx,\n        sourceFiles: {\n          ...prevState.sourceFiles,\n          selected: newTabIdx\n        }\n      }\n    } else {\n      return {\n        diagnosticsIndex: idx,\n        sourceFiles: prevState.sourceFiles\n      }\n    }\n  }\n\n  handleOnClickDiagnostic = (idx: number) => {\n    this.setState(prevState => this.updateDiagnosticsIndexState(prevState, idx));\n  }\n\n  debouncedCompile = debounce((asmArgs: any) => {\n    if (config.useWebWorkers && this.assemblerWorker) {\n      this.assemblerWorker.postMessage(asmArgs);\n    }\n  }, 250);\n\n  recompile = () => {\n    const { sourceFileMap, changed } = this.sourceFileMapCache.update(this.state.sourceFiles.files);\n    // Don't recompile if none of the source files changed since the previous\n    // compile.\n    if (!changed) {\n      return;\n    }\n    // TODO shouldn't recompile if only cursorOffset changed\n    if (config.useWebWorkers && this.assemblerWorker) {\n      this.debouncedCompile({ sourceFileMap });\n      this.setState({ diagnosticsIndex: undefined });\n    } else {\n      const options = {\n        readFileSync: (fname: string) => {\n          if (fname in sourceFileMap) {\n            return sourceFileMap[fname];\n          }\n          throw new Error(`File not found ${fname}`);\n        }\n      }\n      const res = assemble(\"main.asm\", options);\n      if (res.errors.length === 0) {\n        const disasmOptions = {\n          showCycles: true,\n          showLabels: true,\n          isInstruction: res.debugInfo.info().isInstruction\n        };\n        this.setState({\n          prg: res.prg,\n          disassembly: disassemble(res.prg, res.labels, disasmOptions),\n          diagnostics: [],\n          diagnosticsIndex: undefined\n        });\n      } else {\n        this.setState({\n          diagnostics: res.errors,\n          diagnosticsIndex: undefined\n        });\n      }\n    }\n  }\n\n  handleSetSource = (text: string) => {\n    this.setState(prevState => {\n      return {\n        sourceFiles: this.updateCurrentSourceFile(prevState.sourceFiles, sf => ({ ...sf, text: Buffer.from(text) }))\n      }\n    }, () => this.recompile());\n  }\n\n  handleSetSourcePosition = (cursorOffset: number) => {\n    this.setState(prevState => {\n      return {\n        sourceFiles: this.updateCurrentSourceFile(prevState.sourceFiles, sf => ({ ...sf, cursorOffset }))\n      }\n    });\n  }\n\n  // If typing in the editor, clear any diagnostics selection\n  handleClearDiagnosticsSelectionOnKey = (e: React.KeyboardEvent) => {\n    if (e.key === 'F4' || e.key === 'Shift') {\n      return;\n    }\n    if (this.state.diagnosticsIndex !== undefined) {\n      this.setState({ diagnosticsIndex: undefined });\n    }\n  }\n\n  // If typing in the editor, clear any diagnostics selection\n  handleClearDiagnosticsSelectionOnMouse = (e: React.MouseEvent) => {\n    if (this.state.diagnosticsIndex !== undefined) {\n      this.setState({ diagnosticsIndex: undefined });\n    }\n  }\n\n  handleClickHelp = () => {\n    this.setState({ helpVisible: true });\n  }\n\n  handleCloseHelp = () => {\n    this.setState({ helpVisible: false });\n  }\n\n  handleDownloadPRG = () => {\n    const blob = new Blob([this.state.prg]);\n    FileSaver.saveAs(blob, \"c64jasm-online.prg\");\n  }\n\n  handleDownloadDisasm = () => {\n    var blob = new Blob([this.state.disassembly.join('\\n')], {type: \"text/plain;charset=utf-8\"});\n    FileSaver.saveAs(blob, \"c64jasm-online.s\");\n  }\n\n  handleSourceTabSelected = (idx: number) => {\n    this.setState(prevState => {\n      return {\n        sourceFiles: {\n          ...prevState.sourceFiles,\n          selected: idx\n        }\n      }\n    });\n  }\n\n  render () {\n    const diags: Diag[] = this.state.diagnostics;\n    let editorErrorLoc = undefined;\n    if (diags.length !== 0 && this.state.diagnosticsIndex !== undefined) {\n      const d = diags[this.state.diagnosticsIndex];\n      if (d !== undefined) {\n        const tabIdx = this.findSourceForDiagnostic(d);\n        const src = this.state.sourceFiles.files[tabIdx];\n        editorErrorLoc = findCharOffset(src.text.toString(), d.loc);\n      }\n    }\n    // A list of diagnostics for the current file\n    const currentTabDiagnostics = this.state.diagnostics.filter(diag => {\n      return diag.loc.source === this.getCurrentSource().name;\n    });\n\n    return (\n      <div id='root'>\n        <div id=\"mainHeader\">\n          <div className={styles.headerContainer}>\n            <div>\n              <div className={styles.appTitle}><a href='https://nurpax.github.io/c64jasm/'>c64jasm</a> online</div>\n            </div>\n          </div>\n        </div>\n        <div\n          onKeyDown={this.handleClearDiagnosticsSelectionOnKey}\n          onMouseDown={this.handleClearDiagnosticsSelectionOnMouse}\n          onMouseUp={this.handleClearDiagnosticsSelectionOnMouse}\n          id=\"mainCode\"\n        >\n          <Editor // Note: key is reset for name and counter to force update editor on tab switches or gist loads\n            key={`${this.state.gist.id}/${this.state.gist.loadCount}/${this.getCurrentSource().name}`}\n            defaultValue={this.getCurrentSource().text.toString()}\n            defaultCursorOffset={this.getCurrentSource().cursorOffset}\n            onSourceChanged={this.handleSetSource}\n            onSourcePositionChanged={this.handleSetSourcePosition}\n            diagnostics={currentTabDiagnostics}\n            errorCharOffset={editorErrorLoc}\n            sourceFileExt={getFileExt(this.getCurrentSource().name)}\n          />\n        </div>\n        <div id=\"siteDisasm\">\n          <Disasm disassembly={this.state.disassembly} />\n        </div>\n        <div id=\"mainSourceTabs\">\n          <SourceTabs\n            key={this.state.gist.loadCount}\n            setSelected={this.handleSourceTabSelected}\n            selected={this.state.sourceFiles.selected}\n            files={this.state.sourceFiles.files}\n            onLoadGist={this.loadGist}\n            loadingGist={this.state.gist.loading}\n            renderExtras={({ Button}) => {\n              return (\n                <React.Fragment>\n                  <Button text='Reset Workspace' title='Reset the workspace.  Cannot be undone.' onClick={() => this.loadGist(null)} />\n                  <Button text='Save PRG' title='Download compiled binary as C64 .prg' yMargin onClick={this.handleDownloadPRG} />\n                  <Button text='Save Disasm' title='Download the output disassemble file' onClick={this.handleDownloadDisasm} />\n                  <Button text='Help' title='C64jasm online help' yMargin onClick={this.handleClickHelp} />\n                </React.Fragment>\n              )\n            }}\n          />\n        </div>\n        <div id=\"mainDiag\">\n          <DiagnosticsList\n            onClickItem={this.handleOnClickDiagnostic}\n            diagnostics={this.state.diagnostics}\n            selectedIndex={this.state.diagnosticsIndex} />\n        </div>\n        <Help visible={this.state.helpVisible} onClose={this.handleCloseHelp} />\n      </div>\n    );\n  }\n}\n\nexport default App;\n","\nimport React from 'react';\nimport styles from './Disasm.module.css';\n\ninterface DisasmProps {\n  disassembly: string[];\n}\n\nexport default class extends React.PureComponent<DisasmProps> {\n  render () {\n    return (\n      <div className={styles.layoutContainer}>\n        <div className='heading'><div className='heading-pad'>Disassembly</div></div>\n        <div className={styles.disasmContainer}>\n          <pre>{this.props.disassembly.join('\\n')}</pre>\n        </div>\n      </div>\n    )\n  }\n}\n","\nimport React from 'react'\n\nimport { SourceLoc } from 'c64jasm';\n\nimport { Diag } from './types'\n\nimport styles from './DiagnosticsList.module.css'\n\ninterface DiagnosticProps {\n  error: { loc: SourceLoc, msg: string };\n  index: number;\n  selected: boolean;\n  onClickItem: (idx: number) => void;\n}\n\nclass Diagnostic extends React.Component<DiagnosticProps> {\n  itemRef = React.createRef<HTMLDivElement>();\n\n  componentDidUpdate (prevProps: DiagnosticProps, prevState: {}, snapshot: DiagnosticProps) {\n    if (this.itemRef && this.itemRef.current && this.props.selected) {\n      this.itemRef.current.scrollIntoView({\n        behavior: 'smooth',\n        block: 'center'\n      })\n    }\n  }\n\n  render() {\n    const { loc, msg } = this.props.error;\n    const selectedClass = this.props.selected ? ` ${styles.selected}` : '';\n    return (\n      <div\n        ref={this.itemRef}\n        className={`${styles.diagItem}${selectedClass}`}\n        onClick={() => this.props.onClickItem(this.props.index)}\n      >\n        <span className={`${styles.error}${selectedClass}`}>{loc.source}:{loc.start.line}:{loc.start.column}: error:</span> {msg}\n      </div>\n    )\n  }\n}\n\ninterface DiagnosticsListProps {\n  diagnostics: Diag[];\n  selectedIndex: number | undefined;\n  onClickItem: (idx: number) => void;\n}\n\nexport default class DiagnosticsList extends React.PureComponent<DiagnosticsListProps> {\n  handleOnClickItem = (idx: number) => {\n    this.props.onClickItem(idx);\n  }\n\n  render() {\n    const diags = this.props.diagnostics;\n    return (\n      <div className={styles.layoutContainer}>\n        <div className='heading'><div className='heading-pad'>Diagnostics</div></div>\n        <div className={styles.diagnostics}>\n          <div className={styles.diagnosticsBox}>\n            {diags.map((d: Diag, idx) => {\n              return (\n                <Diagnostic\n                  key={JSON.stringify(d.loc)}\n                  index={idx}\n                  error={d} selected={idx === this.props.selectedIndex}\n                  onClickItem={this.handleOnClickItem}\n                />\n              )\n            })}\n          </div>\n        </div>\n      </div>\n    )\n  }\n}","\nimport React from 'react';\nimport styles from './SourceTabs.module.css';\nimport cn from 'classnames';\n\nimport memoizeOne from 'memoize-one';\n\nimport { SourceFile, getFileExt } from './types';\n\ninterface LoadGistInputProps {\n  onCancel: () => void;\n  onSubmit: (gistId: string) => void;\n}\n\nclass LoadGistInput extends React.Component<LoadGistInputProps, { gistIdOrUrl: string }> {\n\n  state = {\n    gistIdOrUrl: ''\n  }\n\n  handleSubmit = (e: React.FormEvent) => {\n    e.preventDefault();\n    // Either grab ID from a URL like:\n    //\n    // https://gist.github.com/nurpax/58a3a6105946bb64346fad7428ec86b4\n    //\n    // or if the user just provided the ID directly, use that.\n    const parts = this.state.gistIdOrUrl.split('/');\n    if (parts.length > 0) {\n      this.props.onSubmit(parts[parts.length-1]);\n    }\n  }\n\n  handleInputChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    this.setState({ gistIdOrUrl: e.target.value });\n  }\n\n  handlePreventBlur = (e: React.MouseEvent) => {\n    e.preventDefault();\n  }\n\n  render () {\n    return (\n      <form\n        onSubmit={this.handleSubmit}\n        onBlur={() => this.props.onCancel()}\n        className={cn(styles.gist, styles.gistInputContainer)}>\n        <input\n          placeholder='Gist ID or URL'\n          onChange={this.handleInputChange}\n          value={this.state.gistIdOrUrl}\n          onKeyDown={(e: React.KeyboardEvent) => {\n            if (e.key === 'Escape') {\n              this.props.onCancel();\n            }\n          }}\n          autoFocus\n          spellCheck={false}\n          type='text'\n        />\n        <button onMouseDown={this.handlePreventBlur} type='submit'>Go!</button>\n      </form>\n    )\n  }\n}\n\ninterface LoadGistProps {\n  loadingGist: boolean;\n  onLoadGist: (gistId: string | null) => void;\n}\n\ninterface LoadGistState {\n  editing: boolean;\n}\n\nclass LoadGist extends React.PureComponent<LoadGistProps, LoadGistState> {\n  state = {\n    editing: false\n  }\n\n  handleOpenLoadInput = () => {\n    this.setState(prevState => {\n      return { editing: !prevState.editing };\n    });\n  }\n\n  handleResetWorkspace = () => {\n    this.props.onLoadGist(null);\n  }\n\n  render () {\n    if (this.props.loadingGist) {\n      return (\n        <div className={styles.gistContainer}>\n          <div className={styles.loadingText}>\n            Loading gist..\n          </div>\n        </div>\n      );\n    }\n    return (\n      <div className={styles.gistContainer}>\n        {this.state.editing &&\n          <LoadGistInput\n            onCancel={() => this.setState({ editing: false })}\n            onSubmit={(gistId) => {\n              this.setState({ editing: false });\n              if (gistId !== '') {\n                this.props.onLoadGist(gistId);\n              }\n            }}\n          />\n        }\n        {!this.state.editing &&\n          <div className={cn(styles.gist, styles.gistLoadButtonContainer)}>\n            <button\n              onClick={this.handleOpenLoadInput}\n              title='Load source files from a GitHub public Gist'\n            >\n              Load Gist\n            </button>\n          </div>\n        }\n      </div>\n    );\n  }\n}\n\ninterface TabsProps {\n  filenames: string[];\n  sortIdx: number[];\n  selected: number;\n  setSelected: (idx: number) => void;\n}\n\nclass Tabs extends React.PureComponent<TabsProps> {\n  handleTabClick = (e: React.MouseEvent, idx: number) => {\n    this.props.setSelected(idx);\n  }\n\n  render () {\n    const tabs = this.props.sortIdx.map((idx: number) => {\n      const name = this.props.filenames[idx];\n      return (\n        <div\n          key={name}\n          className={cn(styles.tab, idx === this.props.selected ? styles.active : '')}\n          onClick={e => this.handleTabClick(e, idx)}\n        >\n          {name}\n        </div>\n      );\n    });\n    return (\n      <div className={styles.tabContainer}>\n        {tabs}\n      </div>\n    );\n  }\n}\n\nfunction stringArrayEqual(newArgs: string[][], oldArgs: string[][]) {\n  if (newArgs === oldArgs) {\n    return true;\n  }\n  if (newArgs.length !== oldArgs.length) {\n    return false;\n  }\n  const a = newArgs[0];\n  const b = oldArgs[0];\n  for (let i = 0; i < a.length; i++) {\n    if (a[i] !== b[i]) {\n        return false;\n    }\n  }\n  return true;\n}\n\nfunction computeSortOrder(files: string[]): number[] {\n  const arr: [string, number][] = [];\n  for (let i = 0; i < files.length; i++) {\n    arr.push([files[i], i]);\n  }\n  arr.sort(([fnA, idxA], [fnB, idxB]) => {\n    const extA = getFileExt(fnA);\n    const extB = getFileExt(fnB);\n    if (extA === extB) {\n      return fnA.localeCompare(fnB);\n    }\n    return extA.localeCompare(extB);\n  });\n  return arr.map(([_, i]) => i);\n}\n\nfunction TabButton(props: { text: string, title: string, onClick: () => void, yMargin?: boolean }) {\n  return (\n    <div className={cn(styles.gist, props.yMargin && styles.extraYMargin)}>\n      <div className={styles.gistResetButtonContainer}>\n        <button\n          onClick={props.onClick}\n          title={props.title}\n        >\n          {props.text}\n        </button>\n      </div>\n    </div>\n  );\n}\n\ninterface SourceTabsRenderPropArgs {\n  Button: (props: {\n    text: string,\n    title: string,\n    onClick: () => void,\n    yMargin?: boolean\n  }) => React.ReactElement;\n}\n\ninterface SourceTabsProps {\n  setSelected: (idx: number) => void;\n  selected: number;\n  files: SourceFile[];\n\n  loadingGist: boolean;\n  onLoadGist: (gistId: string | null) => void;\n  renderExtras?: (args: SourceTabsRenderPropArgs) => React.ReactElement;\n}\n\nexport default class extends React.Component<SourceTabsProps> {\n\n  // Return the same filename ptr if the source file names didn't change.\n  // Just to avoid some rerenders.\n  getFilenames = memoizeOne((files: string[]) => files, stringArrayEqual);\n  getSortOrder = memoizeOne((files: string[]) => computeSortOrder(files));\n\n  render () {\n    const filenames = this.getFilenames(this.props.files.map(({name}) => name));\n    const sortIdx = this.getSortOrder(filenames);\n    return (\n      <div className={styles.container}>\n        <div className='heading'><div className='heading-pad'>Source files</div></div>\n        <Tabs\n          filenames={filenames}\n          sortIdx={sortIdx}\n          selected={this.props.selected}\n          setSelected={this.props.setSelected}\n        />\n        <LoadGist\n          onLoadGist={this.props.onLoadGist}\n          loadingGist={this.props.loadingGist}\n        />\n        {this.props.renderExtras && this.props.renderExtras({\n          Button: (props) => <TabButton {...props}  />\n        })}\n      </div>\n    )\n  }\n}\n","\n// Minimal syntax highlighter that supports\n// just coloring comments separately from normal code.\n\nexport type Color = 'normal' | 'comment';\nexport type Span = { text: string, color: Color };\n\nexport function syntaxHighlightAsm(line: string): Span[] {\n    const res: Span[] = [];\n    let match = /^(?<code>[^;]*)(?<comment>;.*)?$/.exec(line);\n    if (!match) {\n      throw new Error('internal error');\n    }\n    const code = (match as any).groups.code;\n    const comment = (match as any).groups.comment;\n    if (code !== undefined) {\n        res.push({ text: code, color: 'normal' });\n    }\n    if (comment !== undefined) {\n        res.push({ text: comment, color: 'comment' });\n    }\n    return res;\n}\n\nexport function syntaxHighlightJS(line: string): Span[] {\n    const res: Span[] = [];\n    let match = /^(?<code>.*)(?<comment>\\/\\/.*)$/.exec(line);\n    if (match) {\n        const code = (match as any).groups.code;\n        const comment = (match as any).groups.comment;\n        if (code !== undefined) {\n            res.push({ text: code, color: 'normal' });\n        }\n        if (comment !== undefined) {\n            res.push({ text: comment, color: 'comment' });\n        }\n    } else {\n        return [{ text: line, color: 'normal' }];\n    }\n    return res;\n}\n\nexport function syntaxHighlight(language: string, line: string): Span[] {\n    const syntaxes: {[idx: string]: (line: string) => Span[]} = {\n        'asm': syntaxHighlightAsm,\n        'inc': syntaxHighlightAsm,\n        'js': syntaxHighlightJS\n    }\n    const hilighter = syntaxes[language];\n    if (hilighter !== undefined) {\n        return hilighter(line);\n    }\n    return [{ text: line, color: 'normal' }];\n}\n","\nimport React, { Fragment } from 'react';\nimport indentTextarea from 'indent-textarea';\nimport cn from 'classnames';\nimport ResizeObserver from 'resize-observer-polyfill';\nimport { SourceLoc } from 'c64jasm';\n\nimport { findLine } from './editing';\nimport { Color, syntaxHighlight } from './syntaxHighlighting';\nimport styles from './Editor.module.css';\n\nconst tabLength = 4;\n\n// RLE compress a list of T's\nfunction groupSame<T>(values: T[]): { count: number, code: T }[] {\n  let cur = undefined;\n  let out = [];\n\n  for (let v of values) {\n      // Start new run\n      if (cur !== v) {\n          cur = v;\n          out.push({code: cur, count: 1});\n      } else {\n          // Keep growing current group\n          out[out.length-1].count++;\n      }\n  }\n  return out;\n}\n\n// Count the actual screen char column offset\n// based on a character index and the source code\n// line contents.\nfunction computeColumn(line: string, charIndex: number) {\n  let col = 0;\n  for (let i = 0; i < charIndex; i++) {\n    if (line.length < i) {\n      return undefined;\n    }\n    if (line[i] === '\\t') {\n      col += tabLength;\n    } else {\n      col++;\n    }\n  }\n  return col;\n}\n\n// This function can return null if it can't find the diagnostic\n// column from the source code.  This can happen if the\n// diagnostics are matched on a different version of diagnostics\n// vs. source code.  This can happen as the compiler\n// runs in a separate thread while text editing happens\n// in the main thread without syncing to compiler\n// results.\nfunction ErrorSpans(props: {\n  text: string,\n  errors: SourceLoc[]\n}) {\n  let lineLength = 0;\n  if (!props.text) {\n    return null;\n  }\n  for (let c of props.text) {\n    if (c === '\\t') {\n      lineLength += tabLength;\n    } else {\n      lineLength++;\n    }\n  }\n  const buf: boolean[] = Array(lineLength).fill(false);\n\n  for (const err of props.errors) {\n    const start = computeColumn(props.text, err.start.column - 1);\n    if (start === undefined) {\n      return null;\n    }\n    const end = err.start.line === err.end.line ? computeColumn(props.text, err.end.column - 1) : start + 1;\n    if (end === undefined) {\n      return null;\n    }\n    for (let x = start; x < end; x++) {\n      buf[x] = true;\n    }\n  }\n  const rled = groupSame(buf);\n  const spans = [];\n  for (let i = 0; i < rled.length; i++) {\n    const span = rled[i];\n    if (!span.code) {\n      spans.push(<pre key={i} style={{display: 'inline-block'}}>{' '.repeat(span.count)}</pre>);\n    } else {\n      spans.push(<pre key={i} style={{display: 'inline-block'}} className={styles.highlightError}>{' '.repeat(span.count)}</pre>);\n    }\n  }\n  return <Fragment>{spans}</Fragment>;\n}\n\ninterface HighlighterProps {\n  startRow: number;\n  numRows: number;\n  currentLine: number | undefined;\n  textLines: string[];\n  lineToErrors: Map<number, SourceLoc[]>;\n}\n\nconst Highlighter = React.forwardRef((props: HighlighterProps, ref: React.Ref<HTMLDivElement>) => {\n  const rows = [];\n  // Pad rows is required for smooth scrolling (so that there is overflow-y to scroll)\n  const padRows = 2;\n  for (let i = props.startRow; i < props.startRow + props.numRows + padRows; i++) {\n    const selected = i === props.currentLine && styles.textareaHighlightRowCurrent;\n    const errors = props.lineToErrors.get(i);\n    if (errors) {\n      const text = props.textLines[i];\n      rows.push(<div className={cn(styles.textareaHighlightRow, selected)} key={i}><ErrorSpans text={text} errors={errors} /></div>);\n    } else {\n      rows.push(<div className={cn(styles.textareaHighlightRow, selected)} key={i}></div>);\n    }\n  }\n  return (\n    <div ref={ref} className={cn(styles.overlayCommon, styles.textareaHighlightOverlay)}>\n      {rows}\n    </div>\n  );\n})\n\ninterface SyntaxHighlighterProps {\n  startRow: number;\n  numRows: number;\n  textLines: string[];\n  sourceFileExt: string;\n\n  // Fixed dims is required so that the div size adjusts to a\n  // smaller width/height when the <textarea> (that this\n  // syntax highlighter mirrors) has borders, the syntax\n  // highlighter div won't render on top of the scrollbars.\n  fixedDims: { width: number, height: number };\n\n  // Scroll left is basically the same as writing to ref.scrollLeft\n  // except that we pull this off by a styling change, setting\n  // a negative left margin on the div.  The highlighter\n  // div needs to be wrapped in another div so that the left side\n  // of the syntax highlighted text will be clipped.\n  scrollLeft: number;\n}\n\nconst SyntaxHighlighter = React.forwardRef((props: SyntaxHighlighterProps, ref: React.Ref<HTMLDivElement>) => {\n  const rows = [];\n  // Pad rows is required for smooth scrolling (so that there is overflow-y to scroll)\n  const padRows = 2;\n  type HighlightEntry = {\n    [K in Color]: string;\n  }\n  const hilightStyles: HighlightEntry = {\n    'normal': styles.hiliteNormal,\n    'comment': styles.hiliteComment,\n  };\n  for (let i = props.startRow; i < props.startRow + props.numRows + padRows; i++) {\n    const spanElts = [];\n    if (i < props.textLines.length) {\n      const line = props.textLines[i];\n      const spans = syntaxHighlight(props.sourceFileExt, line);\n      for (let j = 0; j < spans.length; j++) {\n        const { text, color } = spans[j];\n        spanElts.push(<pre key={j} className={hilightStyles[color]} style={{display: 'inline-block'}}>{text}</pre>);\n      }\n    }\n    rows.push(<div className={styles.textareaSyntaxHighlightRow} key={i}>{spanElts}</div>);\n  }\n  return (\n    <div\n      ref={ref}\n      className={cn(styles.overlayCommon, styles.textareaSyntaxHighlightOverlay)}\n      style={{\n        width: `${props.fixedDims.width}px`,\n        height: `${props.fixedDims.height}px`\n      }}\n    >\n      <div style={{marginLeft: `-${props.scrollLeft}px`}}>\n        {rows}\n      </div>\n    </div>\n  );\n})\n\ninterface GutterProps {\n  startRow: number;\n  numRows: number;\n  numTextRows: number;\n  currentLine: number | undefined;\n  height: number;\n}\n\nconst Gutter = React.forwardRef((props: GutterProps, ref: React.Ref<HTMLDivElement>) => {\n  const rows = [];\n  const padRows = 2;\n  for (let i = props.startRow; i < props.startRow + props.numRows + padRows; i++) {\n    const str = `${i+1}`;\n    const selected = i === props.currentLine && styles.gutterRowSelected;\n    const numStr = (i >= 0 && i < props.numTextRows) ? str.padStart(4, ' ') : '';\n    rows.push(<div className={cn(styles.gutterRow, selected)} key={i}>{numStr}</div>);\n  }\n  return (\n    <div\n      ref={ref}\n      className={styles.gutter}\n      style={{height: `${props.height}px`}}\n    >\n      {rows}\n    </div>\n  );\n});\n\ninterface EditorProps {\n  defaultValue: string;\n  defaultCursorOffset: number;\n  onSourceChanged: (text: string) => void;\n  onSourcePositionChanged: (cursorOffset: number) => void;\n  diagnostics: { loc: SourceLoc, msg: string }[];\n  errorCharOffset: number | undefined;\n  sourceFileExt: string; // asm, js, etc..\n}\n\ninterface EditorState {\n  scrollTop: number;\n  scrollLeft: number;\n  currentLine: number | undefined;\n  textLines: string[];\n  textareaDims: { width: number, height: number };\n}\n\nexport default class extends React.Component<EditorProps, EditorState> {\n\n  private editorLineHeight = 0;\n  private resizeObserver: ResizeObserver;\n\n  constructor (props: EditorProps) {\n    super(props);\n\n    this.state = {\n      scrollTop: 0,\n      scrollLeft: 0,\n      currentLine: 0,\n      textLines: this.props.defaultValue.split('\\n'),\n      textareaDims: { width: 0, height: 0 }\n    }\n\n    const cssVarLineHeight = getComputedStyle(document.documentElement).getPropertyValue('--code-window-line-height');\n    let match = /^[ ]*(?<height>[0-9]+)px$/.exec(cssVarLineHeight);\n    if (!match) {\n      throw new Error('failed querying css var --code-window-line-height' + cssVarLineHeight);\n    }\n    this.editorLineHeight = parseInt((match as any).groups.height);\n\n    this.resizeObserver = new ResizeObserver(entries => {\n      const e = entries[0]\n      this.setState({\n        textareaDims: {\n          width: e.contentRect.width,\n          height: e.contentRect.height\n        }\n      });\n    });\n  }\n\n  textareaRef = React.createRef<HTMLTextAreaElement>();\n  gutterRef = React.createRef<HTMLDivElement>();\n  highlighterRef = React.createRef<HTMLDivElement>();\n  syntaxHighlighterRef = React.createRef<HTMLDivElement>();\n\n  handleScroll = (e: React.UIEvent<HTMLTextAreaElement>) => {\n    const { scrollTop, scrollLeft } = e.nativeEvent.target as any;\n    this.setState({ scrollTop, scrollLeft });\n  }\n\n  handleSourceChanged = (e: React.ChangeEvent<HTMLTextAreaElement>) => {\n    this.props.onSourceChanged(e.target.value);\n    this.setState({\n      textLines: e.target.value.split('\\n')\n    });\n  }\n\n  updateCursorState = () => {\n    if (this.textareaRef.current) {\n      const r = this.textareaRef.current;\n      if (r.selectionStart === r.selectionEnd) {\n        const loc = r.selectionStart;\n        const line = findLine(this.textareaRef.current.value, loc);\n        this.setState({ currentLine: line });\n      } else {\n        this.setState({ currentLine: undefined });\n      }\n      this.props.onSourcePositionChanged(r.selectionStart);\n    }\n  }\n\n  // Update cursor position when keys are pressed or selection changes on mouse click\n  handleSelect = (e: React.SyntheticEvent<HTMLTextAreaElement>) => {\n    this.updateCursorState();\n  }\n  handleKeyDown = (e: React.KeyboardEvent) => {\n    this.updateCursorState();\n  }\n  handleKeyUp = (e: React.KeyboardEvent) => {\n    this.updateCursorState();\n  }\n\n  componentDidMount () {\n    if (this.textareaRef.current) {\n      indentTextarea.watch(this.textareaRef.current);\n      this.textareaRef.current.spellcheck = false;\n      this.textareaRef.current.selectionStart = this.props.defaultCursorOffset;\n      this.textareaRef.current.selectionEnd = this.props.defaultCursorOffset;\n\n      this.resizeObserver.observe(this.textareaRef.current);\n\n      // Reset scrollTop\n      this.textareaRef.current.blur();\n      this.textareaRef.current.focus();\n    }\n  }\n\n  componentWillUnmount () {\n    if (this.textareaRef.current) {\n      this.resizeObserver.unobserve(this.textareaRef.current);\n    }\n  }\n\n  componentDidUpdate (prevProps: EditorProps, prevState: EditorState) {\n    if (this.textareaRef.current) {\n      if (this.props.errorCharOffset !== undefined) {\n        this.textareaRef.current.setSelectionRange(this.props.errorCharOffset, this.props.errorCharOffset);\n        this.textareaRef.current.blur();\n        this.textareaRef.current.focus();\n      }\n    }\n\n    if (prevState.scrollTop !== this.state.scrollTop) {\n      const scrollTop = this.state.scrollTop;\n      const vscroll = scrollTop % this.editorLineHeight;\n      if (this.gutterRef.current) {\n        this.gutterRef.current.scrollTop = vscroll;\n      }\n      if (this.highlighterRef.current) {\n        this.highlighterRef.current.scrollTop = vscroll;\n      }\n      if (this.syntaxHighlighterRef.current) {\n        this.syntaxHighlighterRef.current.scrollTop = vscroll;\n      }\n    }\n  }\n\n  handleMouseDown = (e: React.MouseEvent) => {\n    if (this.textareaRef.current) {\n      const yoffs = e.nativeEvent.offsetY + this.state.scrollTop;\n      this.setState({\n        currentLine: Math.min(this.state.textLines.length - 1, Math.floor(yoffs / this.editorLineHeight))\n      });\n    }\n  }\n\n  render () {\n    const lineToErrorsMap = new Map<number, SourceLoc[]>();\n    this.props.diagnostics.forEach(({loc}) => {\n      const line = loc.start.line - 1;\n      const lst = lineToErrorsMap.has(line) ? lineToErrorsMap.get(line)! : [];\n      lst.push(loc);\n      lineToErrorsMap.set(line, lst);\n    });\n    const startCharRow = Math.floor(this.state.scrollTop / this.editorLineHeight);\n    const numEditorCharRows =\n      this.state.textareaDims.height !== 0 ? Math.ceil(this.state.textareaDims.height / this.editorLineHeight) : 1;\n    return (\n      <div className={styles.layoutContainer}>\n        <div className='heading'><div className='heading-pad'>Assembly</div></div>\n        <div className={styles.editorContainer}>\n          <Gutter\n            ref={this.gutterRef}\n            startRow={startCharRow}\n            numRows={numEditorCharRows}\n            numTextRows={this.state.textLines.length}\n            currentLine={this.state.currentLine}\n            height={this.state.textareaDims.height}\n          />\n          <div className={styles.textContainer} onMouseDown={this.handleMouseDown}>\n            <Highlighter\n              ref={this.highlighterRef}\n              startRow={startCharRow}\n              numRows={numEditorCharRows}\n              currentLine={this.state.currentLine}\n              textLines={this.state.textLines}\n              lineToErrors={lineToErrorsMap}\n            />\n            <textarea\n              className={cn(styles.overlayCommon, styles.textarea)}\n              defaultValue={this.props.defaultValue}\n              wrap='off'\n              onKeyUp={this.handleKeyUp}\n              onKeyDown={this.handleKeyDown}\n              onSelect={this.handleSelect}\n              onScroll={this.handleScroll}\n              ref={this.textareaRef}\n              onChange={this.handleSourceChanged}\n            />\n            <SyntaxHighlighter\n              ref={this.syntaxHighlighterRef}\n              startRow={startCharRow}\n              fixedDims={this.state.textareaDims}\n              scrollLeft={this.state.scrollLeft}\n              numRows={numEditorCharRows}\n              textLines={this.state.textLines}\n              sourceFileExt={this.props.sourceFileExt}\n            />\n          </div>\n        </div>\n      </div>\n    )\n  }\n}\n","import React from 'react';\n\nimport styles from './CloseButton.module.css';\n\nexport default function CloseButton(props: { onClose: () => void}) {\n  return (\n    <div className={styles.buttonContainer}>\n      <a title='Close Help' href='/' target='_blank' className={styles.close} onClick={e => {\n          e.preventDefault();\n          props.onClose();\n        }}>\n      </a>\n    </div>\n  );\n}\n\n","import React, { Fragment } from 'react';\nimport ReactDOM from 'react-dom';\nimport cn from 'classnames';\n\nimport CloseButton from './CloseButton'\nimport styles from './Help.module.css';\nimport * as asmBuiltins from './asmBuiltins';\n\nconst modalRoot = document.getElementById('modal-root')!;\n\ninterface ModalProps {\n  children: JSX.Element;\n}\n\nclass Modal extends React.Component {\n  private el: HTMLDivElement;\n\n  constructor(props: ModalProps) {\n    super(props);\n    this.el = document.createElement('div');\n  }\n\n  componentDidMount() {\n    // The portal element is inserted in the DOM tree after\n    // the Modal's children are mounted, meaning that children\n    // will be mounted on a detached DOM node. If a child\n    // component requires to be attached to the DOM tree\n    // immediately when mounted, for example to measure a\n    // DOM node, or uses 'autoFocus' in a descendant, add\n    // state to Modal and only render the children when Modal\n    // is inserted in the DOM tree.\n    modalRoot.appendChild(this.el);\n  }\n\n  componentWillUnmount() {\n    modalRoot.removeChild(this.el);\n  }\n\n  render() {\n    return ReactDOM.createPortal(\n      this.props.children,\n      this.el,\n    );\n  }\n}\n\n// Remove leading and trailing line feeds from a string.\n// This is to prevent unnecessary line feeds in\n// assembly code written in string literals.\nfunction trimLineFeeds(str: string): string {\n  const lines = str.split('\\n');\n  let s;\n  for (s = 0; s < lines.length; s++) {\n    const line = lines[s].trim();\n    if (line.length !== 0) {\n      break;\n    }\n  }\n  let e;\n  for (e = lines.length - 1; e >= 0; e--) {\n    const line = lines[e].trim();\n    if (line.length !== 0) {\n      break;\n    }\n  }\n  return lines.slice(s, e + 1).join('\\n');\n}\n\nfunction AsmBlock(props: { text: string }) {\n  return (\n    <pre className={styles.asm}>{trimLineFeeds(props.text)}</pre>\n  )\n}\nclass HelpContents extends React.Component<{onClose: () => void}> {\n  render () {\n      const GistLink = (props: {id: string, text: string}) => {\n        return (\n          <Fragment>\n            <a href={`${process.env.PUBLIC_URL}/?gist_id=${props.id}`}>{props.text}</a>\n            &nbsp;(<a href={`https://gist.github.com/nurpax/${props.id}`}>view on GitHub</a>)\n          </Fragment>\n        )\n      }\n      return (\n      <div className={cn(styles.helpContents, styles.maxWidth)}>\n        <div className={styles.headingContainer}>\n          <div className={styles.closeButtonContainer}>\n            <CloseButton onClose={this.props.onClose} />\n          </div>\n          <h1>c64jasm online </h1>\n        </div>\n        <p>\n          <a href='https://nurpax.github.io/c64jasm/'>c64jasm</a> is a 6502 assembler written in JavaScript.\n          You can run it either on the command line using Node or link it into a web app.\n        </p>\n        <p>\n          <a href='https://nurpax.github.io/c64jasm-browser/'>c64jasm online</a> is an interactive assembler demo site\n          where you can write 6502 assembly with live error reporting and disassembly.\n        </p>\n\n        <p>Developed by Janne Hellsten, contact me through <a href='https://twitter.com/nurpax'>@nurpax</a></p>\n\n        <h3>Example projects</h3>\n\n        <p>C64jasm online supports loading source files from GitHub gists.\n          Here's a list of example projects (click on the links to load):\n        </p>\n        <ul>\n          <li><GistLink id='4996160f290fa1b9470520d7be0ca25e' text='Sine sprites' /></li>\n        </ul>\n\n        <h3>Examples</h3>\n\n        <p>Simple instructions and expressions:</p>\n        <AsmBlock text={`\n    lda #2+2  ; expression in an immediate field\n    sta $d020 ; set border color\n        `} />\n\n        <p>Labels:</p>\n        <AsmBlock text={`\nentry: {\n    jsr func\n\n    ldx #8\nloop: ; label local to 'entry' scope\n    dex\n    bpl loop\n}\n\nfunc: {\n    ldx #7\nloop: ; label local to 'func' scope\n    sta buf, x   ; store to buf\n    dex\n    bpl loop\n    rts\n\nbuf: !fill 8, 0    ; 8 byte array\n}\n        `} />\n\n        <p>Declaring and using variables:</p>\n        <AsmBlock text={`\n!let num_sprites = 4\n!let sprite_mask = (1<<num_sprites)-1\n\n    lda #sprite_mask\n    sta $d015 ; enable sprites 0-3\n        `} />\n\n        <p>Conditional compilation and repetition:</p>\n        <AsmBlock text={`\n!let num_sprites = 4\n    lda #13  ; ptr to sprite data 1 (==address/64)\n    ldx #14  ; ptr to sprite data 2\n\n!for i in range(num_sprites) {\n    !if (i < 2) {\n        sta $07f8+i   ; sprite data 1 from A\n    } else {\n        stx $07f8+i   ; sprite data 2 from X\n    }\n}\n        `} />\n\n        <p>Define and use macro macro:</p>\n        <AsmBlock text={`\n!macro set_border(color) {\n    lda #color\n    sta $d020\n}\n\n+set_border(13)  ; expand\n        `} />\n\n        <p>A complete C64 program.  To compile a C64 <code>.prg</code> you need\n        to insert a BASIC startup sequence at the beginning of your output <code>.prg</code> --\n        you can use the <code>c64::basic_entry</code> macro to do this.\n        The source code to these macros is shown in a later section.\n        </p>\n\n        <AsmBlock text={`\n!include \"c64.asm\"\n\n+c64::basic_start(entry)\n\nentry: {\n    lda #0\n}\n        `} />\n\n        <h3>Built-in support macros</h3>\n\n        <p>The c64jasm online site includes a small built in macro library.  You can find its source code below.</p>\n\n        <p>The builtin <code>c64.asm</code> contents:</p>\n        <AsmBlock text={asmBuiltins.c64} />\n\n      </div>\n    )\n  }\n}\n\ninterface HelpProps {\n  visible: boolean;\n  onClose: () => void;\n}\n\nclass HelpModal extends React.Component<HelpProps> {\n  render () {\n    const { visible } = this.props;\n    return (\n      <Modal>\n        <div className={cn(visible ? styles.helpModalContainer : styles.hidden)}>\n          <div className={styles.circleReveal}>\n            <HelpContents onClose={this.props.onClose}/>\n          </div>\n        </div>\n      </Modal>\n    )\n  }\n}\n\nexport default HelpModal;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('viewport_root'));\n","function webpackEmptyContext(req) {\n\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\te.code = 'MODULE_NOT_FOUND';\n\tthrow e;\n}\nwebpackEmptyContext.keys = function() { return []; };\nwebpackEmptyContext.resolve = webpackEmptyContext;\nmodule.exports = webpackEmptyContext;\nwebpackEmptyContext.id = 77;","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"SourceTabs_container__2NQsa\",\"tabContainer\":\"SourceTabs_tabContainer__2X9q3\",\"gistContainer\":\"SourceTabs_gistContainer__1hQke\",\"gistInputContainer\":\"SourceTabs_gistInputContainer__fGFjd\",\"tab\":\"SourceTabs_tab__2FK_a\",\"active\":\"SourceTabs_active__1mZcV\",\"gist\":\"SourceTabs_gist__3Emgh\",\"extraYMargin\":\"SourceTabs_extraYMargin__1uDab\",\"gistLoadButtonContainer\":\"SourceTabs_gistLoadButtonContainer__3NcSa\",\"gistResetButtonContainer\":\"SourceTabs_gistResetButtonContainer__3PwhC\",\"loadingText\":\"SourceTabs_loadingText__3UiVE\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"helpModalContainer\":\"Help_helpModalContainer__10bLm\",\"helpContents\":\"Help_helpContents__3Cbr8\",\"headingContainer\":\"Help_headingContainer__jN87w\",\"emph\":\"Help_emph__29_7I\",\"hidden\":\"Help_hidden__2fGZK\",\"circleReveal\":\"Help_circleReveal__2igbG\",\"circle\":\"Help_circle__2jpkq\",\"maxWidth\":\"Help_maxWidth__3MUy2\",\"closeButtonContainer\":\"Help_closeButtonContainer__1TIMT\",\"asm\":\"Help_asm__1yYjY\"};"],"sourceRoot":""}