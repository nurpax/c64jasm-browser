(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[,,,function(e,t,n){e.exports={layoutContainer:"Editor_layoutContainer__2bFri",editorContainer:"Editor_editorContainer__1wXnR",overlayCommon:"Editor_overlayCommon__36_O2",textarea:"Editor_textarea__28EdL",textareaHighlightOverlay:"Editor_textareaHighlightOverlay__1opTU",textareaHighlightRow:"Editor_textareaHighlightRow__1R6Ia",textareaHighlightRowCurrent:"Editor_textareaHighlightRowCurrent__25KL2",highlightError:"Editor_highlightError__1YeA5",gutter:"Editor_gutter__3CDcX",gutterRow:"Editor_gutterRow__1DNMN",gutterRowSelected:"Editor_gutterRowSelected__3GiGf",textareaSyntaxHighlightOverlay:"Editor_textareaSyntaxHighlightOverlay__31QUS",textareaSyntaxHighlightRow:"Editor_textareaSyntaxHighlightRow__2NLii",hiliteNormal:"Editor_hiliteNormal__3ZDsF",hiliteComment:"Editor_hiliteComment__1s7LO"}},,,,,function(e,t,n){e.exports={container:"SourceTabs_container__2NQsa",tabContainer:"SourceTabs_tabContainer__2X9q3",gistContainer:"SourceTabs_gistContainer__1hQke",gistInputContainer:"SourceTabs_gistInputContainer__fGFjd",tab:"SourceTabs_tab__2FK_a",active:"SourceTabs_active__1mZcV",gist:"SourceTabs_gist__3Emgh",extraYMargin:"SourceTabs_extraYMargin__1uDab",gistLoadButtonContainer:"SourceTabs_gistLoadButtonContainer__3NcSa",gistResetButtonContainer:"SourceTabs_gistResetButtonContainer__3PwhC",loadingText:"SourceTabs_loadingText__3UiVE"}},,function(e,t,n){e.exports={helpModalContainer:"Help_helpModalContainer__10bLm",helpContents:"Help_helpContents__3Cbr8",headingContainer:"Help_headingContainer__jN87w",emph:"Help_emph__29_7I",hidden:"Help_hidden__2fGZK",circleReveal:"Help_circleReveal__2igbG",circle:"Help_circle__2jpkq",maxWidth:"Help_maxWidth__3MUy2",closeButtonContainer:"Help_closeButtonContainer__1TIMT",asm:"Help_asm__1yYjY"}},function(e,t,n){e.exports={layoutContainer:"DiagnosticsList_layoutContainer__3Yxfa",diagnostics:"DiagnosticsList_diagnostics__U_t5K",diagnosticsBox:"DiagnosticsList_diagnosticsBox__NbaZi",diagItem:"DiagnosticsList_diagItem__3otDW",selected:"DiagnosticsList_selected__jbDsD",error:"DiagnosticsList_error__1cDSO"}},,function(e,t,n){"use strict";n.d(t,"b",function(){return r}),n.d(t,"a",function(){return a});var r="\nmodule.exports = {\n  sintab: ({}, len, scale) => {\n      const res = Array(len).fill(0).map((v,i) => Math.sin(i/len * Math.PI * 2.0) * scale);\n      return res;\n  }\n}\n",a="\n!filescope c64\n!macro basic_start(addr) {\n* = $801\n    !byte $0c, $08, $00, $00, $9e\n    !for d in [10000, 1000, 100, 10, 1] {\n        !if (addr >= d) {\n            !byte $30 + (addr/d)%10\n        }\n    }\n    !byte 0, 0, 0\n}\n"},,,function(e,t,n){"use strict";function r(e){return e.slice(2+(e.lastIndexOf(".")-1>>>0))}n.d(t,"a",function(){return r})},,,,function(e,t,n){"use strict";function r(e,t){for(var n=e.split("\n"),r=0,a=0;a<t.start.line-1;a++)r+=n[a].length+1;return r+t.start.column-1}function a(e,t){for(var n=e.split("\n"),r=0,a=0;a<n.length;a++)if(t<(r+=n[a].length+1))return a}n.d(t,"a",function(){return r}),n.d(t,"b",function(){return a})},,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.disassemble=t.platformC64=t.assemble=void 0;var r=n(57);Object.defineProperty(t,"assemble",{enumerable:!0,get:function(){return r.assemble}}),Object.defineProperty(t,"platformC64",{enumerable:!0,get:function(){return r.platformC64}});var a=n(75);Object.defineProperty(t,"disassemble",{enumerable:!0,get:function(){return a.disassemble}})},,function(e,t,n){e.exports={layoutContainer:"Disasm_layoutContainer__36ehI",disasmContainer:"Disasm_disasmContainer__2QplX"}},,function(e,t,n){e.exports={buttonContainer:"CloseButton_buttonContainer__28ZWo",close:"CloseButton_close__1cumB"}},function(e,t,n){e.exports={headerContainer:"App_headerContainer__qCdWC",appTitle:"App_appTitle__2SEQk"}},,,,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=16384,a=32768;function l(e,t){return e|t<<8}function i(e,t){return e|t<<8|r}function u(e,t){return e|t<<8|r|a}var o={ADC:[l(105,2),l(101,3),l(117,4),null,l(109,4),i(125,4),i(121,4),null,l(97,6),i(113,5),null,null],AND:[l(41,2),l(37,3),l(53,4),null,l(45,4),i(61,4),i(57,4),null,l(33,6),i(49,5),null,null],ASL:[null,l(6,5),l(22,6),null,l(14,6),l(30,7),null,null,null,null,l(10,2),null],BIT:[null,l(36,3),null,null,l(44,4),null,null,null,null,null,null,null],BPL:[null,null,null,null,null,null,null,null,null,null,null,u(16,2)],BMI:[null,null,null,null,null,null,null,null,null,null,null,u(48,2)],BVC:[null,null,null,null,null,null,null,null,null,null,null,u(80,2)],BVS:[null,null,null,null,null,null,null,null,null,null,null,u(112,2)],BCC:[null,null,null,null,null,null,null,null,null,null,null,u(144,2)],BCS:[null,null,null,null,null,null,null,null,null,null,null,u(176,2)],BNE:[null,null,null,null,null,null,null,null,null,null,null,u(208,2)],BEQ:[null,null,null,null,null,null,null,null,null,null,null,u(240,2)],BRK:[null,null,null,null,null,null,null,null,null,null,l(0,7),null],CMP:[l(201,2),l(197,3),l(213,4),null,l(205,4),i(221,4),i(217,4),null,l(193,6),i(209,5),null,null],CPX:[l(224,2),l(228,3),null,null,l(236,4),null,null,null,null,null,null,null],CPY:[l(192,2),l(196,3),null,null,l(204,4),null,null,null,null,null,null,null],DEC:[null,l(198,5),l(214,6),null,l(206,6),l(222,7),null,null,null,null,null,null],EOR:[l(73,2),l(69,3),l(85,4),null,l(77,4),i(93,4),i(89,4),null,l(65,6),i(81,5),null,null],CLC:[null,null,null,null,null,null,null,null,null,null,l(24,2),null],SEC:[null,null,null,null,null,null,null,null,null,null,l(56,2),null],CLI:[null,null,null,null,null,null,null,null,null,null,l(88,2),null],SEI:[null,null,null,null,null,null,null,null,null,null,l(120,2),null],CLV:[null,null,null,null,null,null,null,null,null,null,l(184,2),null],CLD:[null,null,null,null,null,null,null,null,null,null,l(216,2),null],SED:[null,null,null,null,null,null,null,null,null,null,l(248,2),null],INC:[null,l(230,5),l(246,6),null,l(238,6),l(254,7),null,null,null,null,null,null],JMP:[null,null,null,null,l(76,3),null,null,l(108,5),null,null,null,null],JSR:[null,null,null,null,l(32,6),null,null,null,null,null,null,null],LDA:[l(169,2),l(165,3),l(181,4),null,l(173,4),i(189,4),i(185,4),null,l(161,6),i(177,5),null,null],LDX:[l(162,2),l(166,3),null,l(182,4),l(174,4),null,i(190,4),null,null,null,null,null],LDY:[l(160,2),l(164,3),l(180,4),null,l(172,4),i(188,4),null,null,null,null,null,null],LSR:[null,l(70,5),l(86,6),null,l(78,6),l(94,7),null,null,null,null,l(74,2),null],NOP:[null,null,null,null,null,null,null,null,null,null,l(234,2),null],ORA:[l(9,2),l(5,3),l(21,4),null,l(13,4),i(29,4),i(25,4),null,l(1,6),i(17,5),null,null],TAX:[null,null,null,null,null,null,null,null,null,null,l(170,2),null],TXA:[null,null,null,null,null,null,null,null,null,null,l(138,2),null],DEX:[null,null,null,null,null,null,null,null,null,null,l(202,2),null],INX:[null,null,null,null,null,null,null,null,null,null,l(232,2),null],TAY:[null,null,null,null,null,null,null,null,null,null,l(168,2),null],TYA:[null,null,null,null,null,null,null,null,null,null,l(152,2),null],DEY:[null,null,null,null,null,null,null,null,null,null,l(136,2),null],INY:[null,null,null,null,null,null,null,null,null,null,l(200,2),null],ROR:[null,l(102,5),l(118,6),null,l(110,6),l(126,7),null,null,null,null,l(106,2),null],ROL:[null,l(38,5),l(54,6),null,l(46,6),l(62,7),null,null,null,null,l(42,2),null],RTI:[null,null,null,null,null,null,null,null,null,null,l(64,6),null],RTS:[null,null,null,null,null,null,null,null,null,null,l(96,6),null],SBC:[l(233,2),l(229,3),l(245,4),null,l(237,4),i(253,4),i(249,4),null,l(225,6),i(241,5),null,null],STA:[null,l(133,3),l(149,4),null,l(141,4),l(157,5),l(153,5),null,l(129,6),l(145,6),null,null],TXS:[null,null,null,null,null,null,null,null,null,null,l(154,2),null],TSX:[null,null,null,null,null,null,null,null,null,null,l(186,2),null],PHA:[null,null,null,null,null,null,null,null,null,null,l(72,3),null],PLA:[null,null,null,null,null,null,null,null,null,null,l(104,4),null],PHP:[null,null,null,null,null,null,null,null,null,null,l(8,3),null],PLP:[null,null,null,null,null,null,null,null,null,null,l(40,4),null],STX:[null,l(134,3),null,l(150,4),l(142,4),null,null,null,null,null,null,null],STY:[null,l(132,3),l(148,4),null,l(140,4),null,null,null,null,null,null,null],SLO:[null,l(7,5),l(23,6),null,l(15,6),l(31,7),l(27,7),null,l(3,8),l(19,8),null,null],ANC:[l(11,2),null,null,null,null,null,null,null,null,null,null,null],RLA:[null,l(39,5),l(55,6),null,l(47,6),l(63,7),l(59,7),null,l(35,8),l(51,8),null,null],SRE:[null,l(71,5),l(87,6),null,l(79,6),l(95,7),l(91,7),null,l(67,8),l(83,8),null,null],RRA:[null,l(103,5),l(119,6),null,l(111,6),l(127,7),l(123,7),null,l(99,8),l(115,8),null,null],SAX:[null,l(135,3),null,l(151,4),l(143,4),null,null,null,l(131,6),null,null,null],AHX:[null,null,null,null,null,null,l(159,5),null,null,l(147,6),null,null],XAA:[l(139,2),null,null,null,null,null,null,null,null,null,null,null],TAS:[null,null,null,null,null,null,l(155,5),null,null,null,null,null],SHY:[null,null,null,null,null,l(156,5),null,null,null,null,null,null],SHX:[null,null,null,null,null,null,l(158,5),null,null,null,null,null],LAX:[l(171,2),l(167,3),null,l(183,4),l(175,4),null,l(191,4),null,l(163,6),l(179,5),null,null],LAS:[null,null,null,null,null,null,l(187,4),null,null,null,null,null],DCP:[null,l(199,5),l(215,6),null,l(207,6),l(223,7),l(219,7),null,l(195,8),l(211,8),null,null],ISC:[null,l(231,5),l(247,6),null,l(239,6),l(255,7),l(251,7),null,l(227,8),l(243,8),null,null],ALR:[l(75,2),null,null,null,null,null,null,null,null,null,null,null],AXS:[l(203,2),null,null,null,null,null,null,null,null,null,null,null],ARR:[l(107,2),null,null,null,null,null,null,null,null,null,null,null],"---":[null,null,null,null,null,null,null,null,null,null,null,null]};t.default=o},,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.toHex16=void 0,t.toHex16=function(e){return e.toString(16).padStart(4,"0")}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mkAsmLine=t.mkUseSegment=t.mkDeclareSegment=t.mkFilescope=t.mkLoadPlugin=t.mkStmtExpr=t.mkAssign=t.mkLet=t.mkCallMacro=t.mkMacro=t.mkMacroArg=t.mkFor=t.mkIfElse=t.mkBinary=t.mkError=t.mkInclude=t.mkAlign=t.mkFill=t.mkData=t.mkSetPC=t.mkInsn=t.mkLabel=t.DataSize=t.mkMember=t.mkGetCurPC=t.mkCallFunc=t.mkExprObject=t.mkExprArray=t.mkBinaryOp=t.mkUnary=t.mkKwarg=t.mkIdent=t.mkScopeQualifiedIdent=t.mkLiteral=void 0,t.mkLiteral=function(e,t){return{type:"literal",lit:e,loc:t}},t.mkScopeQualifiedIdent=function(e,t,n){return{type:"qualified-ident",path:e,absolute:t,loc:n}},t.mkIdent=function(e,t){return{type:"ident",name:e,loc:t}},t.mkKwarg=function(e,t,n){return{type:"kwarg",name:e,value:t,loc:n}},t.mkUnary=function(e,t,n){return{type:"unary",op:e,expr:t,loc:n}},t.mkBinaryOp=function(e,t,n,r){return{type:"binary",op:e,left:t,right:n,loc:r}},t.mkExprArray=function(e,t){return{type:"array",list:e,loc:t}},t.mkExprObject=function(e,t){return{type:"object",props:e,loc:t}},t.mkCallFunc=function(e,t,n){return{type:"callfunc",callee:e,args:null==t?[]:t,loc:n}},t.mkGetCurPC=function(e){return{type:"getcurpc",loc:e}},t.mkMember=function(e,t,n,r){return{type:"member",object:e,property:t,computed:n,loc:r}},function(e){e[e.Byte=0]="Byte",e[e.Word=1]="Word"}(t.DataSize||(t.DataSize={})),t.mkLabel=function(e,t){return{name:e,loc:t}},t.mkInsn=function(e,t){return{type:"insn",insn:e,loc:t}},t.mkSetPC=function(e,t){return{type:"setpc",pc:e,loc:t}},t.mkData=function(e,t,n){return{type:"data",values:t,dataSize:e,loc:n}},t.mkFill=function(e,t,n){return{type:"fill",numBytes:e,fillValue:t,loc:n}},t.mkAlign=function(e,t){return{type:"align",alignBytes:e,loc:t}},t.mkInclude=function(e,t){return{type:"include",filename:e,loc:t}},t.mkError=function(e,t){return{type:"error",error:e,loc:t}},t.mkBinary=function(e,t){return{type:"binary",kwargs:e,loc:t}},t.mkIfElse=function(e,t,n){return{type:"if",cases:e,elseBranch:null!==t?t:[],loc:n}},t.mkFor=function(e,t,n,r){return{type:"for",index:e,list:t,body:n,loc:r}},t.mkMacroArg=function(e){return{ident:e}},t.mkMacro=function(e,t,n,r){return{type:"macro",name:e,args:null==t?[]:t,body:n,loc:r}},t.mkCallMacro=function(e,t,n){return{type:"callmacro",name:e,args:null==t?[]:t,loc:n}},t.mkLet=function(e,t,n){return{type:"let",name:e,value:t,loc:n}},t.mkAssign=function(e,t,n){return{type:"assign",name:e,value:t,loc:n}},t.mkStmtExpr=function(e,t){return{type:"statement-expr",expr:e,loc:t}},t.mkLoadPlugin=function(e,t,n){return{type:"load-plugin",filename:e,moduleName:t,loc:n}},t.mkFilescope=function(e,t){return{type:"filescope",name:e,loc:t}},t.mkDeclareSegment=function(e,t,n){return{type:"declare-segment",name:e,kwargs:t,loc:n}},t.mkUseSegment=function(e,t){return{type:"use-segment",name:e,loc:t}},t.mkAsmLine=function(e,t,n,r){return{label:e,stmt:t,scopedStmts:n,loc:r}}},function(e,t,n){"use strict";(function(e){var r=n(9),a=n(4),l=n(1),i=n(2),u=n(5),o=n(6),s=n(0),c=n.n(s),f=n(24),h=n(25),d=n.n(h),m=n(16),p=n(13),v=n(20),g=n(45),y=n(42),b=n(43),k=n(44),S=n(46),x=n(29),C=n.n(x),E={useWebWorkers:!0};var w=function(){function e(){Object(u.a)(this,e),this.cache={}}return Object(o.a)(e,[{key:"update",value:function(e){var t=!1,n=!0,r=!1,a=void 0;try{for(var l,i=e[Symbol.iterator]();!(n=(l=i.next()).done);n=!0){var u=l.value;this.cache[u.name]!==u.text&&(this.cache[u.name]=u.text,t=!0),this.cache[u.name]=u.text}}catch(o){r=!0,a=o}finally{try{n||null==i.return||i.return()}finally{if(r)throw a}}return{sourceFileMap:this.cache,changed:t}}}]),e}(),A=[{name:"main.asm",text:e.from(""),cursorOffset:0},{name:"c64.asm",text:e.from(p.a),cursorOffset:0},{name:"plugin.js",text:e.from(p.b),cursorOffset:0}],O=function(t){function n(){var t,i;Object(u.a)(this,n);for(var o=arguments.length,s=new Array(o),c=0;c<o;c++)s[c]=arguments[c];return(i=Object(a.a)(this,(t=Object(l.a)(n)).call.apply(t,[this].concat(s)))).sourceFileMapCache=new w,i.assemblerWorker=void 0,i.state={gist:{id:"",loadCount:0,loading:!1},sourceFiles:{selected:0,files:A},disassembly:[],prg:e.from([]),diagnosticsIndex:0,diagnostics:[],helpVisible:!1},i.setGistLoadingStatus=function(e){i.setState(function(t){return{gist:Object(r.a)({},t.gist,{loading:e})}})},i.loadGist=function(t){if(null===t)return window.history.replaceState({},"",decodeURIComponent("".concat(window.location.pathname))),void i.setState(function(n){return{gist:Object(r.a)({},n.gist,{gistId:t,loadCount:n.gist.loadCount+1}),sourceFiles:{files:A,selected:0},disassembly:[],prg:e.from([]),diagnosticsIndex:0,diagnostics:[]}});i.setGistLoadingStatus(!0),fetch("https://api.github.com/gists/".concat(t),{headers:{Accept:"application/vnd.github.v3.base64"}}).then(function(e){if(200!==e.status)throw new Error("Gist load failed with HTTP status code ".concat(e.status,": ").concat(e.statusText));return e}).then(function(e){return e.json()}).then(function(n){i.setGistLoadingStatus(!1),function(e,t){var n=new URLSearchParams(window.location.search);n.set(e,t),window.history.replaceState({},"",decodeURIComponent("".concat(window.location.pathname,"?").concat(n)))}("gist_id",t),i.setState(function(a){var l=[],i=0,u=!1,o=!0,s=!1,c=void 0;try{for(var f,h=Object.values(n.files)[Symbol.iterator]();!(o=(f=h.next()).done);o=!0){var d=f.value;"c64.asm"===d.filename&&(u=!0),l.push({name:d.filename,text:e.from(d.content,"base64"),cursorOffset:0}),"main.asm"===d.filename&&(i=l.length-1)}}catch(m){s=!0,c=m}finally{try{o||null==h.return||h.return()}finally{if(s)throw c}}return u||l.push({name:"c64.asm",text:e.from(p.a),cursorOffset:0}),{gist:Object(r.a)({},a.gist,{gistId:t,loadCount:a.gist.loadCount+1}),sourceFiles:{files:l,selected:i}}},function(){return i.recompile()})}).catch(function(e){console.log(e),i.setState(function(e){return{gist:Object(r.a)({},e.gist,{loading:!1})}})})},i.getCurrentSource=function(){return i.state.sourceFiles.files[i.state.sourceFiles.selected]},i.updateCurrentSourceFile=function(e,t){return Object(r.a)({},e,{files:e.files.map(function(n,r){return r===e.selected?t(n):n})})},i.handleWorkerMessage=function(e){0===e.data.diagnostics.length?i.setState({prg:e.data.prg,disassembly:e.data.disassembly,diagnostics:e.data.diagnostics}):i.setState({diagnostics:e.data.diagnostics})},i.handleKeyDown=function(e){"F4"===e.key&&(i.setState(function(t){if(0===t.diagnostics.length)return i.updateDiagnosticsIndexState(t,0);if(void 0===t.diagnosticsIndex)return i.updateDiagnosticsIndexState(t,0);if(e.shiftKey){var n=Math.max(0,t.diagnosticsIndex-1);return i.updateDiagnosticsIndexState(t,n)}var r=Math.min(t.diagnostics.length-1,t.diagnosticsIndex+1);return i.updateDiagnosticsIndexState(t,r)}),e.preventDefault()),"Escape"===e.key&&(i.setState({diagnosticsIndex:void 0,helpVisible:!1}),e.preventDefault())},i.findSourceForDiagnostic=function(e){var t=i.state.sourceFiles.selected;if(void 0===e)return t;for(var n=i.state.sourceFiles.files,r=0;r<n.length;r++){n[r].name===e.loc.source&&(t=r)}return t},i.updateDiagnosticsIndexState=function(e,t){var n=i.state.diagnostics[t],a=i.findSourceForDiagnostic(n);return e.sourceFiles.selected!==a?{diagnosticsIndex:t,sourceFiles:Object(r.a)({},e.sourceFiles,{selected:a})}:{diagnosticsIndex:t,sourceFiles:e.sourceFiles}},i.handleOnClickDiagnostic=function(e){i.setState(function(t){return i.updateDiagnosticsIndexState(t,e)})},i.debouncedCompile=function(e,t){var n=void 0;return function(){for(var r=this,a=arguments.length,l=new Array(a),i=0;i<a;i++)l[i]=arguments[i];clearTimeout(n),n=window.setTimeout(function(){return e.apply(r,l)},t)}}(function(e){E.useWebWorkers&&i.assemblerWorker&&i.assemblerWorker.postMessage(e)},250),i.recompile=function(){var e=i.sourceFileMapCache.update(i.state.sourceFiles.files),t=e.sourceFileMap;if(e.changed)if(E.useWebWorkers&&i.assemblerWorker)i.debouncedCompile({sourceFileMap:t}),i.setState({diagnosticsIndex:void 0});else{var n={readFileSync:function(e){if(e in t)return t[e];throw new Error("File not found ".concat(e))}},r=Object(f.assemble)("main.asm",n);if(0===r.errors.length){var a={showCycles:!0,showLabels:!0,isInstruction:r.debugInfo.info().isInstruction};i.setState({prg:r.prg,disassembly:Object(f.disassemble)(r.prg,r.labels,a),diagnostics:[],diagnosticsIndex:void 0})}else i.setState({diagnostics:r.errors,diagnosticsIndex:void 0})}},i.handleSetSource=function(t){i.setState(function(n){return{sourceFiles:i.updateCurrentSourceFile(n.sourceFiles,function(n){return Object(r.a)({},n,{text:e.from(t)})})}},function(){return i.recompile()})},i.handleSetSourcePosition=function(e){i.setState(function(t){return{sourceFiles:i.updateCurrentSourceFile(t.sourceFiles,function(t){return Object(r.a)({},t,{cursorOffset:e})})}})},i.handleClearDiagnosticsSelectionOnKey=function(e){"F4"!==e.key&&"Shift"!==e.key&&void 0!==i.state.diagnosticsIndex&&i.setState({diagnosticsIndex:void 0})},i.handleClearDiagnosticsSelectionOnMouse=function(e){void 0!==i.state.diagnosticsIndex&&i.setState({diagnosticsIndex:void 0})},i.handleClickHelp=function(){i.setState({helpVisible:!0})},i.handleCloseHelp=function(){i.setState({helpVisible:!1})},i.handleDownloadPRG=function(){var e=new Blob([i.state.prg]);d.a.saveAs(e,"c64jasm-online.prg")},i.handleDownloadDisasm=function(){var e=new Blob([i.state.disassembly.join("\n")],{type:"text/plain;charset=utf-8"});d.a.saveAs(e,"c64jasm-online.s")},i.handleSourceTabSelected=function(e){i.setState(function(t){return{sourceFiles:Object(r.a)({},t.sourceFiles,{selected:e})}})},i}return Object(i.a)(n,t),Object(o.a)(n,[{key:"componentDidMount",value:function(){var e=this;document.addEventListener("keydown",this.handleKeyDown),this.assemblerWorker=new Worker("worker.js"),null!==this.assemblerWorker&&this.assemblerWorker.addEventListener("message",function(t){e.handleWorkerMessage(t)});var t=new URLSearchParams(window.location.search).get("gist_id");null!==t&&this.loadGist(t)}},{key:"render",value:function(){var e=this,t=this.state.diagnostics,n=void 0;if(0!==t.length&&void 0!==this.state.diagnosticsIndex){var r=t[this.state.diagnosticsIndex];if(void 0!==r){var a=this.findSourceForDiagnostic(r),l=this.state.sourceFiles.files[a];n=Object(v.a)(l.text.toString(),r.loc)}}var i=this.state.diagnostics.filter(function(t){return t.loc.source===e.getCurrentSource().name});return c.a.createElement("div",{id:"root"},c.a.createElement("div",{id:"mainHeader"},c.a.createElement("div",{className:C.a.headerContainer},c.a.createElement("div",null,c.a.createElement("div",{className:C.a.appTitle},c.a.createElement("a",{href:"https://nurpax.github.io/c64jasm/"},"c64jasm")," online")))),c.a.createElement("div",{onKeyDown:this.handleClearDiagnosticsSelectionOnKey,onMouseDown:this.handleClearDiagnosticsSelectionOnMouse,onMouseUp:this.handleClearDiagnosticsSelectionOnMouse,id:"mainCode"},c.a.createElement(g.a,{key:"".concat(this.state.gist.id,"/").concat(this.state.gist.loadCount,"/").concat(this.getCurrentSource().name),defaultValue:this.getCurrentSource().text.toString(),defaultCursorOffset:this.getCurrentSource().cursorOffset,onSourceChanged:this.handleSetSource,onSourcePositionChanged:this.handleSetSourcePosition,diagnostics:i,errorCharOffset:n,sourceFileExt:Object(m.a)(this.getCurrentSource().name)})),c.a.createElement("div",{id:"siteDisasm"},c.a.createElement(y.a,{disassembly:this.state.disassembly})),c.a.createElement("div",{id:"mainSourceTabs"},c.a.createElement(k.a,{key:this.state.gist.loadCount,setSelected:this.handleSourceTabSelected,selected:this.state.sourceFiles.selected,files:this.state.sourceFiles.files,onLoadGist:this.loadGist,loadingGist:this.state.gist.loading,renderExtras:function(t){var n=t.Button;return c.a.createElement(c.a.Fragment,null,c.a.createElement(n,{text:"Reset Workspace",title:"Reset the workspace.  Cannot be undone.",onClick:function(){return e.loadGist(null)}}),c.a.createElement(n,{text:"Save PRG",title:"Download compiled binary as C64 .prg",yMargin:!0,onClick:e.handleDownloadPRG}),c.a.createElement(n,{text:"Save Disasm",title:"Download the output disassemble file",onClick:e.handleDownloadDisasm}),c.a.createElement(n,{text:"Help",title:"C64jasm online help",yMargin:!0,onClick:e.handleClickHelp}))}})),c.a.createElement("div",{id:"mainDiag"},c.a.createElement(b.a,{onClickItem:this.handleOnClickDiagnostic,diagnostics:this.state.diagnostics,selectedIndex:this.state.diagnosticsIndex})),c.a.createElement(S.a,{visible:this.state.helpVisible,onClose:this.handleCloseHelp}))}}]),n}(c.a.Component);t.a=O}).call(this,n(23).Buffer)},,,function(e,t,n){"use strict";n.d(t,"a",function(){return h});var r=n(5),a=n(6),l=n(4),i=n(1),u=n(2),o=n(0),s=n.n(o),c=n(26),f=n.n(c),h=function(e){function t(){return Object(r.a)(this,t),Object(l.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(a.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{className:f.a.layoutContainer},s.a.createElement("div",{className:"heading"},s.a.createElement("div",{className:"heading-pad"},"Disassembly")),s.a.createElement("div",{className:f.a.disasmContainer},s.a.createElement("pre",null,this.props.disassembly.join("\n"))))}}]),t}(s.a.PureComponent)},function(e,t,n){"use strict";n.d(t,"a",function(){return d});var r=n(5),a=n(6),l=n(4),i=n(1),u=n(2),o=n(0),s=n.n(o),c=n(11),f=n.n(c),h=function(e){function t(){var e,n;Object(r.a)(this,t);for(var a=arguments.length,u=new Array(a),o=0;o<a;o++)u[o]=arguments[o];return(n=Object(l.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(u)))).itemRef=s.a.createRef(),n}return Object(u.a)(t,e),Object(a.a)(t,[{key:"componentDidUpdate",value:function(e,t,n){this.itemRef&&this.itemRef.current&&this.props.selected&&this.itemRef.current.scrollIntoView({behavior:"smooth",block:"center"})}},{key:"render",value:function(){var e=this,t=this.props.error,n=t.loc,r=t.msg,a=this.props.selected?" ".concat(f.a.selected):"";return s.a.createElement("div",{ref:this.itemRef,className:"".concat(f.a.diagItem).concat(a),onClick:function(){return e.props.onClickItem(e.props.index)}},s.a.createElement("span",{className:"".concat(f.a.error).concat(a)},n.source,":",n.start.line,":",n.start.column,": error:")," ",r)}}]),t}(s.a.Component),d=function(e){function t(){var e,n;Object(r.a)(this,t);for(var a=arguments.length,u=new Array(a),o=0;o<a;o++)u[o]=arguments[o];return(n=Object(l.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(u)))).handleOnClickItem=function(e){n.props.onClickItem(e)},n}return Object(u.a)(t,e),Object(a.a)(t,[{key:"render",value:function(){var e=this,t=this.props.diagnostics;return s.a.createElement("div",{className:f.a.layoutContainer},s.a.createElement("div",{className:"heading"},s.a.createElement("div",{className:"heading-pad"},"Diagnostics")),s.a.createElement("div",{className:f.a.diagnostics},s.a.createElement("div",{className:f.a.diagnosticsBox},t.map(function(t,n){return s.a.createElement(h,{key:JSON.stringify(t.loc),index:n,error:t,selected:n===e.props.selectedIndex,onClickItem:e.handleOnClickItem})}))))}}]),t}(s.a.PureComponent)},function(e,t,n){"use strict";n.d(t,"a",function(){return x});var r=n(22),a=n(5),l=n(6),i=n(4),u=n(1),o=n(2),s=n(0),c=n.n(s),f=n(8),h=n.n(f),d=n(7),m=n.n(d),p=n(27),v=n(16),g=function(e){function t(){var e,n;Object(a.a)(this,t);for(var r=arguments.length,l=new Array(r),o=0;o<r;o++)l[o]=arguments[o];return(n=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(l)))).state={gistIdOrUrl:""},n.handleSubmit=function(e){e.preventDefault();var t=n.state.gistIdOrUrl.split("/");t.length>0&&n.props.onSubmit(t[t.length-1])},n.handleInputChange=function(e){n.setState({gistIdOrUrl:e.target.value})},n.handlePreventBlur=function(e){e.preventDefault()},n}return Object(o.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this;return c.a.createElement("form",{onSubmit:this.handleSubmit,onBlur:function(){return e.props.onCancel()},className:m()(h.a.gist,h.a.gistInputContainer)},c.a.createElement("input",{placeholder:"Gist ID or URL",onChange:this.handleInputChange,value:this.state.gistIdOrUrl,onKeyDown:function(t){"Escape"===t.key&&e.props.onCancel()},autoFocus:!0,spellCheck:!1,type:"text"}),c.a.createElement("button",{onMouseDown:this.handlePreventBlur,type:"submit"},"Go!"))}}]),t}(c.a.Component),y=function(e){function t(){var e,n;Object(a.a)(this,t);for(var r=arguments.length,l=new Array(r),o=0;o<r;o++)l[o]=arguments[o];return(n=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(l)))).state={editing:!1},n.handleOpenLoadInput=function(){n.setState(function(e){return{editing:!e.editing}})},n.handleResetWorkspace=function(){n.props.onLoadGist(null)},n}return Object(o.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this;return this.props.loadingGist?c.a.createElement("div",{className:h.a.gistContainer},c.a.createElement("div",{className:h.a.loadingText},"Loading gist..")):c.a.createElement("div",{className:h.a.gistContainer},this.state.editing&&c.a.createElement(g,{onCancel:function(){return e.setState({editing:!1})},onSubmit:function(t){e.setState({editing:!1}),""!==t&&e.props.onLoadGist(t)}}),!this.state.editing&&c.a.createElement("div",{className:m()(h.a.gist,h.a.gistLoadButtonContainer)},c.a.createElement("button",{onClick:this.handleOpenLoadInput,title:"Load source files from a GitHub public Gist"},"Load Gist")))}}]),t}(c.a.PureComponent),b=function(e){function t(){var e,n;Object(a.a)(this,t);for(var r=arguments.length,l=new Array(r),o=0;o<r;o++)l[o]=arguments[o];return(n=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(l)))).handleTabClick=function(e,t){n.props.setSelected(t)},n}return Object(o.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=this.props.sortIdx.map(function(t){var n=e.props.filenames[t];return c.a.createElement("div",{key:n,className:m()(h.a.tab,t===e.props.selected?h.a.active:""),onClick:function(n){return e.handleTabClick(n,t)}},n)});return c.a.createElement("div",{className:h.a.tabContainer},t)}}]),t}(c.a.PureComponent);function k(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(var n=e[0],r=t[0],a=0;a<n.length;a++)if(n[a]!==r[a])return!1;return!0}function S(e){return c.a.createElement("div",{className:m()(h.a.gist,e.yMargin&&h.a.extraYMargin)},c.a.createElement("div",{className:h.a.gistResetButtonContainer},c.a.createElement("button",{onClick:e.onClick,title:e.title},e.text)))}var x=function(e){function t(){var e,n;Object(a.a)(this,t);for(var l=arguments.length,o=new Array(l),s=0;s<l;s++)o[s]=arguments[s];return(n=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).getFilenames=Object(p.a)(function(e){return e},k),n.getSortOrder=Object(p.a)(function(e){return function(e){for(var t=[],n=0;n<e.length;n++)t.push([e[n],n]);return t.sort(function(e,t){var n=Object(r.a)(e,2),a=n[0],l=(n[1],Object(r.a)(t,2)),i=l[0],u=(l[1],Object(v.a)(a)),o=Object(v.a)(i);return u===o?a.localeCompare(i):u.localeCompare(o)}),t.map(function(e){var t=Object(r.a)(e,2);return t[0],t[1]})}(e)}),n}return Object(o.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.getFilenames(this.props.files.map(function(e){return e.name})),t=this.getSortOrder(e);return c.a.createElement("div",{className:h.a.container},c.a.createElement("div",{className:"heading"},c.a.createElement("div",{className:"heading-pad"},"Source files")),c.a.createElement(b,{filenames:e,sortIdx:t,selected:this.props.selected,setSelected:this.props.setSelected}),c.a.createElement(y,{onLoadGist:this.props.onLoadGist,loadingGist:this.props.loadingGist}),this.props.renderExtras&&this.props.renderExtras({Button:function(e){return c.a.createElement(S,e)}}))}}]),t}(c.a.Component)},function(e,t,n){"use strict";var r=n(21),a=n(5),l=n(6),i=n(4),u=n(1),o=n(2),s=n(0),c=n.n(s),f=n(40),h=n.n(f),d=n(7),m=n.n(d),p=n(41),v=n(20);function g(e,t){g=function(e,t){return new i(e,t)};var n=Object(r.a)(RegExp),a=RegExp.prototype,l=new WeakMap;function i(e,t){var r=n.call(this,e);return l.set(r,t),r}function u(e,t){var n=l.get(t);return Object.keys(n).reduce(function(t,r){return t[r]=e[n[r]],t},Object.create(null))}return Object(o.a)(i,n),i.prototype.exec=function(e){var t=a.exec.call(this,e);return t&&(t.groups=u(t,this)),t},i.prototype[Symbol.replace]=function(e,t){if("string"===typeof t){var n=l.get(this);return a[Symbol.replace].call(this,e,t.replace(/\$<([^>]+)>/g,function(e,t){return"$"+n[t]}))}if("function"===typeof t){var r=this;return a[Symbol.replace].call(this,e,function(){var e=[];return e.push.apply(e,arguments),"object"!==typeof e[e.length-1]&&e.push(u(e,r)),t.apply(this,e)})}return a[Symbol.replace].call(this,e,t)},g.apply(this,arguments)}function y(e){var t=[],n=g(/^([^;]*)(;.*)?$/,{code:1,comment:2}).exec(e);if(!n)throw new Error("internal error");var r=n.groups.code,a=n.groups.comment;return void 0!==r&&t.push({text:r,color:"normal"}),void 0!==a&&t.push({text:a,color:"comment"}),t}function b(e){var t=[],n=g(/^(.*)(\/\/.*)$/,{code:1,comment:2}).exec(e);if(!n)return[{text:e,color:"normal"}];var r=n.groups.code,a=n.groups.comment;return void 0!==r&&t.push({text:r,color:"normal"}),void 0!==a&&t.push({text:a,color:"comment"}),t}function k(e,t){var n={asm:y,inc:y,js:b}[e];return void 0!==n?n(t):[{text:t,color:"normal"}]}var S=n(3),x=n.n(S);function C(e,t){C=function(e,t){return new i(e,t)};var n=Object(r.a)(RegExp),a=RegExp.prototype,l=new WeakMap;function i(e,t){var r=n.call(this,e);return l.set(r,t),r}function u(e,t){var n=l.get(t);return Object.keys(n).reduce(function(t,r){return t[r]=e[n[r]],t},Object.create(null))}return Object(o.a)(i,n),i.prototype.exec=function(e){var t=a.exec.call(this,e);return t&&(t.groups=u(t,this)),t},i.prototype[Symbol.replace]=function(e,t){if("string"===typeof t){var n=l.get(this);return a[Symbol.replace].call(this,e,t.replace(/\$<([^>]+)>/g,function(e,t){return"$"+n[t]}))}if("function"===typeof t){var r=this;return a[Symbol.replace].call(this,e,function(){var e=[];return e.push.apply(e,arguments),"object"!==typeof e[e.length-1]&&e.push(u(e,r)),t.apply(this,e)})}return a[Symbol.replace].call(this,e,t)},C.apply(this,arguments)}n.d(t,"a",function(){return L});var E=4;function w(e,t){for(var n=0,r=0;r<t;r++){if(e.length<r)return;"\t"===e[r]?n+=E:n++}return n}function A(e){var t=0;if(!e.text)return null;var n=!0,r=!1,a=void 0;try{for(var l,i=e.text[Symbol.iterator]();!(n=(l=i.next()).done);n=!0){"\t"===l.value?t+=E:t++}}catch(p){r=!0,a=p}finally{try{n||null==i.return||i.return()}finally{if(r)throw a}}var u=Array(t).fill(!1),o=!0,f=!1,h=void 0;try{for(var d,m=e.errors[Symbol.iterator]();!(o=(d=m.next()).done);o=!0){var p=d.value,v=w(e.text,p.start.column-1);if(void 0===v)return null;var g=p.start.line===p.end.line?w(e.text,p.end.column-1):v+1;if(void 0===g)return null;for(var y=v;y<g;y++)u[y]=!0}}catch(p){f=!0,h=p}finally{try{o||null==m.return||m.return()}finally{if(f)throw h}}for(var b=function(e){var t=void 0,n=[],r=!0,a=!1,l=void 0;try{for(var i,u=e[Symbol.iterator]();!(r=(i=u.next()).done);r=!0){var o=i.value;t!==o?(t=o,n.push({code:t,count:1})):n[n.length-1].count++}}catch(p){a=!0,l=p}finally{try{r||null==u.return||u.return()}finally{if(a)throw l}}return n}(u),k=[],S=0;S<b.length;S++){var C=b[S];C.code?k.push(c.a.createElement("pre",{key:S,style:{display:"inline-block"},className:x.a.highlightError}," ".repeat(C.count))):k.push(c.a.createElement("pre",{key:S,style:{display:"inline-block"}}," ".repeat(C.count)))}return c.a.createElement(s.Fragment,null,k)}var O=c.a.forwardRef(function(e,t){for(var n=[],r=e.startRow;r<e.startRow+e.numRows+2;r++){var a=r===e.currentLine&&x.a.textareaHighlightRowCurrent,l=e.lineToErrors.get(r);if(l){var i=e.textLines[r];n.push(c.a.createElement("div",{className:m()(x.a.textareaHighlightRow,a),key:r},c.a.createElement(A,{text:i,errors:l})))}else n.push(c.a.createElement("div",{className:m()(x.a.textareaHighlightRow,a),key:r}))}return c.a.createElement("div",{ref:t,className:m()(x.a.overlayCommon,x.a.textareaHighlightOverlay)},n)}),_=c.a.forwardRef(function(e,t){for(var n=[],r={normal:x.a.hiliteNormal,comment:x.a.hiliteComment},a=e.startRow;a<e.startRow+e.numRows+2;a++){var l=[];if(a<e.textLines.length)for(var i=e.textLines[a],u=k(e.sourceFileExt,i),o=0;o<u.length;o++){var s=u[o],f=s.text,h=s.color;l.push(c.a.createElement("pre",{key:o,className:r[h],style:{display:"inline-block"}},f))}n.push(c.a.createElement("div",{className:x.a.textareaSyntaxHighlightRow,key:a},l))}return c.a.createElement("div",{ref:t,className:m()(x.a.overlayCommon,x.a.textareaSyntaxHighlightOverlay),style:{width:"".concat(e.fixedDims.width,"px"),height:"".concat(e.fixedDims.height,"px")}},c.a.createElement("div",{style:{marginLeft:"-".concat(e.scrollLeft,"px")}},n))}),j=c.a.forwardRef(function(e,t){for(var n=[],r=e.startRow;r<e.startRow+e.numRows+2;r++){var a="".concat(r+1),l=r===e.currentLine&&x.a.gutterRowSelected,i=r>=0&&r<e.numTextRows?a.padStart(4," "):"";n.push(c.a.createElement("div",{className:m()(x.a.gutterRow,l),key:r},i))}return c.a.createElement("div",{ref:t,className:x.a.gutter,style:{height:"".concat(e.height,"px")}},n)}),L=function(e){function t(e){var n;Object(a.a)(this,t),(n=Object(i.a)(this,Object(u.a)(t).call(this,e))).editorLineHeight=0,n.resizeObserver=void 0,n.textareaRef=c.a.createRef(),n.gutterRef=c.a.createRef(),n.highlighterRef=c.a.createRef(),n.syntaxHighlighterRef=c.a.createRef(),n.handleScroll=function(e){var t=e.nativeEvent.target,r=t.scrollTop,a=t.scrollLeft;n.setState({scrollTop:r,scrollLeft:a})},n.handleSourceChanged=function(e){n.props.onSourceChanged(e.target.value),n.setState({textLines:e.target.value.split("\n")})},n.updateCursorState=function(){if(n.textareaRef.current){var e=n.textareaRef.current;if(e.selectionStart===e.selectionEnd){var t=e.selectionStart,r=Object(v.b)(n.textareaRef.current.value,t);n.setState({currentLine:r})}else n.setState({currentLine:void 0});n.props.onSourcePositionChanged(e.selectionStart)}},n.handleSelect=function(e){n.updateCursorState()},n.handleKeyDown=function(e){n.updateCursorState()},n.handleKeyUp=function(e){n.updateCursorState()},n.handleMouseDown=function(e){if(n.textareaRef.current){var t=e.nativeEvent.offsetY+n.state.scrollTop;n.setState({currentLine:Math.min(n.state.textLines.length-1,Math.floor(t/n.editorLineHeight))})}},n.state={scrollTop:0,scrollLeft:0,currentLine:0,textLines:n.props.defaultValue.split("\n"),textareaDims:{width:0,height:0}};var r=getComputedStyle(document.documentElement).getPropertyValue("--code-window-line-height"),l=C(/^[ ]*([0-9]+)px$/,{height:1}).exec(r);if(!l)throw new Error("failed querying css var --code-window-line-height"+r);return n.editorLineHeight=parseInt(l.groups.height),n.resizeObserver=new p.a(function(e){var t=e[0];n.setState({textareaDims:{width:t.contentRect.width,height:t.contentRect.height}})}),n}return Object(o.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.textareaRef.current&&(h.a.watch(this.textareaRef.current),this.textareaRef.current.spellcheck=!1,this.textareaRef.current.selectionStart=this.props.defaultCursorOffset,this.textareaRef.current.selectionEnd=this.props.defaultCursorOffset,this.resizeObserver.observe(this.textareaRef.current),this.textareaRef.current.blur(),this.textareaRef.current.focus())}},{key:"componentWillUnmount",value:function(){this.textareaRef.current&&this.resizeObserver.unobserve(this.textareaRef.current)}},{key:"componentDidUpdate",value:function(e,t){if(this.textareaRef.current&&void 0!==this.props.errorCharOffset&&(this.textareaRef.current.setSelectionRange(this.props.errorCharOffset,this.props.errorCharOffset),this.textareaRef.current.blur(),this.textareaRef.current.focus()),t.scrollTop!==this.state.scrollTop){var n=this.state.scrollTop%this.editorLineHeight;this.gutterRef.current&&(this.gutterRef.current.scrollTop=n),this.highlighterRef.current&&(this.highlighterRef.current.scrollTop=n),this.syntaxHighlighterRef.current&&(this.syntaxHighlighterRef.current.scrollTop=n)}}},{key:"render",value:function(){var e=new Map;this.props.diagnostics.forEach(function(t){var n=t.loc,r=n.start.line-1,a=e.has(r)?e.get(r):[];a.push(n),e.set(r,a)});var t=Math.floor(this.state.scrollTop/this.editorLineHeight),n=0!==this.state.textareaDims.height?Math.ceil(this.state.textareaDims.height/this.editorLineHeight):1;return c.a.createElement("div",{className:x.a.layoutContainer},c.a.createElement("div",{className:"heading"},c.a.createElement("div",{className:"heading-pad"},"Assembly")),c.a.createElement("div",{className:x.a.editorContainer},c.a.createElement(j,{ref:this.gutterRef,startRow:t,numRows:n,numTextRows:this.state.textLines.length,currentLine:this.state.currentLine,height:this.state.textareaDims.height}),c.a.createElement("div",{className:x.a.textContainer,onMouseDown:this.handleMouseDown},c.a.createElement(O,{ref:this.highlighterRef,startRow:t,numRows:n,currentLine:this.state.currentLine,textLines:this.state.textLines,lineToErrors:e}),c.a.createElement("textarea",{className:m()(x.a.overlayCommon,x.a.textarea),defaultValue:this.props.defaultValue,wrap:"off",onKeyUp:this.handleKeyUp,onKeyDown:this.handleKeyDown,onSelect:this.handleSelect,onScroll:this.handleScroll,ref:this.textareaRef,onChange:this.handleSourceChanged}),c.a.createElement(_,{ref:this.syntaxHighlighterRef,startRow:t,fixedDims:this.state.textareaDims,scrollLeft:this.state.scrollLeft,numRows:n,textLines:this.state.textLines,sourceFileExt:this.props.sourceFileExt}))))}}]),t}(c.a.Component)},function(e,t,n){"use strict";var r=n(5),a=n(6),l=n(4),i=n(1),u=n(2),o=n(0),s=n.n(o),c=n(19),f=n.n(c),h=n(7),d=n.n(h),m=n(28),p=n.n(m);function v(e){return s.a.createElement("div",{className:p.a.buttonContainer},s.a.createElement("a",{title:"Close Help",href:"/",target:"_blank",className:p.a.close,onClick:function(t){t.preventDefault(),e.onClose()}}))}var g=n(10),y=n.n(g),b=n(13),k=document.getElementById("modal-root"),S=function(e){function t(e){var n;return Object(r.a)(this,t),(n=Object(l.a)(this,Object(i.a)(t).call(this,e))).el=void 0,n.el=document.createElement("div"),n}return Object(u.a)(t,e),Object(a.a)(t,[{key:"componentDidMount",value:function(){k.appendChild(this.el)}},{key:"componentWillUnmount",value:function(){k.removeChild(this.el)}},{key:"render",value:function(){return f.a.createPortal(this.props.children,this.el)}}]),t}(s.a.Component);function x(e){return s.a.createElement("pre",{className:y.a.asm},function(e){var t,n,r=e.split("\n");for(t=0;t<r.length&&0===r[t].trim().length;t++);for(n=r.length-1;n>=0&&0===r[n].trim().length;n--);return r.slice(t,n+1).join("\n")}(e.text))}var C=function(e){function t(){return Object(r.a)(this,t),Object(l.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(a.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{className:d()(y.a.helpContents,y.a.maxWidth)},s.a.createElement("div",{className:y.a.headingContainer},s.a.createElement("div",{className:y.a.closeButtonContainer},s.a.createElement(v,{onClose:this.props.onClose})),s.a.createElement("h1",null,"c64jasm online ")),s.a.createElement("p",null,s.a.createElement("a",{href:"https://nurpax.github.io/c64jasm/"},"c64jasm")," is a 6502 assembler written in JavaScript. You can run it either on the command line using Node or link it into a web app."),s.a.createElement("p",null,s.a.createElement("a",{href:"https://nurpax.github.io/c64jasm-browser/"},"c64jasm online")," is an interactive assembler demo site where you can write 6502 assembly with live error reporting and disassembly."),s.a.createElement("p",null,"Developed by Janne Hellsten, contact me through ",s.a.createElement("a",{href:"https://twitter.com/nurpax"},"@nurpax")),s.a.createElement("h3",null,"Example projects"),s.a.createElement("p",null,"C64jasm online supports loading source files from GitHub gists. Here's a list of example projects (click on the links to load):"),s.a.createElement("ul",null,s.a.createElement("li",null,s.a.createElement(function(e){return s.a.createElement(o.Fragment,null,s.a.createElement("a",{href:"".concat("/c64jasm-browser","/?gist_id=").concat(e.id)},e.text),"\xa0(",s.a.createElement("a",{href:"https://gist.github.com/nurpax/".concat(e.id)},"view on GitHub"),")")},{id:"4996160f290fa1b9470520d7be0ca25e",text:"Sine sprites"}))),s.a.createElement("h3",null,"Examples"),s.a.createElement("p",null,"Simple instructions and expressions:"),s.a.createElement(x,{text:"\n    lda #2+2  ; expression in an immediate field\n    sta $d020 ; set border color\n        "}),s.a.createElement("p",null,"Labels:"),s.a.createElement(x,{text:"\nentry: {\n    jsr func\n\n    ldx #8\nloop: ; label local to 'entry' scope\n    dex\n    bpl loop\n}\n\nfunc: {\n    ldx #7\nloop: ; label local to 'func' scope\n    sta buf, x   ; store to buf\n    dex\n    bpl loop\n    rts\n\nbuf: !fill 8, 0    ; 8 byte array\n}\n        "}),s.a.createElement("p",null,"Declaring and using variables:"),s.a.createElement(x,{text:"\n!let num_sprites = 4\n!let sprite_mask = (1<<num_sprites)-1\n\n    lda #sprite_mask\n    sta $d015 ; enable sprites 0-3\n        "}),s.a.createElement("p",null,"Conditional compilation and repetition:"),s.a.createElement(x,{text:"\n!let num_sprites = 4\n    lda #13  ; ptr to sprite data 1 (==address/64)\n    ldx #14  ; ptr to sprite data 2\n\n!for i in range(num_sprites) {\n    !if (i < 2) {\n        sta $07f8+i   ; sprite data 1 from A\n    } else {\n        stx $07f8+i   ; sprite data 2 from X\n    }\n}\n        "}),s.a.createElement("p",null,"Define and use macro macro:"),s.a.createElement(x,{text:"\n!macro set_border(color) {\n    lda #color\n    sta $d020\n}\n\n+set_border(13)  ; expand\n        "}),s.a.createElement("p",null,"A complete C64 program.  To compile a C64 ",s.a.createElement("code",null,".prg")," you need to insert a BASIC startup sequence at the beginning of your output ",s.a.createElement("code",null,".prg")," -- you can use the ",s.a.createElement("code",null,"c64::basic_entry")," macro to do this. The source code to these macros is shown in a later section."),s.a.createElement(x,{text:'\n!include "c64.asm"\n\n+c64::basic_start(entry)\n\nentry: {\n    lda #0\n}\n        '}),s.a.createElement("h3",null,"Built-in support macros"),s.a.createElement("p",null,"The c64jasm online site includes a small built in macro library.  You can find its source code below."),s.a.createElement("p",null,"The builtin ",s.a.createElement("code",null,"c64.asm")," contents:"),s.a.createElement(x,{text:b.a}))}}]),t}(s.a.Component),E=function(e){function t(){return Object(r.a)(this,t),Object(l.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(a.a)(t,[{key:"render",value:function(){var e=this.props.visible;return s.a.createElement(S,null,s.a.createElement("div",{className:d()(e?y.a.helpModalContainer:y.a.hidden)},s.a.createElement("div",{className:y.a.circleReveal},s.a.createElement(C,{onClose:this.props.onClose}))))}}]),t}(s.a.Component);t.a=E},function(e,t,n){e.exports=n(48)},function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),l=n(19),i=n.n(l),u=(n(53),n(39));i.a.render(a.a.createElement(u.a,null),document.getElementById("viewport_root"))},,,,,function(e,t,n){},,,,function(e,t,n){"use strict";(function(e,r){var a=n(32),l=n(33),i=n(34),u=n(14),o=n(15);Object.defineProperty(t,"__esModule",{value:!0}),t.assemble=t.platformC64=void 0;var s=n(35),c=n(18),f=n(64),h=n(36),d=n(37),m=n(38),p=n(70),v=n(71),g=n(73);function y(e){return{value:e,errors:!0,completeFirstPass:!1}}function b(e,t){return{value:e,errors:!1,completeFirstPass:t}}function k(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.some(function(e){return void 0!==e&&e.errors})}function S(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.every(function(e){return void 0!==e&&e.completeFirstPass})}t.platformC64={name:"c64",defaultStartPC:2049};var x=function(){function e(t,n){u(this,e),this.syms=new Map,this.parent=null,this.children=new Map,this.parent=t,this.name=n}return o(e,[{key:"newScope",value:function(t,n){var r=this.children.get(t);if(void 0!==r)return r;var a=new e(n,t);return this.children.set(t,a),a}},{key:"findSymbol",value:function(e){for(var t=this;null!==t;t=t.parent){var n=t.syms.get(e);if(void 0!==n)return n}}},{key:"findSymbolPath",value:function(e){if(1==e.length)return this.findSymbol(e[0]);for(var t=this;void 0==t.children.get(e[0]);)if(null==(t=t.parent))return;for(var n=0;n<e.length-1;n++)if(void 0==(t=t.children.get(e[n])))return;return t.syms.get(e[e.length-1])}},{key:"addSymbol",value:function(e,t,n){this.syms.set(e,Object.assign(Object.assign({},t),{seen:n}))}},{key:"updateSymbol",value:function(e,t,n){for(var r=this;null!==r;r=r.parent){if(void 0!==r.syms.get(e))return void r.syms.set(e,Object.assign(Object.assign({},t),{seen:n}))}}}]),e}(),C=function(){function e(){u(this,e),this.passCount=0,this.root=new x(null,""),this.curSymtab=this.root,this.anonScopeCount=0}return o(e,[{key:"startPass",value:function(e){this.curSymtab=this.root,this.anonScopeCount=0,this.passCount=e}},{key:"withAnonScope",value:function(e,t){var n="__anon_scope_".concat(this.anonScopeCount);this.anonScopeCount++,this.withLabelScope(n,e,t)}},{key:"withLabelScope",value:function(e,t,n){var r=this.curSymtab;this.curSymtab=this.curSymtab.newScope(e,n||r),t(),this.curSymtab=r}},{key:"findPath",value:function(e,t){return t?this.root.findSymbolPath(e):this.curSymtab.findSymbolPath(e)}},{key:"findQualifiedSym",value:function(e,t){return this.findPath(e,t)}},{key:"symbolSeen",value:function(e){var t=this.curSymtab.syms.get(e);return void 0!==t&&t.seen==this.passCount}},{key:"declareLabelSymbol",value:function(e,t){var n=e.name,r=e.loc,a=this.curSymtab.syms.get(n);if(void 0===a){var l={type:"label",data:b({addr:t,loc:r},!1)};return this.curSymtab.addSymbol(n,l,this.passCount),!1}if("label"!==a.type)throw new Error("ICE: declareLabelSymbol should be called only on labels");if(a.data.value.addr!==t){var i={type:"label",data:Object.assign(Object.assign({},a.data),{value:Object.assign(Object.assign({},a.data.value),{addr:t})})};return this.curSymtab.updateSymbol(n,i,this.passCount),!0}return this.curSymtab.updateSymbol(n,a,this.passCount),!1}},{key:"declareVar",value:function(e,t){this.curSymtab.addSymbol(e,{type:"var",data:t},this.passCount)}},{key:"updateVar",value:function(e,t){var n={type:"var",data:t};this.curSymtab.updateSymbol(e,n,this.passCount)}},{key:"declareSegment",value:function(e,t){this.curSymtab.addSymbol(e,{type:"segment",data:t},this.passCount)}},{key:"findMacro",value:function(e,t){var n=this.findPath(e,t);if(void 0!==n&&"macro"==n.type)return n}},{key:"declareMacro",value:function(e,t){this.curSymtab.addSymbol(e,{type:"macro",macro:t,declaredIn:this.curSymtab},this.passCount)}},{key:"dumpLabels",value:function(e){var t=[],n=function(e,n){if(void 0!==e){var r=[].concat(i(e),[n.name]);t.push({path:r,sym:n})}else t.push({path:[],sym:n})};n(void 0,this.root);for(var r=[];t.length>0;){var a=t.pop(),u=!0,o=!1,s=void 0;try{for(var c,f=a.sym.syms[Symbol.iterator]();!(u=(c=f.next()).done);u=!0){var h=c.value,d=l(h,2),m=d[0],p=d[1];"label"==p.type&&r.push({path:[].concat(i(a.path),[m]),addr:p.data.value.addr,size:0})}}catch(_){o=!0,s=_}finally{try{u||null==f.return||f.return()}finally{if(o)throw s}}var v=!0,g=!1,y=void 0;try{for(var b,k=a.sym.children[Symbol.iterator]();!(v=(b=k.next()).done);v=!0){var S=b.value,x=l(S,2),C=(x[0],x[1]);n(a.path,C)}}catch(_){g=!0,y=_}finally{try{v||null==k.return||k.return()}finally{if(g)throw y}}}var E=r.sort(function(e,t){return e.addr-t.addr}),w=E.length;if(w>0){for(var A=1;A<w;A++)E[A-1].size=E[A].addr-E[A-1].addr;var O=E[w-1];O.size=e-O.addr}return E.map(function(e){var t=e.path,n=e.addr,r=e.size;return{name:t.join("::"),addr:n,size:r}})}}]),e}();function E(e){return{source:e,start:{offset:0,line:0,column:0},end:{offset:0,line:0,column:0}}}function w(e){var t=typeof e;return"object"===t&&e instanceof Array?"array":t}function A(e){return"".concat(e.absolute?"::":"").concat(e.path.join("::"))}var O=function(e,t,n){var r=n(e.value,t.value),a=S(e,t);return b("boolean"==typeof r?r?1:0:r,a)},_=function(e,t){if(k(e))return y(0);var n=t(e.value);return b("boolean"==typeof n?n?1:0:n,e.completeFirstPass)},j="undefined"!==typeof e&&null!=e.versions&&null!=e.versions.node;var L=function(){function e(n){var r=this;u(this,e),this.parseCache=new v.default,this.pluginCache=new Map,this.includeStack=[],this.curSegment=new p.Segment(0,0,!1),this.pass=0,this.needPass=!1,this.scopes=new C,this.segments=[],this.errorList=[],this.warningList=[],this.outOfRangeBranches=[],this.debugInfo=new g.DebugInfoTracker,this.errors=function(){return r.formatErrors(r.errorList,"error")},this.warnings=function(){return r.formatErrors(r.warningList,"warning")},this.readFileSyncFunc=n.readFileSync,this.platform=n.platformOptions||t.platformC64}return o(e,[{key:"readFileSync",value:function(e,t){return this.readFileSyncFunc(e,t)}},{key:"prg",value:function(){var e=p.mergeSegments(this.segments),t=e.startPC,n=e.binary,a=255&t,l=t>>8&255;return r.concat([r.from([a,l]),n])}},{key:"parse",value:function(e,t){var n=this,r=void 0==t?E(e):t;return this.parseCache.parse(e,t,function(e,t){return n.guardedReadFileSync(e,r)})}},{key:"requirePlugin",value:function(e,t){var n=this.pluginCache.get(e);if(void 0!==n)return n;var r=this.makeSourceRelativePath(e);try{var a=void 0;if(j)a=f(c.resolve(r));else{var l=this.guardedReadFileSync("".concat(r,".js"),t);void 0!==l&&(a=function(e){var t={exports:{}};return Function("module",e.toString())(t),t.exports}(l))}if(void 0===a)return y(0);var i=b(a,!0);return this.pluginCache.set(e,i),i}catch(u){return this.addError("Plugin load failed: ".concat(r,".js: ").concat(u.message),t),y(0)}}},{key:"peekSourceStack",value:function(){var e=this.includeStack.length;return this.includeStack[e-1]}},{key:"pushSource",value:function(e){this.includeStack.push(e)}},{key:"popSource",value:function(){this.includeStack.pop()}},{key:"anyErrors",value:function(){return 0!==this.errorList.length}},{key:"formatErrors",value:function(e,t){var n=new Set(e.map(function(e){return JSON.stringify(e)}));return i(n).map(function(e){var n=JSON.parse(e),r=n.loc,a=n.msg,l="<unknown>:1:1: ".concat(t,": ").concat(a);return r&&(l="".concat(r.source,":").concat(r.start.line,":").concat(r.start.column,": ").concat(t,": ").concat(a)),{loc:r,msg:a,formatted:l}})}},{key:"addError",value:function(e,t){this.errorList.push({msg:e,loc:t})}},{key:"addWarning",value:function(e,t){this.warningList.push({msg:e,loc:t})}},{key:"startPass",value:function(e){this.pass=e,this.needPass=!1,this.errorList=[],this.scopes.startPass(e),this.outOfRangeBranches=[],this.debugInfo=new g.DebugInfoTracker,this.segments=[],this.curSegment=this.newSegment("default",this.platform.defaultStartPC,void 0,!0),this.scopes.declareSegment("default",this.curSegment)}},{key:"newSegment",value:function(e,t,n,r){for(var a=new p.Segment(t,n,r),i=1;i<this.segments.length;i++){var u=l(this.segments[i],2),o=u[0],s=u[1];this.segments[i][1].overlaps(a)&&this.addError("Segment '".concat(e,"' (range: ").concat(a.formatRange()," overlaps with an earlier segment '").concat(o,"' (range: ").concat(s.formatRange(),")"),this.lineLoc)}return this.segments.push([e,a]),a}},{key:"getPC",value:function(){return this.curSegment.currentPC()}},{key:"emitBasicHeader",value:function(){var e=this;this.emit(12),this.emit(8),this.emit(0),this.emit(0),this.emit(158);[1e4,1e3,100,10,1].forEach(function(t){2061>=t&&e.emit(48+2061/t%10)}),this.emit(0),this.emit(0),this.emit(0)}},{key:"emitBinary",value:function(e){var t=e.kwargs,n=this.evalKwargToString(t,"file",e.loc),r=l(n,2),a=r[0],i=(r[1],this.evalKwargToIntMaybe(t,"size",e.loc)),u=l(i,2),o=u[0],s=u[1],c=this.evalKwargToIntMaybe(t,"offset",e.loc),f=l(c,2),h=f[0],d=f[1],m=o,p=null!==h&&void 0!==h?h:b(0,!0),v=this.validateKwargs(t,["file","size","offset"]);if(!k(a,p,null!==m&&void 0!==m?m:void 0)&&v){p.completeFirstPass||this.addError("!binary 'offset' must evaluate to a value in the first pass",d),null===m||m.completeFirstPass||this.addError("!binary 'size' must evaluate to a value in the first pass",s);var g=this.makeSourceRelativePath(a.value),y=this.guardedReadFileSync(g,e.loc);if(void 0!==y){var S=null!==m?m.value:y.byteLength,x=y.slice(p.value,p.value+S),C=!0,E=!1,w=void 0;try{for(var A,O=x[Symbol.iterator]();!(C=(A=O.next()).done);C=!0){var _=A.value;this.emit(_)}}catch(j){E=!0,w=j}finally{try{C||null==O.return||O.return()}finally{if(E)throw w}}}}}},{key:"evalExprType",value:function(e,t,n){var r=this.evalExpr(e),a=r.errors,l=r.value,i=r.completeFirstPass;return a||typeof l===t?r:(this.addError("Expecting ".concat(n," to be '").concat(t,"' type, got '").concat(w(l),"'"),e.loc),{errors:!0,completeFirstPass:i,value:l})}},{key:"evalKwargType",value:function(e,t,n,r){var a=!0,l=!1,i=void 0;try{for(var u,o=e[Symbol.iterator]();!(a=(u=o.next()).done);a=!0){var s=u.value;if(s.name.name===t)return[this.evalExprType(s.value,n,"keyword arg '".concat(t,"'")),s.loc]}}catch(c){l=!0,i=c}finally{try{a||null==o.return||o.return()}finally{if(l)throw i}}return this.addError("Missing required keyword arg '".concat(t,"'"),r),[y(0),r]}},{key:"evalKwargTypeMaybe",value:function(e,t,n,r){var a=!0,l=!1,i=void 0;try{for(var u,o=e[Symbol.iterator]();!(a=(u=o.next()).done);a=!0){var s=u.value;if(s.name.name===t)return[this.evalExprType(s.value,n,"keyword arg '".concat(t,"'")),s.loc]}}catch(c){l=!0,i=c}finally{try{a||null==o.return||o.return()}finally{if(l)throw i}}return[null,r]}},{key:"validateKwargs",value:function(e,t){var n=!0,r={},a=!0,l=!1,i=void 0;try{for(var u,o=e[Symbol.iterator]();!(a=(u=o.next()).done);a=!0){var s=u.value,c=s.name.name;void 0===r[c]?r[c]=1:r[c]+=1,r[c]>1&&(this.addError("Duplicate keyword arg '".concat(c,"'"),s.loc),n=!1)}}catch(g){l=!0,i=g}finally{try{a||null==o.return||o.return()}finally{if(l)throw i}}var f=!0,h=!1,d=void 0;try{for(var m,p=e[Symbol.iterator]();!(f=(m=p.next()).done);f=!0){var v=m.value;t.indexOf(v.name.name)<0&&(this.addError("Unexpected keyword arg '".concat(v.name.name,"'"),v.loc),n=!1)}}catch(g){h=!0,d=g}finally{try{f||null==p.return||p.return()}finally{if(h)throw d}}return n}},{key:"evalExprToInt",value:function(e,t){return this.evalExprType(e,"number",t)}},{key:"evalExprToString",value:function(e,t){return this.evalExprType(e,"string",t)}},{key:"evalKwargToInt",value:function(e,t,n){return this.evalKwargType(e,t,"number",n)}},{key:"evalKwargToString",value:function(e,t,n){return this.evalKwargType(e,t,"string",n)}},{key:"evalKwargToIntMaybe",value:function(e,t,n){return this.evalKwargTypeMaybe(e,t,"number",n)}},{key:"evalExpr",value:function(e){var t=this;switch(e.type){case"binary":var n=this.evalExpr(e.left),r=this.evalExpr(e.right);if(k(n,r))return y(0);if(typeof n.value!==typeof r.value)return this.addError("Binary expression operands are expected to be of the same type.  Got: '".concat(w(n.value),"' (left), '").concat(w(r.value),"' (right)"),e.loc),y(0);if("string"!==typeof n.value&&"number"!==typeof n.value)return this.addError("Binary expression operands can only operator on numbers or strings.  Got: '".concat(w(n.value),"'"),e.loc),y(0);if("string"==typeof n.value){var u=["+","==","<","<=",">",">="];if(u.indexOf(e.op)<0)return this.addError("'".concat(e.op,"' operator is not supported for strings.  Valid operators for strings are: ").concat(u.join(", ")),e.loc),y(0)}switch(e.op){case"+":return O(n,r,function(e,t){return e+t});case"-":return O(n,r,function(e,t){return e-t});case"*":return O(n,r,function(e,t){return e*t});case"/":return O(n,r,function(e,t){return e/t});case"%":return O(n,r,function(e,t){return e%t});case"&":return O(n,r,function(e,t){return e&t});case"|":return O(n,r,function(e,t){return e|t});case"^":return O(n,r,function(e,t){return e^t});case"<<":return O(n,r,function(e,t){return e<<t});case">>":return O(n,r,function(e,t){return e>>t});case"==":return O(n,r,function(e,t){return e==t});case"!=":return O(n,r,function(e,t){return e!=t});case"<":return O(n,r,function(e,t){return e<t});case"<=":return O(n,r,function(e,t){return e<=t});case">":return O(n,r,function(e,t){return e>t});case">=":return O(n,r,function(e,t){return e>=t});case"&&":return O(n,r,function(e,t){return e&&t});case"||":return O(n,r,function(e,t){return e||t});default:throw new Error("Unhandled binary operator ".concat(e.op))}case"unary":var o=this.evalExprToInt(e.expr,"operand");if(o.errors)return o;switch(e.op){case"+":return _(o,function(e){return+e});case"-":return _(o,function(e){return-e});case"~":return _(o,function(e){return~e});default:throw new Error("Unhandled unary operator ".concat(e.op))}case"literal":return b(e.lit,!0);case"array":var s=e.list.map(function(e){return t.evalExpr(e)});return{value:s.map(function(e){return e.value}),errors:k.apply(void 0,i(s)),completeFirstPass:S.apply(void 0,i(s))};case"object":var c=e.props.map(function(e){var n=t.evalExpr(e.val);return["literal"===e.key.type?e.key.lit:e.key.name,n]});return{value:c.reduce(function(e,t){var n=l(t,2),r=n[0],i=n[1];return Object.assign(Object.assign({},e),a({},r,i.value))},{}),errors:k.apply(void 0,i(c.map(function(e){var t=l(e,2);t[0];return t[1]}))),completeFirstPass:S.apply(void 0,i(c.map(function(e){var t=l(e,2);t[0];return t[1]})))};case"ident":throw new Error("should not see an ident here -- if you do, it is probably a wrong type node in parser");case"qualified-ident":var f=this.scopes.findQualifiedSym(e.path,e.absolute);if(void 0==f)return this.pass>=1?(this.addError("Undefined symbol '".concat(A(e),"'"),e.loc),y(0)):(this.needPass=!0,b(0,!1));switch(f.type){case"label":return{errors:f.data.errors,value:f.data.value.addr,completeFirstPass:f.seen==this.pass};case"var":return f.seen<this.pass&&this.addError("Undeclared variable '".concat(A(e),"'"),e.loc),f.data;case"macro":return this.addError("Must have a label or a variable identifier here, got macro name",e.loc),y(0)}break;case"member":var h=this.evalExpr(e.object);if(k(h))return y(0);var d=h.value;if(void 0==d)return this.addError("Cannot access properties of an undefined object",e.loc),y(0);var m=function(e,n){return e in d||(t.addError("Property '".concat(e,"' does not exist in object"),n),!1)},p=function(e,n){if("ident"!==e.property.type)t.addError("".concat(n," property must be a string, got ").concat(w(e.property.type)),e.loc);else if(m(e.property.name,e.property.loc))return b(d[e.property.name],h.completeFirstPass);return y(0)};if(d instanceof Array){if(!e.computed)return p(e,"Array");var v=this.evalExprToInt(e.property,"array index"),g=v.errors,x=v.value,C=v.completeFirstPass;return g?y(0):x in d?b(d[x],h.completeFirstPass&&C):(this.addError("Out of bounds array index ".concat(x),e.property.loc),y(0))}if("object"==typeof d){if(e.computed){var E=this.evalExpr(e.property),j=E.errors,L=E.value,I=E.completeFirstPass;return j?y(0):"string"!==typeof L&&"number"!==typeof L?(this.addError("Object property must be a string or an integer, got ".concat(w(L)),e.loc),y(0)):m(L,e.property.loc)?b(d[L],I&&h.completeFirstPass):y(0)}return p(e,"Object")}return 0!==this.pass?(h.errors||(e.computed?this.addError("Cannot use []-operator on non-array/object values",e.loc):this.addError("Cannot use the dot-operator on non-object values",e.loc)),y(0)):b(0,!1);case"callfunc":var P=this.evalExpr(e.callee),R=e.args.map(function(e){return t.evalExpr(e)});if(P.errors)return y(0);if("function"!==typeof P.value)return this.addError("Callee must be a function type.  Got '".concat(w(P),"'"),e.loc),y(0);if(k.apply(void 0,i(R)))return y(0);try{var D=P.completeFirstPass&&S.apply(void 0,i(R));return b(P.value.apply(P,i(R.map(function(e){return e.value}))),D)}catch(F){return"qualified-ident"==e.callee.type?this.addError("Call to '".concat(A(e.callee),"' failed with an error: ").concat(F.message),e.loc):this.addError("Plugin call failed with an error: ".concat(F.message),e.loc),y(0)}case"getcurpc":return b(this.getPC(),!0)}throw new Error("should be unreachable?")}},{key:"topLevelSourceLoc",value:function(){return E(this.includeStack[0])}},{key:"emit",value:function(e){var t=this.curSegment.emit(e);void 0!==t&&this.addError(t,this.lineLoc)}},{key:"emit16",value:function(e){this.emit(255&e),this.emit(e>>8&255)}},{key:"checkSingle",value:function(e){return null!==e&&(this.emit(e),!0)}},{key:"checkImm",value:function(e,t){if(null===t||null===e)return!1;var n=this.evalExprToInt(e,"immediate");return k(n)||(this.emit(t),this.emit(n.value)),!0}},{key:"checkAbs",value:function(e,t,n){if(null===t||null===e)return!1;var r=this.evalExprToInt(e,"absolute address");if(k(r))return!0;var a=r.value;if(8===n){if(a<0||a>=1<<n)return!1;this.emit(t),this.emit(a)}else this.emit(t),this.emit16(a);return!0}},{key:"checkBranch",value:function(e,t){if(null===t||null===e)return!1;var n=this.evalExpr(e);if(k(n))return!0;if("number"!==typeof n.value)return this.addError("Expecting branch label to evaluate to integer, got ".concat(w(n.value)),e.loc),!0;var r=n.value-this.getPC()-2;return this.emit(t),(r>127||r<-128)&&this.outOfRangeBranches.push({loc:e.loc,offset:r}),this.emit(255&r),!0}},{key:"handleSetPC",value:function(e){var t=this.evalExprToInt(e,"pc");if(!k(t)){var n=t.value;if(!t.completeFirstPass)return void this.addError("Value for new program counter must evaluate to a value in the first pass",e.loc);!this.curSegment.empty()&&this.curSegment.currentPC()>n&&this.addError("Cannot set program counter to a smaller value than current (current: $".concat(d.toHex16(this.curSegment.currentPC()),", trying to set $").concat(d.toHex16(n),")"),e.loc);var r=this.curSegment.setCurrentPC(n);void 0!==r&&this.addError(r,e.loc)}}},{key:"guardedReadFileSync",value:function(e,t){try{return this.readFileSync(e)}catch(n){return void this.addError("Couldn't open file '".concat(e,"'"),t)}}},{key:"fileInclude",value:function(e){var t=this.evalExprToString(e.filename,"!include filename");if(!k(t)){var n=t.value,r=this.makeSourceRelativePath(n);this.pushSource(r),this.assemble(r,e.loc),this.popSource()}}},{key:"fillBytes",value:function(e){var t=this.evalExprToInt(e.numBytes,"!fill num_bytes"),n=this.evalExprToInt(e.fillValue,"!fill value");if(!k(t,n)){var r=n.value;if(r<0||r>=256)this.addError("!fill value to repeat must be in 8-bit range, '".concat(r,"' given"),e.fillValue.loc);else{var a=t.value;if(a<0)this.addError("!fill repeat count must be >= 0, got ".concat(a),e.numBytes.loc);else for(var l=0;l<a;l++)this.emit(r)}}}},{key:"alignBytes",value:function(e){var t=this.evalExprToInt(e.alignBytes,"alignment");if(!k(t)){var n=t.value;if(n<1)this.addError("Alignment must be a positive integer, ".concat(n," given"),e.alignBytes.loc);else if(0==(n&n-1))for(;0!=(this.getPC()&n-1);)this.emit(0);else this.addError("Alignment must be a power of two, ".concat(n," given"),e.loc)}}},{key:"withAnonScope",value:function(e,t,n){if(null!==e)return this.withLabelScope(e,t,n);this.scopes.withAnonScope(t,n)}},{key:"withLabelScope",value:function(e,t,n){this.scopes.withLabelScope(e,t)}},{key:"emit8or16",value:function(e,t){8!=t?this.emit16(e):this.emit(e)}},{key:"emitData",value:function(e,t){for(var n=0;n<e.length;n++){var r=this.evalExpr(e[n]);if(!k(r)){var a=r.value;if("number"==typeof a)this.emit8or16(a,t);else if(a instanceof Array){for(var l=-1,i=0;i<a.length;i++){var u="number"===typeof a[i]?a[i]:0;l="number"!==typeof a[i]&&-1===l?i:l,this.emit8or16(u,t)}-1!=l&&this.addError("Cannot emit non-numeric values.  First non-number at index ".concat(l),e[n].loc)}else this.addError("Only literal (int constants) or array types can be emitted.  Got ".concat(w(a)),e[n].loc)}}}},{key:"makeFunction",value:function(e,t){var n=this;return function(){for(var t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];return e.apply(null,[{readFileSync:function(e){return n.readFileSync(e)},resolveRelative:function(e){return n.makeSourceRelativePath(e)}}].concat(r))}}},{key:"bindFunction",value:function(e,t,n){this.scopes.declareVar(e.name,b(this.makeFunction(t,n),!0))}},{key:"bindPlugin",value:function(e,t){var n=e.moduleName;if(k(t))this.scopes.declareVar(n.name,y(0));else{var r=t.value;if("function"==typeof r&&this.bindFunction(n,r,e.loc),"object"==typeof r){var a={},l=Object.keys(r);for(var i in l){var u=l[i],o=r[u];a[u]="function"===typeof o?this.makeFunction(o,e.loc):o}this.scopes.declareVar(n.name,b(a,!0))}}}},{key:"checkDirectives",value:function(e,t){var n=this;switch(e.type){case"data":this.emitData(e.values,e.dataSize===m.DataSize.Byte?8:16);break;case"fill":this.fillBytes(e);break;case"align":this.alignBytes(e);break;case"setpc":this.handleSetPC(e.pc);break;case"binary":this.emitBinary(e);break;case"include":this.fileInclude(e);break;case"error":var r=this.evalExprToString(e.error,"error message");if(!k(r))return void this.addError(r.value,e.loc);break;case"if":var a=e.cases,i=e.elseBranch,u=function(e){var r,i=l(a[e],2),u=i[0],o=i[1],s=n.evalExpr(u);if(!k(s)&&(!0===(r=s.value)||0!=r))return{v:n.withAnonScope(t,function(){n.assembleLines(o)})}};for(var o in a){var s=u(o);if("object"===typeof s)return s.v}return this.withAnonScope(t,function(){n.assembleLines(i)});case"for":var c=function(){var r=e.index,a=e.list,l=e.body,i=(e.loc,n.evalExpr(a));if(k(i))return{v:void 0};var u=i.value;if(!(u instanceof Array))return n.addError("for-loop range must be an array expression (e.g., a range() or an array)",a.loc),{v:void 0};for(var o=function(e){var a=null;null!==t&&(a="".concat(t,"__").concat(e)),n.withAnonScope(a,function(){return n.scopes.declareVar(r.name,b(u[e],i.completeFirstPass)),n.assembleLines(l)})},s=0;s<u.length;s++)o(s);return"break"}();switch(c){case"break":break;default:if("object"===typeof c)return c.v}case"macro":var f=e.name;e.args,e.body;if(void 0!==this.scopes.findQualifiedSym([f.name],!1)&&this.scopes.symbolSeen(f.name))return void this.addError("Symbol '".concat(f.name,"' already defined"),f.loc);this.scopes.declareMacro(f.name,e);break;case"callmacro":var h=e.name,d=e.args,p=this.scopes.findMacro(h.path,h.absolute),v=d.map(function(e){return n.evalExpr(e)});if(void 0==p||p.seen<this.pass)return void this.addError("Undefined macro '".concat(A(h),"'"),h.loc);var g=p.macro,y=p.declaredIn;if(g.args.length!==d.length)return void this.addError("Macro '".concat(A(h),"' declared with ").concat(g.args.length," args but called here with ").concat(d.length),h.loc);this.withAnonScope(t,function(){for(var e=0;e<v.length;e++){var t=g.args[e].ident.name;n.scopes.declareVar(t,v[e])}n.assembleLines(g.body)},y);break;case"let":var S=e.name,x=this.scopes.findQualifiedSym([S.name],!1),C=this.evalExpr(e.value);if(void 0!==x&&this.scopes.symbolSeen(S.name))return void this.addError("Variable '".concat(S.name,"' already defined"),e.loc);this.scopes.declareVar(S.name,C);break;case"assign":var E=e.name;if(1!==e.name.path.length||e.name.absolute)return void this.addError("Only symbol names in the current (or owning) scopes are allowed for assignment",e.loc);var w=this.scopes.findQualifiedSym(e.name.path,e.name.absolute);if(void 0==w)return void this.addError("Assignment to undeclared variable '".concat(A(E),"'"),e.loc);if("var"!==w.type)return void this.addError("Assignment to symbol '".concat(A(E),"' that is not a variable.  Its type is '").concat(w.type,"'"),e.loc);var O=this.evalExpr(e.value);this.scopes.updateVar(E.path[0],O);break;case"statement-expr":this.evalExpr(e.expr);break;case"load-plugin":var _=this.evalExprToString(e.filename,"plugin filename");if(k(_))return;var j=this.requirePlugin(_.value,e.loc);this.bindPlugin(e,j);break;case"filescope":return void this.addError("The !filescope directive is only allowed as the first directive in a source file",e.loc);case"declare-segment":var L=e.name,I=e.kwargs,P=e.loc,R=this.scopes.findQualifiedSym([L.name],!1),D=this.evalKwargToInt(I,"start",P),F=l(D,2),T=F[0],B=F[1],M=this.evalKwargToInt(I,"end",P),N=l(M,2),H=N[0],U=N[1];if(void 0!==R&&this.scopes.symbolSeen(L.name))return void this.addError("Segment '".concat(L.name,"' already defined"),e.loc);var $=this.validateKwargs(I,["start","end"]);if(k(T)||k(H)||!$)return;var G=!1;if(T.completeFirstPass||(this.addError("!segment 'start' must evaluate to a value in the first pass",B),G=!0),H.completeFirstPass||(this.addError("!segment 'end' must evaluate to a value in the first pass",U),G=!0),G)return;var K=this.newSegment(L.name,T.value,H.value,!1);return void this.scopes.declareSegment(L.name,K);case"use-segment":var V=e.name,W=e.loc,X=this.scopes.findQualifiedSym(V.path,V.absolute);if(void 0===X)return void this.addError("Use of undeclared segment '".concat(A(V),"'"),W);if("segment"!==X.type)return void this.addError("Use of segment '".concat(A(V),"' that is not a declared segment.  Its type is '").concat(X.type,"'"),W);this.curSegment=X.data;break;default:return void this.addError("unknown directive ".concat(e.type),e.loc)}}},{key:"assembleLines",value:function(e){var t=this;if(null!==e&&0!=e.length&&0!=e.length){for(var n=function(e){for(var n=0;n<e.length;n++)t.debugInfo.startLine(e[n].loc,t.getPC()),t.assembleLine(e[n]),t.debugInfo.endLine(t.getPC())},r=0;r<e.length;){var a=e[r],l=a.label,i=a.stmt,u=a.scopedStmts;if(null!=l||null!=i||null!=u)break;r++}if(!(r>=e.length)){var o=e[r];return null!=o.stmt&&"filescope"==o.stmt.type?(this.checkAndDeclareLabel(o.stmt.name),this.withLabelScope(o.stmt.name.name,function(){return n(e.slice(r+1))})):n(e)}}}},{key:"checkAndDeclareLabel",value:function(e){this.scopes.symbolSeen(e.name)?this.addError("Symbol '".concat(e.name,"' already defined"),e.loc):this.scopes.declareLabelSymbol(e,this.getPC())&&(this.needPass=!0)}},{key:"assembleLine",value:function(e){var t=this;if(this.lineLoc=e.loc,null!=e.label||null!=e.stmt||null!=e.scopedStmts){null!==e.label&&this.checkAndDeclareLabel(e.label);var n=e.scopedStmts;if(null==n){if(null!==e.stmt)if("insn"===e.stmt.type){var r=e.stmt.insn,a=s.default[r.mnemonic.toUpperCase()];void 0!==a?function(e){var n=t.getPC();e();var r=t.getPC();t.debugInfo.markAsInstruction(n,r)}(function(){null===r.imm&&null===r.abs&&null===r.absx&&null===r.absy&&null===r.absind&&t.checkSingle(a[10])||t.checkImm(r.imm,a[0])||t.checkAbs(r.abs,a[1],8)||t.checkAbs(r.absx,a[2],8)||t.checkAbs(r.absy,a[3],8)||t.checkAbs(r.absx,a[5],16)||t.checkAbs(r.absy,a[6],16)||t.checkAbs(r.absind,a[7],16)||t.checkAbs(r.indx,a[8],8)||t.checkAbs(r.indy,a[9],8)||t.checkAbs(r.abs,a[4],16)||t.checkBranch(r.abs,a[11])||t.addError("Couldn't encode instruction '".concat(r.mnemonic,"'"),e.loc)}):this.addError("Unknown mnemonic '".concat(r.mnemonic,"'"),e.loc)}else this.checkDirectives(e.stmt,null==e.label?null:e.label.name)}else{if(!e.label)throw new Error("ICE: line.label cannot be undefined");this.withLabelScope(e.label.name,function(){t.assembleLines(n)})}}}},{key:"makeSourceRelativePath",value:function(e){var t=this.peekSourceStack();return c.join(c.dirname(t),e)}},{key:"assemble",value:function(e,t){try{var n=this.parse(e,t);void 0!==n&&this.assembleLines(n)}catch(r){if(!("name"in r&&"SyntaxError"==r.name)){if("name"in r&&"semantic"==r.name)return;throw r}this.addError("Syntax error: ".concat(r.message),Object.assign(Object.assign({},r.location),{source:this.peekSourceStack()}))}}},{key:"_requireType",value:function(e,t){if(typeof e==t)return e;this.addError("Expecting a ".concat(t," value, got ").concat(w(e)),e.loc)}},{key:"requireString",value:function(e){return this._requireType(e,"string")}},{key:"requireNumber",value:function(e){return this._requireType(e,"number")}},{key:"registerPlugins",value:function(){var e=this,t=function(t,n){e.scopes.declareVar(t,b(n,!1))};t("loadJson",function(){var t=e.requireString(arguments.length<=0?void 0:arguments[0]),n=e.makeSourceRelativePath(t);return JSON.parse(e.readFileSync(n,"utf-8"))}),t("range",function(){var t=0,n=void 0;if(1==arguments.length)n=e.requireNumber(arguments.length<=0?void 0:arguments[0]);else{if(2!=arguments.length)throw new Error("Invalid number of args to 'range'.  Expecting 1 or 2 arguments.");t=e.requireNumber(arguments.length<=0?void 0:arguments[0]),n=e.requireNumber(arguments.length<=1?void 0:arguments[1])}if(n==t)return[];if(n<t)throw new Error("range 'end' must be larger or equal to 'start'");return Array(n-t).fill(null).map(function(e,n){return n+t})});var n={},r=!0,a=!1,l=void 0;try{for(var i,u=Object.getOwnPropertyNames(Math)[Symbol.iterator]();!(r=(i=u.next()).done);r=!0){var o=i.value,s=Math;n[o]="random"===o?function(){throw new Error("Math.random() not allowed as it will lead to non-reproducible builds")}:s[o]}}catch(c){a=!0,l=c}finally{try{r||null==u.return||u.return()}finally{if(a)throw l}}t("Math",n)}},{key:"dumpLabels",value:function(){return this.scopes.dumpLabels(this.getPC())}}]),e}(),I={readFileSync:h.readFileSync};t.assemble=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:I,n=new L(t);n.pushSource(e);var a=0;do{if(n.startPass(a),n.registerPlugins(),n.assemble(e,E(e)),a>0&&n.anyErrors())return{prg:r.from([]),labels:[],debugInfo:void 0,errors:n.errors(),warnings:n.warnings()};if(a>10)return void console.error("Exceeded max pass limit ".concat(10));if(a+=1,!n.needPass&&0!=n.outOfRangeBranches.length){for(var l in n.outOfRangeBranches){var i=n.outOfRangeBranches[l];n.addError("Branch target too far (must fit in signed 8-bit range, got ".concat(i.offset,")"),i.loc)}break}}while(n.needPass);return n.popSource(),{prg:n.prg(),errors:n.errors(),warnings:n.warnings(),labels:n.dumpLabels(),debugInfo:n.debugInfo}}}).call(this,n(31),n(23).Buffer)},,,,,,,,,,,,function(e,t){function n(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id=69},function(e,t,n){"use strict";(function(e){var r=n(33),a=n(14),l=n(15);Object.defineProperty(t,"__esModule",{value:!0}),t.mergeSegments=t.Segment=void 0;var i=n(37),u=function(){function e(t,n,r){a(this,e),this.start=t,this.end=n,this.inferStart=r,this.blocks=[{start:t,binary:[]}],this.curBlock=this.blocks[0]}return l(e,[{key:"setCurrentPC",value:function(e){var t=void 0;if(this.inferStart&&1===this.blocks.length&&0===this.blocks[0].binary.length)this.start=e;else{var n=void 0!==this.end?"$".concat(i.toHex16(this.end)):"",r="Segment address range: $".concat(i.toHex16(this.start),"-").concat(n);e<this.start?t="".concat(r,".  Cannot set program counter to a lower address $").concat(i.toHex16(e),"."):void 0!==this.end&&e>this.end?t="".concat(r,".  Trying to set program counter to $").concat(i.toHex16(e)," -- it is past segment end ").concat(n,"."):1===this.blocks.length&&0===this.blocks[0].binary.length&&(this.start=e)}var a={start:e,binary:[]},l=this.blocks.push(a);return this.curBlock=this.blocks[l-1],t}},{key:"empty",value:function(){return this.blocks.every(function(e){return 0===e.binary.length})}},{key:"currentPC",value:function(){return this.curBlock.start+this.curBlock.binary.length}},{key:"emit",value:function(e){if(this.currentPC()<this.start||void 0!==this.end&&this.currentPC()>this.end){var t=void 0!==this.end?"$".concat(i.toHex16(this.end)):"",n=void 0!==this.start?"$".concat(i.toHex16(this.start)):"";return"Segment overflow at $".concat(i.toHex16(this.currentPC()),".  Segment address range: ").concat(n,"-").concat(t)}this.curBlock.binary.push(e)}},{key:"formatRange",value:function(){var e=void 0!==this.end?"$".concat(i.toHex16(this.end)):"",t=void 0!==this.start?"$".concat(i.toHex16(this.start)):"";return"".concat(t,"-").concat(e)}},{key:"overlaps",value:function(e){var t=this.start,n=e.start,r=void 0!==this.end?this.end:this.currentPC(),a=void 0!==e.end?e.end:e.currentPC();return t<n?n<=r:a>=t}}]),e}();t.Segment=u,t.mergeSegments=function(t){var n=function(e){var t=[],n=!0,a=!1,l=void 0;try{for(var i,o=e[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var s=i.value,c=r(s,2),f=c[0],h=c[1],d=h.blocks.filter(function(e){return 0!==e.binary.length});if(0!==d.length){var m=new u(h.start,h.end,h.inferStart);m.blocks=d,m.curBlock=d[d.length-1],t.push([f,m])}}}catch(p){a=!0,l=p}finally{try{n||null==o.return||o.return()}finally{if(a)throw l}}return t}(t);if(0===n.length)return{startPC:0,binary:e.from([])};for(var a=r(n[0],2),l=(a[0],a[1]),i=l.blocks[0],o=l.blocks[l.blocks.length-1],s=i.start,c=o.start+o.binary.length,f=1;f<n.length;f++){var h=n[f][1],d=h.blocks[0].start,m=h.curBlock.start+h.curBlock.binary.length;s=Math.min(d,s),c=Math.max(m,c)}var p=e.alloc(c,0),v=!0,g=!1,y=void 0;try{for(var b,k=n[Symbol.iterator]();!(v=(b=k.next()).done);v=!0){var S=b.value,x=r(S,2),C=(x[0],x[1]),E=!0,w=!1,A=void 0;try{for(var O,_=C.blocks[Symbol.iterator]();!(E=(O=_.next()).done);E=!0){var j=O.value;e.from(j.binary).copy(p,j.start)}}catch(L){w=!0,A=L}finally{try{E||null==_.return||_.return()}finally{if(w)throw A}}}}catch(L){g=!0,y=L}finally{try{v||null==k.return||k.return()}finally{if(g)throw y}}return{startPC:s,binary:p.slice(s)}}}).call(this,n(23).Buffer)},function(e,t,n){"use strict";var r=n(14),a=n(15);Object.defineProperty(t,"__esModule",{value:!0});var l=n(72),i=function(){function e(){r(this,e),this.filenameToSource=new Map,this.sourceToAst=new Map}return a(e,[{key:"getFileContents",value:function(e,t,n){var r=this.filenameToSource.get(e);if(void 0!==r)return r;var a=n(e,t);return this.filenameToSource.set(e,a),a}},{key:"parse",value:function(e,t,n){var r=this.getFileContents(e,t,n);if(void 0!==r){var a=this.sourceToAst.get(e);if(void 0!==a)return a;var i=l.parse(r.toString(),{source:e});return this.sourceToAst.set(e,i),i}}}]),e}();t.default=i},function(e,t,n){"use strict";var r=n(32),a=n(34);function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(n,!0).forEach(function(t){r(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function u(e,t,n,r){this.message=e,this.expected=t,this.found=n,this.location=r,this.name="SyntaxError","function"===typeof Error.captureStackTrace&&Error.captureStackTrace(this,u)}!function(e,t){function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n}(u,Error),u.buildMessage=function(e,t){var n={literal:function(e){return'"'+a(e.text)+'"'},class:function(e){var t,n="";for(t=0;t<e.parts.length;t++)n+=e.parts[t]instanceof Array?l(e.parts[t][0])+"-"+l(e.parts[t][1]):l(e.parts[t]);return"["+(e.inverted?"^":"")+n+"]"},any:function(e){return"any character"},end:function(e){return"end of input"},other:function(e){return e.description}};function r(e){return e.charCodeAt(0).toString(16).toUpperCase()}function a(e){return e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(e){return"\\x0"+r(e)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(e){return"\\x"+r(e)})}function l(e){return e.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(e){return"\\x0"+r(e)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(e){return"\\x"+r(e)})}return"Expected "+function(e){var t,r,a,l=new Array(e.length);for(t=0;t<e.length;t++)l[t]=(a=e[t],n[a.type](a));if(l.sort(),l.length>0){for(t=1,r=1;t<l.length;t++)l[t-1]!==l[t]&&(l[r]=l[t],r++);l.length=r}switch(l.length){case 1:return l[0];case 2:return l[0]+" or "+l[1];default:return l.slice(0,-1).join(", ")+", or "+l[l.length-1]}}(e)+" but "+function(e){return e?'"'+a(e)+'"':"end of input"}(t)+" found."},e.exports={SyntaxError:u,parse:function(e,t){t=void 0!==t?t:{};var r,l={},o={statements:ta},s=ta,c=function(e,t){return Ol(e,t,1)},f=function(e){return e},h=function(e,t){return El.mkAsmLine(e,null,t,_l())},d=function(e,t){return El.mkAsmLine(e,t,null,_l())},m=function(e){return El.mkAsmLine(e,null,null,_l())},p=function(e){return El.mkAsmLine(null,e,null,_l())},v=function(e){return El.mkAsmLine(null,e,null,_l())},g=function(){return El.mkAsmLine(null,null,null,_l())},y=function(e){return e},b=function(e){return El.mkInsn(e,_l())},k=":",S=Yr(":",!1),x=function(e){return El.mkLabel(e,_l())},C=function(e){return El.mkSetPC(e,_l())},E=function(e,t){var n="byte"==e?El.DataSize.Byte:El.DataSize.Word;return El.mkData(n,t,_l())},w=function(e,t){return El.mkFill(e,t,_l())},A=function(e){return El.mkInclude(e,_l())},O=function(e,t){function n(e,t){return El.mkKwarg(El.mkIdent(e,t.loc),t,t.loc)}var r=null,a=null;return null!==t?(r=t[1],a=t[3],El.mkBinary([n("file",e),n("size",r),n("offset",a)],_l())):El.mkBinary([n("file",e)],_l())},_=function(e){return El.mkBinary(e,_l())},j=function(e,t,n,r){var l=[e].concat(a(n.map(function(e){return e.condition}))),i=[t].concat(a(n.map(function(e){return e.trueBranch}))),u=l.map(function(e,t){return[e,i[t]]});return El.mkIfElse(u,r,_l())},L="in",I=Yr("in",!1),P=function(e,t,n){return El.mkFor(e,t,n,_l())},R=function(e,t,n){return El.mkMacro(e,t,n,_l())},D="+",F=Yr("+",!1),T=function(e,t){return El.mkCallMacro(e,t,_l())},B=function(e,t){return El.mkLet(e,t,_l())},M="as",N=Yr("as",!1),H=function(e,t){return El.mkLoadPlugin(e,t,_l())},U=function(e){return El.mkError(e,_l())},$=function(e){return El.mkAlign(e,_l())},G=function(e){return El.mkFilescope(e,_l())},K=function(e,t){return El.mkDeclareSegment(e,t,_l())},V=function(e){return El.mkUseSegment(e,_l())},W=function(e){return e},X=function(e,t){return{condition:e,trueBranch:t}},Y=function(e){return e},z='"',q=Yr('"',!1),Q=function(e){return El.mkLiteral(e.join(""),_l())},Z={type:"any"},J=function(e){return e},ee=function(e){return El.mkIdent(e,_l())},te=function(e,t){return Ol(e,t,1)},ne=function(e){return El.mkMacroArg(e)},re=function(e,t){return El.mkKwarg(e,t,_l())},ae=function(e,t){return Al(e,t,null,_l())},le="x",ie=Yr("x",!1),ue=function(e,t){return function(e,t,n){return i({},wl,{mnemonic:e,indx:t,loc:n})}(e,t,_l())},oe="y",se=Yr("y",!1),ce=function(e,t){return function(e,t,n){return i({},wl,{mnemonic:e,indy:t,loc:n})}(e,t,_l())},fe=function(e,t){return function(e,t,n){return i({},wl,{mnemonic:e,absind:t,loc:n})}(e,t,_l())},he=function(e,t,n){return"x"===n?function(e,t,n){return i({},wl,{mnemonic:e,absx:t,loc:n})}(e,t,_l()):function(e,t,n){return i({},wl,{mnemonic:e,absy:t,loc:n})}(e,t,_l())},de=function(e,t){return Al(e,null,t,_l())},me=function(e){return Al(e,null,null,_l())},pe=function(){return Xr()},ve=function(e){return e},ge="::",ye=Yr("::",!1),be=function(e,t){return El.mkScopeQualifiedIdent(Ol(e,t,1),!1,_l())},ke=function(e,t){return El.mkScopeQualifiedIdent(Ol(e,t,1),!0,_l())},Se=function(e){return El.mkIdent(e,_l())},xe=function(e){return e},Ce="#",Ee=Yr("#",!1),we=function(e,t){if(null!==e){if("lo"===e)return El.mkBinaryOp("&",t,El.mkLiteral(255,_l(),_l()));var n=El.mkLiteral(8,_l()),r=El.mkLiteral(255,_l());return El.mkBinaryOp("&",El.mkBinaryOp(">>",t,n,_l()),r,_l())}return t},Ae=function(){return"lo"},Oe=function(){return"hi"},_e=function(e){return e},je=function(e,t){return t.reduce(function(e,t){return El.mkBinaryOp(t[0],e,t[1],_l())},e)},Le=function(e,t){return El.mkUnary(e,t,_l())},Ie=function(e){return e},Pe=function(e,t){return{property:t,computed:!0}},Re=function(e,t){return{property:El.mkIdent(t,_l()),computed:!1}},De=function(e,t){return t.reduce(function(e,t){return El.mkMember(e,t.property,t.computed,_l())},e)},Fe=function(e,t){return El.mkCallFunc(e,t,_l())},Te=function(e){return El.mkLiteral(e,_l())},Be=function(e){return e},Me=function(e){return e},Ne="$",He=Yr("$",!1),Ue=function(e){return parseInt(e,16)},$e="%",Ge=Yr("%",!1),Ke=function(e){return parseInt(e,2)},Ve=function(e){return e},We=function(){return El.mkGetCurPC(_l())},Xe=".",Ye=Yr(".",!1),ze=function(){return parseFloat(Xr())},qe="0",Qe=Yr("0",!1),Ze=/^[1-9]/,Je=zr([["1","9"]],!1,!1),et="e",tt=Yr("e",!0),nt=/^[+\-]/,rt=zr(["+","-"],!1,!1),at=function(e){return El.mkExprArray(null===e?[]:e,_l())},lt=function(){return El.mkExprObject([],_l())},it=function(e){return El.mkExprObject(e,_l())},ut=function(e,t){return Ol(e,t,2)},ot=function(e,t){return{key:e,val:t}},st=function(e){return El.mkStmtExpr(e,_l())},ct=function(e,t){return El.mkAssign(e,t,_l())},ft=/^[a-zA-Z_]/,ht=zr([["a","z"],["A","Z"],"_"],!1,!1),dt=/^[a-zA-Z_0-9]/,mt=zr([["a","z"],["A","Z"],"_",["0","9"]],!1,!1),pt=/^[0-9]/,vt=zr([["0","9"]],!1,!1),gt=/^[0-1]/,yt=zr([["0","1"]],!1,!1),bt=/^[0-9a-f]/i,kt=zr([["0","9"],["a","f"]],!1,!0),St=qr("whitespace"),xt="\t",Ct=Yr("\t",!1),Et="\v",wt=Yr("\v",!1),At="\f",Ot=Yr("\f",!1),_t=" ",jt=Yr(" ",!1),Lt="\xa0",It=Yr("\xa0",!1),Pt="\ufeff",Rt=Yr("\ufeff",!1),Dt=/^[ \xA0\u1680\u2000-\u200A\u202F\u205F\u3000]/,Ft=zr([" ","\xa0","\u1680",["\u2000","\u200a"],"\u202f","\u205f","\u3000"],!1,!1),Tt=";",Bt=Yr(";",!1),Mt=/^[\n\r]/,Nt=zr(["\n","\r"],!1,!1),Ht=qr("end of line"),Ut="\n",$t=Yr("\n",!1),Gt="\r\n",Kt=Yr("\r\n",!1),Vt="\r",Wt=Yr("\r",!1),Xt="!align",Yt=Yr("!align",!1),zt="!byte",qt=Yr("!byte",!1),Qt=function(){return"byte"},Zt="!word",Jt=Yr("!word",!1),en=function(){return"word"},tn="!binary",nn=Yr("!binary",!1),rn="!let",an=Yr("!let",!1),ln="!macro",un=Yr("!macro",!1),on="!if",sn=Yr("!if",!1),cn="else",fn=Yr("else",!1),hn="elif",dn=Yr("elif",!1),mn="!error",pn=Yr("!error",!1),vn="!for",gn=Yr("!for",!1),yn="!include",bn=Yr("!include",!1),kn="!fill",Sn=Yr("!fill",!1),xn="!use",Cn=Yr("!use",!1),En="!filescope",wn=Yr("!filescope",!1),An="!segment",On=Yr("!segment",!1),_n="!!",jn=Yr("!!",!1),Ln="[",In=Yr("[",!1),Pn=function(e){return e},Rn="]",Dn=Yr("]",!1),Fn="(",Tn=Yr("(",!1),Bn=")",Mn=Yr(")",!1),Nn="{",Hn=Yr("{",!1),Un="}",$n=Yr("}",!1),Gn=(Yr("->",!1),Yr("++",!1),Yr("--",!1),"&"),Kn=Yr("&",!1),Vn=/^[&]/,Wn=zr(["&"],!1,!1),Xn="*",Yn=Yr("*",!1),zn=/^[=]/,qn=zr(["="],!1,!1),Qn=/^[+=]/,Zn=zr(["+","="],!1,!1),Jn="-",er=Yr("-",!1),tr=/^[\-=>]/,nr=zr(["-","=",">"],!1,!1),rr="~",ar=Yr("~",!1),lr="!",ir=Yr("!",!1),ur="/",or=Yr("/",!1),sr=/^[=>]/,cr=zr(["=",">"],!1,!1),fr="<<",hr=Yr("<<",!1),dr=">>",mr=Yr(">>",!1),pr="<",vr=Yr("<",!1),gr=">",yr=Yr(">",!1),br="<=",kr=Yr("<=",!1),Sr=">=",xr=Yr(">=",!1),Cr="==",Er=Yr("==",!1),wr="!=",Ar=Yr("!=",!1),Or="^",_r=Yr("^",!1),jr="|",Lr=Yr("|",!1),Ir="&&",Pr=Yr("&&",!1),Rr="||",Dr=Yr("||",!1),Fr=(Yr("?",!1),/^[>]/),Tr=zr([">"],!1,!1),Br=(Yr("...",!1),"="),Mr=Yr("=",!1),Nr=(Yr("*=",!1),Yr("/=",!1),Yr("%=",!1),Yr("+=",!1),Yr("-=",!1),Yr("<<=",!1),Yr(">>=",!1),Yr("&=",!1),Yr("^=",!1),Yr("|=",!1),","),Hr=Yr(",",!1),Ur=0,$r=0,Gr=[{line:1,column:1}],Kr=0,Vr=[],Wr=0;if("startRule"in t){if(!(t.startRule in o))throw new Error("Can't start parsing from rule \""+t.startRule+'".');s=o[t.startRule]}function Xr(){return e.substring($r,Ur)}function Yr(e,t){return{type:"literal",text:e,ignoreCase:t}}function zr(e,t,n){return{type:"class",parts:e,inverted:t,ignoreCase:n}}function qr(e){return{type:"other",description:e}}function Qr(t){var n,r=Gr[t];if(r)return r;for(n=t-1;!Gr[n];)n--;for(r={line:(r=Gr[n]).line,column:r.column};n<t;)10===e.charCodeAt(n)?(r.line++,r.column=1):r.column++,n++;return Gr[t]=r,r}function Zr(e,t){var n=Qr(e),r=Qr(t);return{start:{offset:e,line:n.line,column:n.column},end:{offset:t,line:r.line,column:r.column}}}function Jr(e){Ur<Kr||(Ur>Kr&&(Kr=Ur,Vr=[]),Vr.push(e))}function ea(e,t,n){return new u(u.buildMessage(e,t),e,t,n)}function ta(){var e,t,n,r,a,i;if(e=Ur,(t=na())!==l){for(n=[],r=Ur,(a=Xa())!==l&&(i=na())!==l?r=a=[a,i]:(Ur=r,r=l);r!==l;)n.push(r),r=Ur,(a=Xa())!==l&&(i=na())!==l?r=a=[a,i]:(Ur=r,r=l);n!==l?($r=e,e=t=c(t,n)):(Ur=e,e=l)}else Ur=e,e=l;return e}function na(){var e,t,n;return e=Ur,Ga()!==l&&(t=function(){var e,t,n,r;return e=Ur,(t=aa())!==l&&(n=tl())!==l&&(r=ta())!==l&&nl()!==l?($r=e,t=h(t,r),e=t):(Ur=e,e=l),e===l&&(e=Ur,(t=aa())!==l&&(n=ra())!==l?($r=e,t=d(t,n),e=t):(Ur=e,e=l),e===l&&(e=Ur,(t=aa())!==l&&($r=e,t=m(t)),(e=t)===l&&(e=Ur,(t=ra())!==l&&($r=e,t=p(t)),(e=t)===l&&(e=Ur,(t=function(){var e,t,n;return e=Ur,(t=ll())!==l&&xl()!==l&&(n=_a())!==l?($r=e,t=C(n),e=t):(Ur=e,e=l),e}())!==l&&($r=e,t=v(t)),(e=t)===l&&(e=Ur,(t=Ga())!==l&&($r=e,t=g()),e=t))))),e}())!==l?((n=Wa())===l&&(n=null),n!==l?($r=e,e=f(t)):(Ur=e,e=l)):(Ur=e,e=l),e}function ra(){var t,n;return t=Ur,(n=function(){var t,n,r,a,i,u,o,s,c,f;if(t=Ur,(n=function(){var t,n;return t=Ur,e.substr(Ur,5)===zt?(n=zt,Ur+=5):(n=l,0===Wr&&Jr(qt)),n!==l&&Ga()!==l?($r=t,n=Qt(),t=n):(Ur=t,t=l),t}())===l&&(n=function(){var t,n;return t=Ur,e.substr(Ur,5)===Zt?(n=Zt,Ur+=5):(n=l,0===Wr&&Jr(Jt)),n!==l&&Ga()!==l?($r=t,n=en(),t=n):(Ur=t,t=l),t}()),n!==l&&(r=fa())!==l?($r=t,n=E(n,r),t=n):(Ur=t,t=l),t===l&&(t=Ur,(n=function(){var t,n,r;return t=Ur,e.substr(Ur,5)===kn?(n=kn,Ur+=5):(n=l,0===Wr&&Jr(Sn)),n!==l&&(r=Ga())!==l?t=n=[n,r]:(Ur=t,t=l),t}())!==l&&(r=_a())!==l&&(a=Cl())!==l&&(i=_a())!==l?($r=t,n=w(r,i),t=n):(Ur=t,t=l),t===l&&(t=Ur,(n=function(){var t,n,r;return t=Ur,e.substr(Ur,8)===yn?(n=yn,Ur+=8):(n=l,0===Wr&&Jr(bn)),n!==l&&(r=Ga())!==l?t=n=[n,r]:(Ur=t,t=l),t}())!==l&&(r=_a())!==l?($r=t,n=A(r),t=n):(Ur=t,t=l),t===l&&(t=Ur,(n=za())!==l&&(r=_a())!==l?(a=Ur,(i=Cl())!==l?((u=_a())===l&&(u=null),u!==l&&(o=Cl())!==l&&(s=_a())!==l?a=i=[i,u,o,s]:(Ur=a,a=l)):(Ur=a,a=l),a===l&&(a=null),a!==l?($r=t,n=O(r,a),t=n):(Ur=t,t=l)):(Ur=t,t=l),t===l&&(t=Ur,(n=za())!==l&&(r=Ja())!==l&&(a=sa())!==l&&(i=el())!==l?($r=t,n=_(a),t=n):(Ur=t,t=l),t===l))))){if(t=Ur,(n=function(){var t,n,r;return t=Ur,e.substr(Ur,3)===on?(n=on,Ur+=3):(n=l,0===Wr&&Jr(sn)),n!==l&&(r=Ga())!==l?t=n=[n,r]:(Ur=t,t=l),t}())!==l)if((r=Ja())!==l)if((a=_a())!==l)if((i=el())!==l)if((u=tl())!==l)if((o=ta())!==l)if((s=nl())!==l){for(c=[],f=la();f!==l;)c.push(f),f=la();c!==l?((f=function(){var t,n,r;return t=Ur,(n=function(){var t,n,r;return t=Ur,e.substr(Ur,4)===cn?(n=cn,Ur+=4):(n=l,0===Wr&&Jr(fn)),n!==l&&(r=Ga())!==l?t=n=[n,r]:(Ur=t,t=l),t}())!==l&&tl()!==l&&(r=ta())!==l&&nl()!==l?($r=t,n=Y(r),t=n):(Ur=t,t=l),t}())===l&&(f=null),f!==l?($r=t,n=j(a,o,c,f),t=n):(Ur=t,t=l)):(Ur=t,t=l)}else Ur=t,t=l;else Ur=t,t=l;else Ur=t,t=l;else Ur=t,t=l;else Ur=t,t=l;else Ur=t,t=l;else Ur=t,t=l;t===l&&(t=Ur,(n=function(){var t,n,r;return t=Ur,e.substr(Ur,4)===vn?(n=vn,Ur+=4):(n=l,0===Wr&&Jr(gn)),n!==l&&(r=Ga())!==l?t=n=[n,r]:(Ur=t,t=l),t}())!==l&&(r=pa())!==l?(e.substr(Ur,2)===L?(a=L,Ur+=2):(a=l,0===Wr&&Jr(I)),a!==l&&(i=Ga())!==l&&(u=_a())!==l&&(o=tl())!==l&&(s=ta())!==l&&(c=nl())!==l?($r=t,n=P(r,u,s),t=n):(Ur=t,t=l)):(Ur=t,t=l),t===l&&(t=Ur,(n=function(){var t,n,r;return t=Ur,e.substr(Ur,6)===ln?(n=ln,Ur+=6):(n=l,0===Wr&&Jr(un)),n!==l&&(r=Ga())!==l?t=n=[n,r]:(Ur=t,t=l),t}())!==l&&(r=function(){var e,t;return e=Ur,(t=va())!==l&&($r=e,t=ee(t)),e=t}())!==l&&(a=Ja())!==l?((i=function(){var e,t,n,r,a,i;if(e=Ur,(t=oa())!==l){for(n=[],r=Ur,(a=Cl())!==l&&(i=oa())!==l?r=a=[a,i]:(Ur=r,r=l);r!==l;)n.push(r),r=Ur,(a=Cl())!==l&&(i=oa())!==l?r=a=[a,i]:(Ur=r,r=l);n!==l?($r=e,t=te(t,n),e=t):(Ur=e,e=l)}else Ur=e,e=l;return e}())===l&&(i=null),i!==l&&(u=el())!==l&&(o=tl())!==l&&(s=ta())!==l&&(c=nl())!==l?($r=t,n=R(r,i,s),t=n):(Ur=t,t=l)):(Ur=t,t=l),t===l&&(t=Ur,43===e.charCodeAt(Ur)?(n=D,Ur++):(n=l,0===Wr&&Jr(F)),n!==l&&(r=ma())!==l&&(a=Ja())!==l?((i=fa())===l&&(i=null),i!==l&&(u=el())!==l?($r=t,n=T(r,i),t=n):(Ur=t,t=l)):(Ur=t,t=l),t===l&&(t=Ur,(n=function(){var t,n,r;return t=Ur,e.substr(Ur,4)===rn?(n=rn,Ur+=4):(n=l,0===Wr&&Jr(an)),n!==l&&(r=Ga())!==l?t=n=[n,r]:(Ur=t,t=l),t}())!==l&&(r=pa())!==l&&(a=xl())!==l&&(i=_a())!==l?($r=t,n=B(r,i),t=n):(Ur=t,t=l),t===l&&(t=Ba())===l&&(t=Ur,(n=function(){var t,n,r;return t=Ur,e.substr(Ur,4)===xn?(n=xn,Ur+=4):(n=l,0===Wr&&Jr(Cn)),n!==l&&(r=Ga())!==l?t=n=[n,r]:(Ur=t,t=l),t}())!==l&&(r=ia())!==l?(e.substr(Ur,2)===M?(a=M,Ur+=2):(a=l,0===Wr&&Jr(N)),a!==l&&(i=Ga())!==l&&(u=pa())!==l?($r=t,n=H(r,u),t=n):(Ur=t,t=l)):(Ur=t,t=l),t===l&&(t=Ur,(n=function(){var t,n,r;return t=Ur,e.substr(Ur,6)===mn?(n=mn,Ur+=6):(n=l,0===Wr&&Jr(pn)),n!==l&&(r=Ga())!==l?t=n=[n,r]:(Ur=t,t=l),t}())!==l&&(r=ia())!==l?($r=t,n=U(r),t=n):(Ur=t,t=l),t===l&&(t=Ur,(n=function(){var t,n,r;return t=Ur,e.substr(Ur,6)===Xt?(n=Xt,Ur+=6):(n=l,0===Wr&&Jr(Yt)),n!==l&&(r=Ga())!==l?t=n=[n,r]:(Ur=t,t=l),t}())!==l&&(r=_a())!==l?($r=t,n=$(r),t=n):(Ur=t,t=l),t===l&&(t=Ur,(n=function(){var t,n,r;return t=Ur,e.substr(Ur,10)===En?(n=En,Ur+=10):(n=l,0===Wr&&Jr(wn)),n!==l&&(r=Ga())!==l?t=n=[n,r]:(Ur=t,t=l),t}())!==l&&(r=pa())!==l?($r=t,n=G(r),t=n):(Ur=t,t=l),t===l&&(t=Ur,(n=qa())!==l&&(r=pa())!==l&&(a=Ja())!==l&&(i=sa())!==l&&(u=el())!==l?($r=t,n=K(r,i),t=n):(Ur=t,t=l),t===l&&(t=Ur,(n=qa())!==l&&(r=ma())!==l?($r=t,n=V(r),t=n):(Ur=t,t=l),t===l&&(t=Ur,(n=function(){var t,n,r;return t=Ur,e.substr(Ur,2)===_n?(n=_n,Ur+=2):(n=l,0===Wr&&Jr(jn)),n!==l&&(r=Ga())!==l?t=n=[n,r]:(Ur=t,t=l),t}())!==l&&(r=function(){var e,t;return(e=Ba())===l&&(e=Ur,(t=_a())!==l&&($r=e,t=st(t)),e=t),e}())!==l?($r=t,n=W(r),t=n):(Ur=t,t=l))))))))))))}return t}())!==l&&($r=t,n=y(n)),(t=n)===l&&(t=Ur,(n=function(){var t,n,r,a,i,u,o;return t=Ur,(n=ga())!==l&&(r=function(){var t,n,r,a;return t=Ur,35===e.charCodeAt(Ur)?(n=Ce,Ur++):(n=l,0===Wr&&Jr(Ee)),n!==l?((r=function(){var e,t;return e=Ur,(t=hl())!==l&&($r=e,t=Ae()),(e=t)===l&&(e=Ur,(t=dl())!==l&&($r=e,t=Oe()),e=t),e}())===l&&(r=null),r!==l&&(a=_a())!==l?($r=t,n=we(r,a),t=n):(Ur=t,t=l)):(Ur=t,t=l),t}())!==l?($r=t,n=ae(n,r),t=n):(Ur=t,t=l),t===l&&(t=Ur,(n=ga())!==l&&(r=Ja())!==l&&(a=ya())!==l&&(i=Cl())!==l?(120===e.charCodeAt(Ur)?(u=le,Ur++):(u=l,0===Wr&&Jr(ie)),u!==l&&(o=Ga())!==l&&el()!==l?($r=t,n=ue(n,a),t=n):(Ur=t,t=l)):(Ur=t,t=l),t===l&&(t=Ur,(n=ga())!==l&&(r=Ja())!==l&&(a=ya())!==l&&(i=el())!==l&&(u=Cl())!==l?(121===e.charCodeAt(Ur)?(o=oe,Ur++):(o=l,0===Wr&&Jr(se)),o!==l&&Ga()!==l?($r=t,n=ce(n,a),t=n):(Ur=t,t=l)):(Ur=t,t=l),t===l&&(t=Ur,(n=ga())!==l&&(r=Ja())!==l&&(a=ya())!==l&&(i=el())!==l?($r=t,n=fe(n,a),t=n):(Ur=t,t=l),t===l&&(t=Ur,(n=ga())!==l&&(r=ya())!==l&&(a=Cl())!==l?(120===e.charCodeAt(Ur)?(i=le,Ur++):(i=l,0===Wr&&Jr(ie)),i===l&&(121===e.charCodeAt(Ur)?(i=oe,Ur++):(i=l,0===Wr&&Jr(se))),i!==l&&(u=Ga())!==l?($r=t,n=he(n,r,i),t=n):(Ur=t,t=l)):(Ur=t,t=l),t===l&&(t=Ur,(n=ga())!==l&&(r=ya())!==l?($r=t,n=de(n,r),t=n):(Ur=t,t=l),t===l&&(t=Ur,(n=ga())!==l&&($r=t,n=me(n)),t=n)))))),t}())!==l&&($r=t,n=b(n)),t=n),t}function aa(){var t,n,r;return t=Ur,(n=ha())!==l?(58===e.charCodeAt(Ur)?(r=k,Ur++):(r=l,0===Wr&&Jr(S)),r!==l&&Ga()!==l?($r=t,t=n=x(n)):(Ur=t,t=l)):(Ur=t,t=l),t}function la(){var t,n,r;return t=Ur,function(){var t,n,r;return t=Ur,e.substr(Ur,4)===hn?(n=hn,Ur+=4):(n=l,0===Wr&&Jr(dn)),n!==l&&(r=Ga())!==l?t=n=[n,r]:(Ur=t,t=l),t}()!==l&&Ja()!==l&&(n=_a())!==l&&el()!==l&&tl()!==l&&(r=ta())!==l&&nl()!==l?($r=t,t=X(n,r)):(Ur=t,t=l),t}function ia(){var t,n,r,a;if(t=Ur,34===e.charCodeAt(Ur)?(n=z,Ur++):(n=l,0===Wr&&Jr(q)),n!==l){for(r=[],a=ua();a!==l;)r.push(a),a=ua();r!==l?(34===e.charCodeAt(Ur)?(a=z,Ur++):(a=l,0===Wr&&Jr(q)),a!==l&&Ga()!==l?($r=t,t=n=Q(r)):(Ur=t,t=l)):(Ur=t,t=l)}else Ur=t,t=l;return t}function ua(){var t,n,r;return t=Ur,n=Ur,Wr++,34===e.charCodeAt(Ur)?(r=z,Ur++):(r=l,0===Wr&&Jr(q)),Wr--,r===l?n=void 0:(Ur=n,n=l),n!==l?(e.length>Ur?(r=e.charAt(Ur),Ur++):(r=l,0===Wr&&Jr(Z)),r!==l?($r=t,t=n=J(r)):(Ur=t,t=l)):(Ur=t,t=l),t}function oa(){var e,t;return e=Ur,(t=pa())!==l&&($r=e,t=ne(t)),e=t}function sa(){var e,t,n,r,a,i;if(e=Ur,(t=ca())!==l){for(n=[],r=Ur,(a=Cl())!==l&&(i=ca())!==l?r=a=[a,i]:(Ur=r,r=l);r!==l;)n.push(r),r=Ur,(a=Cl())!==l&&(i=ca())!==l?r=a=[a,i]:(Ur=r,r=l);n!==l?($r=e,e=t=te(t,n)):(Ur=e,e=l)}else Ur=e,e=l;return e}function ca(){var e,t,n;return e=Ur,(t=pa())!==l&&xl()!==l&&(n=_a())!==l?($r=e,e=t=re(t,n)):(Ur=e,e=l),e}function fa(){var e,t,n,r,a,i;if(e=Ur,(t=_a())!==l){for(n=[],r=Ur,(a=Cl())!==l&&(i=_a())!==l?r=a=[a,i]:(Ur=r,r=l);r!==l;)n.push(r),r=Ur,(a=Cl())!==l&&(i=_a())!==l?r=a=[a,i]:(Ur=r,r=l);n!==l?($r=e,e=t=te(t,n)):(Ur=e,e=l)}else Ur=e,e=l;return e}function ha(){var e,t,n,r,a;if(e=Ur,t=Ur,n=[],(r=Ma())!==l)for(;r!==l;)n.push(r),r=Ma();else n=l;if(n!==l){for(r=[],a=Na();a!==l;)r.push(a),a=Na();r!==l?t=n=[n,r]:(Ur=t,t=l)}else Ur=t,t=l;return t!==l&&($r=e,t=pe()),e=t}function da(){var e,t;return e=Ur,(t=ha())!==l&&Ga()!==l?($r=e,e=t=ve(t)):(Ur=e,e=l),e}function ma(){var t,n,r,a,i,u,o;if(t=Ur,(n=ha())!==l){for(r=[],a=Ur,e.substr(Ur,2)===ge?(i=ge,Ur+=2):(i=l,0===Wr&&Jr(ye)),i!==l&&(u=ha())!==l?a=i=[i,u]:(Ur=a,a=l);a!==l;)r.push(a),a=Ur,e.substr(Ur,2)===ge?(i=ge,Ur+=2):(i=l,0===Wr&&Jr(ye)),i!==l&&(u=ha())!==l?a=i=[i,u]:(Ur=a,a=l);r!==l&&(a=Ga())!==l?($r=t,t=n=be(n,r)):(Ur=t,t=l)}else Ur=t,t=l;if(t===l)if(t=Ur,e.substr(Ur,2)===ge?(n=ge,Ur+=2):(n=l,0===Wr&&Jr(ye)),n!==l)if((r=ha())!==l){for(a=[],i=Ur,e.substr(Ur,2)===ge?(u=ge,Ur+=2):(u=l,0===Wr&&Jr(ye)),u!==l&&(o=ha())!==l?i=u=[u,o]:(Ur=i,i=l);i!==l;)a.push(i),i=Ur,e.substr(Ur,2)===ge?(u=ge,Ur+=2):(u=l,0===Wr&&Jr(ye)),u!==l&&(o=ha())!==l?i=u=[u,o]:(Ur=i,i=l);a!==l&&(i=Ga())!==l?($r=t,t=n=ke(r,a)):(Ur=t,t=l)}else Ur=t,t=l;else Ur=t,t=l;return t}function pa(){var e,t;return e=Ur,(t=va())!==l&&($r=e,t=Se(t)),e=t}function va(){var e,t;return e=Ur,(t=ha())!==l&&Ga()!==l?($r=e,e=t=xe(t)):(Ur=e,e=l),e}function ga(){var e,t;return e=Ur,(t=ha())!==l&&Ga()!==l?($r=e,e=t=ve(t)):(Ur=e,e=l),e}function ya(){var e,t;return e=Ur,(t=_a())!==l&&($r=e,t=_e(t)),e=t}function ba(){var e,t,n,r,a,i;if(e=Ur,(t=ja())!==l){for(n=[],r=Ur,(a=ll())===l&&(a=ol())===l&&(a=sl()),a!==l&&(i=ja())!==l?r=a=[a,i]:(Ur=r,r=l);r!==l;)n.push(r),r=Ur,(a=ll())===l&&(a=ol())===l&&(a=sl()),a!==l&&(i=ja())!==l?r=a=[a,i]:(Ur=r,r=l);n!==l?($r=e,e=t=je(t,n)):(Ur=e,e=l)}else Ur=e,e=l;return e===l&&(e=Ia()),e}function ka(){var e,t,n,r,a,i;if(e=Ur,(t=ba())!==l){for(n=[],r=Ur,(a=il())===l&&(a=ul()),a!==l&&(i=ba())!==l?r=a=[a,i]:(Ur=r,r=l);r!==l;)n.push(r),r=Ur,(a=il())===l&&(a=ul()),a!==l&&(i=ba())!==l?r=a=[a,i]:(Ur=r,r=l);n!==l?($r=e,e=t=je(t,n)):(Ur=e,e=l)}else Ur=e,e=l;return e}function Sa(){var e,t,n,r,a,i;if(e=Ur,(t=ka())!==l){for(n=[],r=Ur,(a=cl())===l&&(a=fl()),a!==l&&(i=ka())!==l?r=a=[a,i]:(Ur=r,r=l);r!==l;)n.push(r),r=Ur,(a=cl())===l&&(a=fl()),a!==l&&(i=ka())!==l?r=a=[a,i]:(Ur=r,r=l);n!==l?($r=e,e=t=je(t,n)):(Ur=e,e=l)}else Ur=e,e=l;return e}function xa(){var e,t,n,r,a,i;if(e=Ur,(t=Sa())!==l){for(n=[],r=Ur,(a=ml())===l&&(a=pl())===l&&(a=hl())===l&&(a=dl()),a!==l&&(i=Sa())!==l?r=a=[a,i]:(Ur=r,r=l);r!==l;)n.push(r),r=Ur,(a=ml())===l&&(a=pl())===l&&(a=hl())===l&&(a=dl()),a!==l&&(i=Sa())!==l?r=a=[a,i]:(Ur=r,r=l);n!==l?($r=e,e=t=je(t,n)):(Ur=e,e=l)}else Ur=e,e=l;return e}function Ca(){var e,t,n,r,a,i;if(e=Ur,(t=xa())!==l){for(n=[],r=Ur,(a=vl())===l&&(a=gl()),a!==l&&(i=xa())!==l?r=a=[a,i]:(Ur=r,r=l);r!==l;)n.push(r),r=Ur,(a=vl())===l&&(a=gl()),a!==l&&(i=xa())!==l?r=a=[a,i]:(Ur=r,r=l);n!==l?($r=e,e=t=je(t,n)):(Ur=e,e=l)}else Ur=e,e=l;return e}function Ea(){var e,t,n,r,a,i;if(e=Ur,(t=Ca())!==l){for(n=[],r=Ur,(a=al())!==l&&(i=Ca())!==l?r=a=[a,i]:(Ur=r,r=l);r!==l;)n.push(r),r=Ur,(a=al())!==l&&(i=Ca())!==l?r=a=[a,i]:(Ur=r,r=l);n!==l?($r=e,e=t=je(t,n)):(Ur=e,e=l)}else Ur=e,e=l;return e}function wa(){var e,t,n,r,a,i;if(e=Ur,(t=Ea())!==l){for(n=[],r=Ur,(a=yl())!==l&&(i=Ea())!==l?r=a=[a,i]:(Ur=r,r=l);r!==l;)n.push(r),r=Ur,(a=yl())!==l&&(i=Ea())!==l?r=a=[a,i]:(Ur=r,r=l);n!==l?($r=e,e=t=je(t,n)):(Ur=e,e=l)}else Ur=e,e=l;return e}function Aa(){var e,t,n,r,a,i;if(e=Ur,(t=wa())!==l){for(n=[],r=Ur,(a=bl())!==l&&(i=wa())!==l?r=a=[a,i]:(Ur=r,r=l);r!==l;)n.push(r),r=Ur,(a=bl())!==l&&(i=wa())!==l?r=a=[a,i]:(Ur=r,r=l);n!==l?($r=e,e=t=je(t,n)):(Ur=e,e=l)}else Ur=e,e=l;return e}function Oa(){var e,t,n,r,a,i;if(e=Ur,(t=Aa())!==l){for(n=[],r=Ur,(a=kl())!==l&&(i=Aa())!==l?r=a=[a,i]:(Ur=r,r=l);r!==l;)n.push(r),r=Ur,(a=kl())!==l&&(i=Aa())!==l?r=a=[a,i]:(Ur=r,r=l);n!==l?($r=e,e=t=je(t,n)):(Ur=e,e=l)}else Ur=e,e=l;return e}function _a(){var e,t,n,r,a,i;if(e=Ur,(t=Oa())!==l){for(n=[],r=Ur,(a=Sl())!==l&&(i=Oa())!==l?r=a=[a,i]:(Ur=r,r=l);r!==l;)n.push(r),r=Ur,(a=Sl())!==l&&(i=Oa())!==l?r=a=[a,i]:(Ur=r,r=l);n!==l?($r=e,e=t=je(t,n)):(Ur=e,e=l)}else Ur=e,e=l;return e}function ja(){var t,n,r;return(t=function(){var e;return(e=function(){var e,t,n;return e=Ur,(t=La())!==l&&Ja()!==l?((n=fa())===l&&(n=null),n!==l&&el()!==l?($r=e,t=Fe(t,n),e=t):(Ur=e,e=l)):(Ur=e,e=l),e}())===l&&(e=La()),e}())===l&&(t=Ur,(n=function(){var t,n;return t=Ur,(n=il())===l&&(n=ul())===l&&(n=function(){var t,n;return t=Ur,126===e.charCodeAt(Ur)?(n=rr,Ur++):(n=l,0===Wr&&Jr(ar)),n!==l&&Ga()!==l?($r=t,n=Pn(n),t=n):(Ur=t,t=l),t}())===l&&(n=function(){var t,n,r,a;return t=Ur,33===e.charCodeAt(Ur)?(n=lr,Ur++):(n=l,0===Wr&&Jr(ir)),n!==l?(r=Ur,Wr++,zn.test(e.charAt(Ur))?(a=e.charAt(Ur),Ur++):(a=l,0===Wr&&Jr(qn)),Wr--,a===l?r=void 0:(Ur=r,r=l),r!==l&&(a=Ga())!==l?($r=t,n=Pn(n),t=n):(Ur=t,t=l)):(Ur=t,t=l),t}()),n!==l&&($r=t,n=Ie(n)),t=n}())!==l&&(r=ja())!==l?($r=t,t=n=Le(n,r)):(Ur=t,t=l)),t}function La(){var e,t,n,r,a;if(e=Ur,(t=Ia())!==l){for(n=[],r=Ur,Qa()!==l&&(a=_a())!==l&&Za()!==l?($r=r,r=Pe(t,a)):(Ur=r,r=l),r===l&&(r=Ur,rl()!==l&&(a=da())!==l?($r=r,r=Re(t,a)):(Ur=r,r=l));r!==l;)n.push(r),r=Ur,Qa()!==l&&(a=_a())!==l&&Za()!==l?($r=r,r=Pe(t,a)):(Ur=r,r=l),r===l&&(r=Ur,rl()!==l&&(a=da())!==l?($r=r,r=Re(t,a)):(Ur=r,r=l));n!==l?($r=e,e=t=De(t,n)):(Ur=e,e=l)}else Ur=e,e=l;return e}function Ia(){var e,t,n;return e=Ur,(t=Pa())!==l&&($r=e,t=Te(t)),(e=t)===l&&(e=Ur,(t=ma())!==l&&($r=e,t=ve(t)),(e=t)===l&&(e=Ur,(t=ia())!==l&&($r=e,t=Be(t)),(e=t)===l&&(e=function(){var e,t,n;return e=Ur,(t=Qa())!==l?((n=fa())===l&&(n=null),n!==l&&Za()!==l?($r=e,t=at(n),e=t):(Ur=e,e=l)):(Ur=e,e=l),e}())===l&&(e=function(){var e,t,n;return e=Ur,(t=tl())!==l&&Va()!==l&&(n=nl())!==l?($r=e,t=lt(),e=t):(Ur=e,e=l),e===l&&(e=Ur,(t=tl())!==l&&Va()!==l&&(n=Fa())!==l&&Va()!==l&&nl()!==l?($r=e,t=it(n),e=t):(Ur=e,e=l),e===l&&(e=Ur,(t=tl())!==l&&Va()!==l&&(n=Fa())!==l&&Va()!==l&&Cl()!==l&&Va()!==l&&nl()!==l?($r=e,t=it(n),e=t):(Ur=e,e=l))),e}())===l&&(e=function(){var e,t;return e=Ur,(t=ll())!==l&&($r=e,t=We()),e=t}())===l&&(e=Ur,(t=Ja())!==l&&(n=_a())!==l&&el()!==l?($r=e,e=t=Me(n)):(Ur=e,e=l)))),e}function Pa(){var t,n,r,a,i;if(t=Ur,36===e.charCodeAt(Ur)?(n=Ne,Ur++):(n=l,0===Wr&&Jr(He)),n!==l){if(r=Ur,a=[],(i=$a())!==l)for(;i!==l;)a.push(i),i=$a();else a=l;(r=a!==l?e.substring(r,Ur):a)!==l&&(a=Ga())!==l?($r=t,t=n=Ue(r)):(Ur=t,t=l)}else Ur=t,t=l;if(t===l){if(t=Ur,37===e.charCodeAt(Ur)?(n=$e,Ur++):(n=l,0===Wr&&Jr(Ge)),n!==l){if(r=Ur,a=[],(i=Ua())!==l)for(;i!==l;)a.push(i),i=Ua();else a=l;(r=a!==l?e.substring(r,Ur):a)!==l&&(a=Ga())!==l?($r=t,t=n=Ke(r)):(Ur=t,t=l)}else Ur=t,t=l;t===l&&(t=Ur,(n=function(){var t,n,r,a,i;if(t=Ur,(n=Ra())!==l)if(46===e.charCodeAt(Ur)?(r=Xe,Ur++):(r=l,0===Wr&&Jr(Ye)),r!==l){for(a=[],i=Ha();i!==l;)a.push(i),i=Ha();a!==l?((i=Da())===l&&(i=null),i!==l?($r=t,n=ze(),t=n):(Ur=t,t=l)):(Ur=t,t=l)}else Ur=t,t=l;else Ur=t,t=l;if(t===l){if(t=Ur,46===e.charCodeAt(Ur)?(n=Xe,Ur++):(n=l,0===Wr&&Jr(Ye)),n!==l){if(r=[],(a=Ha())!==l)for(;a!==l;)r.push(a),a=Ha();else r=l;r!==l?((a=Da())===l&&(a=null),a!==l?($r=t,n=ze(),t=n):(Ur=t,t=l)):(Ur=t,t=l)}else Ur=t,t=l;t===l&&(t=Ur,(n=Ra())!==l?((r=Da())===l&&(r=null),r!==l?($r=t,n=ze(),t=n):(Ur=t,t=l)):(Ur=t,t=l))}return t}())!==l&&(r=Ga())!==l?($r=t,t=n=Ve(n)):(Ur=t,t=l))}return t}function Ra(){var t,n,r,a;if(48===e.charCodeAt(Ur)?(t=qe,Ur++):(t=l,0===Wr&&Jr(Qe)),t===l)if(t=Ur,(n=function(){var t;return Ze.test(e.charAt(Ur))?(t=e.charAt(Ur),Ur++):(t=l,0===Wr&&Jr(Je)),t}())!==l){for(r=[],a=Ha();a!==l;)r.push(a),a=Ha();r!==l?t=n=[n,r]:(Ur=t,t=l)}else Ur=t,t=l;return t}function Da(){var t,n,r;return t=Ur,(n=function(){var t;return e.substr(Ur,1).toLowerCase()===et?(t=e.charAt(Ur),Ur++):(t=l,0===Wr&&Jr(tt)),t}())!==l&&(r=function(){var t,n,r,a;if(t=Ur,nt.test(e.charAt(Ur))?(n=e.charAt(Ur),Ur++):(n=l,0===Wr&&Jr(rt)),n===l&&(n=null),n!==l){if(r=[],(a=Ha())!==l)for(;a!==l;)r.push(a),a=Ha();else r=l;r!==l?t=n=[n,r]:(Ur=t,t=l)}else Ur=t,t=l;return t}())!==l?t=n=[n,r]:(Ur=t,t=l),t}function Fa(){var e,t,n,r,a,i,u;if(e=Ur,(t=Ta())!==l){for(n=[],r=Ur,(a=Cl())!==l&&(i=Va())!==l&&(u=Ta())!==l?r=a=[a,i,u]:(Ur=r,r=l);r!==l;)n.push(r),r=Ur,(a=Cl())!==l&&(i=Va())!==l&&(u=Ta())!==l?r=a=[a,i,u]:(Ur=r,r=l);n!==l?($r=e,e=t=ut(t,n)):(Ur=e,e=l)}else Ur=e,e=l;return e}function Ta(){var t,n,r;return t=Ur,(n=function(){var e,t;return(e=pa())===l&&(e=ia())===l&&(e=Ur,(t=Pa())!==l&&($r=e,t=Te(t)),e=t),e}())!==l&&function(){var t,n,r,a;return t=Ur,58===e.charCodeAt(Ur)?(n=k,Ur++):(n=l,0===Wr&&Jr(S)),n!==l?(r=Ur,Wr++,Fr.test(e.charAt(Ur))?(a=e.charAt(Ur),Ur++):(a=l,0===Wr&&Jr(Tr)),Wr--,a===l?r=void 0:(Ur=r,r=l),r!==l&&(a=Ga())!==l?($r=t,n=Pn(n),t=n):(Ur=t,t=l)):(Ur=t,t=l),t}()!==l&&(r=_a())!==l?($r=t,t=n=ot(n,r)):(Ur=t,t=l),t}function Ba(){var e,t,n;return e=Ur,(t=ma())!==l&&xl()!==l&&(n=_a())!==l?($r=e,e=t=ct(t,n)):(Ur=e,e=l),e}function Ma(){var t;return ft.test(e.charAt(Ur))?(t=e.charAt(Ur),Ur++):(t=l,0===Wr&&Jr(ht)),t}function Na(){var t;return dt.test(e.charAt(Ur))?(t=e.charAt(Ur),Ur++):(t=l,0===Wr&&Jr(mt)),t}function Ha(){var t;return pt.test(e.charAt(Ur))?(t=e.charAt(Ur),Ur++):(t=l,0===Wr&&Jr(vt)),t}function Ua(){var t;return gt.test(e.charAt(Ur))?(t=e.charAt(Ur),Ur++):(t=l,0===Wr&&Jr(yt)),t}function $a(){var t;return bt.test(e.charAt(Ur))?(t=e.charAt(Ur),Ur++):(t=l,0===Wr&&Jr(kt)),t}function Ga(){var e,t;for(Wr++,e=[],t=Ka();t!==l;)e.push(t),t=Ka();return Wr--,e===l&&(t=l,0===Wr&&Jr(St)),e}function Ka(){var t;return Wr++,9===e.charCodeAt(Ur)?(t=xt,Ur++):(t=l,0===Wr&&Jr(Ct)),t===l&&(11===e.charCodeAt(Ur)?(t=Et,Ur++):(t=l,0===Wr&&Jr(wt)),t===l&&(12===e.charCodeAt(Ur)?(t=At,Ur++):(t=l,0===Wr&&Jr(Ot)),t===l&&(32===e.charCodeAt(Ur)?(t=_t,Ur++):(t=l,0===Wr&&Jr(jt)),t===l&&(160===e.charCodeAt(Ur)?(t=Lt,Ur++):(t=l,0===Wr&&Jr(It)),t===l&&(65279===e.charCodeAt(Ur)?(t=Pt,Ur++):(t=l,0===Wr&&Jr(Rt)),t===l&&(t=function(){var t;return Dt.test(e.charAt(Ur))?(t=e.charAt(Ur),Ur++):(t=l,0===Wr&&Jr(Ft)),t}())))))),Wr--,t===l&&0===Wr&&Jr(St),t}function Va(){var e,t;for(e=[],(t=Ka())===l&&(t=Ya())===l&&(t=Wa());t!==l;)e.push(t),(t=Ka())===l&&(t=Ya())===l&&(t=Wa());return e}function Wa(){var t,n,r,a,i,u;if(t=Ur,59===e.charCodeAt(Ur)?(n=Tt,Ur++):(n=l,0===Wr&&Jr(Bt)),n!==l){for(r=[],a=Ur,i=Ur,Wr++,u=Xa(),Wr--,u===l?i=void 0:(Ur=i,i=l),i!==l?(e.length>Ur?(u=e.charAt(Ur),Ur++):(u=l,0===Wr&&Jr(Z)),u!==l?a=i=[i,u]:(Ur=a,a=l)):(Ur=a,a=l);a!==l;)r.push(a),a=Ur,i=Ur,Wr++,u=Xa(),Wr--,u===l?i=void 0:(Ur=i,i=l),i!==l?(e.length>Ur?(u=e.charAt(Ur),Ur++):(u=l,0===Wr&&Jr(Z)),u!==l?a=i=[i,u]:(Ur=a,a=l)):(Ur=a,a=l);r!==l?t=n=[n,r]:(Ur=t,t=l)}else Ur=t,t=l;return t}function Xa(){var t;return Mt.test(e.charAt(Ur))?(t=e.charAt(Ur),Ur++):(t=l,0===Wr&&Jr(Nt)),t}function Ya(){var t;return Wr++,10===e.charCodeAt(Ur)?(t=Ut,Ur++):(t=l,0===Wr&&Jr($t)),t===l&&(e.substr(Ur,2)===Gt?(t=Gt,Ur+=2):(t=l,0===Wr&&Jr(Kt)),t===l&&(13===e.charCodeAt(Ur)?(t=Vt,Ur++):(t=l,0===Wr&&Jr(Wt)))),Wr--,t===l&&0===Wr&&Jr(Ht),t}function za(){var t,n,r;return t=Ur,e.substr(Ur,7)===tn?(n=tn,Ur+=7):(n=l,0===Wr&&Jr(nn)),n!==l&&(r=Ga())!==l?t=n=[n,r]:(Ur=t,t=l),t}function qa(){var t,n,r;return t=Ur,e.substr(Ur,8)===An?(n=An,Ur+=8):(n=l,0===Wr&&Jr(On)),n!==l&&(r=Ga())!==l?t=n=[n,r]:(Ur=t,t=l),t}function Qa(){var t,n;return t=Ur,91===e.charCodeAt(Ur)?(n=Ln,Ur++):(n=l,0===Wr&&Jr(In)),n!==l&&Ga()!==l?($r=t,t=n=Pn(n)):(Ur=t,t=l),t}function Za(){var t,n;return t=Ur,93===e.charCodeAt(Ur)?(n=Rn,Ur++):(n=l,0===Wr&&Jr(Dn)),n!==l&&Ga()!==l?($r=t,t=n=Pn(n)):(Ur=t,t=l),t}function Ja(){var t,n;return t=Ur,40===e.charCodeAt(Ur)?(n=Fn,Ur++):(n=l,0===Wr&&Jr(Tn)),n!==l&&Ga()!==l?($r=t,t=n=Pn(n)):(Ur=t,t=l),t}function el(){var t,n;return t=Ur,41===e.charCodeAt(Ur)?(n=Bn,Ur++):(n=l,0===Wr&&Jr(Mn)),n!==l&&Ga()!==l?($r=t,t=n=Pn(n)):(Ur=t,t=l),t}function tl(){var t,n;return t=Ur,123===e.charCodeAt(Ur)?(n=Nn,Ur++):(n=l,0===Wr&&Jr(Hn)),n!==l&&Ga()!==l?($r=t,t=n=Pn(n)):(Ur=t,t=l),t}function nl(){var t,n;return t=Ur,125===e.charCodeAt(Ur)?(n=Un,Ur++):(n=l,0===Wr&&Jr($n)),n!==l&&Ga()!==l?($r=t,t=n=Pn(n)):(Ur=t,t=l),t}function rl(){var t,n;return t=Ur,46===e.charCodeAt(Ur)?(n=Xe,Ur++):(n=l,0===Wr&&Jr(Ye)),n!==l&&Ga()!==l?($r=t,t=n=Pn(n)):(Ur=t,t=l),t}function al(){var t,n,r,a;return t=Ur,38===e.charCodeAt(Ur)?(n=Gn,Ur++):(n=l,0===Wr&&Jr(Kn)),n!==l?(r=Ur,Wr++,Vn.test(e.charAt(Ur))?(a=e.charAt(Ur),Ur++):(a=l,0===Wr&&Jr(Wn)),Wr--,a===l?r=void 0:(Ur=r,r=l),r!==l&&(a=Ga())!==l?($r=t,t=n=Pn(n)):(Ur=t,t=l)):(Ur=t,t=l),t}function ll(){var t,n,r,a;return t=Ur,42===e.charCodeAt(Ur)?(n=Xn,Ur++):(n=l,0===Wr&&Jr(Yn)),n!==l?(r=Ur,Wr++,zn.test(e.charAt(Ur))?(a=e.charAt(Ur),Ur++):(a=l,0===Wr&&Jr(qn)),Wr--,a===l?r=void 0:(Ur=r,r=l),r!==l&&(a=Ga())!==l?($r=t,t=n=Pn(n)):(Ur=t,t=l)):(Ur=t,t=l),t}function il(){var t,n,r,a;return t=Ur,43===e.charCodeAt(Ur)?(n=D,Ur++):(n=l,0===Wr&&Jr(F)),n!==l?(r=Ur,Wr++,Qn.test(e.charAt(Ur))?(a=e.charAt(Ur),Ur++):(a=l,0===Wr&&Jr(Zn)),Wr--,a===l?r=void 0:(Ur=r,r=l),r!==l&&(a=Ga())!==l?($r=t,t=n=Pn(n)):(Ur=t,t=l)):(Ur=t,t=l),t}function ul(){var t,n,r,a;return t=Ur,45===e.charCodeAt(Ur)?(n=Jn,Ur++):(n=l,0===Wr&&Jr(er)),n!==l?(r=Ur,Wr++,tr.test(e.charAt(Ur))?(a=e.charAt(Ur),Ur++):(a=l,0===Wr&&Jr(nr)),Wr--,a===l?r=void 0:(Ur=r,r=l),r!==l&&(a=Ga())!==l?($r=t,t=n=Pn(n)):(Ur=t,t=l)):(Ur=t,t=l),t}function ol(){var t,n,r,a;return t=Ur,47===e.charCodeAt(Ur)?(n=ur,Ur++):(n=l,0===Wr&&Jr(or)),n!==l?(r=Ur,Wr++,zn.test(e.charAt(Ur))?(a=e.charAt(Ur),Ur++):(a=l,0===Wr&&Jr(qn)),Wr--,a===l?r=void 0:(Ur=r,r=l),r!==l&&(a=Ga())!==l?($r=t,t=n=Pn(n)):(Ur=t,t=l)):(Ur=t,t=l),t}function sl(){var t,n,r,a;return t=Ur,37===e.charCodeAt(Ur)?(n=$e,Ur++):(n=l,0===Wr&&Jr(Ge)),n!==l?(r=Ur,Wr++,sr.test(e.charAt(Ur))?(a=e.charAt(Ur),Ur++):(a=l,0===Wr&&Jr(cr)),Wr--,a===l?r=void 0:(Ur=r,r=l),r!==l&&(a=Ga())!==l?($r=t,t=n=Pn(n)):(Ur=t,t=l)):(Ur=t,t=l),t}function cl(){var t,n,r,a;return t=Ur,e.substr(Ur,2)===fr?(n=fr,Ur+=2):(n=l,0===Wr&&Jr(hr)),n!==l?(r=Ur,Wr++,zn.test(e.charAt(Ur))?(a=e.charAt(Ur),Ur++):(a=l,0===Wr&&Jr(qn)),Wr--,a===l?r=void 0:(Ur=r,r=l),r!==l&&(a=Ga())!==l?($r=t,t=n=Pn(n)):(Ur=t,t=l)):(Ur=t,t=l),t}function fl(){var t,n,r,a;return t=Ur,e.substr(Ur,2)===dr?(n=dr,Ur+=2):(n=l,0===Wr&&Jr(mr)),n!==l?(r=Ur,Wr++,zn.test(e.charAt(Ur))?(a=e.charAt(Ur),Ur++):(a=l,0===Wr&&Jr(qn)),Wr--,a===l?r=void 0:(Ur=r,r=l),r!==l&&(a=Ga())!==l?($r=t,t=n=Pn(n)):(Ur=t,t=l)):(Ur=t,t=l),t}function hl(){var t,n,r,a;return t=Ur,60===e.charCodeAt(Ur)?(n=pr,Ur++):(n=l,0===Wr&&Jr(vr)),n!==l?(r=Ur,Wr++,zn.test(e.charAt(Ur))?(a=e.charAt(Ur),Ur++):(a=l,0===Wr&&Jr(qn)),Wr--,a===l?r=void 0:(Ur=r,r=l),r!==l&&(a=Ga())!==l?($r=t,t=n=Pn(n)):(Ur=t,t=l)):(Ur=t,t=l),t}function dl(){var t,n,r,a;return t=Ur,62===e.charCodeAt(Ur)?(n=gr,Ur++):(n=l,0===Wr&&Jr(yr)),n!==l?(r=Ur,Wr++,zn.test(e.charAt(Ur))?(a=e.charAt(Ur),Ur++):(a=l,0===Wr&&Jr(qn)),Wr--,a===l?r=void 0:(Ur=r,r=l),r!==l&&(a=Ga())!==l?($r=t,t=n=Pn(n)):(Ur=t,t=l)):(Ur=t,t=l),t}function ml(){var t,n;return t=Ur,e.substr(Ur,2)===br?(n=br,Ur+=2):(n=l,0===Wr&&Jr(kr)),n!==l&&Ga()!==l?($r=t,t=n=Pn(n)):(Ur=t,t=l),t}function pl(){var t,n;return t=Ur,e.substr(Ur,2)===Sr?(n=Sr,Ur+=2):(n=l,0===Wr&&Jr(xr)),n!==l&&Ga()!==l?($r=t,t=n=Pn(n)):(Ur=t,t=l),t}function vl(){var t,n;return t=Ur,e.substr(Ur,2)===Cr?(n=Cr,Ur+=2):(n=l,0===Wr&&Jr(Er)),n!==l&&Ga()!==l?($r=t,t=n=Pn(n)):(Ur=t,t=l),t}function gl(){var t,n;return t=Ur,e.substr(Ur,2)===wr?(n=wr,Ur+=2):(n=l,0===Wr&&Jr(Ar)),n!==l&&Ga()!==l?($r=t,t=n=Pn(n)):(Ur=t,t=l),t}function yl(){var t,n,r,a;return t=Ur,94===e.charCodeAt(Ur)?(n=Or,Ur++):(n=l,0===Wr&&Jr(_r)),n!==l?(r=Ur,Wr++,zn.test(e.charAt(Ur))?(a=e.charAt(Ur),Ur++):(a=l,0===Wr&&Jr(qn)),Wr--,a===l?r=void 0:(Ur=r,r=l),r!==l&&(a=Ga())!==l?($r=t,t=n=Pn(n)):(Ur=t,t=l)):(Ur=t,t=l),t}function bl(){var t,n,r,a;return t=Ur,124===e.charCodeAt(Ur)?(n=jr,Ur++):(n=l,0===Wr&&Jr(Lr)),n!==l?(r=Ur,Wr++,zn.test(e.charAt(Ur))?(a=e.charAt(Ur),Ur++):(a=l,0===Wr&&Jr(qn)),Wr--,a===l?r=void 0:(Ur=r,r=l),r!==l&&(a=Ga())!==l?($r=t,t=n=Pn(n)):(Ur=t,t=l)):(Ur=t,t=l),t}function kl(){var t,n;return t=Ur,e.substr(Ur,2)===Ir?(n=Ir,Ur+=2):(n=l,0===Wr&&Jr(Pr)),n!==l&&Ga()!==l?($r=t,t=n=Pn(n)):(Ur=t,t=l),t}function Sl(){var t,n;return t=Ur,e.substr(Ur,2)===Rr?(n=Rr,Ur+=2):(n=l,0===Wr&&Jr(Dr)),n!==l&&Ga()!==l?($r=t,t=n=Pn(n)):(Ur=t,t=l),t}function xl(){var t,n,r,a;return t=Ur,61===e.charCodeAt(Ur)?(n=Br,Ur++):(n=l,0===Wr&&Jr(Mr)),n!==l?(r=Ur,Wr++,61===e.charCodeAt(Ur)?(a=Br,Ur++):(a=l,0===Wr&&Jr(Mr)),Wr--,a===l?r=void 0:(Ur=r,r=l),r!==l&&(a=Ga())!==l?($r=t,t=n=Pn(n)):(Ur=t,t=l)):(Ur=t,t=l),t}function Cl(){var t,n;return t=Ur,44===e.charCodeAt(Ur)?(n=Nr,Ur++):(n=l,0===Wr&&Jr(Hr)),n!==l&&Ga()!==l?($r=t,t=n=Pn(n)):(Ur=t,t=l),t}var El=n(38),wl=(El.objectToAst,{mnemonic:null,imm:null,abs:null,absx:null,absy:null,absind:null,indx:null,indy:null});function Al(e,t,n,r){return i({},wl,{mnemonic:e,imm:t,abs:n,loc:r})}function Ol(e,t,n){return[e].concat(function(e,t){return e.map(function(e){return e[t]})}(t,n))}function _l(){return i({},Zr($r,Ur),{source:t.source})}if((r=s())!==l&&Ur===e.length)return r;throw r!==l&&Ur<e.length&&Jr({type:"end"}),ea(Vr,Kr<e.length?e.charAt(Kr):null,Kr<e.length?Zr(Kr,Kr+1):Zr(Kr,Kr))}}},function(e,t,n){"use strict";var r=n(14),a=n(15);Object.defineProperty(t,"__esModule",{value:!0}),t.DebugInfoTracker=void 0;var l=n(18),i=n(74),u=function(){function e(){r(this,e),this.lineStack=[],this.pcToLocs={},this.insnBitset=new i}return a(e,[{key:"startLine",value:function(e,t){var n={source:l.resolve(e.source),lineNo:e.start.line};this.lineStack.push({loc:n,pc:t})}},{key:"endLine",value:function(e){var t=this.lineStack.pop();if(!t)throw new Error("internal compiler error, mismatching start/end lines in debugInfo");if(e-t.pc>0){var n=this.pcToLocs[t.pc]||[];n.push(t.loc),this.pcToLocs[t.pc]=n}}},{key:"markAsInstruction",value:function(e,t){for(var n=e;n<t;n++)this.insnBitset.add(n)}},{key:"info",value:function(){var e=this.insnBitset.clone();return{pcToLocs:this.pcToLocs,isInstruction:function(t){return e.has(t)}}}}]),e}();t.DebugInfoTracker=u},,function(e,t,n){"use strict";var r=n(14),a=n(15);Object.defineProperty(t,"__esModule",{value:!0}),t.disassemble=t.chunkArray=void 0;var l=n(35);function i(e){return"".concat(e.toString(16).toUpperCase().padStart(2,"0"))}function u(e){return"".concat(e.toString(16).toUpperCase().padStart(4,"0"))}function o(e,t){var n=0,r=e.length,a=[];for(n=0;n<r;n+=t){var l=e.slice(n,n+t);a.push(l)}return a}function s(e,t){var n=63&e,r=e>>6;return 1===r||2===r?"".concat(n,"/").concat(n+1):3===r?t?"".concat(n+1,"/").concat(n+2):"".concat(n,"/").concat(n+1):"".concat(n)}t.chunkArray=o;var c=function(){function e(t,n,a){var o,s=this;r(this,e),this.buf=t,this.outputPadChars="     ",this.outputBytesPerLine=1,this.bytes={startPC:0,bytes:[]},this.labelsDict={},this.byte=function(){var e=s.buf.readUInt8(s.curOffs);return s.curOffs++,e},this.print=function(e,t,n,r,a){var l,o;s.flushBytes();var c=i(t[0]),f=t.length>=2?i(t[1]):"  ",h=t.length>=3?i(t[2]):"  ",d="".concat(u(e),": ").concat(c," ").concat(f," ").concat(h).concat(s.outputPadChars).concat(n),m=null===(l=s.disasmOptions)||void 0===l?void 0:l.showCycles,p=null===(o=s.disasmOptions)||void 0===o?void 0:o.showLabels;if(m||p){var v=[];m&&v.push(a),p&&v.push(r),s.output.push("".concat(d.padEnd(50),"; ").concat(v.join(" ")))}else s.output.push(d)},this.output=[],this.curAddr=t.readUInt8(0)+(t.readUInt8(1)<<8),this.curOffs=2,this.disasmOptions=a,this.labels=n,(null===(o=this.disasmOptions)||void 0===o?void 0:o.isInstruction)&&(this.outputPadChars="                    ",this.outputBytesPerLine=8),this.labels&&this.labels.forEach(function(e){var t=e.name,n=e.addr;e.size;s.labelsDict[n]=t}),this.opToDecl={},Object.keys(l.default).forEach(function(e){for(var t=l.default[e],n=0;n<t.length;n++){var r=t[n];if(null!==r){var a=t.map(function(e){return null!==e?255&e:null});s.opToDecl[255&r]={mnemonic:e,decode:a,cycles:r>>8}}}})}return a(e,[{key:"flushBytes",value:function(){for(var e=o(this.bytes.bytes,this.outputBytesPerLine),t=this.bytes.startPC,n=0;n<e.length;n++,t+=this.outputBytesPerLine){var r=e[n].map(function(e){return i(e)}).join(" ");this.output.push("".concat(u(t),": ").concat(r))}this.bytes.bytes=[]}},{key:"disImm",value:function(e,t,n,r){var a=this.curAddr,l=this.byte(),u=s(r);this.print(a,[t,l],"".concat(e," #$").concat(i(l)),n,u)}},{key:"disZp",value:function(e,t,n,r){var a=this.curAddr,l=this.byte(),u=s(r);this.print(a,[t,l],"".concat(e," $").concat(i(l)),n,u)}},{key:"disZpX",value:function(e,t,n,r){var a=this.curAddr,l=this.byte(),u=s(r);this.print(a,[t,l],"".concat(e," $").concat(i(l),",X"),n,u)}},{key:"disZpY",value:function(e,t,n,r){var a=this.curAddr,l=this.byte(),u=s(r);this.print(a,[t,l],"".concat(e," $").concat(i(l),",Y"),n,u)}},{key:"disAbs",value:function(e,t,n,r){var a=this.curAddr,l=this.byte(),i=this.byte(),o=s(r);this.print(a,[t,l,i],"".concat(e," $").concat(u(l+256*i)),n,o)}},{key:"disAbsX",value:function(e,t,n,r){var a=this.curAddr,l=this.byte(),i=this.byte(),o=s(r);this.print(a,[t,l,i],"".concat(e," $").concat(u(l+256*i),",X"),n,o)}},{key:"disAbsY",value:function(e,t,n,r){var a=this.curAddr,l=this.byte(),i=this.byte(),o=s(r);this.print(a,[t,l,i],"".concat(e," $").concat(u(l+256*i),",Y"),n,o)}},{key:"disInd",value:function(e,t,n,r){var a=this.curAddr,l=this.byte(),i=this.byte(),o=s(r);this.print(a,[t,l,i],"".concat(e," ($").concat(u(l+256*i),")"),n,o)}},{key:"disIndX",value:function(e,t,n,r){var a=this.curAddr,l=this.byte(),u=s(r);this.print(a,[t,l],"".concat(e," ($").concat(i(l),",X)"),n,u)}},{key:"disIndY",value:function(e,t,n,r){var a=this.curAddr,l=this.byte(),u=s(r);this.print(a,[t,l],"".concat(e," ($").concat(i(l),"),Y"),n,u)}},{key:"disSingle",value:function(e,t,n,r){var a=this.curAddr,l=s(r);this.print(a,[t],"".concat(e),n,l)}},{key:"disBranch",value:function(e,t,n,r){var a=this.curAddr,l=this.byte(),i=a+(l>=128?-(256-l):l)+2,o=s(r,(a+2&-256)!=(-256&i));this.print(a,[t,l],"".concat(e," $").concat(u(i)),n,o)}},{key:"disUnknown",value:function(e){0!==this.bytes.bytes.length?this.bytes.bytes.push(e):(this.bytes.bytes=[e],this.bytes.startPC=this.curAddr)}},{key:"disassemble",value:function(){var e=this.buf.byteLength,t=function(e){return!0};this.disasmOptions&&this.disasmOptions.isInstruction&&(t=this.disasmOptions.isInstruction);for(var n=this.curOffs;this.curOffs<e;){this.curAddr+=this.curOffs-n;var r="";this.curAddr in this.labelsDict&&(r=this.labelsDict[this.curAddr]),n=this.curOffs;var a=this.byte(),l=this.opToDecl[a];if(t(this.curAddr)&&void 0!==l){var i=l.decode.indexOf(a),u=l.cycles;if(0===i){this.disImm(l.mnemonic,a,r,u);continue}if(1===i){this.disZp(l.mnemonic,a,r,u);continue}if(2===i){this.disZpX(l.mnemonic,a,r,u);continue}if(3===i){this.disZpY(l.mnemonic,a,r,u);continue}if(4===i){this.disAbs(l.mnemonic,a,r,u);continue}if(5===i){this.disAbsX(l.mnemonic,a,r,u);continue}if(6===i){this.disAbsY(l.mnemonic,a,r,u);continue}if(7===i){this.disInd(l.mnemonic,a,r,u);continue}if(8===i){this.disIndX(l.mnemonic,a,r,u);continue}if(9===i){this.disIndY(l.mnemonic,a,r,u);continue}if(10===i){this.disSingle(l.mnemonic,a,r,u);continue}if(11===i){this.disBranch(l.mnemonic,a,r,u);continue}}else this.disUnknown(a)}return this.flushBytes(),this.output}}]),e}();t.disassemble=function(e,t,n){return new c(e,t,n).disassemble()}}],[[47,1,2]]]);
//# sourceMappingURL=main.fe7253b7.chunk.js.map