(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[,,,function(e,n,t){e.exports={heading:"Editor_heading__3jsuC",layoutContainer:"Editor_layoutContainer__2bFri",editorContainer:"Editor_editorContainer__1wXnR",textarea:"Editor_textarea__28EdL",textareaHighlightOverlay:"Editor_textareaHighlightOverlay__1opTU",textareaHighlightRow:"Editor_textareaHighlightRow__1R6Ia",textareaHighlightRowCurrent:"Editor_textareaHighlightRowCurrent__25KL2",highlightError:"Editor_highlightError__1YeA5",gutter:"Editor_gutter__3CDcX",gutterRow:"Editor_gutterRow__1DNMN",gutterRowSelected:"Editor_gutterRowSelected__3GiGf"}},,,,function(e,n,t){e.exports={helpModalContainer:"Help_helpModalContainer__10bLm",helpContents:"Help_helpContents__3Cbr8",headingContainer:"Help_headingContainer__jN87w",emph:"Help_emph__29_7I",hidden:"Help_hidden__2fGZK",circleReveal:"Help_circleReveal__2igbG",circle:"Help_circle__2jpkq",maxWidth:"Help_maxWidth__3MUy2",closeButtonContainer:"Help_closeButtonContainer__1TIMT",asm:"Help_asm__1yYjY"}},function(e,n,t){e.exports={layoutContainer:"DiagnosticsList_layoutContainer__3Yxfa",diagnostics:"DiagnosticsList_diagnostics__U_t5K",heading:"DiagnosticsList_heading__f0lgX",diagnosticsBox:"DiagnosticsList_diagnosticsBox__NbaZi",diagItem:"DiagnosticsList_diagItem__3otDW",selected:"DiagnosticsList_selected__jbDsD",error:"DiagnosticsList_error__1cDSO"}},,,function(e,n,t){e.exports={heading:"Disasm_heading__2ZRjL",layoutContainer:"Disasm_layoutContainer__36ehI",disasmContainer:"Disasm_disasmContainer__2QplX",downloadButton:"Disasm_downloadButton__3MkkT"}},,,,,function(e,n,t){"use strict";t.d(n,"a",function(){return r});var r="\n!filescope c64\n!macro basic_start(addr) {\n* = $801\n    !byte $0c\n    !byte $08\n    !byte $00\n    !byte $00\n    !byte $9e\n\n!if (addr >= 10000) {\n    !byte $30 + (addr/10000)%10\n}\n!if (addr >= 1000) {\n    !byte $30 + (addr/1000)%10\n}\n!if (addr >= 100) {\n    !byte $30 + (addr/100)%10\n}\n!if (addr >= 10) {\n    !byte $30 + (addr/10)%10\n}\n    !byte $30 + addr % 10\n    !byte 0, 0, 0\n}\n"},function(e,n,t){"use strict";function r(e,n){for(var t=e.split("\n"),r=0,l=0;l<n.start.line-1;l++)r+=t[l].length+1;return r+n.start.column-1}function l(e,n){for(var t=e.split("\n"),r=0,l=0;l<t.length;l++)if(n<(r+=t[l].length+1))return l}t.d(n,"a",function(){return r}),t.d(n,"b",function(){return l})},,function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=t(46);n.assemble=r.assemble,n.platformC64=r.platformC64;var l=t(67);n.disassemble=l.disassemble},function(e,n,t){e.exports={buttonContainer:"CloseButton_buttonContainer__28ZWo",close:"CloseButton_close__1cumB"}},function(e,n,t){e.exports={navContainer:"App_navContainer__32B3M",appTitle:"App_appTitle__2SEQk"}},,,,function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.default={ADC:[105,101,117,null,109,125,121,null,97,113,null,null],AND:[41,37,53,null,45,61,57,null,33,49,null,null],ASL:[null,6,22,null,14,30,null,null,null,null,10,null],BIT:[null,36,null,null,44,null,null,null,null,null,null,null],BPL:[null,null,null,null,null,null,null,null,null,null,null,16],BMI:[null,null,null,null,null,null,null,null,null,null,null,48],BVC:[null,null,null,null,null,null,null,null,null,null,null,80],BVS:[null,null,null,null,null,null,null,null,null,null,null,112],BCC:[null,null,null,null,null,null,null,null,null,null,null,144],BCS:[null,null,null,null,null,null,null,null,null,null,null,176],BNE:[null,null,null,null,null,null,null,null,null,null,null,208],BEQ:[null,null,null,null,null,null,null,null,null,null,null,240],BRK:[null,null,null,null,null,null,null,null,null,null,0,null],CMP:[201,197,213,null,205,221,217,null,193,209,null,null],CPX:[224,228,null,null,236,null,null,null,null,null,null,null],CPY:[192,196,null,null,204,null,null,null,null,null,null,null],DEC:[null,198,214,null,206,222,null,null,null,null,null,null],EOR:[73,69,85,null,77,93,89,null,65,81,null,null],CLC:[null,null,null,null,null,null,null,null,null,null,24,null],SEC:[null,null,null,null,null,null,null,null,null,null,56,null],CLI:[null,null,null,null,null,null,null,null,null,null,88,null],SEI:[null,null,null,null,null,null,null,null,null,null,120,null],CLV:[null,null,null,null,null,null,null,null,null,null,184,null],CLD:[null,null,null,null,null,null,null,null,null,null,216,null],SED:[null,null,null,null,null,null,null,null,null,null,248,null],INC:[null,230,246,null,238,254,null,null,null,null,null,null],JMP:[null,null,null,null,76,null,null,108,null,null,null,null],JSR:[null,null,null,null,32,null,null,null,null,null,null,null],LDA:[169,165,181,null,173,189,185,null,161,177,null,null],LDX:[162,166,null,182,174,null,190,null,null,null,null,null],LDY:[160,164,180,null,172,188,null,null,null,null,null,null],LSR:[null,70,86,null,78,94,null,null,null,null,74,null],NOP:[null,null,null,null,null,null,null,null,null,null,234,null],ORA:[9,5,21,null,13,29,25,null,1,17,null,null],TAX:[null,null,null,null,null,null,null,null,null,null,170,null],TXA:[null,null,null,null,null,null,null,null,null,null,138,null],DEX:[null,null,null,null,null,null,null,null,null,null,202,null],INX:[null,null,null,null,null,null,null,null,null,null,232,null],TAY:[null,null,null,null,null,null,null,null,null,null,168,null],TYA:[null,null,null,null,null,null,null,null,null,null,152,null],DEY:[null,null,null,null,null,null,null,null,null,null,136,null],INY:[null,null,null,null,null,null,null,null,null,null,200,null],ROR:[null,102,118,null,110,126,null,null,null,null,106,null],ROL:[null,38,54,null,46,62,null,null,null,null,42,null],RTI:[null,null,null,null,null,null,null,null,null,null,64,null],RTS:[null,null,null,null,null,null,null,null,null,null,96,null],SBC:[233,229,245,null,237,253,249,null,225,241,null,null],STA:[null,133,149,null,141,157,153,null,129,145,null,null],TXS:[null,null,null,null,null,null,null,null,null,null,154,null],TSX:[null,null,null,null,null,null,null,null,null,null,186,null],PHA:[null,null,null,null,null,null,null,null,null,null,72,null],PLA:[null,null,null,null,null,null,null,null,null,null,104,null],PHP:[null,null,null,null,null,null,null,null,null,null,8,null],PLP:[null,null,null,null,null,null,null,null,null,null,40,null],STX:[null,134,null,150,142,null,null,null,null,null,null,null],STY:[null,132,148,null,140,null,null,null,null,null,null,null],"---":[null,null,null,null,null,null,null,null,null,null,null,null]}},,function(e,n,t){"use strict";function r(e,n){return{type:"literal",lit:e,loc:n}}Object.defineProperty(n,"__esModule",{value:!0}),n.mkLiteral=r,n.mkScopeQualifiedIdent=function(e,n,t){return{type:"qualified-ident",path:e,absolute:n,loc:t}},n.mkIdent=function(e,n){return{type:"ident",name:e,loc:n}},n.mkUnary=function(e,n,t){return{type:"unary",op:e,expr:n,loc:t}},n.mkBinaryOp=function(e,n,t,r){return{type:"binary",op:e,left:n,right:t,loc:r}},n.mkExprArray=function(e,n){return{type:"array",list:e,loc:n}},n.mkCallFunc=function(e,n,t){return{type:"callfunc",callee:e,args:null==n?[]:n,loc:t}},n.mkMember=function(e,n,t,r){return{type:"member",object:e,property:n,computed:t,loc:r}},function(e){e[e.Byte=0]="Byte",e[e.Word=1]="Word"}(n.DataSize||(n.DataSize={})),n.mkLabel=function(e,n){return{name:e,loc:n}},n.mkInsn=function(e,n){return{type:"insn",insn:e,loc:n}},n.mkSetPC=function(e,n){return{type:"setpc",pc:e,loc:n}},n.mkData=function(e,n,t){return{type:"data",values:n,dataSize:e,loc:t}},n.mkFill=function(e,n,t){return{type:"fill",numBytes:e,fillValue:n,loc:t}},n.mkAlign=function(e,n){return{type:"align",alignBytes:e,loc:n}},n.mkInclude=function(e,n){return{type:"include",filename:e,loc:n}},n.mkError=function(e,n){return{type:"error",error:e,loc:n}},n.mkBinary=function(e,n,t,r){return{type:"binary",filename:e,size:n,offset:t,loc:r}},n.mkIfElse=function(e,n,t){return{type:"if",cases:e,elseBranch:null!==n?n:[],loc:t}},n.mkFor=function(e,n,t,r){return{type:"for",index:e,list:n,body:t,loc:r}},n.mkMacroArg=function(e){return{ident:e}},n.mkMacro=function(e,n,t,r){return{type:"macro",name:e,args:null==n?[]:n,body:t,loc:r}},n.mkCallMacro=function(e,n,t){return{type:"callmacro",name:e,args:null==n?[]:n,loc:t}},n.mkLet=function(e,n,t){return{type:"let",name:e,value:n,loc:t}},n.mkAssign=function(e,n,t){return{type:"assign",name:e,value:n,loc:t}},n.mkLoadPlugin=function(e,n,t){return{type:"load-plugin",filename:e,moduleName:n,loc:t}},n.mkFilescope=function(e,n){return{type:"filescope",name:e,loc:n}},n.mkAsmLine=function(e,n,t,r){return{label:e,stmt:n,scopedStmts:t,loc:r}},n.objectToAst=function e(n,t){return Array.isArray(n)?{type:"array",values:n.map(function(n){return e(n,t)}),loc:t}:"object"===typeof n?{type:"object",props:Object.keys(n).map(function(r){return{key:r,val:e(n[r],t)}}),loc:t}:"number"===typeof n?r(n,t):"string"===typeof n?r(n,t):void 0}},function(e,n,t){"use strict";(function(e){var r=t(4),l=t(5),a=t(6),i=t(1),u=t(2),o=t(0),s=t.n(o),c=t(19),f=t(16),d=t(17),h=t(29),p=t(31),m=t(33),v=t(35),y=t(21),b=t.n(y);var g={useWebWorkers:!0};function k(e){return s.a.createElement("span",{"aria-label":"emoji",role:"img"},e.emoji)}var E=function(n){function t(){var n,l;Object(r.a)(this,t);for(var u=arguments.length,o=new Array(u),s=0;s<u;s++)o[s]=arguments[s];return(l=Object(a.a)(this,(n=Object(i.a)(t)).call.apply(n,[this].concat(o)))).assemblerWorker=void 0,l.state={sourceCode:"",disassembly:[],prg:e.from([]),diagnosticsIndex:0,diagnostics:[],helpVisible:!1},l.handleWorkerMessage=function(e){0===e.data.diagnostics.length?l.setState({prg:e.data.prg,disassembly:e.data.disassembly,diagnostics:e.data.diagnostics}):l.setState({diagnostics:e.data.diagnostics})},l.handleKeyDown=function(e){"F4"===e.key&&(l.setState(function(n){return 0===n.diagnostics.length?{diagnosticsIndex:0}:void 0===n.diagnosticsIndex?{diagnosticsIndex:0}:e.shiftKey?{diagnosticsIndex:Math.max(0,n.diagnosticsIndex-1)}:{diagnosticsIndex:Math.min(n.diagnostics.length-1,n.diagnosticsIndex+1)}}),e.preventDefault()),"Escape"===e.key&&(l.setState({diagnosticsIndex:void 0,helpVisible:!1}),e.preventDefault())},l.handleOnClickDiagnostic=function(e){l.setState({diagnosticsIndex:e})},l.debouncedCompile=function(e,n){var t=void 0;return function(){for(var r=this,l=arguments.length,a=new Array(l),i=0;i<l;i++)a[i]=arguments[i];clearTimeout(t),t=window.setTimeout(function(){return e.apply(r,a)},n)}}(function(e){g.useWebWorkers&&l.assemblerWorker&&l.assemblerWorker.postMessage(e)},250),l.handleSetSource=function(e){var n={"main.asm":e,"c64.asm":f.a};if(g.useWebWorkers&&l.assemblerWorker)l.debouncedCompile({sourceFileMap:n}),l.setState({sourceCode:e,diagnosticsIndex:void 0});else{var t={readFileSync:function(e){if(e in n)return n[e];throw new Error("File not found ".concat(e))}},r=Object(c.assemble)("main.asm",t);0===r.errors.length?l.setState({sourceCode:e,prg:r.prg,disassembly:Object(c.disassemble)(r.prg),diagnostics:[],diagnosticsIndex:void 0}):l.setState({sourceCode:e,diagnostics:r.errors,diagnosticsIndex:void 0})}},l.handleClearDiagnosticsSelectionOnKey=function(e){"F4"!==e.key&&"Shift"!==e.key&&void 0!==l.state.diagnosticsIndex&&l.setState({diagnosticsIndex:void 0})},l.handleClearDiagnosticsSelectionOnMouse=function(e){void 0!==l.state.diagnosticsIndex&&l.setState({diagnosticsIndex:void 0})},l.handleClickHelp=function(e){e.preventDefault(),l.setState({helpVisible:!0})},l.handleCloseHelp=function(){l.setState({helpVisible:!1})},l}return Object(u.a)(t,n),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;document.addEventListener("keydown",this.handleKeyDown),this.assemblerWorker=new Worker("worker.js"),null!==this.assemblerWorker&&this.assemblerWorker.addEventListener("message",function(n){e.handleWorkerMessage(n)})}},{key:"render",value:function(){var e=this.state.diagnostics,n=void 0;if(0!==e.length&&void 0!==this.state.diagnosticsIndex){var t=e[this.state.diagnosticsIndex];n=Object(d.a)(this.state.sourceCode,t.loc)}return s.a.createElement("div",{id:"root"},s.a.createElement("nav",{id:"mainNav"},s.a.createElement("div",{className:b.a.navContainer},s.a.createElement("div",{className:b.a.appTitle},s.a.createElement("a",{href:"https://nurpax.github.io/c64jasm/"},"c64jasm")," online"),s.a.createElement("p",null,"A little experimental 6502 assembler for the C64"),s.a.createElement("p",null,s.a.createElement(k,{emoji:"\ud83d\udc49"})," ",s.a.createElement("a",{onClick:this.handleClickHelp,href:"/",target:"_blank"},"help")),s.a.createElement("p",null,s.a.createElement(k,{emoji:"\ud83d\udc49"})," ",s.a.createElement("a",{href:"https://github.com/nurpax/c64jasm-browser"},"source code")))),s.a.createElement("div",{onKeyDown:this.handleClearDiagnosticsSelectionOnKey,onMouseDown:this.handleClearDiagnosticsSelectionOnMouse,onMouseUp:this.handleClearDiagnosticsSelectionOnMouse,id:"mainCode"},s.a.createElement(h.a,{onSourceChanged:this.handleSetSource,diagnostics:this.state.diagnostics,errorCharOffset:n})),s.a.createElement("div",{id:"siteDisasm"},s.a.createElement(p.a,{disassembly:this.state.disassembly,prg:this.state.prg})),s.a.createElement("div",{id:"mainDiag"},s.a.createElement(m.a,{onClickItem:this.handleOnClickDiagnostic,diagnostics:this.state.diagnostics,selectedIndex:this.state.diagnosticsIndex})),s.a.createElement(v.a,{visible:this.state.helpVisible,onClose:this.handleCloseHelp}))}}]),t}(s.a.Component);n.a=E}).call(this,t(23).Buffer)},function(e,n,t){"use strict";t.d(n,"a",function(){return x});var r=t(34),l=t(4),a=t(5),i=t(6),u=t(1),o=t(2),s=t(0),c=t.n(s),f=t(30),d=t.n(f),h=t(9),p=t.n(h),m=t(17),v=t(3),y=t.n(v);function b(e,n){b=function(e,n){return new i(e,n)};var t=Object(r.a)(RegExp),l=RegExp.prototype,a=new WeakMap;function i(e,n){var r=t.call(this,e);return a.set(r,n),r}function u(e,n){var t=a.get(n);return Object.keys(t).reduce(function(n,r){return n[r]=e[t[r]],n},Object.create(null))}return Object(o.a)(i,t),i.prototype.exec=function(e){var n=l.exec.call(this,e);return n&&(n.groups=u(n,this)),n},i.prototype[Symbol.replace]=function(e,n){if("string"===typeof n){var t=a.get(this);return l[Symbol.replace].call(this,e,n.replace(/\$<([^>]+)>/g,function(e,n){return"$"+t[n]}))}if("function"===typeof n){var r=this;return l[Symbol.replace].call(this,e,function(){var e=[];return e.push.apply(e,arguments),"object"!==typeof e[e.length-1]&&e.push(u(e,r)),n.apply(this,e)})}return l[Symbol.replace].call(this,e,n)},b.apply(this,arguments)}var g=4;function k(e,n){for(var t=0,r=0;r<n;r++){if(e.length<r)return;"\t"===e[r]?t+=g:t++}return t}function E(e){var n=0;if(!e.text)return null;var t=!0,r=!1,l=void 0;try{for(var a,i=e.text[Symbol.iterator]();!(t=(a=i.next()).done);t=!0){"\t"===a.value?n+=g:n++}}catch(m){r=!0,l=m}finally{try{t||null==i.return||i.return()}finally{if(r)throw l}}var u=Array(n).fill(!1),o=!0,f=!1,d=void 0;try{for(var h,p=e.errors[Symbol.iterator]();!(o=(h=p.next()).done);o=!0){var m=h.value,v=k(e.text,m.start.column-1);if(void 0===v)return null;var b=m.start.line===m.end.line?k(e.text,m.end.column-1):v+1;if(void 0===b)return null;for(var E=v;E<b;E++)u[E]=!0}}catch(m){f=!0,d=m}finally{try{o||null==p.return||p.return()}finally{if(f)throw d}}for(var C=function(e){var n=void 0,t=[],r=!0,l=!1,a=void 0;try{for(var i,u=e[Symbol.iterator]();!(r=(i=u.next()).done);r=!0){var o=i.value;n!==o?(n=o,t.push({code:n,count:1})):t[t.length-1].count++}}catch(m){l=!0,a=m}finally{try{r||null==u.return||u.return()}finally{if(l)throw a}}return t}(u),S=[],x=0;x<C.length;x++){var w=C[x];w.code?S.push(c.a.createElement("pre",{key:x,style:{display:"inline-block"},className:y.a.highlightError}," ".repeat(w.count))):S.push(c.a.createElement("pre",{key:x,style:{display:"inline-block"}}," ".repeat(w.count)))}return c.a.createElement(s.Fragment,null,S)}var C=c.a.forwardRef(function(e,n){for(var t=[],r=e.startRow;r<e.startRow+e.numRows+2;r++){var l=r===e.currentLine&&y.a.textareaHighlightRowCurrent,a=e.lineToErrors.get(r);if(a){var i=e.textLines[r];t.push(c.a.createElement("div",{className:p()(y.a.textareaHighlightRow,l),key:r},c.a.createElement(E,{text:i,errors:a})))}else t.push(c.a.createElement("div",{className:p()(y.a.textareaHighlightRow,l),key:r}))}return c.a.createElement("div",{ref:n,className:y.a.textareaHighlightOverlay},t)}),S=c.a.forwardRef(function(e,n){for(var t=[],r=e.startRow;r<e.startRow+e.numRows+2;r++){var l="".concat(r+1),a=r===e.currentLine&&y.a.gutterRowSelected,i=r>=0&&r<e.numTextRows?l.padStart(4," "):"";t.push(c.a.createElement("div",{className:p()(y.a.gutterRow,a),key:r},i))}return c.a.createElement("div",{ref:n,className:y.a.gutter},t)}),x=function(e){function n(e){var t;Object(l.a)(this,n),(t=Object(i.a)(this,Object(u.a)(n).call(this,e))).editorLineHeight=0,t.numEditorCharRows=0,t.textareaRef=c.a.createRef(),t.gutterRef=c.a.createRef(),t.highlighterRef=c.a.createRef(),t.handleScroll=function(e){var n=e.nativeEvent.target.scrollTop;t.setState({scrollTop:n})},t.handleSourceChanged=function(e){t.props.onSourceChanged(e.target.value),t.setState({textLines:e.target.value.split("\n")})},t.updateCursorState=function(){if(t.textareaRef&&t.textareaRef.current){var e=t.textareaRef.current;if(e.selectionStart===e.selectionEnd){var n=e.selectionStart,r=Object(m.b)(t.textareaRef.current.value,n);t.setState({currentLine:r})}else t.setState({currentLine:void 0})}},t.handleSelect=function(e){t.updateCursorState()},t.handleKeyDown=function(e){t.updateCursorState()},t.handleKeyUp=function(e){t.updateCursorState()},t.handleMouseDown=function(e){if(t.textareaRef&&t.textareaRef.current){var n=e.nativeEvent.offsetY+t.state.scrollTop;t.setState({currentLine:Math.min(t.state.textLines.length-1,Math.floor(n/t.editorLineHeight))})}},t.state={scrollTop:0,currentLine:void 0,textLines:[]};var r=getComputedStyle(document.documentElement).getPropertyValue("--code-window-line-height"),a=b(/^[ ]*([0-9]+)px$/,{height:1}).exec(r);if(!a)throw new Error("failed querying css var --code-window-line-height"+r);t.editorLineHeight=parseInt(a.groups.height);var o=getComputedStyle(document.documentElement).getPropertyValue("--code-window-num-lines");if(!(a=b(/^[ ]*([0-9]+)$/,{lines:1}).exec(o)))throw new Error("failed querying css var --code-window-num-lines");return t.numEditorCharRows=parseInt(a.groups.lines),t}return Object(o.a)(n,e),Object(a.a)(n,[{key:"componentDidMount",value:function(){this.textareaRef&&this.textareaRef.current&&(d.a.watch(this.textareaRef.current),this.textareaRef.current.spellcheck=!1,this.textareaRef.current.focus())}},{key:"componentDidUpdate",value:function(e,n){if(this.textareaRef&&this.textareaRef.current&&void 0!==this.props.errorCharOffset&&(this.textareaRef.current.focus(),this.textareaRef.current.setSelectionRange(this.props.errorCharOffset,this.props.errorCharOffset)),n.scrollTop!==this.state.scrollTop){var t=this.state.scrollTop%this.editorLineHeight;this.gutterRef&&this.gutterRef.current&&(this.gutterRef.current.scrollTop=t),this.highlighterRef&&this.highlighterRef.current&&(this.highlighterRef.current.scrollTop=t)}}},{key:"render",value:function(){var e=new Map;this.props.diagnostics.forEach(function(n){var t=n.loc,r=t.start.line-1,l=e.has(r)?e.get(r):[];l.push(t),e.set(r,l)});var n=Math.floor(this.state.scrollTop/this.editorLineHeight);return c.a.createElement("div",{className:y.a.layoutContainer},c.a.createElement("div",{className:y.a.heading},"Assembly"),c.a.createElement("div",{className:y.a.editorContainer},c.a.createElement(S,{ref:this.gutterRef,startRow:n,numRows:this.numEditorCharRows,numTextRows:this.state.textLines.length,currentLine:this.state.currentLine}),c.a.createElement("div",{className:y.a.textContainer,onMouseDown:this.handleMouseDown},c.a.createElement(C,{ref:this.highlighterRef,startRow:n,numRows:this.numEditorCharRows,currentLine:this.state.currentLine,textLines:this.state.textLines,lineToErrors:e}),c.a.createElement("textarea",{wrap:"off",onKeyUp:this.handleKeyUp,onKeyDown:this.handleKeyDown,onSelect:this.handleSelect,onScroll:this.handleScroll,ref:this.textareaRef,onChange:this.handleSourceChanged,className:y.a.textarea}))))}}]),n}(c.a.Component)},,function(e,n,t){"use strict";t.d(n,"a",function(){return m});var r=t(4),l=t(5),a=t(6),i=t(1),u=t(2),o=t(0),s=t.n(o),c=t(32),f=t.n(c),d=t(11),h=t.n(d);function p(e){return s.a.createElement("div",null,s.a.createElement("a",{onClick:e.onClick,className:h.a.downloadButton,href:"/",target:"_blank"},"Download .PRG"))}var m=function(e){function n(){var e,t;Object(r.a)(this,n);for(var l=arguments.length,u=new Array(l),o=0;o<l;o++)u[o]=arguments[o];return(t=Object(a.a)(this,(e=Object(i.a)(n)).call.apply(e,[this].concat(u)))).handleDownloadPRG=function(e){e.preventDefault();var n=new Blob([t.props.prg]);f.a.saveAs(n,"c64jasm-online.prg")},t}return Object(u.a)(n,e),Object(l.a)(n,[{key:"render",value:function(){return s.a.createElement("div",{className:h.a.layoutContainer},s.a.createElement("div",{className:h.a.heading},s.a.createElement("div",null,"Disassembly"),s.a.createElement(p,{onClick:this.handleDownloadPRG})),s.a.createElement("div",{className:h.a.disasmContainer},s.a.createElement("pre",null,this.props.disassembly.join("\n"))))}}]),n}(s.a.Component)},,function(e,n,t){"use strict";t.d(n,"a",function(){return h});var r=t(4),l=t(5),a=t(6),i=t(1),u=t(2),o=t(0),s=t.n(o),c=t(8),f=t.n(c),d=function(e){function n(){var e,t;Object(r.a)(this,n);for(var l=arguments.length,u=new Array(l),o=0;o<l;o++)u[o]=arguments[o];return(t=Object(a.a)(this,(e=Object(i.a)(n)).call.apply(e,[this].concat(u)))).itemRef=s.a.createRef(),t}return Object(u.a)(n,e),Object(l.a)(n,[{key:"componentDidUpdate",value:function(e,n,t){this.itemRef&&this.itemRef.current&&this.props.selected&&this.itemRef.current.scrollIntoView({behavior:"smooth",block:"center"})}},{key:"render",value:function(){var e=this,n=this.props.error,t=n.loc,r=n.msg,l=this.props.selected?" ".concat(f.a.selected):"";return s.a.createElement("div",{ref:this.itemRef,className:"".concat(f.a.diagItem).concat(l),onClick:function(){return e.props.onClickItem(e.props.index)}},s.a.createElement("span",{className:"".concat(f.a.error).concat(l)},"main.asm:",t.start.line,":",t.start.column,": error:")," ",r)}}]),n}(s.a.Component),h=function(e){function n(){var e,t;Object(r.a)(this,n);for(var l=arguments.length,u=new Array(l),o=0;o<l;o++)u[o]=arguments[o];return(t=Object(a.a)(this,(e=Object(i.a)(n)).call.apply(e,[this].concat(u)))).handleOnClickItem=function(e){t.props.onClickItem(e)},t}return Object(u.a)(n,e),Object(l.a)(n,[{key:"render",value:function(){var e=this,n=this.props.diagnostics;return s.a.createElement("div",{className:f.a.layoutContainer},s.a.createElement("div",{className:f.a.heading},"Diagnostics"),s.a.createElement("div",{className:f.a.diagnostics},s.a.createElement("div",{className:f.a.diagnosticsBox},n.map(function(n,t){return s.a.createElement(d,{key:JSON.stringify(n.loc),index:t,error:n,selected:t===e.props.selectedIndex,onClickItem:e.handleOnClickItem})}))))}}]),n}(s.a.Component)},,function(e,n,t){"use strict";var r=t(4),l=t(5),a=t(6),i=t(1),u=t(2),o=t(0),s=t.n(o),c=t(15),f=t.n(c),d=t(9),h=t.n(d),p=t(20),m=t.n(p);function v(e){return s.a.createElement("div",{className:m.a.buttonContainer},s.a.createElement("a",{title:"Close Help",href:"/",target:"_blank",className:m.a.close,onClick:function(n){n.preventDefault(),e.onClose()}}))}var y=t(7),b=t.n(y),g=t(16),k=document.getElementById("modal-root"),E=function(e){function n(e){var t;return Object(r.a)(this,n),(t=Object(a.a)(this,Object(i.a)(n).call(this,e))).el=void 0,t.el=document.createElement("div"),t}return Object(u.a)(n,e),Object(l.a)(n,[{key:"componentDidMount",value:function(){k.appendChild(this.el)}},{key:"componentWillUnmount",value:function(){k.removeChild(this.el)}},{key:"render",value:function(){return f.a.createPortal(this.props.children,this.el)}}]),n}(s.a.Component);function C(e){return s.a.createElement("pre",{className:b.a.asm},function(e){var n,t,r=e.split("\n");for(n=0;n<r.length&&0===r[n].trim().length;n++);for(t=r.length-1;t>=0&&0===r[t].trim().length;t--);return r.slice(n,t+1).join("\n")}(e.text))}var S=function(e){function n(){return Object(r.a)(this,n),Object(a.a)(this,Object(i.a)(n).apply(this,arguments))}return Object(u.a)(n,e),Object(l.a)(n,[{key:"render",value:function(){return s.a.createElement("div",{className:h()(b.a.helpContents,b.a.maxWidth)},s.a.createElement("div",{className:b.a.headingContainer},s.a.createElement("div",{className:b.a.closeButtonContainer},s.a.createElement(v,{onClose:this.props.onClose})),s.a.createElement("h1",null,"c64jasm online ")),s.a.createElement("p",null,s.a.createElement("a",{href:"https://nurpax.github.io/c64jasm/"},"c64jasm")," is a 6502 assembler written in JavaScript. You can run it either on the command line using Node or link it into a web app."),s.a.createElement("p",null,s.a.createElement("a",{href:"https://nurpax.github.io/c64jasm-browser/"},"c64jasm online")," is an interactive assembler demo site where you can write 6502 assembly with live error reporting and disassembly."),s.a.createElement("h3",null,"Examples"),s.a.createElement("p",null,"Simple instructions and expressions:"),s.a.createElement(C,{text:"\n    lda #2+2  ; expression in an immediate field\n    sta $d020 ; set border color\n        "}),s.a.createElement("p",null,"Labels:"),s.a.createElement(C,{text:"\nentry: {\n    jsr func\n\n    ldx #8\nloop: ; label local to 'entry' scope\n    dex\n    bpl loop\n}\n\nfunc: {\n    ldx #7\nloop: ; label local to 'func' scope\n    sta buf, x   ; store to buf\n    dex\n    bpl loop\n    rts\n\nbuf: !fill 8, 0    ; 8 byte array\n}\n        "}),s.a.createElement("p",null,"Declaring and using variables:"),s.a.createElement(C,{text:"\n!let num_sprites = 4\n!let sprite_mask = (1<<num_sprites)-1\n\n    lda #sprite_mask\n    sta $d015 ; enable sprites 0-3\n        "}),s.a.createElement("p",null,"Conditional compilation and repetition:"),s.a.createElement(C,{text:"\n!let num_sprites = 4\n    lda #13  ; ptr to sprite data 1 (==address/64)\n    ldx #14  ; ptr to sprite data 2\n\n!for i in range(num_sprites) {\n    !if (i < 2) {\n        sta $07f8+i   ; sprite data 1 from A\n    } else {\n        stx $07f8+i   ; sprite data 2 from X\n    }\n}\n        "}),s.a.createElement("p",null,"Define and use macro macro:"),s.a.createElement(C,{text:"\n!macro set_border(color) {\n    lda #color\n    sta $d020\n}\n\n+set_border(13)  ; expand\n        "}),s.a.createElement("p",null,"A complete C64 program.  To compile a C64 ",s.a.createElement("code",null,".prg")," you need to insert a BASIC startup sequence at the beginning of your output ",s.a.createElement("code",null,".prg")," -- you can use the ",s.a.createElement("code",null,"c64::basic_entry")," macro to do this. The source code to these macros is shown in a later section."),s.a.createElement(C,{text:'\n!include "c64.asm"\n\n+c64::basic_start(entry)\n\nentry: {\n    lda #0\n}\n        '}),s.a.createElement("h3",null,"Built-in support macros"),s.a.createElement("p",null,"The c64jasm online site comes with a small macro library.  You can find their source code below."),s.a.createElement("p",null,"The builtin ",s.a.createElement("code",null,"c64.asm")," contents:"),s.a.createElement(C,{text:g.a}))}}]),n}(s.a.Component),x=function(e){function n(){return Object(r.a)(this,n),Object(a.a)(this,Object(i.a)(n).apply(this,arguments))}return Object(u.a)(n,e),Object(l.a)(n,[{key:"render",value:function(){var e=this.props.visible;return s.a.createElement(E,null,s.a.createElement("div",{className:h()(e?b.a.helpModalContainer:b.a.hidden)},s.a.createElement("div",{className:b.a.circleReveal},s.a.createElement(S,{onClose:this.props.onClose}))))}}]),n}(s.a.Component);n.a=x},function(e,n,t){e.exports=t(37)},function(e,n,t){"use strict";t.r(n);var r=t(0),l=t.n(r),a=t(15),i=t.n(a),u=(t(42),t(28));i.a.render(l.a.createElement(u.a,null),document.getElementById("viewport_root"))},,,,,function(e,n,t){},,,,function(e,n,t){"use strict";(function(e){var r=t(24),l=t(50),a=t(12),i=t(13);Object.defineProperty(n,"__esModule",{value:!0});var u=t(25),o=t(14),s=t(55),c=t(26),f=t(61),d=t(27),h=t(62),p=t(66);function m(e){return{value:e,errors:!0}}function v(e){return{value:e,errors:!1}}function y(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];return n.some(function(e){return void 0!==e&&e.errors})}n.platformC64={name:"c64",defaultStartPC:2049};var b=function(){function e(n,t){a(this,e),this.syms=new Map,this.parent=null,this.children=new Map,this.parent=n,this.name=t}return i(e,[{key:"enter",value:function(n){var t=this.children.get(n);if(void 0!==t)return t;var r=new e(this,n);return this.children.set(n,r),r}},{key:"leave",value:function(){return this.parent}},{key:"findSymbol",value:function(e){for(var n=this;null!==n;n=n.parent){var t=n.syms.get(e);if(void 0!==t)return t}}},{key:"findSymbolPath",value:function(e){if(1==e.length)return this.findSymbol(e[0]);for(var n=this;void 0==n.children.get(e[0]);)if(null==(n=n.parent))return;for(var t=0;t<e.length-1;t++)if(void 0==(n=n.children.get(e[t])))return;return n.syms.get(e[e.length-1])}},{key:"addSymbol",value:function(e,n,t){this.syms.set(e,Object.assign({},n,{seen:t}))}},{key:"updateSymbol",value:function(e,n,t){for(var r=this;null!==r;r=r.parent){if(void 0!==r.syms.get(e))return void r.syms.set(e,Object.assign({},n,{seen:t}))}}}]),e}(),g=function(){function e(){a(this,e),this.passCount=0,this.root=new b(null,""),this.curSymtab=this.root,this.anonScopeCount=0}return i(e,[{key:"startPass",value:function(e){this.curSymtab=this.root,this.anonScopeCount=0,this.passCount=e}},{key:"withAnonScope",value:function(e){var n="__anon_scope_".concat(this.anonScopeCount);this.anonScopeCount++,this.withLabelScope(n,e)}},{key:"withLabelScope",value:function(e,n){this.curSymtab=this.curSymtab.enter(e),n(),this.curSymtab=this.curSymtab.leave()}},{key:"findPath",value:function(e,n){return n?this.root.findSymbolPath(e):this.curSymtab.findSymbolPath(e)}},{key:"findQualifiedSym",value:function(e,n){return this.findPath(e,n)}},{key:"symbolSeen",value:function(e){var n=this.curSymtab.syms.get(e);return void 0!==n&&n.seen==this.passCount}},{key:"declareLabelSymbol",value:function(e,n){var t=e.name,r=e.loc,l=this.curSymtab.syms.get(t);if(void 0==l){var a={type:"label",data:v({addr:n,loc:r})};return this.curSymtab.addSymbol(t,a,this.passCount),!1}if("label"!==l.type)throw new Error("ICE: declareLabelSymbol should be called only on labels");if(l.data.value.addr!==n){var i={type:"label",data:Object.assign({},l.data,{value:Object.assign({},l.data.value,{addr:n})})};return this.curSymtab.updateSymbol(t,i,this.passCount),!0}return this.curSymtab.updateSymbol(t,l,this.passCount),!1}},{key:"declareVar",value:function(e,n){this.curSymtab.addSymbol(e,{type:"var",data:n},this.passCount)}},{key:"updateVar",value:function(e,n){var t={type:"var",data:n};this.curSymtab.updateSymbol(e,t,this.passCount)}},{key:"findMacro",value:function(e,n){var t=this.findPath(e,n);if(void 0!==t&&"macro"==t.type)return t.data}},{key:"declareMacro",value:function(e,n){this.curSymtab.addSymbol(e,{type:"macro",data:n},this.passCount)}},{key:"dumpLabels",value:function(e){var n=[],t=function(e,t){n.push({prefix:"".concat(e,"/").concat(t.name),sym:t})};t("",this.root);for(var r=[];n.length>0;){var a=n.pop(),i=!0,u=!1,o=void 0;try{for(var s,c=a.sym.syms[Symbol.iterator]();!(i=(s=c.next()).done);i=!0){var f=s.value,d=l(f,2),h=d[0],p=d[1];"label"==p.type&&r.push({name:"".concat(a.prefix,"/").concat(h),addr:p.data.value.addr,size:0})}}catch(_){u=!0,o=_}finally{try{i||null==c.return||c.return()}finally{if(u)throw o}}var m=!0,v=!1,y=void 0;try{for(var b,g=a.sym.children[Symbol.iterator]();!(m=(b=g.next()).done);m=!0){var k=b.value,E=l(k,2),C=(E[0],E[1]);t(a.prefix,C)}}catch(_){v=!0,y=_}finally{try{m||null==g.return||g.return()}finally{if(v)throw y}}}var S=r.sort(function(e,n){return e.addr-n.addr}),x=S.length;if(x>0){for(var w=1;w<x;w++)S[w-1].size=S[w].addr-S[w-1].addr;var A=S[x-1];A.size=e-A.addr}return S}}]),e}();function k(e){return{source:e,start:{offset:0,line:0,column:0},end:{offset:0,line:0,column:0}}}function E(e){var n=typeof e;return"object"===n&&e instanceof Array?"array":n}function C(e){return"".concat(e.absolute?"::":"").concat(e.path.join("::"))}var S=function(e,n,t){var r=t(e.value,n.value);return v("boolean"==typeof r?r?1:0:r)},x=function(e,n){if(y(e))return m(0);var t=n(e.value);return v("boolean"==typeof t?t?1:0:t)},w=function(){function t(e){var r=this;a(this,t),this.binary=[],this.parseCache=new h.default,this.pluginCache=new Map,this.includeStack=[],this.initialPC=0,this.codePC=0,this.codePCSet=!1,this.pass=0,this.needPass=!1,this.scopes=new g,this.errorList=[],this.warningList=[],this.outOfRangeBranches=[],this.debugInfo=new p.DebugInfoTracker,this.errors=function(){return r.formatErrors(r.errorList,"error")},this.warnings=function(){return r.formatErrors(r.warningList,"warning")},this.readFileSyncFunc=e.readFileSync,this.platform=e.platformOptions||n.platformC64}return i(t,[{key:"readFileSync",value:function(e,n){return this.readFileSyncFunc(e,n)}},{key:"prg",value:function(){var n=255&this.initialPC,t=this.initialPC>>8&255;return e.from([n,t].concat(this.binary))}},{key:"parse",value:function(e,n){var t=this,r=void 0==n?k(e):n;return this.parseCache.parse(e,n,function(e,n){return t.guardedReadFileSync(e,r)})}},{key:"requirePlugin",value:function(e){var n=this.pluginCache.get(e);if(void 0!==n)return n;var t=s(o.resolve(this.makeSourceRelativePath(e)));return this.pluginCache.set(e,t),t}},{key:"peekSourceStack",value:function(){var e=this.includeStack.length;return this.includeStack[e-1]}},{key:"pushSource",value:function(e){this.includeStack.push(e)}},{key:"popSource",value:function(){this.includeStack.pop()}},{key:"anyErrors",value:function(){return 0!==this.errorList.length}},{key:"formatErrors",value:function(e,n){var t=new Set(e.map(function(e){return JSON.stringify(e)}));return r(t).map(function(e){var t=JSON.parse(e),r=t.loc,l=t.msg,a="<unknown>:1:1: ".concat(n,": ").concat(l);return r&&(a="".concat(r.source,":").concat(r.start.line,":").concat(r.start.column,": ").concat(n,": ").concat(l)),{loc:r,msg:l,formatted:a}})}},{key:"addError",value:function(e,n){this.errorList.push({msg:e,loc:n})}},{key:"addWarning",value:function(e,n){this.warningList.push({msg:e,loc:n})}},{key:"startPass",value:function(e){this.codePC=this.platform.defaultStartPC,this.codePCSet=!1,this.pass=e,this.needPass=!1,this.binary=[],this.errorList=[],this.scopes.startPass(e),this.outOfRangeBranches=[],this.debugInfo=new p.DebugInfoTracker}},{key:"emitBasicHeader",value:function(){var e=this;this.emit(12),this.emit(8),this.emit(0),this.emit(0),this.emit(158);[1e4,1e3,100,10,1].forEach(function(n){2061>=n&&e.emit(48+2061/n%10)}),this.emit(0),this.emit(0),this.emit(0)}},{key:"emitBinary",value:function(e){var n=e.filename,t=this.evalExprToString(n,"!binary filename"),r=v(0),l=void 0;if(null!==e.size&&(null!==e.offset&&(r=this.evalExprToInt(e.offset,"!binary offset")),null!==e.size&&(l=this.evalExprToInt(e.size,"!binary size"))),!y(t,r,l)){var a=this.makeSourceRelativePath(t.value),i=this.guardedReadFileSync(a,e.loc),u=i.byteLength;l&&(u=l.value);for(var o=0;o<u;o++)this.emit(i.readUInt8(o+r.value))}}},{key:"evalExprType",value:function(e,n,t){var r=this.evalExpr(e),l=r.errors,a=r.value;return l||typeof a===n?r:(this.addError("Expecting ".concat(t," to be '").concat(n,"' type, got '").concat(E(a),"'"),e.loc),{errors:!0,value:a})}},{key:"evalExprToInt",value:function(e,n){return this.evalExprType(e,"number",n)}},{key:"evalExprToString",value:function(e,n){return this.evalExprType(e,"string",n)}},{key:"evalExpr",value:function(e){var n=this;switch(e.type){case"binary":var t=this.evalExpr(e.left),l=this.evalExpr(e.right);if(y(t,l))return m(0);if(typeof t.value!==typeof l.value)return this.addError("Binary expression operands are expected to be of the same type.  Got: '".concat(E(t.value),"' (left), '").concat(E(l.value),"' (right)"),e.loc),m(0);if("string"!==typeof t.value&&"number"!==typeof t.value)return this.addError("Binary expression operands can only operator on numbers or strings.  Got: '".concat(E(t.value),"'"),e.loc),m(0);if("string"==typeof t.value){var a=["+","==","<","<=",">",">="];if(a.indexOf(e.op)<0)return this.addError("'".concat(e.op,"' operator is not supported for strings.  Valid operators for strings are: ").concat(a.join(", ")),e.loc),m(0)}switch(e.op){case"+":return S(t,l,function(e,n){return e+n});case"-":return S(t,l,function(e,n){return e-n});case"*":return S(t,l,function(e,n){return e*n});case"/":return S(t,l,function(e,n){return e/n});case"%":return S(t,l,function(e,n){return e%n});case"&":return S(t,l,function(e,n){return e&n});case"|":return S(t,l,function(e,n){return e|n});case"^":return S(t,l,function(e,n){return e^n});case"<<":return S(t,l,function(e,n){return e<<n});case">>":return S(t,l,function(e,n){return e>>n});case"==":return S(t,l,function(e,n){return e==n});case"!=":return S(t,l,function(e,n){return e!=n});case"<":return S(t,l,function(e,n){return e<n});case"<=":return S(t,l,function(e,n){return e<=n});case">":return S(t,l,function(e,n){return e>n});case">=":return S(t,l,function(e,n){return e>=n});case"&&":return S(t,l,function(e,n){return e&&n});case"||":return S(t,l,function(e,n){return e||n});default:throw new Error("Unhandled binary operator ".concat(e.op))}case"unary":var i=this.evalExprToInt(e.expr,"operand");if(i.errors)return i;switch(e.op){case"+":return x(i,function(e){return+e});case"-":return x(i,function(e){return-e});case"~":return x(i,function(e){return~e});default:throw new Error("Unhandled unary operator ".concat(e.op))}case"literal":return v(e.lit);case"array":var u=e.list.map(function(e){return n.evalExpr(e)});return{value:u.map(function(e){return e.value}),errors:y.apply(void 0,r(u))};case"ident":throw new Error("should not see an ident here -- if you do, it is probably a wrong type node in parser");case"qualified-ident":var o=this.scopes.findQualifiedSym(e.path,e.absolute);if(void 0==o)return this.pass>=1?(this.addError("Undefined symbol '".concat(C(e),"'"),e.loc),m(0)):(this.needPass=!0,v(0));switch(o.type){case"label":return{errors:o.data.errors,value:o.data.value.addr};case"var":return o.seen<this.pass&&this.addError("Undeclared variable '".concat(C(e)),e.loc),o.data;case"macro":return this.addError("Must have a label or a variable identifier here, got macro name",e.loc),m(0)}break;case"member":var s=this.evalExpr(e.object),c=s.value;if(void 0==c)return this.addError("Cannot access properties of an unresolved symbol'",e.loc),m(0);var f=function(e,t){return e in c||(n.addError("Property '".concat(e,"' does not exist in object"),t),!1)},d=function(e,t){if("ident"!==e.property.type)n.addError("".concat(t," property must be a string, got ").concat(E(e.property.type)),e.loc);else if(f(e.property.name,e.property.loc))return v(c[e.property.name]);return m(0)};if(c instanceof Array){if(!e.computed)return d(e,"Array");var h=this.evalExprToInt(e.property,"array index"),p=h.errors,b=h.value;return p?m(0):b in c?v(c[b]):(this.addError("Out of bounds array index ".concat(b),e.property.loc),m(0))}if("object"==typeof c){if(e.computed){var g=this.evalExpr(e.property),k=g.errors,w=g.value;return k?m(0):"string"!==typeof w&&"number"!==typeof w?(this.addError("Object property must be a string or an integer, got ".concat(E(w)),e.loc),m(0)):f(w,e.property.loc)?v(c[w]):m(0)}return d(e,"Object")}return 0!==this.pass?(s.errors||(e.computed?this.addError("Cannot use []-operator on non-array/object values",e.loc):this.addError("Cannot use the dot-operator on non-object values",e.loc)),m(0)):v(0);case"callfunc":var A=this.evalExpr(e.callee),_=e.args.map(function(e){return n.evalExpr(e)});if(A.errors)return m(0);if("function"!==typeof A.value)return this.addError("Callee must be a function type.  Got '".concat(E(A),"'"),e.loc),m(0);if(y.apply(void 0,r(_)))return m(0);try{return v(A.value(_.map(function(e){return e.value})))}catch(O){return"qualified-ident"==e.callee.type?this.addError("Call to '".concat(C(e.callee),"' failed with an error: ").concat(O.message),e.loc):this.addError("Plugin call failed with an error: ".concat(O.message),e.loc),m(0)}}throw new Error("should be unreachable?")}},{key:"setInitialPC",value:function(e){if(this.codePCSet)throw new Error("PC already set -- shouldn't happen");this.codePC=e,this.codePCSet=!0,this.initialPC=e}},{key:"topLevelSourceLoc",value:function(){return k(this.includeStack[0])}},{key:"emit",value:function(e){this.codePCSet||(this.setInitialPC(this.platform.defaultStartPC),this.addWarning("Starting program counter not set with '* = addr'.  Defaulting to platform default $".concat(f.toHex16(this.codePC)),this.topLevelSourceLoc())),this.binary.push(e),this.codePC+=1}},{key:"emit16",value:function(e){this.emit(255&e),this.emit(e>>8&255)}},{key:"checkSingle",value:function(e){return null!==e&&(this.emit(e),!0)}},{key:"checkImm",value:function(e,n){if(null===n||null===e)return!1;var t=this.evalExprToInt(e,"immediate");return y(t)||(this.emit(n),this.emit(t.value)),!0}},{key:"checkAbs",value:function(e,n,t){if(null===n||null===e)return!1;var r=this.evalExprToInt(e,"absolute address");if(y(r))return!0;var l=r.value;if(8===t){if(l<0||l>=1<<t)return!1;this.emit(n),this.emit(l)}else this.emit(n),this.emit16(l);return!0}},{key:"checkBranch",value:function(e,n){if(null===n||null===e)return!1;var t=this.evalExpr(e);if(y(t))return!0;if("number"!==typeof t.value)return this.addError("Expecting branch label to evaluate to integer, got ".concat(E(t.value)),e.loc),!0;var r=t.value-this.codePC-2;return this.emit(n),(r>127||r<-128)&&this.outOfRangeBranches.push({loc:e.loc,offset:r}),this.emit(255&r),!0}},{key:"setPC",value:function(e){var n=this.evalExprToInt(e,"pc");if(!y(n)){var t=n.value;if(this.codePCSet)for(this.codePC>t&&this.addError("Cannot set program counter to a smaller value than current (current: $".concat(f.toHex16(this.codePC),", trying to set $").concat(f.toHex16(t),")"),e.loc);this.codePC<t;)this.emit(0);else this.setInitialPC(t)}}},{key:"guardedReadFileSync",value:function(n,t){try{return this.readFileSync(n)}catch(r){return this.addError("Couldn't open file '".concat(n,"'"),t),e.from([])}}},{key:"fileInclude",value:function(e){var n=this.evalExprToString(e.filename,"!include filename");if(!y(n)){var t=n.value,r=this.makeSourceRelativePath(t);this.pushSource(r),this.assemble(r,e.loc),this.popSource()}}},{key:"fillBytes",value:function(e){var n=this.evalExprToInt(e.numBytes,"!fill num_bytes"),t=this.evalExprToInt(e.fillValue,"!fill value");if(!y(n,t)){var r=t.value;if(r<0||r>=256)this.addError("!fill value to repeat must be in 8-bit range, '".concat(r,"' given"),e.fillValue.loc);else{var l=n.value;if(l<0)this.addError("!fill repeat count must be >= 0, got ".concat(l),e.numBytes.loc);else for(var a=0;a<l;a++)this.emit(r)}}}},{key:"alignBytes",value:function(e){var n=this.evalExprToInt(e.alignBytes,"alignment");if(!y(n)){var t=n.value;if(t<1)this.addError("Alignment must be a positive integer, ".concat(t," given"),e.alignBytes.loc);else if(0==(t&t-1))for(;0!=(this.codePC&t-1);)this.emit(0);else this.addError("Alignment must be a power of two, ".concat(t," given"),e.loc)}}},{key:"withAnonScope",value:function(e,n){if(null!==e)return this.withLabelScope(e,n);this.scopes.withAnonScope(n)}},{key:"withLabelScope",value:function(e,n){this.scopes.withLabelScope(e,n)}},{key:"emit8or16",value:function(e,n){8!=n?this.emit16(e):this.emit(e)}},{key:"emitData",value:function(e,n){for(var t=0;t<e.length;t++){var r=this.evalExpr(e[t]);if(!y(r)){var l=r.value;if("number"==typeof l)this.emit8or16(l,n);else if(l instanceof Array)for(var a in l)this.emit8or16(l[a],n);else this.addError("Only literal (int constants) or array types can be emitted.  Got ".concat(E(l)),e[t].loc)}}}},{key:"makeFunction",value:function(e,n){var t=this;return function(n){return e.apply(void 0,[{readFileSync:function(e){return t.readFileSync(e)},resolveRelative:function(e){return t.makeSourceRelativePath(e)}}].concat(r(n)))}}},{key:"bindFunction",value:function(e,n,t){this.scopes.declareVar(e.name,v(this.makeFunction(n,t)))}},{key:"bindPlugin",value:function(e,n){var t=e.moduleName;if("function"==typeof n&&this.bindFunction(t,n,e.loc),"object"==typeof n){var r={},l=Object.keys(n);for(var a in l){var i=l[a],u=n[i];r[i]=this.makeFunction(u,e.loc)}this.scopes.declareVar(t.name,v(r))}}},{key:"checkDirectives",value:function(e,n){var t=this;switch(e.type){case"data":this.emitData(e.values,e.dataSize===d.DataSize.Byte?8:16);break;case"fill":this.fillBytes(e);break;case"align":this.alignBytes(e);break;case"setpc":this.setPC(e.pc);break;case"binary":this.emitBinary(e);break;case"include":this.fileInclude(e);break;case"error":var r=this.evalExprToString(e.error,"error message");if(!y(r))return void this.addError(r.value,e.loc);break;case"if":var a=e.cases,i=e.elseBranch,u=function(e){var r,i=l(a[e],2),u=i[0],o=i[1],s=t.evalExpr(u);if(!y(s)&&(!0===(r=s.value)||0!=r))return{v:t.withAnonScope(n,function(){t.assembleLines(o)})}};for(var o in a){var s=u(o);if("object"===typeof s)return s.v}return this.withAnonScope(n,function(){t.assembleLines(i)});case"for":var c=function(){var r=e.index,l=e.list,a=e.body,i=(e.loc,t.evalExpr(l));if(y(i))return{v:void 0};var u=i.value;if(!(u instanceof Array))return t.addError("for-loop range must be an array expression (e.g., a range() or an array)",l.loc),{v:void 0};for(var o=function(e){var l=null;null!==n&&(l="".concat(n,"__").concat(e)),t.withAnonScope(l,function(){return t.scopes.declareVar(r.name,v(u[e])),t.assembleLines(a)})},s=0;s<u.length;s++)o(s);return"break"}();switch(c){case"break":break;default:if("object"===typeof c)return c.v}case"macro":var f=e.name;e.args,e.body;if(void 0!==this.scopes.findMacro([f.name],!1)&&this.scopes.symbolSeen(f.name))return void this.addError("Macro '".concat(f.name,"' already defined"),f.loc);this.scopes.declareMacro(f.name,e);break;case"callmacro":var h=e.name,p=e.args,m=this.scopes.findMacro(h.path,h.absolute),b=p.map(function(e){return t.evalExpr(e)});if(void 0==m)return void this.addError("Undefined macro '".concat(C(h),"'"),h.loc);if(m.args.length!==p.length)return void this.addError("Macro '".concat(C(h),"' declared with ").concat(m.args.length," args but called here with ").concat(p.length),h.loc);this.withAnonScope(n,function(){for(var e=0;e<b.length;e++){var n=m.args[e].ident.name;t.scopes.declareVar(n,b[e])}t.assembleLines(m.body)});break;case"let":var g=e.name,k=this.scopes.findQualifiedSym([g.name],!1),E=this.evalExpr(e.value);if(void 0!==k&&this.scopes.symbolSeen(g.name))return void this.addError("Variable '".concat(g.name,"' already defined"),e.loc);this.scopes.declareVar(g.name,E);break;case"assign":var S=e.name;if(1!==e.name.path.length||e.name.absolute)return void this.addError("Only symbol names in the current (or owning) scopes are allowed for assignment",e.loc);var x=this.scopes.findQualifiedSym(e.name.path,e.name.absolute);if(void 0==x)return void this.addError("Assignment to undeclared variable '".concat(C(S),"'"),e.loc);if("var"!==x.type)return void this.addError("Assignment to symbol '".concat(C(S),"' that is not a variable.  Its type is '").concat(x.type,"'"),e.loc);var w=this.evalExpr(e.value);this.scopes.updateVar(S.path[0],w);break;case"load-plugin":var A=this.evalExprToString(e.filename,"plugin filename");if(y(A))return;var _=this.requirePlugin(A.value);this.bindPlugin(e,_);break;case"filescope":return void this.addError("The !filescope directive is only allowed as the first directive in a source file",e.loc);default:return void this.addError("unknown directive ".concat(e.type),e.loc)}}},{key:"assembleLines",value:function(e){var n=this;if(null!==e&&0!=e.length&&0!=e.length){for(var t=function(e){for(var t=0;t<e.length;t++)n.debugInfo.startLine(e[t].loc,n.codePC),n.assembleLine(e[t]),n.debugInfo.endLine(n.codePC)},r=0;r<e.length;){var l=e[r],a=l.label,i=l.stmt,u=l.scopedStmts;if(null!=a||null!=i||null!=u)break;r++}if(!(r>=e.length)){var o=e[r];return null!=o.stmt&&"filescope"==o.stmt.type?(this.checkAndDeclareLabel(o.stmt.name),this.withLabelScope(o.stmt.name.name,function(){return t(e.slice(r+1))})):t(e)}}}},{key:"checkAndDeclareLabel",value:function(e){this.scopes.symbolSeen(e.name)?this.addError("Symbol '".concat(e.name,"' already defined"),e.loc):this.scopes.declareLabelSymbol(e,this.codePC)&&(this.needPass=!0)}},{key:"assembleLine",value:function(e){var n=this;if(null!=e.label||null!=e.stmt||null!=e.scopedStmts){null!==e.label&&this.checkAndDeclareLabel(e.label);var t=e.scopedStmts;if(null==t){if(null!==e.stmt)if("insn"===e.stmt.type){var r=e.stmt.insn,l=u.default[r.mnemonic.toUpperCase()];if(void 0!==l){if(null===r.imm&&null===r.abs&&null===r.absx&&null===r.absy&&null===r.absind&&this.checkSingle(l[10]))return;if(this.checkImm(r.imm,l[0]))return;if(this.checkAbs(r.abs,l[1],8))return;if(this.checkAbs(r.absx,l[2],8))return;if(this.checkAbs(r.absy,l[3],8))return;if(this.checkAbs(r.absx,l[5],16))return;if(this.checkAbs(r.absy,l[6],16))return;if(this.checkAbs(r.absind,l[7],16))return;if(this.checkAbs(r.indx,l[8],8))return;if(this.checkAbs(r.indy,l[9],8))return;if(this.checkAbs(r.abs,l[4],16))return;if(this.checkBranch(r.abs,l[11]))return;this.addError("Couldn't encode instruction '".concat(r.mnemonic,"'"),e.loc)}else this.addError("Unknown mnemonic '".concat(r.mnemonic,"'"),e.loc)}else this.checkDirectives(e.stmt,null==e.label?null:e.label.name)}else{if(!e.label)throw new Error("ICE: line.label cannot be undefined");this.withLabelScope(e.label.name,function(){n.assembleLines(t)})}}}},{key:"makeSourceRelativePath",value:function(e){var n=this.peekSourceStack();return o.join(o.dirname(n),e)}},{key:"assemble",value:function(e,n){try{var t=this.parse(e,n);this.assembleLines(t)}catch(r){if(!("name"in r&&"SyntaxError"==r.name)){if("name"in r&&"semantic"==r.name)return;throw r}this.addError("Syntax error: ".concat(r.message),Object.assign({},r.location,{source:this.peekSourceStack()}))}}},{key:"_requireType",value:function(e,n){if(typeof e==n)return e;this.addError("Expecting a ".concat(n," value, got ").concat(E(e)),e.loc)}},{key:"requireString",value:function(e){return this._requireType(e,"string")}},{key:"requireNumber",value:function(e){return this._requireType(e,"number")}},{key:"registerPlugins",value:function(){var e=this,n=function(n,t){e.scopes.declareVar(n,v(t))};n("loadJson",function(n){var t=e.requireString(n[0]),r=e.makeSourceRelativePath(t);return JSON.parse(e.readFileSync(r,"utf-8"))}),n("range",function(n){var t=0,r=void 0;if(1==n.length)r=e.requireNumber(n[0]);else{if(2!=n.length)throw new Error("Invalid number of args to 'range'.  Expecting 1 or 2 arguments.");t=e.requireNumber(n[0]),r=e.requireNumber(n[1])}if(r==t)return[];if(r<t)throw new Error("range 'end' must be larger or equal to 'start'");return Array(r-t).fill(null).map(function(e,n){return n+t})})}},{key:"dumpLabels",value:function(){return this.scopes.dumpLabels(this.codePC)}}]),t}(),A={readFileSync:c.readFileSync};n.assemble=function(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:A,r=new w(t);r.pushSource(n);var l=0;do{if(r.startPass(l),r.registerPlugins(),r.assemble(n,k(n)),l>0&&r.anyErrors())return{prg:e.from([]),labels:[],debugInfo:void 0,errors:r.errors(),warnings:r.warnings()};if(l>10)return void console.error("Exceeded max pass limit ".concat(10));if(l+=1,!r.needPass&&0!=r.outOfRangeBranches.length){for(var a in r.outOfRangeBranches){var i=r.outOfRangeBranches[a];r.addError("Branch target too far (must fit in signed 8-bit range, got ".concat(i.offset,")"),i.loc)}break}}while(r.needPass);return r.popSource(),{prg:r.prg(),errors:r.errors(),warnings:r.warnings(),labels:r.dumpLabels(),debugInfo:r.debugInfo}}}).call(this,t(23).Buffer)},,,,,,,,,,,,,,function(e,n){function t(e){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}t.keys=function(){return[]},t.resolve=t,e.exports=t,t.id=60},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.toHex16=function(e){return e.toString(16).padStart(4,"0")}},function(e,n,t){"use strict";var r=t(12),l=t(13);Object.defineProperty(n,"__esModule",{value:!0});var a=t(63),i=function(){function e(){r(this,e),this.filenameToSource=new Map,this.sourceToAst=new Map}return l(e,[{key:"getFileContents",value:function(e,n,t){var r=this.filenameToSource.get(e);if(void 0!==r)return r;var l=t(e,n);return this.filenameToSource.set(e,l),l}},{key:"parse",value:function(e,n,t){var r=this.getFileContents(e,n,t),l=this.sourceToAst.get(e);if(void 0!==l)return l;var i=a.parse(r.toString(),{source:e});return this.sourceToAst.set(e,i),i}}]),e}();n.default=i},function(e,n,t){"use strict";var r=t(64),l=t(24);function a(e,n,t,r){this.message=e,this.expected=n,this.found=t,this.location=r,this.name="SyntaxError","function"===typeof Error.captureStackTrace&&Error.captureStackTrace(this,a)}!function(e,n){function t(){this.constructor=e}t.prototype=n.prototype,e.prototype=new t}(a,Error),a.buildMessage=function(e,n){var t={literal:function(e){return'"'+l(e.text)+'"'},class:function(e){var n,t="";for(n=0;n<e.parts.length;n++)t+=e.parts[n]instanceof Array?a(e.parts[n][0])+"-"+a(e.parts[n][1]):a(e.parts[n]);return"["+(e.inverted?"^":"")+t+"]"},any:function(e){return"any character"},end:function(e){return"end of input"},other:function(e){return e.description}};function r(e){return e.charCodeAt(0).toString(16).toUpperCase()}function l(e){return e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(e){return"\\x0"+r(e)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(e){return"\\x"+r(e)})}function a(e){return e.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(e){return"\\x0"+r(e)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(e){return"\\x"+r(e)})}return"Expected "+function(e){var n,r,l,a=new Array(e.length);for(n=0;n<e.length;n++)a[n]=(l=e[n],t[l.type](l));if(a.sort(),a.length>0){for(n=1,r=1;n<a.length;n++)a[n-1]!==a[n]&&(a[r]=a[n],r++);a.length=r}switch(a.length){case 1:return a[0];case 2:return a[0]+" or "+a[1];default:return a.slice(0,-1).join(", ")+", or "+a[a.length-1]}}(e)+" but "+function(e){return e?'"'+l(e)+'"':"end of input"}(n)+" found."},e.exports={SyntaxError:a,parse:function(e,n){n=void 0!==n?n:{};var i,u={},o={statements:sr},s=sr,c="\n",f=tr("\n",!1),d=function(e,n){return kl(e,n,1)},h=";",p=tr(";",!1),m={type:"any"},v=function(e){return e},y=function(e,n){return yl.mkAsmLine(e,null,n,El())},b=function(e,n){return yl.mkAsmLine(e,n,null,El())},g=function(e){return yl.mkAsmLine(e,null,null,El())},k=function(e){return yl.mkAsmLine(null,e,null,El())},E=function(e){return yl.mkAsmLine(null,e,null,El())},C=function(){return yl.mkAsmLine(null,null,null,El())},S=function(e){return e},x=function(e){return yl.mkInsn(e,El())},w=":",A=tr(":",!1),_=function(e){return yl.mkLabel(e,El())},O=function(e){return yl.mkSetPC(e,El())},L=function(e,n){var t="byte"==e?yl.DataSize.Byte:yl.DataSize.Word;return yl.mkData(t,n,El())},j=function(e,n){return yl.mkFill(e,n,El())},I=function(e){return yl.mkInclude(e,El())},R=function(e,n){var t=null,r=null;return null!==n&&(t=n[1],r=n[3]),yl.mkBinary(e,t,r,El())},P=function(e,n,t,r){var a=[e].concat(l(t.map(function(e){return e.condition}))),i=[n].concat(l(t.map(function(e){return e.trueBranch}))),u=a.map(function(e,n){return[e,i[n]]});return yl.mkIfElse(u,r,El())},D="in",T=tr("in",!1),B=function(e,n,t){return yl.mkFor(e,n,t,El())},M=function(e,n,t){return yl.mkMacro(e,n,t,El())},N="+",F=tr("+",!1),H=function(e,n){return yl.mkCallMacro(e,n,El())},$=function(e,n){return yl.mkLet(e,n,El())},U=function(e,n){return yl.mkAssign(e,n,El())},W="as",V=tr("as",!1),X=function(e,n){return yl.mkLoadPlugin(e,n,El())},Y=function(e){return yl.mkError(e,El())},q=function(e){return yl.mkAlign(e,El())},z=function(e){return yl.mkFilescope(e,El())},K=function(e,n){return{condition:e,trueBranch:n}},Z=function(e){return e},G='"',J=tr('"',!1),Q=function(e){return yl.mkLiteral(e.join(""),El())},ee=function(e){return e},ne=function(e){return yl.mkIdent(e,El())},te=function(e,n){return kl(e,n,1)},re=function(e){return yl.mkMacroArg(e)},le=function(e,n){return gl(e,n,null,El())},ae="x",ie=tr("x",!1),ue=function(e,n){return function(e,n,t){return r({},bl,{mnemonic:e,indx:n,loc:t})}(e,n,El())},oe="y",se=tr("y",!1),ce=function(e,n){return function(e,n,t){return r({},bl,{mnemonic:e,indy:n,loc:t})}(e,n,El())},fe=function(e,n){return function(e,n,t){return r({},bl,{mnemonic:e,absind:n,loc:t})}(e,n,El())},de=function(e,n,t){return"x"===t?function(e,n,t){return r({},bl,{mnemonic:e,absx:n,loc:t})}(e,n,El()):function(e,n,t){return r({},bl,{mnemonic:e,absy:n,loc:t})}(e,n,El())},he=function(e,n){return gl(e,null,n,El())},pe=function(e){return gl(e,null,null,El())},me=function(){return e.substring(Gt,Zt)},ve=function(e){return e},ye="::",be=tr("::",!1),ge=function(e,n){return yl.mkScopeQualifiedIdent(kl(e,n,1),!1,El())},ke=function(e,n){return yl.mkScopeQualifiedIdent(kl(e,n,1),!0,El())},Ee=function(e){return yl.mkIdent(e,El())},Ce=function(e){return e},Se="#",xe=tr("#",!1),we=function(e,n){if(null!==e){if("lo"===e)return yl.mkBinaryOp("&",n,yl.mkLiteral(255,El(),El()));var t=yl.mkLiteral(8,El()),r=yl.mkLiteral(255,El());return yl.mkBinaryOp("&",yl.mkBinaryOp(">>",n,t,El()),r,El())}return n},Ae=function(){return"lo"},_e=function(){return"hi"},Oe=function(e){return e},Le=function(e,n){return n.reduce(function(e,n){return yl.mkBinaryOp(n[0],e,n[1],El())},e)},je=function(e,n){return yl.mkUnary(e,n,El())},Ie=function(e){return e},Re=function(e,n){return{property:n,computed:!0}},Pe=function(e,n){return{property:yl.mkIdent(n,El()),computed:!1}},De=function(e,n){return n.reduce(function(e,n){return yl.mkMember(e,n.property,n.computed,El())},e)},Te=function(e,n){return yl.mkCallFunc(e,n,El())},Be=function(e){return yl.mkLiteral(e,El())},Me=function(e){return e},Ne=function(e){return e},Fe="$",He=tr("$",!1),$e=function(e){return parseInt(e,16)},Ue="%",We=tr("%",!1),Ve=function(e){return parseInt(e,2)},Xe=function(e){return parseInt(e,10)},Ye=function(e){return yl.mkExprArray(null===e?[]:e,El())},qe=/^[a-zA-Z_]/,ze=rr([["a","z"],["A","Z"],"_"],!1,!1),Ke=/^[a-zA-Z_0-9]/,Ze=rr([["a","z"],["A","Z"],"_",["0","9"]],!1,!1),Ge=/^[0-9]/,Je=rr([["0","9"]],!1,!1),Qe=/^[0-1]/,en=rr([["0","1"]],!1,!1),nn=/^[0-9a-f]/i,tn=rr([["0","9"],["a","f"]],!1,!0),rn=lr("whitespace"),ln=/^[ \t\r]/,an=rr([" ","\t","\r"],!1,!1),un="!align",on=tr("!align",!1),sn="!byte",cn=tr("!byte",!1),fn=function(){return"byte"},dn="!word",hn=tr("!word",!1),pn=function(){return"word"},mn="!binary",vn=tr("!binary",!1),yn="!let",bn=tr("!let",!1),gn="!macro",kn=tr("!macro",!1),En="!if",Cn=tr("!if",!1),Sn="else",xn=tr("else",!1),wn="elif",An=tr("elif",!1),_n="!error",On=tr("!error",!1),Ln="!for",jn=tr("!for",!1),In="!include",Rn=tr("!include",!1),Pn="!fill",Dn=tr("!fill",!1),Tn="!use",Bn=tr("!use",!1),Mn="!filescope",Nn=tr("!filescope",!1),Fn="[",Hn=tr("[",!1),$n=function(e){return e},Un="]",Wn=tr("]",!1),Vn="(",Xn=tr("(",!1),Yn=")",qn=tr(")",!1),zn="{",Kn=tr("{",!1),Zn="}",Gn=tr("}",!1),Jn=".",Qn=tr(".",!1),et=(tr("->",!1),tr("++",!1),tr("--",!1),"&"),nt=tr("&",!1),tt=/^[&]/,rt=rr(["&"],!1,!1),lt="*",at=tr("*",!1),it=/^[=]/,ut=rr(["="],!1,!1),ot=/^[+=]/,st=rr(["+","="],!1,!1),ct="-",ft=tr("-",!1),dt=/^[\-=>]/,ht=rr(["-","=",">"],!1,!1),pt="~",mt=tr("~",!1),vt="!",yt=tr("!",!1),bt="/",gt=tr("/",!1),kt=/^[=>]/,Et=rr(["=",">"],!1,!1),Ct="<<",St=tr("<<",!1),xt=">>",wt=tr(">>",!1),At="<",_t=tr("<",!1),Ot=">",Lt=tr(">",!1),jt="<=",It=tr("<=",!1),Rt=">=",Pt=tr(">=",!1),Dt="==",Tt=tr("==",!1),Bt="!=",Mt=tr("!=",!1),Nt="^",Ft=tr("^",!1),Ht="|",$t=tr("|",!1),Ut="&&",Wt=tr("&&",!1),Vt="||",Xt=tr("||",!1),Yt=(tr("?",!1),rr([">"],!1,!1),tr("...",!1),"="),qt=tr("=",!1),zt=(tr("*=",!1),tr("/=",!1),tr("%=",!1),tr("+=",!1),tr("-=",!1),tr("<<=",!1),tr(">>=",!1),tr("&=",!1),tr("^=",!1),tr("|=",!1),","),Kt=tr(",",!1),Zt=0,Gt=0,Jt=[{line:1,column:1}],Qt=0,er=[],nr=0;if("startRule"in n){if(!(n.startRule in o))throw new Error("Can't start parsing from rule \""+n.startRule+'".');s=o[n.startRule]}function tr(e,n){return{type:"literal",text:e,ignoreCase:n}}function rr(e,n,t){return{type:"class",parts:e,inverted:n,ignoreCase:t}}function lr(e){return{type:"other",description:e}}function ar(n){var t,r=Jt[n];if(r)return r;for(t=n-1;!Jt[t];)t--;for(r={line:(r=Jt[t]).line,column:r.column};t<n;)10===e.charCodeAt(t)?(r.line++,r.column=1):r.column++,t++;return Jt[n]=r,r}function ir(e,n){var t=ar(e),r=ar(n);return{start:{offset:e,line:t.line,column:t.column},end:{offset:n,line:r.line,column:r.column}}}function ur(e){Zt<Qt||(Zt>Qt&&(Qt=Zt,er=[]),er.push(e))}function or(e,n,t){return new a(a.buildMessage(e,n),e,n,t)}function sr(){var n,t,r,l,a,i;if(n=Zt,(t=cr())!==u){for(r=[],l=Zt,10===e.charCodeAt(Zt)?(a=c,Zt++):(a=u,0===nr&&ur(f)),a!==u&&(i=cr())!==u?l=a=[a,i]:(Zt=l,l=u);l!==u;)r.push(l),l=Zt,10===e.charCodeAt(Zt)?(a=c,Zt++):(a=u,0===nr&&ur(f)),a!==u&&(i=cr())!==u?l=a=[a,i]:(Zt=l,l=u);r!==u?(Gt=n,n=t=d(t,r)):(Zt=n,n=u)}else Zt=n,n=u;return n}function cr(){var n,t,r,l,a,i,o,s;if(n=Zt,Wr()!==u)if((t=function(){var e,n,t,r;return e=Zt,(n=dr())!==u&&(t=zr())!==u&&(r=sr())!==u&&Kr()!==u?(Gt=e,n=y(n,r),e=n):(Zt=e,e=u),e===u&&(e=Zt,(n=dr())!==u&&(t=fr())!==u?(Gt=e,n=b(n,t),e=n):(Zt=e,e=u),e===u&&(e=Zt,(n=dr())!==u&&(Gt=e,n=g(n)),(e=n)===u&&(e=Zt,(n=fr())!==u&&(Gt=e,n=k(n)),(e=n)===u&&(e=Zt,(n=function(){var e,n,t;return e=Zt,(n=Jr())!==u&&ml()!==u&&(t=Dr())!==u?(Gt=e,n=O(t),e=n):(Zt=e,e=u),e}())!==u&&(Gt=e,n=E(n)),(e=n)===u&&(e=Zt,(n=Wr())!==u&&(Gt=e,n=C()),e=n))))),e}())!==u){if(r=Zt,59===e.charCodeAt(Zt)?(l=h,Zt++):(l=u,0===nr&&ur(p)),l!==u){for(a=[],i=Zt,o=Zt,nr++,10===e.charCodeAt(Zt)?(s=c,Zt++):(s=u,0===nr&&ur(f)),nr--,s===u?o=void 0:(Zt=o,o=u),o!==u?(e.length>Zt?(s=e.charAt(Zt),Zt++):(s=u,0===nr&&ur(m)),s!==u?i=o=[o,s]:(Zt=i,i=u)):(Zt=i,i=u);i!==u;)a.push(i),i=Zt,o=Zt,nr++,10===e.charCodeAt(Zt)?(s=c,Zt++):(s=u,0===nr&&ur(f)),nr--,s===u?o=void 0:(Zt=o,o=u),o!==u?(e.length>Zt?(s=e.charAt(Zt),Zt++):(s=u,0===nr&&ur(m)),s!==u?i=o=[o,s]:(Zt=i,i=u)):(Zt=i,i=u);a!==u?r=l=[l,a]:(Zt=r,r=u)}else Zt=r,r=u;r===u&&(r=null),r!==u?(Gt=n,n=v(t)):(Zt=n,n=u)}else Zt=n,n=u;else Zt=n,n=u;return n}function fr(){var n,t;return n=Zt,(t=function(){var n,t,r,l,a,i,o,s,c,f;if(n=Zt,(t=function(){var n,t;return n=Zt,e.substr(Zt,5)===sn?(t=sn,Zt+=5):(t=u,0===nr&&ur(cn)),t!==u&&Wr()!==u?(Gt=n,t=fn(),n=t):(Zt=n,n=u),n}())===u&&(t=function(){var n,t;return n=Zt,e.substr(Zt,5)===dn?(t=dn,Zt+=5):(t=u,0===nr&&ur(hn)),t!==u&&Wr()!==u?(Gt=n,t=pn(),n=t):(Zt=n,n=u),n}()),t!==u&&(r=yr())!==u?(Gt=n,t=L(t,r),n=t):(Zt=n,n=u),n===u&&(n=Zt,(t=function(){var n,t,r;return n=Zt,e.substr(Zt,5)===Pn?(t=Pn,Zt+=5):(t=u,0===nr&&ur(Dn)),t!==u&&(r=Wr())!==u?n=t=[t,r]:(Zt=n,n=u),n}())!==u&&(r=Dr())!==u&&(l=vl())!==u&&(a=Dr())!==u?(Gt=n,t=j(r,a),n=t):(Zt=n,n=u),n===u&&(n=Zt,(t=function(){var n,t,r;return n=Zt,e.substr(Zt,8)===In?(t=In,Zt+=8):(t=u,0===nr&&ur(Rn)),t!==u&&(r=Wr())!==u?n=t=[t,r]:(Zt=n,n=u),n}())!==u&&(r=Dr())!==u?(Gt=n,t=I(r),n=t):(Zt=n,n=u),n===u&&(n=Zt,(t=function(){var n,t,r;return n=Zt,e.substr(Zt,7)===mn?(t=mn,Zt+=7):(t=u,0===nr&&ur(vn)),t!==u&&(r=Wr())!==u?n=t=[t,r]:(Zt=n,n=u),n}())!==u&&(r=Dr())!==u?(l=Zt,(a=vl())!==u?((i=Dr())===u&&(i=null),i!==u&&(o=vl())!==u&&(s=Dr())!==u?l=a=[a,i,o,s]:(Zt=l,l=u)):(Zt=l,l=u),l===u&&(l=null),l!==u?(Gt=n,t=R(r,l),n=t):(Zt=n,n=u)):(Zt=n,n=u),n===u)))){if(n=Zt,(t=function(){var n,t,r;return n=Zt,e.substr(Zt,3)===En?(t=En,Zt+=3):(t=u,0===nr&&ur(Cn)),t!==u&&(r=Wr())!==u?n=t=[t,r]:(Zt=n,n=u),n}())!==u)if((r=Yr())!==u)if((l=Dr())!==u)if((a=qr())!==u)if((i=zr())!==u)if((o=sr())!==u)if((s=Kr())!==u){for(c=[],f=hr();f!==u;)c.push(f),f=hr();c!==u?((f=function(){var n,t,r;return n=Zt,(t=function(){var n,t,r;return n=Zt,e.substr(Zt,4)===Sn?(t=Sn,Zt+=4):(t=u,0===nr&&ur(xn)),t!==u&&(r=Wr())!==u?n=t=[t,r]:(Zt=n,n=u),n}())!==u&&zr()!==u&&(r=sr())!==u&&Kr()!==u?(Gt=n,t=Z(r),n=t):(Zt=n,n=u),n}())===u&&(f=null),f!==u?(Gt=n,t=P(l,o,c,f),n=t):(Zt=n,n=u)):(Zt=n,n=u)}else Zt=n,n=u;else Zt=n,n=u;else Zt=n,n=u;else Zt=n,n=u;else Zt=n,n=u;else Zt=n,n=u;else Zt=n,n=u;n===u&&(n=Zt,(t=function(){var n,t,r;return n=Zt,e.substr(Zt,4)===Ln?(t=Ln,Zt+=4):(t=u,0===nr&&ur(jn)),t!==u&&(r=Wr())!==u?n=t=[t,r]:(Zt=n,n=u),n}())!==u&&(r=Er())!==u?(e.substr(Zt,2)===D?(l=D,Zt+=2):(l=u,0===nr&&ur(T)),l!==u&&(a=Wr())!==u&&(i=Dr())!==u&&(o=zr())!==u&&(s=sr())!==u&&(c=Kr())!==u?(Gt=n,t=B(r,i,s),n=t):(Zt=n,n=u)):(Zt=n,n=u),n===u&&(n=Zt,(t=function(){var n,t,r;return n=Zt,e.substr(Zt,6)===gn?(t=gn,Zt+=6):(t=u,0===nr&&ur(kn)),t!==u&&(r=Wr())!==u?n=t=[t,r]:(Zt=n,n=u),n}())!==u&&(r=function(){var e,n;return e=Zt,(n=Cr())!==u&&(Gt=e,n=ne(n)),e=n}())!==u&&(l=Yr())!==u?((a=function(){var e,n,t,r,l,a;if(e=Zt,(n=vr())!==u){for(t=[],r=Zt,(l=vl())!==u&&(a=vr())!==u?r=l=[l,a]:(Zt=r,r=u);r!==u;)t.push(r),r=Zt,(l=vl())!==u&&(a=vr())!==u?r=l=[l,a]:(Zt=r,r=u);t!==u?(Gt=e,n=te(n,t),e=n):(Zt=e,e=u)}else Zt=e,e=u;return e}())===u&&(a=null),a!==u&&(i=qr())!==u&&(o=zr())!==u&&(s=sr())!==u&&(c=Kr())!==u?(Gt=n,t=M(r,a,s),n=t):(Zt=n,n=u)):(Zt=n,n=u),n===u&&(n=Zt,43===e.charCodeAt(Zt)?(t=N,Zt++):(t=u,0===nr&&ur(F)),t!==u&&(r=kr())!==u&&(l=Yr())!==u?((a=yr())===u&&(a=null),a!==u&&(i=qr())!==u?(Gt=n,t=H(r,a),n=t):(Zt=n,n=u)):(Zt=n,n=u),n===u&&(n=Zt,(t=function(){var n,t,r;return n=Zt,e.substr(Zt,4)===yn?(t=yn,Zt+=4):(t=u,0===nr&&ur(bn)),t!==u&&(r=Wr())!==u?n=t=[t,r]:(Zt=n,n=u),n}())!==u&&(r=Er())!==u&&(l=ml())!==u&&(a=Dr())!==u?(Gt=n,t=$(r,a),n=t):(Zt=n,n=u),n===u&&(n=Zt,(t=kr())!==u&&(r=ml())!==u&&(l=Dr())!==u?(Gt=n,t=U(t,l),n=t):(Zt=n,n=u),n===u&&(n=Zt,(t=function(){var n,t,r;return n=Zt,e.substr(Zt,4)===Tn?(t=Tn,Zt+=4):(t=u,0===nr&&ur(Bn)),t!==u&&(r=Wr())!==u?n=t=[t,r]:(Zt=n,n=u),n}())!==u&&(r=pr())!==u?(e.substr(Zt,2)===W?(l=W,Zt+=2):(l=u,0===nr&&ur(V)),l!==u&&(a=Wr())!==u&&(i=Er())!==u?(Gt=n,t=X(r,i),n=t):(Zt=n,n=u)):(Zt=n,n=u),n===u&&(n=Zt,(t=function(){var n,t,r;return n=Zt,e.substr(Zt,6)===_n?(t=_n,Zt+=6):(t=u,0===nr&&ur(On)),t!==u&&(r=Wr())!==u?n=t=[t,r]:(Zt=n,n=u),n}())!==u&&(r=pr())!==u?(Gt=n,t=Y(r),n=t):(Zt=n,n=u),n===u&&(n=Zt,(t=function(){var n,t,r;return n=Zt,e.substr(Zt,6)===un?(t=un,Zt+=6):(t=u,0===nr&&ur(on)),t!==u&&(r=Wr())!==u?n=t=[t,r]:(Zt=n,n=u),n}())!==u&&(r=Dr())!==u?(Gt=n,t=q(r),n=t):(Zt=n,n=u),n===u&&(n=Zt,(t=function(){var n,t,r;return n=Zt,e.substr(Zt,10)===Mn?(t=Mn,Zt+=10):(t=u,0===nr&&ur(Nn)),t!==u&&(r=Wr())!==u?n=t=[t,r]:(Zt=n,n=u),n}())!==u&&(r=Er())!==u?(Gt=n,t=z(r),n=t):(Zt=n,n=u))))))))))}return n}())!==u&&(Gt=n,t=S(t)),(n=t)===u&&(n=Zt,(t=function(){var n,t,r,l,a,i,o;return n=Zt,(t=Sr())!==u&&(r=function(){var n,t,r,l;return n=Zt,35===e.charCodeAt(Zt)?(t=Se,Zt++):(t=u,0===nr&&ur(xe)),t!==u?((r=function(){var e,n;return e=Zt,(n=al())!==u&&(Gt=e,n=Ae()),(e=n)===u&&(e=Zt,(n=il())!==u&&(Gt=e,n=_e()),e=n),e}())===u&&(r=null),r!==u&&(l=Dr())!==u?(Gt=n,t=we(r,l),n=t):(Zt=n,n=u)):(Zt=n,n=u),n}())!==u?(Gt=n,t=le(t,r),n=t):(Zt=n,n=u),n===u&&(n=Zt,(t=Sr())!==u&&(r=Yr())!==u&&(l=xr())!==u&&(a=vl())!==u?(120===e.charCodeAt(Zt)?(i=ae,Zt++):(i=u,0===nr&&ur(ie)),i!==u&&(o=Wr())!==u&&qr()!==u?(Gt=n,t=ue(t,l),n=t):(Zt=n,n=u)):(Zt=n,n=u),n===u&&(n=Zt,(t=Sr())!==u&&(r=Yr())!==u&&(l=xr())!==u&&(a=qr())!==u&&(i=vl())!==u?(121===e.charCodeAt(Zt)?(o=oe,Zt++):(o=u,0===nr&&ur(se)),o!==u&&Wr()!==u?(Gt=n,t=ce(t,l),n=t):(Zt=n,n=u)):(Zt=n,n=u),n===u&&(n=Zt,(t=Sr())!==u&&(r=Yr())!==u&&(l=xr())!==u&&(a=qr())!==u?(Gt=n,t=fe(t,l),n=t):(Zt=n,n=u),n===u&&(n=Zt,(t=Sr())!==u&&(r=xr())!==u&&(l=vl())!==u?(120===e.charCodeAt(Zt)?(a=ae,Zt++):(a=u,0===nr&&ur(ie)),a===u&&(121===e.charCodeAt(Zt)?(a=oe,Zt++):(a=u,0===nr&&ur(se))),a!==u&&(i=Wr())!==u?(Gt=n,t=de(t,r,a),n=t):(Zt=n,n=u)):(Zt=n,n=u),n===u&&(n=Zt,(t=Sr())!==u&&(r=xr())!==u?(Gt=n,t=he(t,r),n=t):(Zt=n,n=u),n===u&&(n=Zt,(t=Sr())!==u&&(Gt=n,t=pe(t)),n=t)))))),n}())!==u&&(Gt=n,t=x(t)),n=t),n}function dr(){var n,t,r;return n=Zt,(t=br())!==u?(58===e.charCodeAt(Zt)?(r=w,Zt++):(r=u,0===nr&&ur(A)),r!==u&&Wr()!==u?(Gt=n,n=t=_(t)):(Zt=n,n=u)):(Zt=n,n=u),n}function hr(){var n,t,r;return n=Zt,function(){var n,t,r;return n=Zt,e.substr(Zt,4)===wn?(t=wn,Zt+=4):(t=u,0===nr&&ur(An)),t!==u&&(r=Wr())!==u?n=t=[t,r]:(Zt=n,n=u),n}()!==u&&Yr()!==u&&(t=Dr())!==u&&qr()!==u&&zr()!==u&&(r=sr())!==u&&Kr()!==u?(Gt=n,n=K(t,r)):(Zt=n,n=u),n}function pr(){var n,t,r,l;if(n=Zt,34===e.charCodeAt(Zt)?(t=G,Zt++):(t=u,0===nr&&ur(J)),t!==u){for(r=[],l=mr();l!==u;)r.push(l),l=mr();r!==u?(34===e.charCodeAt(Zt)?(l=G,Zt++):(l=u,0===nr&&ur(J)),l!==u&&Wr()!==u?(Gt=n,n=t=Q(r)):(Zt=n,n=u)):(Zt=n,n=u)}else Zt=n,n=u;return n}function mr(){var n,t,r;return n=Zt,t=Zt,nr++,34===e.charCodeAt(Zt)?(r=G,Zt++):(r=u,0===nr&&ur(J)),nr--,r===u?t=void 0:(Zt=t,t=u),t!==u?(e.length>Zt?(r=e.charAt(Zt),Zt++):(r=u,0===nr&&ur(m)),r!==u?(Gt=n,n=t=ee(r)):(Zt=n,n=u)):(Zt=n,n=u),n}function vr(){var e,n;return e=Zt,(n=Er())!==u&&(Gt=e,n=re(n)),e=n}function yr(){var e,n,t,r,l,a;if(e=Zt,(n=Dr())!==u){for(t=[],r=Zt,(l=vl())!==u&&(a=Dr())!==u?r=l=[l,a]:(Zt=r,r=u);r!==u;)t.push(r),r=Zt,(l=vl())!==u&&(a=Dr())!==u?r=l=[l,a]:(Zt=r,r=u);t!==u?(Gt=e,e=n=te(n,t)):(Zt=e,e=u)}else Zt=e,e=u;return e}function br(){var e,n,t,r,l;if(e=Zt,n=Zt,t=[],(r=Nr())!==u)for(;r!==u;)t.push(r),r=Nr();else t=u;if(t!==u){for(r=[],l=Fr();l!==u;)r.push(l),l=Fr();r!==u?n=t=[t,r]:(Zt=n,n=u)}else Zt=n,n=u;return n!==u&&(Gt=e,n=me()),e=n}function gr(){var e,n;return e=Zt,(n=br())!==u&&Wr()!==u?(Gt=e,e=n=ve(n)):(Zt=e,e=u),e}function kr(){var n,t,r,l,a,i,o;if(n=Zt,(t=br())!==u){for(r=[],l=Zt,e.substr(Zt,2)===ye?(a=ye,Zt+=2):(a=u,0===nr&&ur(be)),a!==u&&(i=br())!==u?l=a=[a,i]:(Zt=l,l=u);l!==u;)r.push(l),l=Zt,e.substr(Zt,2)===ye?(a=ye,Zt+=2):(a=u,0===nr&&ur(be)),a!==u&&(i=br())!==u?l=a=[a,i]:(Zt=l,l=u);r!==u&&(l=Wr())!==u?(Gt=n,n=t=ge(t,r)):(Zt=n,n=u)}else Zt=n,n=u;if(n===u)if(n=Zt,e.substr(Zt,2)===ye?(t=ye,Zt+=2):(t=u,0===nr&&ur(be)),t!==u)if((r=br())!==u){for(l=[],a=Zt,e.substr(Zt,2)===ye?(i=ye,Zt+=2):(i=u,0===nr&&ur(be)),i!==u&&(o=br())!==u?a=i=[i,o]:(Zt=a,a=u);a!==u;)l.push(a),a=Zt,e.substr(Zt,2)===ye?(i=ye,Zt+=2):(i=u,0===nr&&ur(be)),i!==u&&(o=br())!==u?a=i=[i,o]:(Zt=a,a=u);l!==u&&(a=Wr())!==u?(Gt=n,n=t=ke(r,l)):(Zt=n,n=u)}else Zt=n,n=u;else Zt=n,n=u;return n}function Er(){var e,n;return e=Zt,(n=Cr())!==u&&(Gt=e,n=Ee(n)),e=n}function Cr(){var e,n;return e=Zt,(n=br())!==u&&Wr()!==u?(Gt=e,e=n=Ce(n)):(Zt=e,e=u),e}function Sr(){var e,n;return e=Zt,(n=br())!==u&&Wr()!==u?(Gt=e,e=n=ve(n)):(Zt=e,e=u),e}function xr(){var e,n;return e=Zt,(n=Dr())!==u&&(Gt=e,n=Oe(n)),e=n}function wr(){var e,n,t,r,l,a;if(e=Zt,(n=Tr())!==u){for(t=[],r=Zt,(l=Jr())===u&&(l=nl())===u&&(l=tl()),l!==u&&(a=Tr())!==u?r=l=[l,a]:(Zt=r,r=u);r!==u;)t.push(r),r=Zt,(l=Jr())===u&&(l=nl())===u&&(l=tl()),l!==u&&(a=Tr())!==u?r=l=[l,a]:(Zt=r,r=u);t!==u?(Gt=e,e=n=Le(n,t)):(Zt=e,e=u)}else Zt=e,e=u;return e===u&&(e=Mr()),e}function Ar(){var e,n,t,r,l,a;if(e=Zt,(n=wr())!==u){for(t=[],r=Zt,(l=Qr())===u&&(l=el()),l!==u&&(a=wr())!==u?r=l=[l,a]:(Zt=r,r=u);r!==u;)t.push(r),r=Zt,(l=Qr())===u&&(l=el()),l!==u&&(a=wr())!==u?r=l=[l,a]:(Zt=r,r=u);t!==u?(Gt=e,e=n=Le(n,t)):(Zt=e,e=u)}else Zt=e,e=u;return e}function _r(){var e,n,t,r,l,a;if(e=Zt,(n=Ar())!==u){for(t=[],r=Zt,(l=rl())===u&&(l=ll()),l!==u&&(a=Ar())!==u?r=l=[l,a]:(Zt=r,r=u);r!==u;)t.push(r),r=Zt,(l=rl())===u&&(l=ll()),l!==u&&(a=Ar())!==u?r=l=[l,a]:(Zt=r,r=u);t!==u?(Gt=e,e=n=Le(n,t)):(Zt=e,e=u)}else Zt=e,e=u;return e}function Or(){var e,n,t,r,l,a;if(e=Zt,(n=_r())!==u){for(t=[],r=Zt,(l=ul())===u&&(l=ol())===u&&(l=al())===u&&(l=il()),l!==u&&(a=_r())!==u?r=l=[l,a]:(Zt=r,r=u);r!==u;)t.push(r),r=Zt,(l=ul())===u&&(l=ol())===u&&(l=al())===u&&(l=il()),l!==u&&(a=_r())!==u?r=l=[l,a]:(Zt=r,r=u);t!==u?(Gt=e,e=n=Le(n,t)):(Zt=e,e=u)}else Zt=e,e=u;return e}function Lr(){var e,n,t,r,l,a;if(e=Zt,(n=Or())!==u){for(t=[],r=Zt,(l=sl())===u&&(l=cl()),l!==u&&(a=Or())!==u?r=l=[l,a]:(Zt=r,r=u);r!==u;)t.push(r),r=Zt,(l=sl())===u&&(l=cl()),l!==u&&(a=Or())!==u?r=l=[l,a]:(Zt=r,r=u);t!==u?(Gt=e,e=n=Le(n,t)):(Zt=e,e=u)}else Zt=e,e=u;return e}function jr(){var e,n,t,r,l,a;if(e=Zt,(n=Lr())!==u){for(t=[],r=Zt,(l=Gr())!==u&&(a=Lr())!==u?r=l=[l,a]:(Zt=r,r=u);r!==u;)t.push(r),r=Zt,(l=Gr())!==u&&(a=Lr())!==u?r=l=[l,a]:(Zt=r,r=u);t!==u?(Gt=e,e=n=Le(n,t)):(Zt=e,e=u)}else Zt=e,e=u;return e}function Ir(){var e,n,t,r,l,a;if(e=Zt,(n=jr())!==u){for(t=[],r=Zt,(l=fl())!==u&&(a=jr())!==u?r=l=[l,a]:(Zt=r,r=u);r!==u;)t.push(r),r=Zt,(l=fl())!==u&&(a=jr())!==u?r=l=[l,a]:(Zt=r,r=u);t!==u?(Gt=e,e=n=Le(n,t)):(Zt=e,e=u)}else Zt=e,e=u;return e}function Rr(){var e,n,t,r,l,a;if(e=Zt,(n=Ir())!==u){for(t=[],r=Zt,(l=dl())!==u&&(a=Ir())!==u?r=l=[l,a]:(Zt=r,r=u);r!==u;)t.push(r),r=Zt,(l=dl())!==u&&(a=Ir())!==u?r=l=[l,a]:(Zt=r,r=u);t!==u?(Gt=e,e=n=Le(n,t)):(Zt=e,e=u)}else Zt=e,e=u;return e}function Pr(){var e,n,t,r,l,a;if(e=Zt,(n=Rr())!==u){for(t=[],r=Zt,(l=hl())!==u&&(a=Rr())!==u?r=l=[l,a]:(Zt=r,r=u);r!==u;)t.push(r),r=Zt,(l=hl())!==u&&(a=Rr())!==u?r=l=[l,a]:(Zt=r,r=u);t!==u?(Gt=e,e=n=Le(n,t)):(Zt=e,e=u)}else Zt=e,e=u;return e}function Dr(){var e,n,t,r,l,a;if(e=Zt,(n=Pr())!==u){for(t=[],r=Zt,(l=pl())!==u&&(a=Pr())!==u?r=l=[l,a]:(Zt=r,r=u);r!==u;)t.push(r),r=Zt,(l=pl())!==u&&(a=Pr())!==u?r=l=[l,a]:(Zt=r,r=u);t!==u?(Gt=e,e=n=Le(n,t)):(Zt=e,e=u)}else Zt=e,e=u;return e}function Tr(){var n,t,r;return(n=function(){var e;return(e=function(){var e,n,t;return e=Zt,(n=Br())!==u&&Yr()!==u?((t=yr())===u&&(t=null),t!==u&&qr()!==u?(Gt=e,n=Te(n,t),e=n):(Zt=e,e=u)):(Zt=e,e=u),e}())===u&&(e=Br()),e}())===u&&(n=Zt,(t=function(){var n,t;return n=Zt,(t=Qr())===u&&(t=el())===u&&(t=function(){var n,t;return n=Zt,126===e.charCodeAt(Zt)?(t=pt,Zt++):(t=u,0===nr&&ur(mt)),t!==u&&Wr()!==u?(Gt=n,t=$n(t),n=t):(Zt=n,n=u),n}())===u&&(t=function(){var n,t,r,l;return n=Zt,33===e.charCodeAt(Zt)?(t=vt,Zt++):(t=u,0===nr&&ur(yt)),t!==u?(r=Zt,nr++,it.test(e.charAt(Zt))?(l=e.charAt(Zt),Zt++):(l=u,0===nr&&ur(ut)),nr--,l===u?r=void 0:(Zt=r,r=u),r!==u&&(l=Wr())!==u?(Gt=n,t=$n(t),n=t):(Zt=n,n=u)):(Zt=n,n=u),n}()),t!==u&&(Gt=n,t=Ie(t)),n=t}())!==u&&(r=Tr())!==u?(Gt=n,n=t=je(t,r)):(Zt=n,n=u)),n}function Br(){var e,n,t,r,l;if(e=Zt,(n=Mr())!==u){for(t=[],r=Zt,Vr()!==u&&(l=Dr())!==u&&Xr()!==u?(Gt=r,r=Re(n,l)):(Zt=r,r=u),r===u&&(r=Zt,Zr()!==u&&(l=gr())!==u?(Gt=r,r=Pe(n,l)):(Zt=r,r=u));r!==u;)t.push(r),r=Zt,Vr()!==u&&(l=Dr())!==u&&Xr()!==u?(Gt=r,r=Re(n,l)):(Zt=r,r=u),r===u&&(r=Zt,Zr()!==u&&(l=gr())!==u?(Gt=r,r=Pe(n,l)):(Zt=r,r=u));t!==u?(Gt=e,e=n=De(n,t)):(Zt=e,e=u)}else Zt=e,e=u;return e}function Mr(){var n,t,r;return n=Zt,(t=function(){var n,t,r,l,a;if(n=Zt,36===e.charCodeAt(Zt)?(t=Fe,Zt++):(t=u,0===nr&&ur(He)),t!==u){if(r=Zt,l=[],(a=Ur())!==u)for(;a!==u;)l.push(a),a=Ur();else l=u;(r=l!==u?e.substring(r,Zt):l)!==u&&(l=Wr())!==u?(Gt=n,t=$e(r),n=t):(Zt=n,n=u)}else Zt=n,n=u;if(n===u){if(n=Zt,37===e.charCodeAt(Zt)?(t=Ue,Zt++):(t=u,0===nr&&ur(We)),t!==u){if(r=Zt,l=[],(a=$r())!==u)for(;a!==u;)l.push(a),a=$r();else l=u;(r=l!==u?e.substring(r,Zt):l)!==u&&(l=Wr())!==u?(Gt=n,t=Ve(r),n=t):(Zt=n,n=u)}else Zt=n,n=u;if(n===u){if(n=Zt,t=Zt,r=[],(l=Hr())!==u)for(;l!==u;)r.push(l),l=Hr();else r=u;(t=r!==u?e.substring(t,Zt):r)!==u&&(r=Wr())!==u?(Gt=n,t=Xe(t),n=t):(Zt=n,n=u)}}return n}())!==u&&(Gt=n,t=Be(t)),(n=t)===u&&(n=Zt,(t=kr())!==u&&(Gt=n,t=ve(t)),(n=t)===u&&(n=Zt,(t=pr())!==u&&(Gt=n,t=Me(t)),(n=t)===u&&(n=function(){var e,n,t;return e=Zt,(n=Vr())!==u?((t=yr())===u&&(t=null),t!==u&&Xr()!==u?(Gt=e,n=Ye(t),e=n):(Zt=e,e=u)):(Zt=e,e=u),e}())===u&&(n=Zt,(t=Yr())!==u&&(r=Dr())!==u&&qr()!==u?(Gt=n,n=t=Ne(r)):(Zt=n,n=u)))),n}function Nr(){var n;return qe.test(e.charAt(Zt))?(n=e.charAt(Zt),Zt++):(n=u,0===nr&&ur(ze)),n}function Fr(){var n;return Ke.test(e.charAt(Zt))?(n=e.charAt(Zt),Zt++):(n=u,0===nr&&ur(Ze)),n}function Hr(){var n;return Ge.test(e.charAt(Zt))?(n=e.charAt(Zt),Zt++):(n=u,0===nr&&ur(Je)),n}function $r(){var n;return Qe.test(e.charAt(Zt))?(n=e.charAt(Zt),Zt++):(n=u,0===nr&&ur(en)),n}function Ur(){var n;return nn.test(e.charAt(Zt))?(n=e.charAt(Zt),Zt++):(n=u,0===nr&&ur(tn)),n}function Wr(){var n,t;for(nr++,n=[],ln.test(e.charAt(Zt))?(t=e.charAt(Zt),Zt++):(t=u,0===nr&&ur(an));t!==u;)n.push(t),ln.test(e.charAt(Zt))?(t=e.charAt(Zt),Zt++):(t=u,0===nr&&ur(an));return nr--,n===u&&(t=u,0===nr&&ur(rn)),n}function Vr(){var n,t;return n=Zt,91===e.charCodeAt(Zt)?(t=Fn,Zt++):(t=u,0===nr&&ur(Hn)),t!==u&&Wr()!==u?(Gt=n,n=t=$n(t)):(Zt=n,n=u),n}function Xr(){var n,t;return n=Zt,93===e.charCodeAt(Zt)?(t=Un,Zt++):(t=u,0===nr&&ur(Wn)),t!==u&&Wr()!==u?(Gt=n,n=t=$n(t)):(Zt=n,n=u),n}function Yr(){var n,t;return n=Zt,40===e.charCodeAt(Zt)?(t=Vn,Zt++):(t=u,0===nr&&ur(Xn)),t!==u&&Wr()!==u?(Gt=n,n=t=$n(t)):(Zt=n,n=u),n}function qr(){var n,t;return n=Zt,41===e.charCodeAt(Zt)?(t=Yn,Zt++):(t=u,0===nr&&ur(qn)),t!==u&&Wr()!==u?(Gt=n,n=t=$n(t)):(Zt=n,n=u),n}function zr(){var n,t;return n=Zt,123===e.charCodeAt(Zt)?(t=zn,Zt++):(t=u,0===nr&&ur(Kn)),t!==u&&Wr()!==u?(Gt=n,n=t=$n(t)):(Zt=n,n=u),n}function Kr(){var n,t;return n=Zt,125===e.charCodeAt(Zt)?(t=Zn,Zt++):(t=u,0===nr&&ur(Gn)),t!==u&&Wr()!==u?(Gt=n,n=t=$n(t)):(Zt=n,n=u),n}function Zr(){var n,t;return n=Zt,46===e.charCodeAt(Zt)?(t=Jn,Zt++):(t=u,0===nr&&ur(Qn)),t!==u&&Wr()!==u?(Gt=n,n=t=$n(t)):(Zt=n,n=u),n}function Gr(){var n,t,r,l;return n=Zt,38===e.charCodeAt(Zt)?(t=et,Zt++):(t=u,0===nr&&ur(nt)),t!==u?(r=Zt,nr++,tt.test(e.charAt(Zt))?(l=e.charAt(Zt),Zt++):(l=u,0===nr&&ur(rt)),nr--,l===u?r=void 0:(Zt=r,r=u),r!==u&&(l=Wr())!==u?(Gt=n,n=t=$n(t)):(Zt=n,n=u)):(Zt=n,n=u),n}function Jr(){var n,t,r,l;return n=Zt,42===e.charCodeAt(Zt)?(t=lt,Zt++):(t=u,0===nr&&ur(at)),t!==u?(r=Zt,nr++,it.test(e.charAt(Zt))?(l=e.charAt(Zt),Zt++):(l=u,0===nr&&ur(ut)),nr--,l===u?r=void 0:(Zt=r,r=u),r!==u&&(l=Wr())!==u?(Gt=n,n=t=$n(t)):(Zt=n,n=u)):(Zt=n,n=u),n}function Qr(){var n,t,r,l;return n=Zt,43===e.charCodeAt(Zt)?(t=N,Zt++):(t=u,0===nr&&ur(F)),t!==u?(r=Zt,nr++,ot.test(e.charAt(Zt))?(l=e.charAt(Zt),Zt++):(l=u,0===nr&&ur(st)),nr--,l===u?r=void 0:(Zt=r,r=u),r!==u&&(l=Wr())!==u?(Gt=n,n=t=$n(t)):(Zt=n,n=u)):(Zt=n,n=u),n}function el(){var n,t,r,l;return n=Zt,45===e.charCodeAt(Zt)?(t=ct,Zt++):(t=u,0===nr&&ur(ft)),t!==u?(r=Zt,nr++,dt.test(e.charAt(Zt))?(l=e.charAt(Zt),Zt++):(l=u,0===nr&&ur(ht)),nr--,l===u?r=void 0:(Zt=r,r=u),r!==u&&(l=Wr())!==u?(Gt=n,n=t=$n(t)):(Zt=n,n=u)):(Zt=n,n=u),n}function nl(){var n,t,r,l;return n=Zt,47===e.charCodeAt(Zt)?(t=bt,Zt++):(t=u,0===nr&&ur(gt)),t!==u?(r=Zt,nr++,it.test(e.charAt(Zt))?(l=e.charAt(Zt),Zt++):(l=u,0===nr&&ur(ut)),nr--,l===u?r=void 0:(Zt=r,r=u),r!==u&&(l=Wr())!==u?(Gt=n,n=t=$n(t)):(Zt=n,n=u)):(Zt=n,n=u),n}function tl(){var n,t,r,l;return n=Zt,37===e.charCodeAt(Zt)?(t=Ue,Zt++):(t=u,0===nr&&ur(We)),t!==u?(r=Zt,nr++,kt.test(e.charAt(Zt))?(l=e.charAt(Zt),Zt++):(l=u,0===nr&&ur(Et)),nr--,l===u?r=void 0:(Zt=r,r=u),r!==u&&(l=Wr())!==u?(Gt=n,n=t=$n(t)):(Zt=n,n=u)):(Zt=n,n=u),n}function rl(){var n,t,r,l;return n=Zt,e.substr(Zt,2)===Ct?(t=Ct,Zt+=2):(t=u,0===nr&&ur(St)),t!==u?(r=Zt,nr++,it.test(e.charAt(Zt))?(l=e.charAt(Zt),Zt++):(l=u,0===nr&&ur(ut)),nr--,l===u?r=void 0:(Zt=r,r=u),r!==u&&(l=Wr())!==u?(Gt=n,n=t=$n(t)):(Zt=n,n=u)):(Zt=n,n=u),n}function ll(){var n,t,r,l;return n=Zt,e.substr(Zt,2)===xt?(t=xt,Zt+=2):(t=u,0===nr&&ur(wt)),t!==u?(r=Zt,nr++,it.test(e.charAt(Zt))?(l=e.charAt(Zt),Zt++):(l=u,0===nr&&ur(ut)),nr--,l===u?r=void 0:(Zt=r,r=u),r!==u&&(l=Wr())!==u?(Gt=n,n=t=$n(t)):(Zt=n,n=u)):(Zt=n,n=u),n}function al(){var n,t,r,l;return n=Zt,60===e.charCodeAt(Zt)?(t=At,Zt++):(t=u,0===nr&&ur(_t)),t!==u?(r=Zt,nr++,it.test(e.charAt(Zt))?(l=e.charAt(Zt),Zt++):(l=u,0===nr&&ur(ut)),nr--,l===u?r=void 0:(Zt=r,r=u),r!==u&&(l=Wr())!==u?(Gt=n,n=t=$n(t)):(Zt=n,n=u)):(Zt=n,n=u),n}function il(){var n,t,r,l;return n=Zt,62===e.charCodeAt(Zt)?(t=Ot,Zt++):(t=u,0===nr&&ur(Lt)),t!==u?(r=Zt,nr++,it.test(e.charAt(Zt))?(l=e.charAt(Zt),Zt++):(l=u,0===nr&&ur(ut)),nr--,l===u?r=void 0:(Zt=r,r=u),r!==u&&(l=Wr())!==u?(Gt=n,n=t=$n(t)):(Zt=n,n=u)):(Zt=n,n=u),n}function ul(){var n,t;return n=Zt,e.substr(Zt,2)===jt?(t=jt,Zt+=2):(t=u,0===nr&&ur(It)),t!==u&&Wr()!==u?(Gt=n,n=t=$n(t)):(Zt=n,n=u),n}function ol(){var n,t;return n=Zt,e.substr(Zt,2)===Rt?(t=Rt,Zt+=2):(t=u,0===nr&&ur(Pt)),t!==u&&Wr()!==u?(Gt=n,n=t=$n(t)):(Zt=n,n=u),n}function sl(){var n,t;return n=Zt,e.substr(Zt,2)===Dt?(t=Dt,Zt+=2):(t=u,0===nr&&ur(Tt)),t!==u&&Wr()!==u?(Gt=n,n=t=$n(t)):(Zt=n,n=u),n}function cl(){var n,t;return n=Zt,e.substr(Zt,2)===Bt?(t=Bt,Zt+=2):(t=u,0===nr&&ur(Mt)),t!==u&&Wr()!==u?(Gt=n,n=t=$n(t)):(Zt=n,n=u),n}function fl(){var n,t,r,l;return n=Zt,94===e.charCodeAt(Zt)?(t=Nt,Zt++):(t=u,0===nr&&ur(Ft)),t!==u?(r=Zt,nr++,it.test(e.charAt(Zt))?(l=e.charAt(Zt),Zt++):(l=u,0===nr&&ur(ut)),nr--,l===u?r=void 0:(Zt=r,r=u),r!==u&&(l=Wr())!==u?(Gt=n,n=t=$n(t)):(Zt=n,n=u)):(Zt=n,n=u),n}function dl(){var n,t,r,l;return n=Zt,124===e.charCodeAt(Zt)?(t=Ht,Zt++):(t=u,0===nr&&ur($t)),t!==u?(r=Zt,nr++,it.test(e.charAt(Zt))?(l=e.charAt(Zt),Zt++):(l=u,0===nr&&ur(ut)),nr--,l===u?r=void 0:(Zt=r,r=u),r!==u&&(l=Wr())!==u?(Gt=n,n=t=$n(t)):(Zt=n,n=u)):(Zt=n,n=u),n}function hl(){var n,t;return n=Zt,e.substr(Zt,2)===Ut?(t=Ut,Zt+=2):(t=u,0===nr&&ur(Wt)),t!==u&&Wr()!==u?(Gt=n,n=t=$n(t)):(Zt=n,n=u),n}function pl(){var n,t;return n=Zt,e.substr(Zt,2)===Vt?(t=Vt,Zt+=2):(t=u,0===nr&&ur(Xt)),t!==u&&Wr()!==u?(Gt=n,n=t=$n(t)):(Zt=n,n=u),n}function ml(){var n,t,r,l;return n=Zt,61===e.charCodeAt(Zt)?(t=Yt,Zt++):(t=u,0===nr&&ur(qt)),t!==u?(r=Zt,nr++,61===e.charCodeAt(Zt)?(l=Yt,Zt++):(l=u,0===nr&&ur(qt)),nr--,l===u?r=void 0:(Zt=r,r=u),r!==u&&(l=Wr())!==u?(Gt=n,n=t=$n(t)):(Zt=n,n=u)):(Zt=n,n=u),n}function vl(){var n,t;return n=Zt,44===e.charCodeAt(Zt)?(t=zt,Zt++):(t=u,0===nr&&ur(Kt)),t!==u&&Wr()!==u?(Gt=n,n=t=$n(t)):(Zt=n,n=u),n}var yl=t(27),bl=(yl.objectToAst,{mnemonic:null,imm:null,abs:null,absx:null,absy:null,absind:null,indx:null,indy:null});function gl(e,n,t,l){return r({},bl,{mnemonic:e,imm:n,abs:t,loc:l})}function kl(e,n,t){return[e].concat(function(e,n){return e.map(function(e){return e[n]})}(n,t))}function El(){return r({},ir(Gt,Zt),{source:n.source})}if((i=s())!==u&&Zt===e.length)return i;throw i!==u&&Zt<e.length&&ur({type:"end"}),or(er,Qt<e.length?e.charAt(Qt):null,Qt<e.length?ir(Qt,Qt+1):ir(Qt,Qt))}}},,,function(e,n,t){"use strict";var r=t(12),l=t(13);Object.defineProperty(n,"__esModule",{value:!0});var a=t(14),i=function(){function e(){r(this,e),this.lineStack=[],this.pcToLocs={}}return l(e,[{key:"startLine",value:function(e,n){var t={source:a.resolve(e.source),lineNo:e.start.line};this.lineStack.push({loc:t,pc:n})}},{key:"endLine",value:function(e){var n=this.lineStack.pop();if(!n)throw new Error("internal compiler error, mismatching start/end lines in debugInfo");if(e-n.pc>0){var t=this.pcToLocs[n.pc]||[];t.push(n.loc),this.pcToLocs[n.pc]=t}}},{key:"info",value:function(){return{pcToLocs:this.pcToLocs}}}]),e}();n.DebugInfoTracker=i},function(e,n,t){"use strict";var r=t(12),l=t(13);Object.defineProperty(n,"__esModule",{value:!0});var a=t(25);function i(e){return"".concat(e.toString(16).toUpperCase().padStart(2,"0"))}function u(e){return"".concat(e.toString(16).toUpperCase().padStart(4,"0"))}var o=function(){function e(n){var t=this;r(this,e),this.buf=n,this.byte=function(){var e=t.buf.readUInt8(t.curOffs);return t.curOffs++,e},this.print=function(e,n,r){var l=i(n[0]),a=n.length>=2?i(n[1]):"  ",o=n.length>=3?i(n[2]):"  ";t.output.push("".concat(u(e),": ").concat(l," ").concat(a," ").concat(o,"     ").concat(r))},this.output=[],this.curAddr=n.readUInt8(0)+(n.readUInt8(1)<<8),this.curOffs=2,this.opToDecl={},Object.keys(a.default).forEach(function(e){for(var n=a.default[e],r=0;r<n.length;r++){var l=n[r];null!==l&&(t.opToDecl[l]={mnemonic:e,decode:n})}})}return l(e,[{key:"disImm",value:function(e,n){var t=this.curAddr,r=this.byte();this.print(t,[n,r],"".concat(e," #").concat(i(r)))}},{key:"disZp",value:function(e,n){var t=this.curAddr,r=this.byte();this.print(t,[n,r],"".concat(e," $").concat(i(r)))}},{key:"disZpX",value:function(e,n){var t=this.curAddr,r=this.byte();this.print(t,[n,r],"".concat(e," $").concat(i(r),",X"))}},{key:"disZpY",value:function(e,n){var t=this.curAddr,r=this.byte();this.print(t,[n,r],"".concat(e," $").concat(i(r),",Y"))}},{key:"disAbs",value:function(e,n){var t=this.curAddr,r=this.byte(),l=this.byte();this.print(t,[n,r,l],"".concat(e," $").concat(u(r+256*l)))}},{key:"disAbsX",value:function(e,n){var t=this.curAddr,r=this.byte(),l=this.byte();this.print(t,[n,r,l],"".concat(e," $").concat(u(r+256*l),",X"))}},{key:"disAbsY",value:function(e,n){var t=this.curAddr,r=this.byte(),l=this.byte();this.print(t,[n,r,l],"".concat(e," $").concat(u(r+256*l),",Y"))}},{key:"disInd",value:function(e,n){var t=this.curAddr,r=this.byte(),l=this.byte();this.print(t,[n,r,l],"".concat(e," ($").concat(u(r+256*l),")"))}},{key:"disIndX",value:function(e,n){var t=this.curAddr,r=this.byte();this.print(t,[n,r],"".concat(e," ($").concat(i(r),",X)"))}},{key:"disIndY",value:function(e,n){var t=this.curAddr,r=this.byte();this.print(t,[n,r],"".concat(e," ($").concat(i(r),"),Y"))}},{key:"disSingle",value:function(e,n){var t=this.curAddr;this.print(t,[n],"".concat(e))}},{key:"disBranch",value:function(e,n){var t=this.curAddr,r=this.byte(),l=t+(r>=128?-(256-r):r)+2;this.print(t,[n,r],"".concat(e," $").concat(u(l)))}},{key:"disUnknown",value:function(e){this.print(this.curAddr,[e],"")}},{key:"disassemble",value:function(){for(var e=this.buf.byteLength,n=this.curOffs;this.curOffs<e;){this.curAddr+=this.curOffs-n,n=this.curOffs;var t=this.byte(),r=this.opToDecl[t];if(void 0!==r){var l=r.decode.indexOf(t);if(0===l){this.disImm(r.mnemonic,t);continue}if(1===l){this.disZp(r.mnemonic,t);continue}if(2===l){this.disZpX(r.mnemonic,t);continue}if(3===l){this.disZpY(r.mnemonic,t);continue}if(4===l){this.disAbs(r.mnemonic,t);continue}if(5===l){this.disAbsX(r.mnemonic,t);continue}if(6===l){this.disAbsY(r.mnemonic,t);continue}if(7===l){this.disInd(r.mnemonic,t);continue}if(8===l){this.disIndX(r.mnemonic,t);continue}if(9===l){this.disIndY(r.mnemonic,t);continue}if(10===l){this.disSingle(r.mnemonic,t);continue}if(11===l){this.disBranch(r.mnemonic,t);continue}}else this.disUnknown(t)}return this.output}}]),e}();n.disassemble=function(e){return new o(e).disassemble()}}],[[36,1,2]]]);
//# sourceMappingURL=main.94b95c98.chunk.js.map