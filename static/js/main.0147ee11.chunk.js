(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[,,,function(e,n,t){e.exports={heading:"Editor_heading__3jsuC",layoutContainer:"Editor_layoutContainer__2bFri",editorContainer:"Editor_editorContainer__1wXnR",textarea:"Editor_textarea__28EdL",textareaHighlightOverlay:"Editor_textareaHighlightOverlay__1opTU",textareaHighlightRow:"Editor_textareaHighlightRow__1R6Ia",textareaHighlightRowCurrent:"Editor_textareaHighlightRowCurrent__25KL2",highlightError:"Editor_highlightError__1YeA5",gutter:"Editor_gutter__3CDcX",gutterRow:"Editor_gutterRow__1DNMN",gutterRowSelected:"Editor_gutterRowSelected__3GiGf"}},,,,function(e,n,t){e.exports={helpModalContainer:"Help_helpModalContainer__10bLm",helpContents:"Help_helpContents__3Cbr8",headingContainer:"Help_headingContainer__jN87w",emph:"Help_emph__29_7I",hidden:"Help_hidden__2fGZK",circleReveal:"Help_circleReveal__2igbG",circle:"Help_circle__2jpkq",maxWidth:"Help_maxWidth__3MUy2",closeButtonContainer:"Help_closeButtonContainer__1TIMT",asm:"Help_asm__1yYjY"}},function(e,n,t){e.exports={layoutContainer:"DiagnosticsList_layoutContainer__3Yxfa",diagnostics:"DiagnosticsList_diagnostics__U_t5K",heading:"DiagnosticsList_heading__f0lgX",diagnosticsBox:"DiagnosticsList_diagnosticsBox__NbaZi",diagItem:"DiagnosticsList_diagItem__3otDW",selected:"DiagnosticsList_selected__jbDsD",error:"DiagnosticsList_error__1cDSO"}},,,function(e,n,t){e.exports={heading:"Disasm_heading__2ZRjL",layoutContainer:"Disasm_layoutContainer__36ehI",disasmContainer:"Disasm_disasmContainer__2QplX",downloadButton:"Disasm_downloadButton__3MkkT"}},,,,,function(e,n,t){"use strict";t.d(n,"a",function(){return r});var r="\n!filescope c64\n!macro basic_start(addr) {\n* = $801\n    !byte $0c, $08, $00, $00, $9e\n    !for d in [10000, 1000, 100, 10, 1] {\n        !if (addr >= d) {\n            !byte $30 + (addr/d)%10\n        }\n    }\n    !byte 0, 0, 0\n}\n"},function(e,n,t){"use strict";function r(e,n){for(var t=e.split("\n"),r=0,l=0;l<n.start.line-1;l++)r+=t[l].length+1;return r+n.start.column-1}function l(e,n){for(var t=e.split("\n"),r=0,l=0;l<t.length;l++)if(n<(r+=t[l].length+1))return l}t.d(n,"a",function(){return r}),t.d(n,"b",function(){return l})},,function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=t(47);n.assemble=r.assemble,n.platformC64=r.platformC64;var l=t(68);n.disassemble=l.disassemble},function(e,n,t){e.exports={buttonContainer:"CloseButton_buttonContainer__28ZWo",close:"CloseButton_close__1cumB"}},function(e,n,t){e.exports={navContainer:"App_navContainer__32B3M",appTitle:"App_appTitle__2SEQk"}},,,,,function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.default={ADC:[105,101,117,null,109,125,121,null,97,113,null,null],AND:[41,37,53,null,45,61,57,null,33,49,null,null],ASL:[null,6,22,null,14,30,null,null,null,null,10,null],BIT:[null,36,null,null,44,null,null,null,null,null,null,null],BPL:[null,null,null,null,null,null,null,null,null,null,null,16],BMI:[null,null,null,null,null,null,null,null,null,null,null,48],BVC:[null,null,null,null,null,null,null,null,null,null,null,80],BVS:[null,null,null,null,null,null,null,null,null,null,null,112],BCC:[null,null,null,null,null,null,null,null,null,null,null,144],BCS:[null,null,null,null,null,null,null,null,null,null,null,176],BNE:[null,null,null,null,null,null,null,null,null,null,null,208],BEQ:[null,null,null,null,null,null,null,null,null,null,null,240],BRK:[null,null,null,null,null,null,null,null,null,null,0,null],CMP:[201,197,213,null,205,221,217,null,193,209,null,null],CPX:[224,228,null,null,236,null,null,null,null,null,null,null],CPY:[192,196,null,null,204,null,null,null,null,null,null,null],DEC:[null,198,214,null,206,222,null,null,null,null,null,null],EOR:[73,69,85,null,77,93,89,null,65,81,null,null],CLC:[null,null,null,null,null,null,null,null,null,null,24,null],SEC:[null,null,null,null,null,null,null,null,null,null,56,null],CLI:[null,null,null,null,null,null,null,null,null,null,88,null],SEI:[null,null,null,null,null,null,null,null,null,null,120,null],CLV:[null,null,null,null,null,null,null,null,null,null,184,null],CLD:[null,null,null,null,null,null,null,null,null,null,216,null],SED:[null,null,null,null,null,null,null,null,null,null,248,null],INC:[null,230,246,null,238,254,null,null,null,null,null,null],JMP:[null,null,null,null,76,null,null,108,null,null,null,null],JSR:[null,null,null,null,32,null,null,null,null,null,null,null],LDA:[169,165,181,null,173,189,185,null,161,177,null,null],LDX:[162,166,null,182,174,null,190,null,null,null,null,null],LDY:[160,164,180,null,172,188,null,null,null,null,null,null],LSR:[null,70,86,null,78,94,null,null,null,null,74,null],NOP:[null,null,null,null,null,null,null,null,null,null,234,null],ORA:[9,5,21,null,13,29,25,null,1,17,null,null],TAX:[null,null,null,null,null,null,null,null,null,null,170,null],TXA:[null,null,null,null,null,null,null,null,null,null,138,null],DEX:[null,null,null,null,null,null,null,null,null,null,202,null],INX:[null,null,null,null,null,null,null,null,null,null,232,null],TAY:[null,null,null,null,null,null,null,null,null,null,168,null],TYA:[null,null,null,null,null,null,null,null,null,null,152,null],DEY:[null,null,null,null,null,null,null,null,null,null,136,null],INY:[null,null,null,null,null,null,null,null,null,null,200,null],ROR:[null,102,118,null,110,126,null,null,null,null,106,null],ROL:[null,38,54,null,46,62,null,null,null,null,42,null],RTI:[null,null,null,null,null,null,null,null,null,null,64,null],RTS:[null,null,null,null,null,null,null,null,null,null,96,null],SBC:[233,229,245,null,237,253,249,null,225,241,null,null],STA:[null,133,149,null,141,157,153,null,129,145,null,null],TXS:[null,null,null,null,null,null,null,null,null,null,154,null],TSX:[null,null,null,null,null,null,null,null,null,null,186,null],PHA:[null,null,null,null,null,null,null,null,null,null,72,null],PLA:[null,null,null,null,null,null,null,null,null,null,104,null],PHP:[null,null,null,null,null,null,null,null,null,null,8,null],PLP:[null,null,null,null,null,null,null,null,null,null,40,null],STX:[null,134,null,150,142,null,null,null,null,null,null,null],STY:[null,132,148,null,140,null,null,null,null,null,null,null],"---":[null,null,null,null,null,null,null,null,null,null,null,null]}},,function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.mkLiteral=function(e,n){return{type:"literal",lit:e,loc:n}},n.mkScopeQualifiedIdent=function(e,n,t){return{type:"qualified-ident",path:e,absolute:n,loc:t}},n.mkIdent=function(e,n){return{type:"ident",name:e,loc:n}},n.mkUnary=function(e,n,t){return{type:"unary",op:e,expr:n,loc:t}},n.mkBinaryOp=function(e,n,t,r){return{type:"binary",op:e,left:n,right:t,loc:r}},n.mkExprArray=function(e,n){return{type:"array",list:e,loc:n}},n.mkExprObject=function(e,n){return{type:"object",props:e,loc:n}},n.mkCallFunc=function(e,n,t){return{type:"callfunc",callee:e,args:null==n?[]:n,loc:t}},n.mkMember=function(e,n,t,r){return{type:"member",object:e,property:n,computed:t,loc:r}},function(e){e[e.Byte=0]="Byte",e[e.Word=1]="Word"}(n.DataSize||(n.DataSize={})),n.mkLabel=function(e,n){return{name:e,loc:n}},n.mkInsn=function(e,n){return{type:"insn",insn:e,loc:n}},n.mkSetPC=function(e,n){return{type:"setpc",pc:e,loc:n}},n.mkData=function(e,n,t){return{type:"data",values:n,dataSize:e,loc:t}},n.mkFill=function(e,n,t){return{type:"fill",numBytes:e,fillValue:n,loc:t}},n.mkAlign=function(e,n){return{type:"align",alignBytes:e,loc:n}},n.mkInclude=function(e,n){return{type:"include",filename:e,loc:n}},n.mkError=function(e,n){return{type:"error",error:e,loc:n}},n.mkBinary=function(e,n,t,r){return{type:"binary",filename:e,size:n,offset:t,loc:r}},n.mkIfElse=function(e,n,t){return{type:"if",cases:e,elseBranch:null!==n?n:[],loc:t}},n.mkFor=function(e,n,t,r){return{type:"for",index:e,list:n,body:t,loc:r}},n.mkMacroArg=function(e){return{ident:e}},n.mkMacro=function(e,n,t,r){return{type:"macro",name:e,args:null==n?[]:n,body:t,loc:r}},n.mkCallMacro=function(e,n,t){return{type:"callmacro",name:e,args:null==n?[]:n,loc:t}},n.mkLet=function(e,n,t){return{type:"let",name:e,value:n,loc:t}},n.mkAssign=function(e,n,t){return{type:"assign",name:e,value:n,loc:t}},n.mkLoadPlugin=function(e,n,t){return{type:"load-plugin",filename:e,moduleName:n,loc:t}},n.mkFilescope=function(e,n){return{type:"filescope",name:e,loc:n}},n.mkAsmLine=function(e,n,t,r){return{label:e,stmt:n,scopedStmts:t,loc:r}}},function(e,n,t){"use strict";(function(e){var r=t(4),l=t(5),a=t(6),i=t(1),u=t(2),o=t(0),c=t.n(o),s=t(19),f=t(16),d=t(17),h=t(30),p=t(32),m=t(34),v=t(36),y=t(21),b=t.n(y);var g={useWebWorkers:!0};function k(e){return c.a.createElement("span",{"aria-label":"emoji",role:"img"},e.emoji)}var C=function(n){function t(){var n,l;Object(r.a)(this,t);for(var u=arguments.length,o=new Array(u),c=0;c<u;c++)o[c]=arguments[c];return(l=Object(a.a)(this,(n=Object(i.a)(t)).call.apply(n,[this].concat(o)))).assemblerWorker=void 0,l.state={sourceCode:"",disassembly:[],prg:e.from([]),diagnosticsIndex:0,diagnostics:[],helpVisible:!1},l.handleWorkerMessage=function(e){0===e.data.diagnostics.length?l.setState({prg:e.data.prg,disassembly:e.data.disassembly,diagnostics:e.data.diagnostics}):l.setState({diagnostics:e.data.diagnostics})},l.handleKeyDown=function(e){"F4"===e.key&&(l.setState(function(n){return 0===n.diagnostics.length?{diagnosticsIndex:0}:void 0===n.diagnosticsIndex?{diagnosticsIndex:0}:e.shiftKey?{diagnosticsIndex:Math.max(0,n.diagnosticsIndex-1)}:{diagnosticsIndex:Math.min(n.diagnostics.length-1,n.diagnosticsIndex+1)}}),e.preventDefault()),"Escape"===e.key&&(l.setState({diagnosticsIndex:void 0,helpVisible:!1}),e.preventDefault())},l.handleOnClickDiagnostic=function(e){l.setState({diagnosticsIndex:e})},l.debouncedCompile=function(e,n){var t=void 0;return function(){for(var r=this,l=arguments.length,a=new Array(l),i=0;i<l;i++)a[i]=arguments[i];clearTimeout(t),t=window.setTimeout(function(){return e.apply(r,a)},n)}}(function(e){g.useWebWorkers&&l.assemblerWorker&&l.assemblerWorker.postMessage(e)},250),l.handleSetSource=function(e){var n={"main.asm":e,"c64.asm":f.a};if(g.useWebWorkers&&l.assemblerWorker)l.debouncedCompile({sourceFileMap:n}),l.setState({sourceCode:e,diagnosticsIndex:void 0});else{var t={readFileSync:function(e){if(e in n)return n[e];throw new Error("File not found ".concat(e))}},r=Object(s.assemble)("main.asm",t),a={isInstruction:r.debugInfo.info().isInstruction};0===r.errors.length?l.setState({sourceCode:e,prg:r.prg,disassembly:Object(s.disassemble)(r.prg,a),diagnostics:[],diagnosticsIndex:void 0}):l.setState({sourceCode:e,diagnostics:r.errors,diagnosticsIndex:void 0})}},l.handleClearDiagnosticsSelectionOnKey=function(e){"F4"!==e.key&&"Shift"!==e.key&&void 0!==l.state.diagnosticsIndex&&l.setState({diagnosticsIndex:void 0})},l.handleClearDiagnosticsSelectionOnMouse=function(e){void 0!==l.state.diagnosticsIndex&&l.setState({diagnosticsIndex:void 0})},l.handleClickHelp=function(e){e.preventDefault(),l.setState({helpVisible:!0})},l.handleCloseHelp=function(){l.setState({helpVisible:!1})},l}return Object(u.a)(t,n),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;document.addEventListener("keydown",this.handleKeyDown),this.assemblerWorker=new Worker("worker.js"),null!==this.assemblerWorker&&this.assemblerWorker.addEventListener("message",function(n){e.handleWorkerMessage(n)})}},{key:"render",value:function(){var e=this.state.diagnostics,n=void 0;if(0!==e.length&&void 0!==this.state.diagnosticsIndex){var t=e[this.state.diagnosticsIndex];n=Object(d.a)(this.state.sourceCode,t.loc)}return c.a.createElement("div",{id:"root"},c.a.createElement("nav",{id:"mainNav"},c.a.createElement("div",{className:b.a.navContainer},c.a.createElement("div",{className:b.a.appTitle},c.a.createElement("a",{href:"https://nurpax.github.io/c64jasm/"},"c64jasm")," online"),c.a.createElement("p",null,"A little experimental 6502 assembler for the C64"),c.a.createElement("p",null,c.a.createElement(k,{emoji:"\ud83d\udc49"})," ",c.a.createElement("a",{onClick:this.handleClickHelp,href:"/",target:"_blank"},"help")),c.a.createElement("p",null,c.a.createElement(k,{emoji:"\ud83d\udc49"})," ",c.a.createElement("a",{href:"https://github.com/nurpax/c64jasm-browser"},"source code")))),c.a.createElement("div",{onKeyDown:this.handleClearDiagnosticsSelectionOnKey,onMouseDown:this.handleClearDiagnosticsSelectionOnMouse,onMouseUp:this.handleClearDiagnosticsSelectionOnMouse,id:"mainCode"},c.a.createElement(h.a,{onSourceChanged:this.handleSetSource,diagnostics:this.state.diagnostics,errorCharOffset:n})),c.a.createElement("div",{id:"siteDisasm"},c.a.createElement(p.a,{disassembly:this.state.disassembly,prg:this.state.prg})),c.a.createElement("div",{id:"mainDiag"},c.a.createElement(m.a,{onClickItem:this.handleOnClickDiagnostic,diagnostics:this.state.diagnostics,selectedIndex:this.state.diagnosticsIndex})),c.a.createElement(v.a,{visible:this.state.helpVisible,onClose:this.handleCloseHelp}))}}]),t}(c.a.Component);n.a=C}).call(this,t(23).Buffer)},function(e,n,t){"use strict";t.d(n,"a",function(){return x});var r=t(35),l=t(4),a=t(5),i=t(6),u=t(1),o=t(2),c=t(0),s=t.n(c),f=t(31),d=t.n(f),h=t(9),p=t.n(h),m=t(17),v=t(3),y=t.n(v);function b(e,n){b=function(e,n){return new i(e,n)};var t=Object(r.a)(RegExp),l=RegExp.prototype,a=new WeakMap;function i(e,n){var r=t.call(this,e);return a.set(r,n),r}function u(e,n){var t=a.get(n);return Object.keys(t).reduce(function(n,r){return n[r]=e[t[r]],n},Object.create(null))}return Object(o.a)(i,t),i.prototype.exec=function(e){var n=l.exec.call(this,e);return n&&(n.groups=u(n,this)),n},i.prototype[Symbol.replace]=function(e,n){if("string"===typeof n){var t=a.get(this);return l[Symbol.replace].call(this,e,n.replace(/\$<([^>]+)>/g,function(e,n){return"$"+t[n]}))}if("function"===typeof n){var r=this;return l[Symbol.replace].call(this,e,function(){var e=[];return e.push.apply(e,arguments),"object"!==typeof e[e.length-1]&&e.push(u(e,r)),n.apply(this,e)})}return l[Symbol.replace].call(this,e,n)},b.apply(this,arguments)}var g=4;function k(e,n){for(var t=0,r=0;r<n;r++){if(e.length<r)return;"\t"===e[r]?t+=g:t++}return t}function C(e){var n=0;if(!e.text)return null;var t=!0,r=!1,l=void 0;try{for(var a,i=e.text[Symbol.iterator]();!(t=(a=i.next()).done);t=!0){"\t"===a.value?n+=g:n++}}catch(m){r=!0,l=m}finally{try{t||null==i.return||i.return()}finally{if(r)throw l}}var u=Array(n).fill(!1),o=!0,f=!1,d=void 0;try{for(var h,p=e.errors[Symbol.iterator]();!(o=(h=p.next()).done);o=!0){var m=h.value,v=k(e.text,m.start.column-1);if(void 0===v)return null;var b=m.start.line===m.end.line?k(e.text,m.end.column-1):v+1;if(void 0===b)return null;for(var C=v;C<b;C++)u[C]=!0}}catch(m){f=!0,d=m}finally{try{o||null==p.return||p.return()}finally{if(f)throw d}}for(var E=function(e){var n=void 0,t=[],r=!0,l=!1,a=void 0;try{for(var i,u=e[Symbol.iterator]();!(r=(i=u.next()).done);r=!0){var o=i.value;n!==o?(n=o,t.push({code:n,count:1})):t[t.length-1].count++}}catch(m){l=!0,a=m}finally{try{r||null==u.return||u.return()}finally{if(l)throw a}}return t}(u),S=[],x=0;x<E.length;x++){var A=E[x];A.code?S.push(s.a.createElement("pre",{key:x,style:{display:"inline-block"},className:y.a.highlightError}," ".repeat(A.count))):S.push(s.a.createElement("pre",{key:x,style:{display:"inline-block"}}," ".repeat(A.count)))}return s.a.createElement(c.Fragment,null,S)}var E=s.a.forwardRef(function(e,n){for(var t=[],r=e.startRow;r<e.startRow+e.numRows+2;r++){var l=r===e.currentLine&&y.a.textareaHighlightRowCurrent,a=e.lineToErrors.get(r);if(a){var i=e.textLines[r];t.push(s.a.createElement("div",{className:p()(y.a.textareaHighlightRow,l),key:r},s.a.createElement(C,{text:i,errors:a})))}else t.push(s.a.createElement("div",{className:p()(y.a.textareaHighlightRow,l),key:r}))}return s.a.createElement("div",{ref:n,className:y.a.textareaHighlightOverlay},t)}),S=s.a.forwardRef(function(e,n){for(var t=[],r=e.startRow;r<e.startRow+e.numRows+2;r++){var l="".concat(r+1),a=r===e.currentLine&&y.a.gutterRowSelected,i=r>=0&&r<e.numTextRows?l.padStart(4," "):"";t.push(s.a.createElement("div",{className:p()(y.a.gutterRow,a),key:r},i))}return s.a.createElement("div",{ref:n,className:y.a.gutter},t)}),x=function(e){function n(e){var t;Object(l.a)(this,n),(t=Object(i.a)(this,Object(u.a)(n).call(this,e))).editorLineHeight=0,t.numEditorCharRows=0,t.textareaRef=s.a.createRef(),t.gutterRef=s.a.createRef(),t.highlighterRef=s.a.createRef(),t.handleScroll=function(e){var n=e.nativeEvent.target.scrollTop;t.setState({scrollTop:n})},t.handleSourceChanged=function(e){t.props.onSourceChanged(e.target.value),t.setState({textLines:e.target.value.split("\n")})},t.updateCursorState=function(){if(t.textareaRef&&t.textareaRef.current){var e=t.textareaRef.current;if(e.selectionStart===e.selectionEnd){var n=e.selectionStart,r=Object(m.b)(t.textareaRef.current.value,n);t.setState({currentLine:r})}else t.setState({currentLine:void 0})}},t.handleSelect=function(e){t.updateCursorState()},t.handleKeyDown=function(e){t.updateCursorState()},t.handleKeyUp=function(e){t.updateCursorState()},t.handleMouseDown=function(e){if(t.textareaRef&&t.textareaRef.current){var n=e.nativeEvent.offsetY+t.state.scrollTop;t.setState({currentLine:Math.min(t.state.textLines.length-1,Math.floor(n/t.editorLineHeight))})}},t.state={scrollTop:0,currentLine:void 0,textLines:[]};var r=getComputedStyle(document.documentElement).getPropertyValue("--code-window-line-height"),a=b(/^[ ]*([0-9]+)px$/,{height:1}).exec(r);if(!a)throw new Error("failed querying css var --code-window-line-height"+r);t.editorLineHeight=parseInt(a.groups.height);var o=getComputedStyle(document.documentElement).getPropertyValue("--code-window-num-lines");if(!(a=b(/^[ ]*([0-9]+)$/,{lines:1}).exec(o)))throw new Error("failed querying css var --code-window-num-lines");return t.numEditorCharRows=parseInt(a.groups.lines),t}return Object(o.a)(n,e),Object(a.a)(n,[{key:"componentDidMount",value:function(){this.textareaRef&&this.textareaRef.current&&(d.a.watch(this.textareaRef.current),this.textareaRef.current.spellcheck=!1,this.textareaRef.current.focus())}},{key:"componentDidUpdate",value:function(e,n){if(this.textareaRef&&this.textareaRef.current&&void 0!==this.props.errorCharOffset&&(this.textareaRef.current.focus(),this.textareaRef.current.setSelectionRange(this.props.errorCharOffset,this.props.errorCharOffset)),n.scrollTop!==this.state.scrollTop){var t=this.state.scrollTop%this.editorLineHeight;this.gutterRef&&this.gutterRef.current&&(this.gutterRef.current.scrollTop=t),this.highlighterRef&&this.highlighterRef.current&&(this.highlighterRef.current.scrollTop=t)}}},{key:"render",value:function(){var e=new Map;this.props.diagnostics.forEach(function(n){var t=n.loc,r=t.start.line-1,l=e.has(r)?e.get(r):[];l.push(t),e.set(r,l)});var n=Math.floor(this.state.scrollTop/this.editorLineHeight);return s.a.createElement("div",{className:y.a.layoutContainer},s.a.createElement("div",{className:y.a.heading},"Assembly"),s.a.createElement("div",{className:y.a.editorContainer},s.a.createElement(S,{ref:this.gutterRef,startRow:n,numRows:this.numEditorCharRows,numTextRows:this.state.textLines.length,currentLine:this.state.currentLine}),s.a.createElement("div",{className:y.a.textContainer,onMouseDown:this.handleMouseDown},s.a.createElement(E,{ref:this.highlighterRef,startRow:n,numRows:this.numEditorCharRows,currentLine:this.state.currentLine,textLines:this.state.textLines,lineToErrors:e}),s.a.createElement("textarea",{wrap:"off",onKeyUp:this.handleKeyUp,onKeyDown:this.handleKeyDown,onSelect:this.handleSelect,onScroll:this.handleScroll,ref:this.textareaRef,onChange:this.handleSourceChanged,className:y.a.textarea}))))}}]),n}(s.a.Component)},,function(e,n,t){"use strict";t.d(n,"a",function(){return m});var r=t(4),l=t(5),a=t(6),i=t(1),u=t(2),o=t(0),c=t.n(o),s=t(33),f=t.n(s),d=t(11),h=t.n(d);function p(e){return c.a.createElement("div",null,c.a.createElement("a",{onClick:e.onClick,className:h.a.downloadButton,href:"/",target:"_blank"},"Download .PRG"))}var m=function(e){function n(){var e,t;Object(r.a)(this,n);for(var l=arguments.length,u=new Array(l),o=0;o<l;o++)u[o]=arguments[o];return(t=Object(a.a)(this,(e=Object(i.a)(n)).call.apply(e,[this].concat(u)))).handleDownloadPRG=function(e){e.preventDefault();var n=new Blob([t.props.prg]);f.a.saveAs(n,"c64jasm-online.prg")},t}return Object(u.a)(n,e),Object(l.a)(n,[{key:"render",value:function(){return c.a.createElement("div",{className:h.a.layoutContainer},c.a.createElement("div",{className:h.a.heading},c.a.createElement("div",null,"Disassembly"),c.a.createElement(p,{onClick:this.handleDownloadPRG})),c.a.createElement("div",{className:h.a.disasmContainer},c.a.createElement("pre",null,this.props.disassembly.join("\n"))))}}]),n}(c.a.Component)},,function(e,n,t){"use strict";t.d(n,"a",function(){return h});var r=t(4),l=t(5),a=t(6),i=t(1),u=t(2),o=t(0),c=t.n(o),s=t(8),f=t.n(s),d=function(e){function n(){var e,t;Object(r.a)(this,n);for(var l=arguments.length,u=new Array(l),o=0;o<l;o++)u[o]=arguments[o];return(t=Object(a.a)(this,(e=Object(i.a)(n)).call.apply(e,[this].concat(u)))).itemRef=c.a.createRef(),t}return Object(u.a)(n,e),Object(l.a)(n,[{key:"componentDidUpdate",value:function(e,n,t){this.itemRef&&this.itemRef.current&&this.props.selected&&this.itemRef.current.scrollIntoView({behavior:"smooth",block:"center"})}},{key:"render",value:function(){var e=this,n=this.props.error,t=n.loc,r=n.msg,l=this.props.selected?" ".concat(f.a.selected):"";return c.a.createElement("div",{ref:this.itemRef,className:"".concat(f.a.diagItem).concat(l),onClick:function(){return e.props.onClickItem(e.props.index)}},c.a.createElement("span",{className:"".concat(f.a.error).concat(l)},"main.asm:",t.start.line,":",t.start.column,": error:")," ",r)}}]),n}(c.a.Component),h=function(e){function n(){var e,t;Object(r.a)(this,n);for(var l=arguments.length,u=new Array(l),o=0;o<l;o++)u[o]=arguments[o];return(t=Object(a.a)(this,(e=Object(i.a)(n)).call.apply(e,[this].concat(u)))).handleOnClickItem=function(e){t.props.onClickItem(e)},t}return Object(u.a)(n,e),Object(l.a)(n,[{key:"render",value:function(){var e=this,n=this.props.diagnostics;return c.a.createElement("div",{className:f.a.layoutContainer},c.a.createElement("div",{className:f.a.heading},"Diagnostics"),c.a.createElement("div",{className:f.a.diagnostics},c.a.createElement("div",{className:f.a.diagnosticsBox},n.map(function(n,t){return c.a.createElement(d,{key:JSON.stringify(n.loc),index:t,error:n,selected:t===e.props.selectedIndex,onClickItem:e.handleOnClickItem})}))))}}]),n}(c.a.Component)},,function(e,n,t){"use strict";var r=t(4),l=t(5),a=t(6),i=t(1),u=t(2),o=t(0),c=t.n(o),s=t(15),f=t.n(s),d=t(9),h=t.n(d),p=t(20),m=t.n(p);function v(e){return c.a.createElement("div",{className:m.a.buttonContainer},c.a.createElement("a",{title:"Close Help",href:"/",target:"_blank",className:m.a.close,onClick:function(n){n.preventDefault(),e.onClose()}}))}var y=t(7),b=t.n(y),g=t(16),k=document.getElementById("modal-root"),C=function(e){function n(e){var t;return Object(r.a)(this,n),(t=Object(a.a)(this,Object(i.a)(n).call(this,e))).el=void 0,t.el=document.createElement("div"),t}return Object(u.a)(n,e),Object(l.a)(n,[{key:"componentDidMount",value:function(){k.appendChild(this.el)}},{key:"componentWillUnmount",value:function(){k.removeChild(this.el)}},{key:"render",value:function(){return f.a.createPortal(this.props.children,this.el)}}]),n}(c.a.Component);function E(e){return c.a.createElement("pre",{className:b.a.asm},function(e){var n,t,r=e.split("\n");for(n=0;n<r.length&&0===r[n].trim().length;n++);for(t=r.length-1;t>=0&&0===r[t].trim().length;t--);return r.slice(n,t+1).join("\n")}(e.text))}var S=function(e){function n(){return Object(r.a)(this,n),Object(a.a)(this,Object(i.a)(n).apply(this,arguments))}return Object(u.a)(n,e),Object(l.a)(n,[{key:"render",value:function(){return c.a.createElement("div",{className:h()(b.a.helpContents,b.a.maxWidth)},c.a.createElement("div",{className:b.a.headingContainer},c.a.createElement("div",{className:b.a.closeButtonContainer},c.a.createElement(v,{onClose:this.props.onClose})),c.a.createElement("h1",null,"c64jasm online ")),c.a.createElement("p",null,c.a.createElement("a",{href:"https://nurpax.github.io/c64jasm/"},"c64jasm")," is a 6502 assembler written in JavaScript. You can run it either on the command line using Node or link it into a web app."),c.a.createElement("p",null,c.a.createElement("a",{href:"https://nurpax.github.io/c64jasm-browser/"},"c64jasm online")," is an interactive assembler demo site where you can write 6502 assembly with live error reporting and disassembly."),c.a.createElement("h3",null,"Examples"),c.a.createElement("p",null,"Simple instructions and expressions:"),c.a.createElement(E,{text:"\n    lda #2+2  ; expression in an immediate field\n    sta $d020 ; set border color\n        "}),c.a.createElement("p",null,"Labels:"),c.a.createElement(E,{text:"\nentry: {\n    jsr func\n\n    ldx #8\nloop: ; label local to 'entry' scope\n    dex\n    bpl loop\n}\n\nfunc: {\n    ldx #7\nloop: ; label local to 'func' scope\n    sta buf, x   ; store to buf\n    dex\n    bpl loop\n    rts\n\nbuf: !fill 8, 0    ; 8 byte array\n}\n        "}),c.a.createElement("p",null,"Declaring and using variables:"),c.a.createElement(E,{text:"\n!let num_sprites = 4\n!let sprite_mask = (1<<num_sprites)-1\n\n    lda #sprite_mask\n    sta $d015 ; enable sprites 0-3\n        "}),c.a.createElement("p",null,"Conditional compilation and repetition:"),c.a.createElement(E,{text:"\n!let num_sprites = 4\n    lda #13  ; ptr to sprite data 1 (==address/64)\n    ldx #14  ; ptr to sprite data 2\n\n!for i in range(num_sprites) {\n    !if (i < 2) {\n        sta $07f8+i   ; sprite data 1 from A\n    } else {\n        stx $07f8+i   ; sprite data 2 from X\n    }\n}\n        "}),c.a.createElement("p",null,"Define and use macro macro:"),c.a.createElement(E,{text:"\n!macro set_border(color) {\n    lda #color\n    sta $d020\n}\n\n+set_border(13)  ; expand\n        "}),c.a.createElement("p",null,"A complete C64 program.  To compile a C64 ",c.a.createElement("code",null,".prg")," you need to insert a BASIC startup sequence at the beginning of your output ",c.a.createElement("code",null,".prg")," -- you can use the ",c.a.createElement("code",null,"c64::basic_entry")," macro to do this. The source code to these macros is shown in a later section."),c.a.createElement(E,{text:'\n!include "c64.asm"\n\n+c64::basic_start(entry)\n\nentry: {\n    lda #0\n}\n        '}),c.a.createElement("h3",null,"Built-in support macros"),c.a.createElement("p",null,"The c64jasm online site includes a small built in macro library.  You can find its source code below."),c.a.createElement("p",null,"The builtin ",c.a.createElement("code",null,"c64.asm")," contents:"),c.a.createElement(E,{text:g.a}))}}]),n}(c.a.Component),x=function(e){function n(){return Object(r.a)(this,n),Object(a.a)(this,Object(i.a)(n).apply(this,arguments))}return Object(u.a)(n,e),Object(l.a)(n,[{key:"render",value:function(){var e=this.props.visible;return c.a.createElement(C,null,c.a.createElement("div",{className:h()(e?b.a.helpModalContainer:b.a.hidden)},c.a.createElement("div",{className:b.a.circleReveal},c.a.createElement(S,{onClose:this.props.onClose}))))}}]),n}(c.a.Component);n.a=x},function(e,n,t){e.exports=t(38)},function(e,n,t){"use strict";t.r(n);var r=t(0),l=t.n(r),a=t(15),i=t.n(a),u=(t(43),t(29));i.a.render(l.a.createElement(u.a,null),document.getElementById("viewport_root"))},,,,,function(e,n,t){},,,,function(e,n,t){"use strict";(function(e){var r=t(24),l=t(25),a=t(51),i=t(12),u=t(13);Object.defineProperty(n,"__esModule",{value:!0});var o=t(26),c=t(14),s=t(56),f=t(27),d=t(62),h=t(28),p=t(63),m=t(66);function v(e){return{value:e,errors:!0}}function y(e){return{value:e,errors:!1}}function b(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];return n.some(function(e){return void 0!==e&&e.errors})}n.platformC64={name:"c64",defaultStartPC:2049};var g=function(){function e(n,t){i(this,e),this.syms=new Map,this.parent=null,this.children=new Map,this.parent=n,this.name=t}return u(e,[{key:"enter",value:function(n){var t=this.children.get(n);if(void 0!==t)return t;var r=new e(this,n);return this.children.set(n,r),r}},{key:"leave",value:function(){return this.parent}},{key:"findSymbol",value:function(e){for(var n=this;null!==n;n=n.parent){var t=n.syms.get(e);if(void 0!==t)return t}}},{key:"findSymbolPath",value:function(e){if(1==e.length)return this.findSymbol(e[0]);for(var n=this;void 0==n.children.get(e[0]);)if(null==(n=n.parent))return;for(var t=0;t<e.length-1;t++)if(void 0==(n=n.children.get(e[t])))return;return n.syms.get(e[e.length-1])}},{key:"addSymbol",value:function(e,n,t){this.syms.set(e,Object.assign({},n,{seen:t}))}},{key:"updateSymbol",value:function(e,n,t){for(var r=this;null!==r;r=r.parent){if(void 0!==r.syms.get(e))return void r.syms.set(e,Object.assign({},n,{seen:t}))}}}]),e}(),k=function(){function e(){i(this,e),this.passCount=0,this.root=new g(null,""),this.curSymtab=this.root,this.anonScopeCount=0}return u(e,[{key:"startPass",value:function(e){this.curSymtab=this.root,this.anonScopeCount=0,this.passCount=e}},{key:"withAnonScope",value:function(e){var n="__anon_scope_".concat(this.anonScopeCount);this.anonScopeCount++,this.withLabelScope(n,e)}},{key:"withLabelScope",value:function(e,n){this.curSymtab=this.curSymtab.enter(e),n(),this.curSymtab=this.curSymtab.leave()}},{key:"findPath",value:function(e,n){return n?this.root.findSymbolPath(e):this.curSymtab.findSymbolPath(e)}},{key:"findQualifiedSym",value:function(e,n){return this.findPath(e,n)}},{key:"symbolSeen",value:function(e){var n=this.curSymtab.syms.get(e);return void 0!==n&&n.seen==this.passCount}},{key:"declareLabelSymbol",value:function(e,n){var t=e.name,r=e.loc,l=this.curSymtab.syms.get(t);if(void 0==l){var a={type:"label",data:y({addr:n,loc:r})};return this.curSymtab.addSymbol(t,a,this.passCount),!1}if("label"!==l.type)throw new Error("ICE: declareLabelSymbol should be called only on labels");if(l.data.value.addr!==n){var i={type:"label",data:Object.assign({},l.data,{value:Object.assign({},l.data.value,{addr:n})})};return this.curSymtab.updateSymbol(t,i,this.passCount),!0}return this.curSymtab.updateSymbol(t,l,this.passCount),!1}},{key:"declareVar",value:function(e,n){this.curSymtab.addSymbol(e,{type:"var",data:n},this.passCount)}},{key:"updateVar",value:function(e,n){var t={type:"var",data:n};this.curSymtab.updateSymbol(e,t,this.passCount)}},{key:"findMacro",value:function(e,n){var t=this.findPath(e,n);if(void 0!==t&&"macro"==t.type)return t.data}},{key:"declareMacro",value:function(e,n){this.curSymtab.addSymbol(e,{type:"macro",data:n},this.passCount)}},{key:"dumpLabels",value:function(e){var n=[],t=function(e,t){n.push({prefix:"".concat(e,"/").concat(t.name),sym:t})};t("",this.root);for(var r=[];n.length>0;){var l=n.pop(),i=!0,u=!1,o=void 0;try{for(var c,s=l.sym.syms[Symbol.iterator]();!(i=(c=s.next()).done);i=!0){var f=c.value,d=a(f,2),h=d[0],p=d[1];"label"==p.type&&r.push({name:"".concat(l.prefix,"/").concat(h),addr:p.data.value.addr,size:0})}}catch(_){u=!0,o=_}finally{try{i||null==s.return||s.return()}finally{if(u)throw o}}var m=!0,v=!1,y=void 0;try{for(var b,g=l.sym.children[Symbol.iterator]();!(m=(b=g.next()).done);m=!0){var k=b.value,C=a(k,2),E=(C[0],C[1]);t(l.prefix,E)}}catch(_){v=!0,y=_}finally{try{m||null==g.return||g.return()}finally{if(v)throw y}}}var S=r.sort(function(e,n){return e.addr-n.addr}),x=S.length;if(x>0){for(var A=1;A<x;A++)S[A-1].size=S[A].addr-S[A-1].addr;var w=S[x-1];w.size=e-w.addr}return S}}]),e}();function C(e){return{source:e,start:{offset:0,line:0,column:0},end:{offset:0,line:0,column:0}}}function E(e){var n=typeof e;return"object"===n&&e instanceof Array?"array":n}function S(e){return"".concat(e.absolute?"::":"").concat(e.path.join("::"))}var x=function(e,n,t){var r=t(e.value,n.value);return y("boolean"==typeof r?r?1:0:r)},A=function(e,n){if(b(e))return v(0);var t=n(e.value);return y("boolean"==typeof t?t?1:0:t)},w=function(){function t(e){var r=this;i(this,t),this.binary=[],this.parseCache=new p.default,this.pluginCache=new Map,this.includeStack=[],this.initialPC=0,this.codePC=0,this.codePCSet=!1,this.pass=0,this.needPass=!1,this.scopes=new k,this.errorList=[],this.warningList=[],this.outOfRangeBranches=[],this.debugInfo=new m.DebugInfoTracker,this.errors=function(){return r.formatErrors(r.errorList,"error")},this.warnings=function(){return r.formatErrors(r.warningList,"warning")},this.readFileSyncFunc=e.readFileSync,this.platform=e.platformOptions||n.platformC64}return u(t,[{key:"readFileSync",value:function(e,n){return this.readFileSyncFunc(e,n)}},{key:"prg",value:function(){var n=255&this.initialPC,t=this.initialPC>>8&255;return e.from([n,t].concat(this.binary))}},{key:"parse",value:function(e,n){var t=this,r=void 0==n?C(e):n;return this.parseCache.parse(e,n,function(e,n){return t.guardedReadFileSync(e,r)})}},{key:"requirePlugin",value:function(e){var n=this.pluginCache.get(e);if(void 0!==n)return n;var t=s(c.resolve(this.makeSourceRelativePath(e)));return this.pluginCache.set(e,t),t}},{key:"peekSourceStack",value:function(){var e=this.includeStack.length;return this.includeStack[e-1]}},{key:"pushSource",value:function(e){this.includeStack.push(e)}},{key:"popSource",value:function(){this.includeStack.pop()}},{key:"anyErrors",value:function(){return 0!==this.errorList.length}},{key:"formatErrors",value:function(e,n){var t=new Set(e.map(function(e){return JSON.stringify(e)}));return l(t).map(function(e){var t=JSON.parse(e),r=t.loc,l=t.msg,a="<unknown>:1:1: ".concat(n,": ").concat(l);return r&&(a="".concat(r.source,":").concat(r.start.line,":").concat(r.start.column,": ").concat(n,": ").concat(l)),{loc:r,msg:l,formatted:a}})}},{key:"addError",value:function(e,n){this.errorList.push({msg:e,loc:n})}},{key:"addWarning",value:function(e,n){this.warningList.push({msg:e,loc:n})}},{key:"startPass",value:function(e){this.codePC=this.platform.defaultStartPC,this.codePCSet=!1,this.pass=e,this.needPass=!1,this.binary=[],this.errorList=[],this.scopes.startPass(e),this.outOfRangeBranches=[],this.debugInfo=new m.DebugInfoTracker}},{key:"emitBasicHeader",value:function(){var e=this;this.emit(12),this.emit(8),this.emit(0),this.emit(0),this.emit(158);[1e4,1e3,100,10,1].forEach(function(n){2061>=n&&e.emit(48+2061/n%10)}),this.emit(0),this.emit(0),this.emit(0)}},{key:"emitBinary",value:function(e){var n=e.filename,t=this.evalExprToString(n,"!binary filename"),r=y(0),l=void 0;if(null!==e.size&&(null!==e.offset&&(r=this.evalExprToInt(e.offset,"!binary offset")),null!==e.size&&(l=this.evalExprToInt(e.size,"!binary size"))),!b(t,r,l)){var a=this.makeSourceRelativePath(t.value),i=this.guardedReadFileSync(a,e.loc),u=i.byteLength;l&&(u=l.value);for(var o=0;o<u;o++)this.emit(i.readUInt8(o+r.value))}}},{key:"evalExprType",value:function(e,n,t){var r=this.evalExpr(e),l=r.errors,a=r.value;return l||typeof a===n?r:(this.addError("Expecting ".concat(t," to be '").concat(n,"' type, got '").concat(E(a),"'"),e.loc),{errors:!0,value:a})}},{key:"evalExprToInt",value:function(e,n){return this.evalExprType(e,"number",n)}},{key:"evalExprToString",value:function(e,n){return this.evalExprType(e,"string",n)}},{key:"evalExpr",value:function(e){var n=this;switch(e.type){case"binary":var t=this.evalExpr(e.left),i=this.evalExpr(e.right);if(b(t,i))return v(0);if(typeof t.value!==typeof i.value)return this.addError("Binary expression operands are expected to be of the same type.  Got: '".concat(E(t.value),"' (left), '").concat(E(i.value),"' (right)"),e.loc),v(0);if("string"!==typeof t.value&&"number"!==typeof t.value)return this.addError("Binary expression operands can only operator on numbers or strings.  Got: '".concat(E(t.value),"'"),e.loc),v(0);if("string"==typeof t.value){var u=["+","==","<","<=",">",">="];if(u.indexOf(e.op)<0)return this.addError("'".concat(e.op,"' operator is not supported for strings.  Valid operators for strings are: ").concat(u.join(", ")),e.loc),v(0)}switch(e.op){case"+":return x(t,i,function(e,n){return e+n});case"-":return x(t,i,function(e,n){return e-n});case"*":return x(t,i,function(e,n){return e*n});case"/":return x(t,i,function(e,n){return e/n});case"%":return x(t,i,function(e,n){return e%n});case"&":return x(t,i,function(e,n){return e&n});case"|":return x(t,i,function(e,n){return e|n});case"^":return x(t,i,function(e,n){return e^n});case"<<":return x(t,i,function(e,n){return e<<n});case">>":return x(t,i,function(e,n){return e>>n});case"==":return x(t,i,function(e,n){return e==n});case"!=":return x(t,i,function(e,n){return e!=n});case"<":return x(t,i,function(e,n){return e<n});case"<=":return x(t,i,function(e,n){return e<=n});case">":return x(t,i,function(e,n){return e>n});case">=":return x(t,i,function(e,n){return e>=n});case"&&":return x(t,i,function(e,n){return e&&n});case"||":return x(t,i,function(e,n){return e||n});default:throw new Error("Unhandled binary operator ".concat(e.op))}case"unary":var o=this.evalExprToInt(e.expr,"operand");if(o.errors)return o;switch(e.op){case"+":return A(o,function(e){return+e});case"-":return A(o,function(e){return-e});case"~":return A(o,function(e){return~e});default:throw new Error("Unhandled unary operator ".concat(e.op))}case"literal":return y(e.lit);case"array":var c=e.list.map(function(e){return n.evalExpr(e)});return{value:c.map(function(e){return e.value}),errors:b.apply(void 0,l(c))};case"object":var s=e.props.map(function(e){var t=n.evalExpr(e.val);return["literal"===e.key.type?e.key.lit:e.key.name,t]});return{value:s.reduce(function(e,n){var t=a(n,2),l=t[0],i=t[1];return Object.assign({},e,r({},l,i.value))},{}),errors:b.apply(void 0,l(s.map(function(e){var n=a(e,2);n[0];return n[1]})))};case"ident":throw new Error("should not see an ident here -- if you do, it is probably a wrong type node in parser");case"qualified-ident":var f=this.scopes.findQualifiedSym(e.path,e.absolute);if(void 0==f)return this.pass>=1?(this.addError("Undefined symbol '".concat(S(e),"'"),e.loc),v(0)):(this.needPass=!0,y(0));switch(f.type){case"label":return{errors:f.data.errors,value:f.data.value.addr};case"var":return f.seen<this.pass&&this.addError("Undeclared variable '".concat(S(e)),e.loc),f.data;case"macro":return this.addError("Must have a label or a variable identifier here, got macro name",e.loc),v(0)}break;case"member":var d=this.evalExpr(e.object),h=d.value;if(void 0==h)return this.addError("Cannot access properties of an unresolved symbol'",e.loc),v(0);var p=function(e,t){return e in h||(n.addError("Property '".concat(e,"' does not exist in object"),t),!1)},m=function(e,t){if("ident"!==e.property.type)n.addError("".concat(t," property must be a string, got ").concat(E(e.property.type)),e.loc);else if(p(e.property.name,e.property.loc))return y(h[e.property.name]);return v(0)};if(h instanceof Array){if(!e.computed)return m(e,"Array");var g=this.evalExprToInt(e.property,"array index"),k=g.errors,C=g.value;return k?v(0):C in h?y(h[C]):(this.addError("Out of bounds array index ".concat(C),e.property.loc),v(0))}if("object"==typeof h){if(e.computed){var w=this.evalExpr(e.property),_=w.errors,O=w.value;return _?v(0):"string"!==typeof O&&"number"!==typeof O?(this.addError("Object property must be a string or an integer, got ".concat(E(O)),e.loc),v(0)):p(O,e.property.loc)?y(h[O]):v(0)}return m(e,"Object")}return 0!==this.pass?(d.errors||(e.computed?this.addError("Cannot use []-operator on non-array/object values",e.loc):this.addError("Cannot use the dot-operator on non-object values",e.loc)),v(0)):y(0);case"callfunc":var L=this.evalExpr(e.callee),I=e.args.map(function(e){return n.evalExpr(e)});if(L.errors)return v(0);if("function"!==typeof L.value)return this.addError("Callee must be a function type.  Got '".concat(E(L),"'"),e.loc),v(0);if(b.apply(void 0,l(I)))return v(0);try{return y(L.value(I.map(function(e){return e.value})))}catch(j){return"qualified-ident"==e.callee.type?this.addError("Call to '".concat(S(e.callee),"' failed with an error: ").concat(j.message),e.loc):this.addError("Plugin call failed with an error: ".concat(j.message),e.loc),v(0)}}throw new Error("should be unreachable?")}},{key:"setInitialPC",value:function(e){if(this.codePCSet)throw new Error("PC already set -- shouldn't happen");this.codePC=e,this.codePCSet=!0,this.initialPC=e}},{key:"topLevelSourceLoc",value:function(){return C(this.includeStack[0])}},{key:"emit",value:function(e){this.codePCSet||(this.setInitialPC(this.platform.defaultStartPC),this.addWarning("Starting program counter not set with '* = addr'.  Defaulting to platform default $".concat(d.toHex16(this.codePC)),this.topLevelSourceLoc())),this.binary.push(e),this.codePC+=1}},{key:"emit16",value:function(e){this.emit(255&e),this.emit(e>>8&255)}},{key:"checkSingle",value:function(e){return null!==e&&(this.emit(e),!0)}},{key:"checkImm",value:function(e,n){if(null===n||null===e)return!1;var t=this.evalExprToInt(e,"immediate");return b(t)||(this.emit(n),this.emit(t.value)),!0}},{key:"checkAbs",value:function(e,n,t){if(null===n||null===e)return!1;var r=this.evalExprToInt(e,"absolute address");if(b(r))return!0;var l=r.value;if(8===t){if(l<0||l>=1<<t)return!1;this.emit(n),this.emit(l)}else this.emit(n),this.emit16(l);return!0}},{key:"checkBranch",value:function(e,n){if(null===n||null===e)return!1;var t=this.evalExpr(e);if(b(t))return!0;if("number"!==typeof t.value)return this.addError("Expecting branch label to evaluate to integer, got ".concat(E(t.value)),e.loc),!0;var r=t.value-this.codePC-2;return this.emit(n),(r>127||r<-128)&&this.outOfRangeBranches.push({loc:e.loc,offset:r}),this.emit(255&r),!0}},{key:"setPC",value:function(e){var n=this.evalExprToInt(e,"pc");if(!b(n)){var t=n.value;if(this.codePCSet)for(this.codePC>t&&this.addError("Cannot set program counter to a smaller value than current (current: $".concat(d.toHex16(this.codePC),", trying to set $").concat(d.toHex16(t),")"),e.loc);this.codePC<t;)this.emit(0);else this.setInitialPC(t)}}},{key:"guardedReadFileSync",value:function(n,t){try{return this.readFileSync(n)}catch(r){return this.addError("Couldn't open file '".concat(n,"'"),t),e.from([])}}},{key:"fileInclude",value:function(e){var n=this.evalExprToString(e.filename,"!include filename");if(!b(n)){var t=n.value,r=this.makeSourceRelativePath(t);this.pushSource(r),this.assemble(r,e.loc),this.popSource()}}},{key:"fillBytes",value:function(e){var n=this.evalExprToInt(e.numBytes,"!fill num_bytes"),t=this.evalExprToInt(e.fillValue,"!fill value");if(!b(n,t)){var r=t.value;if(r<0||r>=256)this.addError("!fill value to repeat must be in 8-bit range, '".concat(r,"' given"),e.fillValue.loc);else{var l=n.value;if(l<0)this.addError("!fill repeat count must be >= 0, got ".concat(l),e.numBytes.loc);else for(var a=0;a<l;a++)this.emit(r)}}}},{key:"alignBytes",value:function(e){var n=this.evalExprToInt(e.alignBytes,"alignment");if(!b(n)){var t=n.value;if(t<1)this.addError("Alignment must be a positive integer, ".concat(t," given"),e.alignBytes.loc);else if(0==(t&t-1))for(;0!=(this.codePC&t-1);)this.emit(0);else this.addError("Alignment must be a power of two, ".concat(t," given"),e.loc)}}},{key:"withAnonScope",value:function(e,n){if(null!==e)return this.withLabelScope(e,n);this.scopes.withAnonScope(n)}},{key:"withLabelScope",value:function(e,n){this.scopes.withLabelScope(e,n)}},{key:"emit8or16",value:function(e,n){8!=n?this.emit16(e):this.emit(e)}},{key:"emitData",value:function(e,n){for(var t=0;t<e.length;t++){var r=this.evalExpr(e[t]);if(!b(r)){var l=r.value;if("number"==typeof l)this.emit8or16(l,n);else if(l instanceof Array)for(var a in l)this.emit8or16(l[a],n);else this.addError("Only literal (int constants) or array types can be emitted.  Got ".concat(E(l)),e[t].loc)}}}},{key:"makeFunction",value:function(e,n){var t=this;return function(n){return e.apply(void 0,[{readFileSync:function(e){return t.readFileSync(e)},resolveRelative:function(e){return t.makeSourceRelativePath(e)}}].concat(l(n)))}}},{key:"bindFunction",value:function(e,n,t){this.scopes.declareVar(e.name,y(this.makeFunction(n,t)))}},{key:"bindPlugin",value:function(e,n){var t=e.moduleName;if("function"==typeof n&&this.bindFunction(t,n,e.loc),"object"==typeof n){var r={},l=Object.keys(n);for(var a in l){var i=l[a],u=n[i];r[i]=this.makeFunction(u,e.loc)}this.scopes.declareVar(t.name,y(r))}}},{key:"checkDirectives",value:function(e,n){var t=this;switch(e.type){case"data":this.emitData(e.values,e.dataSize===h.DataSize.Byte?8:16);break;case"fill":this.fillBytes(e);break;case"align":this.alignBytes(e);break;case"setpc":this.setPC(e.pc);break;case"binary":this.emitBinary(e);break;case"include":this.fileInclude(e);break;case"error":var r=this.evalExprToString(e.error,"error message");if(!b(r))return void this.addError(r.value,e.loc);break;case"if":var l=e.cases,i=e.elseBranch,u=function(e){var r,i=a(l[e],2),u=i[0],o=i[1],c=t.evalExpr(u);if(!b(c)&&(!0===(r=c.value)||0!=r))return{v:t.withAnonScope(n,function(){t.assembleLines(o)})}};for(var o in l){var c=u(o);if("object"===typeof c)return c.v}return this.withAnonScope(n,function(){t.assembleLines(i)});case"for":var s=function(){var r=e.index,l=e.list,a=e.body,i=(e.loc,t.evalExpr(l));if(b(i))return{v:void 0};var u=i.value;if(!(u instanceof Array))return t.addError("for-loop range must be an array expression (e.g., a range() or an array)",l.loc),{v:void 0};for(var o=function(e){var l=null;null!==n&&(l="".concat(n,"__").concat(e)),t.withAnonScope(l,function(){return t.scopes.declareVar(r.name,y(u[e])),t.assembleLines(a)})},c=0;c<u.length;c++)o(c);return"break"}();switch(s){case"break":break;default:if("object"===typeof s)return s.v}case"macro":var f=e.name;e.args,e.body;if(void 0!==this.scopes.findMacro([f.name],!1)&&this.scopes.symbolSeen(f.name))return void this.addError("Macro '".concat(f.name,"' already defined"),f.loc);this.scopes.declareMacro(f.name,e);break;case"callmacro":var d=e.name,p=e.args,m=this.scopes.findMacro(d.path,d.absolute),v=p.map(function(e){return t.evalExpr(e)});if(void 0==m)return void this.addError("Undefined macro '".concat(S(d),"'"),d.loc);if(m.args.length!==p.length)return void this.addError("Macro '".concat(S(d),"' declared with ").concat(m.args.length," args but called here with ").concat(p.length),d.loc);this.withAnonScope(n,function(){for(var e=0;e<v.length;e++){var n=m.args[e].ident.name;t.scopes.declareVar(n,v[e])}t.assembleLines(m.body)});break;case"let":var g=e.name,k=this.scopes.findQualifiedSym([g.name],!1),C=this.evalExpr(e.value);if(void 0!==k&&this.scopes.symbolSeen(g.name))return void this.addError("Variable '".concat(g.name,"' already defined"),e.loc);this.scopes.declareVar(g.name,C);break;case"assign":var E=e.name;if(1!==e.name.path.length||e.name.absolute)return void this.addError("Only symbol names in the current (or owning) scopes are allowed for assignment",e.loc);var x=this.scopes.findQualifiedSym(e.name.path,e.name.absolute);if(void 0==x)return void this.addError("Assignment to undeclared variable '".concat(S(E),"'"),e.loc);if("var"!==x.type)return void this.addError("Assignment to symbol '".concat(S(E),"' that is not a variable.  Its type is '").concat(x.type,"'"),e.loc);var A=this.evalExpr(e.value);this.scopes.updateVar(E.path[0],A);break;case"load-plugin":var w=this.evalExprToString(e.filename,"plugin filename");if(b(w))return;var _=this.requirePlugin(w.value);this.bindPlugin(e,_);break;case"filescope":return void this.addError("The !filescope directive is only allowed as the first directive in a source file",e.loc);default:return void this.addError("unknown directive ".concat(e.type),e.loc)}}},{key:"assembleLines",value:function(e){var n=this;if(null!==e&&0!=e.length&&0!=e.length){for(var t=function(e){for(var t=0;t<e.length;t++)n.debugInfo.startLine(e[t].loc,n.codePC),n.assembleLine(e[t]),n.debugInfo.endLine(n.codePC)},r=0;r<e.length;){var l=e[r],a=l.label,i=l.stmt,u=l.scopedStmts;if(null!=a||null!=i||null!=u)break;r++}if(!(r>=e.length)){var o=e[r];return null!=o.stmt&&"filescope"==o.stmt.type?(this.checkAndDeclareLabel(o.stmt.name),this.withLabelScope(o.stmt.name.name,function(){return t(e.slice(r+1))})):t(e)}}}},{key:"checkAndDeclareLabel",value:function(e){this.scopes.symbolSeen(e.name)?this.addError("Symbol '".concat(e.name,"' already defined"),e.loc):this.scopes.declareLabelSymbol(e,this.codePC)&&(this.needPass=!0)}},{key:"assembleLine",value:function(e){var n=this;if(null!=e.label||null!=e.stmt||null!=e.scopedStmts){null!==e.label&&this.checkAndDeclareLabel(e.label);var t=e.scopedStmts;if(null==t){if(null!==e.stmt)if("insn"===e.stmt.type){var r=e.stmt.insn,l=o.default[r.mnemonic.toUpperCase()];void 0!==l?function(e){var t=n.codePC;e();var r=n.codePC;n.debugInfo.markAsInstruction(t,r)}(function(){null===r.imm&&null===r.abs&&null===r.absx&&null===r.absy&&null===r.absind&&n.checkSingle(l[10])||n.checkImm(r.imm,l[0])||n.checkAbs(r.abs,l[1],8)||n.checkAbs(r.absx,l[2],8)||n.checkAbs(r.absy,l[3],8)||n.checkAbs(r.absx,l[5],16)||n.checkAbs(r.absy,l[6],16)||n.checkAbs(r.absind,l[7],16)||n.checkAbs(r.indx,l[8],8)||n.checkAbs(r.indy,l[9],8)||n.checkAbs(r.abs,l[4],16)||n.checkBranch(r.abs,l[11])||n.addError("Couldn't encode instruction '".concat(r.mnemonic,"'"),e.loc)}):this.addError("Unknown mnemonic '".concat(r.mnemonic,"'"),e.loc)}else this.checkDirectives(e.stmt,null==e.label?null:e.label.name)}else{if(!e.label)throw new Error("ICE: line.label cannot be undefined");this.withLabelScope(e.label.name,function(){n.assembleLines(t)})}}}},{key:"makeSourceRelativePath",value:function(e){var n=this.peekSourceStack();return c.join(c.dirname(n),e)}},{key:"assemble",value:function(e,n){try{var t=this.parse(e,n);this.assembleLines(t)}catch(r){if(!("name"in r&&"SyntaxError"==r.name)){if("name"in r&&"semantic"==r.name)return;throw r}this.addError("Syntax error: ".concat(r.message),Object.assign({},r.location,{source:this.peekSourceStack()}))}}},{key:"_requireType",value:function(e,n){if(typeof e==n)return e;this.addError("Expecting a ".concat(n," value, got ").concat(E(e)),e.loc)}},{key:"requireString",value:function(e){return this._requireType(e,"string")}},{key:"requireNumber",value:function(e){return this._requireType(e,"number")}},{key:"registerPlugins",value:function(){var e=this,n=function(n,t){e.scopes.declareVar(n,y(t))};n("loadJson",function(n){var t=e.requireString(n[0]),r=e.makeSourceRelativePath(t);return JSON.parse(e.readFileSync(r,"utf-8"))}),n("range",function(n){var t=0,r=void 0;if(1==n.length)r=e.requireNumber(n[0]);else{if(2!=n.length)throw new Error("Invalid number of args to 'range'.  Expecting 1 or 2 arguments.");t=e.requireNumber(n[0]),r=e.requireNumber(n[1])}if(r==t)return[];if(r<t)throw new Error("range 'end' must be larger or equal to 'start'");return Array(r-t).fill(null).map(function(e,n){return n+t})});var t={},r=!0,l=!1,a=void 0;try{for(var i,u=Object.getOwnPropertyNames(Math)[Symbol.iterator]();!(r=(i=u.next()).done);r=!0){var o=i.value,c=Math;t[o]="random"===o?function(){throw new Error("Math.random() not allowed as it will lead to non-reproducible builds")}:c[o]}}catch(s){l=!0,a=s}finally{try{r||null==u.return||u.return()}finally{if(l)throw a}}n("Math",t)}},{key:"dumpLabels",value:function(){return this.scopes.dumpLabels(this.codePC)}}]),t}(),_={readFileSync:f.readFileSync};n.assemble=function(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:_,r=new w(t);r.pushSource(n);var l=0;do{if(r.startPass(l),r.registerPlugins(),r.assemble(n,C(n)),l>0&&r.anyErrors())return{prg:e.from([]),labels:[],debugInfo:void 0,errors:r.errors(),warnings:r.warnings()};if(l>10)return void console.error("Exceeded max pass limit ".concat(10));if(l+=1,!r.needPass&&0!=r.outOfRangeBranches.length){for(var a in r.outOfRangeBranches){var i=r.outOfRangeBranches[a];r.addError("Branch target too far (must fit in signed 8-bit range, got ".concat(i.offset,")"),i.loc)}break}}while(r.needPass);return r.popSource(),{prg:r.prg(),errors:r.errors(),warnings:r.warnings(),labels:r.dumpLabels(),debugInfo:r.debugInfo}}}).call(this,t(23).Buffer)},,,,,,,,,,,,,,function(e,n){function t(e){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}t.keys=function(){return[]},t.resolve=t,e.exports=t,t.id=61},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.toHex16=function(e){return e.toString(16).padStart(4,"0")}},function(e,n,t){"use strict";var r=t(12),l=t(13);Object.defineProperty(n,"__esModule",{value:!0});var a=t(64),i=function(){function e(){r(this,e),this.filenameToSource=new Map,this.sourceToAst=new Map}return l(e,[{key:"getFileContents",value:function(e,n,t){var r=this.filenameToSource.get(e);if(void 0!==r)return r;var l=t(e,n);return this.filenameToSource.set(e,l),l}},{key:"parse",value:function(e,n,t){var r=this.getFileContents(e,n,t),l=this.sourceToAst.get(e);if(void 0!==l)return l;var i=a.parse(r.toString(),{source:e});return this.sourceToAst.set(e,i),i}}]),e}();n.default=i},function(e,n,t){"use strict";var r=t(65),l=t(25);function a(e,n,t,r){this.message=e,this.expected=n,this.found=t,this.location=r,this.name="SyntaxError","function"===typeof Error.captureStackTrace&&Error.captureStackTrace(this,a)}!function(e,n){function t(){this.constructor=e}t.prototype=n.prototype,e.prototype=new t}(a,Error),a.buildMessage=function(e,n){var t={literal:function(e){return'"'+l(e.text)+'"'},class:function(e){var n,t="";for(n=0;n<e.parts.length;n++)t+=e.parts[n]instanceof Array?a(e.parts[n][0])+"-"+a(e.parts[n][1]):a(e.parts[n]);return"["+(e.inverted?"^":"")+t+"]"},any:function(e){return"any character"},end:function(e){return"end of input"},other:function(e){return e.description}};function r(e){return e.charCodeAt(0).toString(16).toUpperCase()}function l(e){return e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(e){return"\\x0"+r(e)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(e){return"\\x"+r(e)})}function a(e){return e.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(e){return"\\x0"+r(e)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(e){return"\\x"+r(e)})}return"Expected "+function(e){var n,r,l,a=new Array(e.length);for(n=0;n<e.length;n++)a[n]=(l=e[n],t[l.type](l));if(a.sort(),a.length>0){for(n=1,r=1;n<a.length;n++)a[n-1]!==a[n]&&(a[r]=a[n],r++);a.length=r}switch(a.length){case 1:return a[0];case 2:return a[0]+" or "+a[1];default:return a.slice(0,-1).join(", ")+", or "+a[a.length-1]}}(e)+" but "+function(e){return e?'"'+l(e)+'"':"end of input"}(n)+" found."},e.exports={SyntaxError:a,parse:function(e,n){n=void 0!==n?n:{};var i,u={},o={statements:Yr},c=Yr,s="\n",f=Fr("\n",!1),d=function(e,n){return da(e,n,1)},h=function(e){return e},p=function(e,n){return ca.mkAsmLine(e,null,n,ha())},m=function(e,n){return ca.mkAsmLine(e,n,null,ha())},v=function(e){return ca.mkAsmLine(e,null,null,ha())},y=function(e){return ca.mkAsmLine(null,e,null,ha())},b=function(e){return ca.mkAsmLine(null,e,null,ha())},g=function(){return ca.mkAsmLine(null,null,null,ha())},k=function(e){return e},C=function(e){return ca.mkInsn(e,ha())},E=":",S=Fr(":",!1),x=function(e){return ca.mkLabel(e,ha())},A=function(e){return ca.mkSetPC(e,ha())},w=function(e,n){var t="byte"==e?ca.DataSize.Byte:ca.DataSize.Word;return ca.mkData(t,n,ha())},_=function(e,n){return ca.mkFill(e,n,ha())},O=function(e){return ca.mkInclude(e,ha())},L=function(e,n){var t=null,r=null;return null!==n&&(t=n[1],r=n[3]),ca.mkBinary(e,t,r,ha())},I=function(e,n,t,r){var a=[e].concat(l(t.map(function(e){return e.condition}))),i=[n].concat(l(t.map(function(e){return e.trueBranch}))),u=a.map(function(e,n){return[e,i[n]]});return ca.mkIfElse(u,r,ha())},j="in",R=Fr("in",!1),P=function(e,n,t){return ca.mkFor(e,n,t,ha())},D=function(e,n,t){return ca.mkMacro(e,n,t,ha())},T="+",B=Fr("+",!1),M=function(e,n){return ca.mkCallMacro(e,n,ha())},N=function(e,n){return ca.mkLet(e,n,ha())},F=function(e,n){return ca.mkAssign(e,n,ha())},H="as",$=Fr("as",!1),U=function(e,n){return ca.mkLoadPlugin(e,n,ha())},W=function(e){return ca.mkError(e,ha())},V=function(e){return ca.mkAlign(e,ha())},X=function(e){return ca.mkFilescope(e,ha())},Y=function(e,n){return{condition:e,trueBranch:n}},q=function(e){return e},z='"',K=Fr('"',!1),Z=function(e){return ca.mkLiteral(e.join(""),ha())},G={type:"any"},J=function(e){return e},Q=function(e){return ca.mkIdent(e,ha())},ee=function(e,n){return da(e,n,1)},ne=function(e){return ca.mkMacroArg(e)},te=function(e,n){return fa(e,n,null,ha())},re="x",le=Fr("x",!1),ae=function(e,n){return function(e,n,t){return r({},sa,{mnemonic:e,indx:n,loc:t})}(e,n,ha())},ie="y",ue=Fr("y",!1),oe=function(e,n){return function(e,n,t){return r({},sa,{mnemonic:e,indy:n,loc:t})}(e,n,ha())},ce=function(e,n){return function(e,n,t){return r({},sa,{mnemonic:e,absind:n,loc:t})}(e,n,ha())},se=function(e,n,t){return"x"===t?function(e,n,t){return r({},sa,{mnemonic:e,absx:n,loc:t})}(e,n,ha()):function(e,n,t){return r({},sa,{mnemonic:e,absy:n,loc:t})}(e,n,ha())},fe=function(e,n){return fa(e,null,n,ha())},de=function(e){return fa(e,null,null,ha())},he=function(){return Nr()},pe=function(e){return e},me="::",ve=Fr("::",!1),ye=function(e,n){return ca.mkScopeQualifiedIdent(da(e,n,1),!1,ha())},be=function(e,n){return ca.mkScopeQualifiedIdent(da(e,n,1),!0,ha())},ge=function(e){return ca.mkIdent(e,ha())},ke=function(e){return e},Ce="#",Ee=Fr("#",!1),Se=function(e,n){if(null!==e){if("lo"===e)return ca.mkBinaryOp("&",n,ca.mkLiteral(255,ha(),ha()));var t=ca.mkLiteral(8,ha()),r=ca.mkLiteral(255,ha());return ca.mkBinaryOp("&",ca.mkBinaryOp(">>",n,t,ha()),r,ha())}return n},xe=function(){return"lo"},Ae=function(){return"hi"},we=function(e){return e},_e=function(e,n){return n.reduce(function(e,n){return ca.mkBinaryOp(n[0],e,n[1],ha())},e)},Oe=function(e,n){return ca.mkUnary(e,n,ha())},Le=function(e){return e},Ie=function(e,n){return{property:n,computed:!0}},je=function(e,n){return{property:ca.mkIdent(n,ha()),computed:!1}},Re=function(e,n){return n.reduce(function(e,n){return ca.mkMember(e,n.property,n.computed,ha())},e)},Pe=function(e,n){return ca.mkCallFunc(e,n,ha())},De=function(e){return ca.mkLiteral(e,ha())},Te=function(e){return e},Be=function(e){return e},Me="$",Ne=Fr("$",!1),Fe=function(e){return parseInt(e,16)},He="%",$e=Fr("%",!1),Ue=function(e){return parseInt(e,2)},We=function(e){return e},Ve=".",Xe=Fr(".",!1),Ye=function(){return parseFloat(Nr())},qe="0",ze=Fr("0",!1),Ke=/^[1-9]/,Ze=Hr([["1","9"]],!1,!1),Ge="e",Je=Fr("e",!0),Qe=/^[+\-]/,en=Hr(["+","-"],!1,!1),nn=function(e){return ca.mkExprArray(null===e?[]:e,ha())},tn=function(){return ca.mkExprObject([],ha())},rn=function(e){return ca.mkExprObject(e,ha())},ln=function(e,n){return da(e,n,2)},an=function(e,n){return{key:e,val:n}},un=/^[a-zA-Z_]/,on=Hr([["a","z"],["A","Z"],"_"],!1,!1),cn=/^[a-zA-Z_0-9]/,sn=Hr([["a","z"],["A","Z"],"_",["0","9"]],!1,!1),fn=/^[0-9]/,dn=Hr([["0","9"]],!1,!1),hn=/^[0-1]/,pn=Hr([["0","1"]],!1,!1),mn=/^[0-9a-f]/i,vn=Hr([["0","9"],["a","f"]],!1,!0),yn=$r("whitespace"),bn="\t",gn=Fr("\t",!1),kn="\v",Cn=Fr("\v",!1),En="\f",Sn=Fr("\f",!1),xn=" ",An=Fr(" ",!1),wn="\xa0",_n=Fr("\xa0",!1),On="\ufeff",Ln=Fr("\ufeff",!1),In=/^[ \xA0\u1680\u2000-\u200A\u202F\u205F\u3000]/,jn=Hr([" ","\xa0","\u1680",["\u2000","\u200a"],"\u202f","\u205f","\u3000"],!1,!1),Rn=";",Pn=Fr(";",!1),Dn=$r("end of line"),Tn="\r\n",Bn=Fr("\r\n",!1),Mn="\r",Nn=Fr("\r",!1),Fn="\u2028",Hn=Fr("\u2028",!1),$n="\u2029",Un=Fr("\u2029",!1),Wn="!align",Vn=Fr("!align",!1),Xn="!byte",Yn=Fr("!byte",!1),qn=function(){return"byte"},zn="!word",Kn=Fr("!word",!1),Zn=function(){return"word"},Gn="!binary",Jn=Fr("!binary",!1),Qn="!let",et=Fr("!let",!1),nt="!macro",tt=Fr("!macro",!1),rt="!if",lt=Fr("!if",!1),at="else",it=Fr("else",!1),ut="elif",ot=Fr("elif",!1),ct="!error",st=Fr("!error",!1),ft="!for",dt=Fr("!for",!1),ht="!include",pt=Fr("!include",!1),mt="!fill",vt=Fr("!fill",!1),yt="!use",bt=Fr("!use",!1),gt="!filescope",kt=Fr("!filescope",!1),Ct="[",Et=Fr("[",!1),St=function(e){return e},xt="]",At=Fr("]",!1),wt="(",_t=Fr("(",!1),Ot=")",Lt=Fr(")",!1),It="{",jt=Fr("{",!1),Rt="}",Pt=Fr("}",!1),Dt=(Fr("->",!1),Fr("++",!1),Fr("--",!1),"&"),Tt=Fr("&",!1),Bt=/^[&]/,Mt=Hr(["&"],!1,!1),Nt="*",Ft=Fr("*",!1),Ht=/^[=]/,$t=Hr(["="],!1,!1),Ut=/^[+=]/,Wt=Hr(["+","="],!1,!1),Vt="-",Xt=Fr("-",!1),Yt=/^[\-=>]/,qt=Hr(["-","=",">"],!1,!1),zt="~",Kt=Fr("~",!1),Zt="!",Gt=Fr("!",!1),Jt="/",Qt=Fr("/",!1),er=/^[=>]/,nr=Hr(["=",">"],!1,!1),tr="<<",rr=Fr("<<",!1),lr=">>",ar=Fr(">>",!1),ir="<",ur=Fr("<",!1),or=">",cr=Fr(">",!1),sr="<=",fr=Fr("<=",!1),dr=">=",hr=Fr(">=",!1),pr="==",mr=Fr("==",!1),vr="!=",yr=Fr("!=",!1),br="^",gr=Fr("^",!1),kr="|",Cr=Fr("|",!1),Er="&&",Sr=Fr("&&",!1),xr="||",Ar=Fr("||",!1),wr=(Fr("?",!1),/^[>]/),_r=Hr([">"],!1,!1),Or=(Fr("...",!1),"="),Lr=Fr("=",!1),Ir=(Fr("*=",!1),Fr("/=",!1),Fr("%=",!1),Fr("+=",!1),Fr("-=",!1),Fr("<<=",!1),Fr(">>=",!1),Fr("&=",!1),Fr("^=",!1),Fr("|=",!1),","),jr=Fr(",",!1),Rr=0,Pr=0,Dr=[{line:1,column:1}],Tr=0,Br=[],Mr=0;if("startRule"in n){if(!(n.startRule in o))throw new Error("Can't start parsing from rule \""+n.startRule+'".');c=o[n.startRule]}function Nr(){return e.substring(Pr,Rr)}function Fr(e,n){return{type:"literal",text:e,ignoreCase:n}}function Hr(e,n,t){return{type:"class",parts:e,inverted:n,ignoreCase:t}}function $r(e){return{type:"other",description:e}}function Ur(n){var t,r=Dr[n];if(r)return r;for(t=n-1;!Dr[t];)t--;for(r={line:(r=Dr[t]).line,column:r.column};t<n;)10===e.charCodeAt(t)?(r.line++,r.column=1):r.column++,t++;return Dr[n]=r,r}function Wr(e,n){var t=Ur(e),r=Ur(n);return{start:{offset:e,line:t.line,column:t.column},end:{offset:n,line:r.line,column:r.column}}}function Vr(e){Rr<Tr||(Rr>Tr&&(Tr=Rr,Br=[]),Br.push(e))}function Xr(e,n,t){return new a(a.buildMessage(e,n),e,n,t)}function Yr(){var n,t,r,l,a,i;if(n=Rr,(t=qr())!==u){for(r=[],l=Rr,10===e.charCodeAt(Rr)?(a=s,Rr++):(a=u,0===Mr&&Vr(f)),a!==u&&(i=qr())!==u?l=a=[a,i]:(Rr=l,l=u);l!==u;)r.push(l),l=Rr,10===e.charCodeAt(Rr)?(a=s,Rr++):(a=u,0===Mr&&Vr(f)),a!==u&&(i=qr())!==u?l=a=[a,i]:(Rr=l,l=u);r!==u?(Pr=n,n=t=d(t,r)):(Rr=n,n=u)}else Rr=n,n=u;return n}function qr(){var e,n,t;return e=Rr,jl()!==u&&(n=function(){var e,n,t,r;return e=Rr,(n=Kr())!==u&&(t=Hl())!==u&&(r=Yr())!==u&&$l()!==u?(Pr=e,n=p(n,r),e=n):(Rr=e,e=u),e===u&&(e=Rr,(n=Kr())!==u&&(t=zr())!==u?(Pr=e,n=m(n,t),e=n):(Rr=e,e=u),e===u&&(e=Rr,(n=Kr())!==u&&(Pr=e,n=v(n)),(e=n)===u&&(e=Rr,(n=zr())!==u&&(Pr=e,n=y(n)),(e=n)===u&&(e=Rr,(n=function(){var e,n,t;return e=Rr,(n=Vl())!==u&&ua()!==u&&(t=yl())!==u?(Pr=e,n=A(t),e=n):(Rr=e,e=u),e}())!==u&&(Pr=e,n=b(n)),(e=n)===u&&(e=Rr,(n=jl())!==u&&(Pr=e,n=g()),e=n))))),e}())!==u?((t=Dl())===u&&(t=null),t!==u?(Pr=e,e=h(n)):(Rr=e,e=u)):(Rr=e,e=u),e}function zr(){var n,t;return n=Rr,(t=function(){var n,t,r,l,a,i,o,c,s,f;if(n=Rr,(t=function(){var n,t;return n=Rr,e.substr(Rr,5)===Xn?(t=Xn,Rr+=5):(t=u,0===Mr&&Vr(Yn)),t!==u&&jl()!==u?(Pr=n,t=qn(),n=t):(Rr=n,n=u),n}())===u&&(t=function(){var n,t;return n=Rr,e.substr(Rr,5)===zn?(t=zn,Rr+=5):(t=u,0===Mr&&Vr(Kn)),t!==u&&jl()!==u?(Pr=n,t=Zn(),n=t):(Rr=n,n=u),n}()),t!==u&&(r=el())!==u?(Pr=n,t=w(t,r),n=t):(Rr=n,n=u),n===u&&(n=Rr,(t=function(){var n,t,r;return n=Rr,e.substr(Rr,5)===mt?(t=mt,Rr+=5):(t=u,0===Mr&&Vr(vt)),t!==u&&(r=jl())!==u?n=t=[t,r]:(Rr=n,n=u),n}())!==u&&(r=yl())!==u&&(l=oa())!==u&&(a=yl())!==u?(Pr=n,t=_(r,a),n=t):(Rr=n,n=u),n===u&&(n=Rr,(t=function(){var n,t,r;return n=Rr,e.substr(Rr,8)===ht?(t=ht,Rr+=8):(t=u,0===Mr&&Vr(pt)),t!==u&&(r=jl())!==u?n=t=[t,r]:(Rr=n,n=u),n}())!==u&&(r=yl())!==u?(Pr=n,t=O(r),n=t):(Rr=n,n=u),n===u&&(n=Rr,(t=function(){var n,t,r;return n=Rr,e.substr(Rr,7)===Gn?(t=Gn,Rr+=7):(t=u,0===Mr&&Vr(Jn)),t!==u&&(r=jl())!==u?n=t=[t,r]:(Rr=n,n=u),n}())!==u&&(r=yl())!==u?(l=Rr,(a=oa())!==u?((i=yl())===u&&(i=null),i!==u&&(o=oa())!==u&&(c=yl())!==u?l=a=[a,i,o,c]:(Rr=l,l=u)):(Rr=l,l=u),l===u&&(l=null),l!==u?(Pr=n,t=L(r,l),n=t):(Rr=n,n=u)):(Rr=n,n=u),n===u)))){if(n=Rr,(t=function(){var n,t,r;return n=Rr,e.substr(Rr,3)===rt?(t=rt,Rr+=3):(t=u,0===Mr&&Vr(lt)),t!==u&&(r=jl())!==u?n=t=[t,r]:(Rr=n,n=u),n}())!==u)if((r=Nl())!==u)if((l=yl())!==u)if((a=Fl())!==u)if((i=Hl())!==u)if((o=Yr())!==u)if((c=$l())!==u){for(s=[],f=Zr();f!==u;)s.push(f),f=Zr();s!==u?((f=function(){var n,t,r;return n=Rr,(t=function(){var n,t,r;return n=Rr,e.substr(Rr,4)===at?(t=at,Rr+=4):(t=u,0===Mr&&Vr(it)),t!==u&&(r=jl())!==u?n=t=[t,r]:(Rr=n,n=u),n}())!==u&&Hl()!==u&&(r=Yr())!==u&&$l()!==u?(Pr=n,t=q(r),n=t):(Rr=n,n=u),n}())===u&&(f=null),f!==u?(Pr=n,t=I(l,o,s,f),n=t):(Rr=n,n=u)):(Rr=n,n=u)}else Rr=n,n=u;else Rr=n,n=u;else Rr=n,n=u;else Rr=n,n=u;else Rr=n,n=u;else Rr=n,n=u;else Rr=n,n=u;n===u&&(n=Rr,(t=function(){var n,t,r;return n=Rr,e.substr(Rr,4)===ft?(t=ft,Rr+=4):(t=u,0===Mr&&Vr(dt)),t!==u&&(r=jl())!==u?n=t=[t,r]:(Rr=n,n=u),n}())!==u&&(r=ll())!==u?(e.substr(Rr,2)===j?(l=j,Rr+=2):(l=u,0===Mr&&Vr(R)),l!==u&&(a=jl())!==u&&(i=yl())!==u&&(o=Hl())!==u&&(c=Yr())!==u&&(s=$l())!==u?(Pr=n,t=P(r,i,c),n=t):(Rr=n,n=u)):(Rr=n,n=u),n===u&&(n=Rr,(t=function(){var n,t,r;return n=Rr,e.substr(Rr,6)===nt?(t=nt,Rr+=6):(t=u,0===Mr&&Vr(tt)),t!==u&&(r=jl())!==u?n=t=[t,r]:(Rr=n,n=u),n}())!==u&&(r=function(){var e,n;return e=Rr,(n=al())!==u&&(Pr=e,n=Q(n)),e=n}())!==u&&(l=Nl())!==u?((a=function(){var e,n,t,r,l,a;if(e=Rr,(n=Qr())!==u){for(t=[],r=Rr,(l=oa())!==u&&(a=Qr())!==u?r=l=[l,a]:(Rr=r,r=u);r!==u;)t.push(r),r=Rr,(l=oa())!==u&&(a=Qr())!==u?r=l=[l,a]:(Rr=r,r=u);t!==u?(Pr=e,n=ee(n,t),e=n):(Rr=e,e=u)}else Rr=e,e=u;return e}())===u&&(a=null),a!==u&&(i=Fl())!==u&&(o=Hl())!==u&&(c=Yr())!==u&&(s=$l())!==u?(Pr=n,t=D(r,a,c),n=t):(Rr=n,n=u)):(Rr=n,n=u),n===u&&(n=Rr,43===e.charCodeAt(Rr)?(t=T,Rr++):(t=u,0===Mr&&Vr(B)),t!==u&&(r=rl())!==u&&(l=Nl())!==u?((a=el())===u&&(a=null),a!==u&&(i=Fl())!==u?(Pr=n,t=M(r,a),n=t):(Rr=n,n=u)):(Rr=n,n=u),n===u&&(n=Rr,(t=function(){var n,t,r;return n=Rr,e.substr(Rr,4)===Qn?(t=Qn,Rr+=4):(t=u,0===Mr&&Vr(et)),t!==u&&(r=jl())!==u?n=t=[t,r]:(Rr=n,n=u),n}())!==u&&(r=ll())!==u&&(l=ua())!==u&&(a=yl())!==u?(Pr=n,t=N(r,a),n=t):(Rr=n,n=u),n===u&&(n=Rr,(t=rl())!==u&&(r=ua())!==u&&(l=yl())!==u?(Pr=n,t=F(t,l),n=t):(Rr=n,n=u),n===u&&(n=Rr,(t=function(){var n,t,r;return n=Rr,e.substr(Rr,4)===yt?(t=yt,Rr+=4):(t=u,0===Mr&&Vr(bt)),t!==u&&(r=jl())!==u?n=t=[t,r]:(Rr=n,n=u),n}())!==u&&(r=Gr())!==u?(e.substr(Rr,2)===H?(l=H,Rr+=2):(l=u,0===Mr&&Vr($)),l!==u&&(a=jl())!==u&&(i=ll())!==u?(Pr=n,t=U(r,i),n=t):(Rr=n,n=u)):(Rr=n,n=u),n===u&&(n=Rr,(t=function(){var n,t,r;return n=Rr,e.substr(Rr,6)===ct?(t=ct,Rr+=6):(t=u,0===Mr&&Vr(st)),t!==u&&(r=jl())!==u?n=t=[t,r]:(Rr=n,n=u),n}())!==u&&(r=Gr())!==u?(Pr=n,t=W(r),n=t):(Rr=n,n=u),n===u&&(n=Rr,(t=function(){var n,t,r;return n=Rr,e.substr(Rr,6)===Wn?(t=Wn,Rr+=6):(t=u,0===Mr&&Vr(Vn)),t!==u&&(r=jl())!==u?n=t=[t,r]:(Rr=n,n=u),n}())!==u&&(r=yl())!==u?(Pr=n,t=V(r),n=t):(Rr=n,n=u),n===u&&(n=Rr,(t=function(){var n,t,r;return n=Rr,e.substr(Rr,10)===gt?(t=gt,Rr+=10):(t=u,0===Mr&&Vr(kt)),t!==u&&(r=jl())!==u?n=t=[t,r]:(Rr=n,n=u),n}())!==u&&(r=ll())!==u?(Pr=n,t=X(r),n=t):(Rr=n,n=u))))))))))}return n}())!==u&&(Pr=n,t=k(t)),(n=t)===u&&(n=Rr,(t=function(){var n,t,r,l,a,i,o;return n=Rr,(t=il())!==u&&(r=function(){var n,t,r,l;return n=Rr,35===e.charCodeAt(Rr)?(t=Ce,Rr++):(t=u,0===Mr&&Vr(Ee)),t!==u?((r=function(){var e,n;return e=Rr,(n=Gl())!==u&&(Pr=e,n=xe()),(e=n)===u&&(e=Rr,(n=Jl())!==u&&(Pr=e,n=Ae()),e=n),e}())===u&&(r=null),r!==u&&(l=yl())!==u?(Pr=n,t=Se(r,l),n=t):(Rr=n,n=u)):(Rr=n,n=u),n}())!==u?(Pr=n,t=te(t,r),n=t):(Rr=n,n=u),n===u&&(n=Rr,(t=il())!==u&&(r=Nl())!==u&&(l=ul())!==u&&(a=oa())!==u?(120===e.charCodeAt(Rr)?(i=re,Rr++):(i=u,0===Mr&&Vr(le)),i!==u&&(o=jl())!==u&&Fl()!==u?(Pr=n,t=ae(t,l),n=t):(Rr=n,n=u)):(Rr=n,n=u),n===u&&(n=Rr,(t=il())!==u&&(r=Nl())!==u&&(l=ul())!==u&&(a=Fl())!==u&&(i=oa())!==u?(121===e.charCodeAt(Rr)?(o=ie,Rr++):(o=u,0===Mr&&Vr(ue)),o!==u&&jl()!==u?(Pr=n,t=oe(t,l),n=t):(Rr=n,n=u)):(Rr=n,n=u),n===u&&(n=Rr,(t=il())!==u&&(r=Nl())!==u&&(l=ul())!==u&&(a=Fl())!==u?(Pr=n,t=ce(t,l),n=t):(Rr=n,n=u),n===u&&(n=Rr,(t=il())!==u&&(r=ul())!==u&&(l=oa())!==u?(120===e.charCodeAt(Rr)?(a=re,Rr++):(a=u,0===Mr&&Vr(le)),a===u&&(121===e.charCodeAt(Rr)?(a=ie,Rr++):(a=u,0===Mr&&Vr(ue))),a!==u&&(i=jl())!==u?(Pr=n,t=se(t,r,a),n=t):(Rr=n,n=u)):(Rr=n,n=u),n===u&&(n=Rr,(t=il())!==u&&(r=ul())!==u?(Pr=n,t=fe(t,r),n=t):(Rr=n,n=u),n===u&&(n=Rr,(t=il())!==u&&(Pr=n,t=de(t)),n=t)))))),n}())!==u&&(Pr=n,t=C(t)),n=t),n}function Kr(){var n,t,r;return n=Rr,(t=nl())!==u?(58===e.charCodeAt(Rr)?(r=E,Rr++):(r=u,0===Mr&&Vr(S)),r!==u&&jl()!==u?(Pr=n,n=t=x(t)):(Rr=n,n=u)):(Rr=n,n=u),n}function Zr(){var n,t,r;return n=Rr,function(){var n,t,r;return n=Rr,e.substr(Rr,4)===ut?(t=ut,Rr+=4):(t=u,0===Mr&&Vr(ot)),t!==u&&(r=jl())!==u?n=t=[t,r]:(Rr=n,n=u),n}()!==u&&Nl()!==u&&(t=yl())!==u&&Fl()!==u&&Hl()!==u&&(r=Yr())!==u&&$l()!==u?(Pr=n,n=Y(t,r)):(Rr=n,n=u),n}function Gr(){var n,t,r,l;if(n=Rr,34===e.charCodeAt(Rr)?(t=z,Rr++):(t=u,0===Mr&&Vr(K)),t!==u){for(r=[],l=Jr();l!==u;)r.push(l),l=Jr();r!==u?(34===e.charCodeAt(Rr)?(l=z,Rr++):(l=u,0===Mr&&Vr(K)),l!==u&&jl()!==u?(Pr=n,n=t=Z(r)):(Rr=n,n=u)):(Rr=n,n=u)}else Rr=n,n=u;return n}function Jr(){var n,t,r;return n=Rr,t=Rr,Mr++,34===e.charCodeAt(Rr)?(r=z,Rr++):(r=u,0===Mr&&Vr(K)),Mr--,r===u?t=void 0:(Rr=t,t=u),t!==u?(e.length>Rr?(r=e.charAt(Rr),Rr++):(r=u,0===Mr&&Vr(G)),r!==u?(Pr=n,n=t=J(r)):(Rr=n,n=u)):(Rr=n,n=u),n}function Qr(){var e,n;return e=Rr,(n=ll())!==u&&(Pr=e,n=ne(n)),e=n}function el(){var e,n,t,r,l,a;if(e=Rr,(n=yl())!==u){for(t=[],r=Rr,(l=oa())!==u&&(a=yl())!==u?r=l=[l,a]:(Rr=r,r=u);r!==u;)t.push(r),r=Rr,(l=oa())!==u&&(a=yl())!==u?r=l=[l,a]:(Rr=r,r=u);t!==u?(Pr=e,e=n=ee(n,t)):(Rr=e,e=u)}else Rr=e,e=u;return e}function nl(){var e,n,t,r,l;if(e=Rr,n=Rr,t=[],(r=wl())!==u)for(;r!==u;)t.push(r),r=wl();else t=u;if(t!==u){for(r=[],l=_l();l!==u;)r.push(l),l=_l();r!==u?n=t=[t,r]:(Rr=n,n=u)}else Rr=n,n=u;return n!==u&&(Pr=e,n=he()),e=n}function tl(){var e,n;return e=Rr,(n=nl())!==u&&jl()!==u?(Pr=e,e=n=pe(n)):(Rr=e,e=u),e}function rl(){var n,t,r,l,a,i,o;if(n=Rr,(t=nl())!==u){for(r=[],l=Rr,e.substr(Rr,2)===me?(a=me,Rr+=2):(a=u,0===Mr&&Vr(ve)),a!==u&&(i=nl())!==u?l=a=[a,i]:(Rr=l,l=u);l!==u;)r.push(l),l=Rr,e.substr(Rr,2)===me?(a=me,Rr+=2):(a=u,0===Mr&&Vr(ve)),a!==u&&(i=nl())!==u?l=a=[a,i]:(Rr=l,l=u);r!==u&&(l=jl())!==u?(Pr=n,n=t=ye(t,r)):(Rr=n,n=u)}else Rr=n,n=u;if(n===u)if(n=Rr,e.substr(Rr,2)===me?(t=me,Rr+=2):(t=u,0===Mr&&Vr(ve)),t!==u)if((r=nl())!==u){for(l=[],a=Rr,e.substr(Rr,2)===me?(i=me,Rr+=2):(i=u,0===Mr&&Vr(ve)),i!==u&&(o=nl())!==u?a=i=[i,o]:(Rr=a,a=u);a!==u;)l.push(a),a=Rr,e.substr(Rr,2)===me?(i=me,Rr+=2):(i=u,0===Mr&&Vr(ve)),i!==u&&(o=nl())!==u?a=i=[i,o]:(Rr=a,a=u);l!==u&&(a=jl())!==u?(Pr=n,n=t=be(r,l)):(Rr=n,n=u)}else Rr=n,n=u;else Rr=n,n=u;return n}function ll(){var e,n;return e=Rr,(n=al())!==u&&(Pr=e,n=ge(n)),e=n}function al(){var e,n;return e=Rr,(n=nl())!==u&&jl()!==u?(Pr=e,e=n=ke(n)):(Rr=e,e=u),e}function il(){var e,n;return e=Rr,(n=nl())!==u&&jl()!==u?(Pr=e,e=n=pe(n)):(Rr=e,e=u),e}function ul(){var e,n;return e=Rr,(n=yl())!==u&&(Pr=e,n=we(n)),e=n}function ol(){var e,n,t,r,l,a;if(e=Rr,(n=bl())!==u){for(t=[],r=Rr,(l=Vl())===u&&(l=ql())===u&&(l=zl()),l!==u&&(a=bl())!==u?r=l=[l,a]:(Rr=r,r=u);r!==u;)t.push(r),r=Rr,(l=Vl())===u&&(l=ql())===u&&(l=zl()),l!==u&&(a=bl())!==u?r=l=[l,a]:(Rr=r,r=u);t!==u?(Pr=e,e=n=_e(n,t)):(Rr=e,e=u)}else Rr=e,e=u;return e===u&&(e=kl()),e}function cl(){var e,n,t,r,l,a;if(e=Rr,(n=ol())!==u){for(t=[],r=Rr,(l=Xl())===u&&(l=Yl()),l!==u&&(a=ol())!==u?r=l=[l,a]:(Rr=r,r=u);r!==u;)t.push(r),r=Rr,(l=Xl())===u&&(l=Yl()),l!==u&&(a=ol())!==u?r=l=[l,a]:(Rr=r,r=u);t!==u?(Pr=e,e=n=_e(n,t)):(Rr=e,e=u)}else Rr=e,e=u;return e}function sl(){var e,n,t,r,l,a;if(e=Rr,(n=cl())!==u){for(t=[],r=Rr,(l=Kl())===u&&(l=Zl()),l!==u&&(a=cl())!==u?r=l=[l,a]:(Rr=r,r=u);r!==u;)t.push(r),r=Rr,(l=Kl())===u&&(l=Zl()),l!==u&&(a=cl())!==u?r=l=[l,a]:(Rr=r,r=u);t!==u?(Pr=e,e=n=_e(n,t)):(Rr=e,e=u)}else Rr=e,e=u;return e}function fl(){var e,n,t,r,l,a;if(e=Rr,(n=sl())!==u){for(t=[],r=Rr,(l=Ql())===u&&(l=ea())===u&&(l=Gl())===u&&(l=Jl()),l!==u&&(a=sl())!==u?r=l=[l,a]:(Rr=r,r=u);r!==u;)t.push(r),r=Rr,(l=Ql())===u&&(l=ea())===u&&(l=Gl())===u&&(l=Jl()),l!==u&&(a=sl())!==u?r=l=[l,a]:(Rr=r,r=u);t!==u?(Pr=e,e=n=_e(n,t)):(Rr=e,e=u)}else Rr=e,e=u;return e}function dl(){var e,n,t,r,l,a;if(e=Rr,(n=fl())!==u){for(t=[],r=Rr,(l=na())===u&&(l=ta()),l!==u&&(a=fl())!==u?r=l=[l,a]:(Rr=r,r=u);r!==u;)t.push(r),r=Rr,(l=na())===u&&(l=ta()),l!==u&&(a=fl())!==u?r=l=[l,a]:(Rr=r,r=u);t!==u?(Pr=e,e=n=_e(n,t)):(Rr=e,e=u)}else Rr=e,e=u;return e}function hl(){var e,n,t,r,l,a;if(e=Rr,(n=dl())!==u){for(t=[],r=Rr,(l=Wl())!==u&&(a=dl())!==u?r=l=[l,a]:(Rr=r,r=u);r!==u;)t.push(r),r=Rr,(l=Wl())!==u&&(a=dl())!==u?r=l=[l,a]:(Rr=r,r=u);t!==u?(Pr=e,e=n=_e(n,t)):(Rr=e,e=u)}else Rr=e,e=u;return e}function pl(){var e,n,t,r,l,a;if(e=Rr,(n=hl())!==u){for(t=[],r=Rr,(l=ra())!==u&&(a=hl())!==u?r=l=[l,a]:(Rr=r,r=u);r!==u;)t.push(r),r=Rr,(l=ra())!==u&&(a=hl())!==u?r=l=[l,a]:(Rr=r,r=u);t!==u?(Pr=e,e=n=_e(n,t)):(Rr=e,e=u)}else Rr=e,e=u;return e}function ml(){var e,n,t,r,l,a;if(e=Rr,(n=pl())!==u){for(t=[],r=Rr,(l=la())!==u&&(a=pl())!==u?r=l=[l,a]:(Rr=r,r=u);r!==u;)t.push(r),r=Rr,(l=la())!==u&&(a=pl())!==u?r=l=[l,a]:(Rr=r,r=u);t!==u?(Pr=e,e=n=_e(n,t)):(Rr=e,e=u)}else Rr=e,e=u;return e}function vl(){var e,n,t,r,l,a;if(e=Rr,(n=ml())!==u){for(t=[],r=Rr,(l=aa())!==u&&(a=ml())!==u?r=l=[l,a]:(Rr=r,r=u);r!==u;)t.push(r),r=Rr,(l=aa())!==u&&(a=ml())!==u?r=l=[l,a]:(Rr=r,r=u);t!==u?(Pr=e,e=n=_e(n,t)):(Rr=e,e=u)}else Rr=e,e=u;return e}function yl(){var e,n,t,r,l,a;if(e=Rr,(n=vl())!==u){for(t=[],r=Rr,(l=ia())!==u&&(a=vl())!==u?r=l=[l,a]:(Rr=r,r=u);r!==u;)t.push(r),r=Rr,(l=ia())!==u&&(a=vl())!==u?r=l=[l,a]:(Rr=r,r=u);t!==u?(Pr=e,e=n=_e(n,t)):(Rr=e,e=u)}else Rr=e,e=u;return e}function bl(){var n,t,r;return(n=function(){var e;return(e=function(){var e,n,t;return e=Rr,(n=gl())!==u&&Nl()!==u?((t=el())===u&&(t=null),t!==u&&Fl()!==u?(Pr=e,n=Pe(n,t),e=n):(Rr=e,e=u)):(Rr=e,e=u),e}())===u&&(e=gl()),e}())===u&&(n=Rr,(t=function(){var n,t;return n=Rr,(t=Xl())===u&&(t=Yl())===u&&(t=function(){var n,t;return n=Rr,126===e.charCodeAt(Rr)?(t=zt,Rr++):(t=u,0===Mr&&Vr(Kt)),t!==u&&jl()!==u?(Pr=n,t=St(t),n=t):(Rr=n,n=u),n}())===u&&(t=function(){var n,t,r,l;return n=Rr,33===e.charCodeAt(Rr)?(t=Zt,Rr++):(t=u,0===Mr&&Vr(Gt)),t!==u?(r=Rr,Mr++,Ht.test(e.charAt(Rr))?(l=e.charAt(Rr),Rr++):(l=u,0===Mr&&Vr($t)),Mr--,l===u?r=void 0:(Rr=r,r=u),r!==u&&(l=jl())!==u?(Pr=n,t=St(t),n=t):(Rr=n,n=u)):(Rr=n,n=u),n}()),t!==u&&(Pr=n,t=Le(t)),n=t}())!==u&&(r=bl())!==u?(Pr=n,n=t=Oe(t,r)):(Rr=n,n=u)),n}function gl(){var e,n,t,r,l;if(e=Rr,(n=kl())!==u){for(t=[],r=Rr,Bl()!==u&&(l=yl())!==u&&Ml()!==u?(Pr=r,r=Ie(n,l)):(Rr=r,r=u),r===u&&(r=Rr,Ul()!==u&&(l=tl())!==u?(Pr=r,r=je(n,l)):(Rr=r,r=u));r!==u;)t.push(r),r=Rr,Bl()!==u&&(l=yl())!==u&&Ml()!==u?(Pr=r,r=Ie(n,l)):(Rr=r,r=u),r===u&&(r=Rr,Ul()!==u&&(l=tl())!==u?(Pr=r,r=je(n,l)):(Rr=r,r=u));t!==u?(Pr=e,e=n=Re(n,t)):(Rr=e,e=u)}else Rr=e,e=u;return e}function kl(){var e,n,t;return e=Rr,(n=Cl())!==u&&(Pr=e,n=De(n)),(e=n)===u&&(e=Rr,(n=rl())!==u&&(Pr=e,n=pe(n)),(e=n)===u&&(e=Rr,(n=Gr())!==u&&(Pr=e,n=Te(n)),(e=n)===u&&(e=function(){var e,n,t;return e=Rr,(n=Bl())!==u?((t=el())===u&&(t=null),t!==u&&Ml()!==u?(Pr=e,n=nn(t),e=n):(Rr=e,e=u)):(Rr=e,e=u),e}())===u&&(e=function(){var e,n,t;return e=Rr,(n=Hl())!==u&&Pl()!==u&&(t=$l())!==u?(Pr=e,n=tn(),e=n):(Rr=e,e=u),e===u&&(e=Rr,(n=Hl())!==u&&Pl()!==u&&(t=xl())!==u&&Pl()!==u&&$l()!==u?(Pr=e,n=rn(t),e=n):(Rr=e,e=u),e===u&&(e=Rr,(n=Hl())!==u&&Pl()!==u&&(t=xl())!==u&&Pl()!==u&&oa()!==u&&Pl()!==u&&$l()!==u?(Pr=e,n=rn(t),e=n):(Rr=e,e=u))),e}())===u&&(e=Rr,(n=Nl())!==u&&(t=yl())!==u&&Fl()!==u?(Pr=e,e=n=Be(t)):(Rr=e,e=u)))),e}function Cl(){var n,t,r,l,a;if(n=Rr,36===e.charCodeAt(Rr)?(t=Me,Rr++):(t=u,0===Mr&&Vr(Ne)),t!==u){if(r=Rr,l=[],(a=Il())!==u)for(;a!==u;)l.push(a),a=Il();else l=u;(r=l!==u?e.substring(r,Rr):l)!==u&&(l=jl())!==u?(Pr=n,n=t=Fe(r)):(Rr=n,n=u)}else Rr=n,n=u;if(n===u){if(n=Rr,37===e.charCodeAt(Rr)?(t=He,Rr++):(t=u,0===Mr&&Vr($e)),t!==u){if(r=Rr,l=[],(a=Ll())!==u)for(;a!==u;)l.push(a),a=Ll();else l=u;(r=l!==u?e.substring(r,Rr):l)!==u&&(l=jl())!==u?(Pr=n,n=t=Ue(r)):(Rr=n,n=u)}else Rr=n,n=u;n===u&&(n=Rr,(t=function(){var n,t,r,l,a;if(n=Rr,(t=El())!==u)if(46===e.charCodeAt(Rr)?(r=Ve,Rr++):(r=u,0===Mr&&Vr(Xe)),r!==u){for(l=[],a=Ol();a!==u;)l.push(a),a=Ol();l!==u?((a=Sl())===u&&(a=null),a!==u?(Pr=n,t=Ye(),n=t):(Rr=n,n=u)):(Rr=n,n=u)}else Rr=n,n=u;else Rr=n,n=u;if(n===u){if(n=Rr,46===e.charCodeAt(Rr)?(t=Ve,Rr++):(t=u,0===Mr&&Vr(Xe)),t!==u){if(r=[],(l=Ol())!==u)for(;l!==u;)r.push(l),l=Ol();else r=u;r!==u?((l=Sl())===u&&(l=null),l!==u?(Pr=n,t=Ye(),n=t):(Rr=n,n=u)):(Rr=n,n=u)}else Rr=n,n=u;n===u&&(n=Rr,(t=El())!==u?((r=Sl())===u&&(r=null),r!==u?(Pr=n,t=Ye(),n=t):(Rr=n,n=u)):(Rr=n,n=u))}return n}())!==u&&(r=jl())!==u?(Pr=n,n=t=We(t)):(Rr=n,n=u))}return n}function El(){var n,t,r,l;if(48===e.charCodeAt(Rr)?(n=qe,Rr++):(n=u,0===Mr&&Vr(ze)),n===u)if(n=Rr,(t=function(){var n;return Ke.test(e.charAt(Rr))?(n=e.charAt(Rr),Rr++):(n=u,0===Mr&&Vr(Ze)),n}())!==u){for(r=[],l=Ol();l!==u;)r.push(l),l=Ol();r!==u?n=t=[t,r]:(Rr=n,n=u)}else Rr=n,n=u;return n}function Sl(){var n,t,r;return n=Rr,(t=function(){var n;return e.substr(Rr,1).toLowerCase()===Ge?(n=e.charAt(Rr),Rr++):(n=u,0===Mr&&Vr(Je)),n}())!==u&&(r=function(){var n,t,r,l;if(n=Rr,Qe.test(e.charAt(Rr))?(t=e.charAt(Rr),Rr++):(t=u,0===Mr&&Vr(en)),t===u&&(t=null),t!==u){if(r=[],(l=Ol())!==u)for(;l!==u;)r.push(l),l=Ol();else r=u;r!==u?n=t=[t,r]:(Rr=n,n=u)}else Rr=n,n=u;return n}())!==u?n=t=[t,r]:(Rr=n,n=u),n}function xl(){var e,n,t,r,l,a,i;if(e=Rr,(n=Al())!==u){for(t=[],r=Rr,(l=oa())!==u&&(a=Pl())!==u&&(i=Al())!==u?r=l=[l,a,i]:(Rr=r,r=u);r!==u;)t.push(r),r=Rr,(l=oa())!==u&&(a=Pl())!==u&&(i=Al())!==u?r=l=[l,a,i]:(Rr=r,r=u);t!==u?(Pr=e,e=n=ln(n,t)):(Rr=e,e=u)}else Rr=e,e=u;return e}function Al(){var n,t,r;return n=Rr,(t=function(){var e,n;return(e=ll())===u&&(e=Gr())===u&&(e=Rr,(n=Cl())!==u&&(Pr=e,n=De(n)),e=n),e}())!==u&&function(){var n,t,r,l;return n=Rr,58===e.charCodeAt(Rr)?(t=E,Rr++):(t=u,0===Mr&&Vr(S)),t!==u?(r=Rr,Mr++,wr.test(e.charAt(Rr))?(l=e.charAt(Rr),Rr++):(l=u,0===Mr&&Vr(_r)),Mr--,l===u?r=void 0:(Rr=r,r=u),r!==u&&(l=jl())!==u?(Pr=n,t=St(t),n=t):(Rr=n,n=u)):(Rr=n,n=u),n}()!==u&&(r=yl())!==u?(Pr=n,n=t=an(t,r)):(Rr=n,n=u),n}function wl(){var n;return un.test(e.charAt(Rr))?(n=e.charAt(Rr),Rr++):(n=u,0===Mr&&Vr(on)),n}function _l(){var n;return cn.test(e.charAt(Rr))?(n=e.charAt(Rr),Rr++):(n=u,0===Mr&&Vr(sn)),n}function Ol(){var n;return fn.test(e.charAt(Rr))?(n=e.charAt(Rr),Rr++):(n=u,0===Mr&&Vr(dn)),n}function Ll(){var n;return hn.test(e.charAt(Rr))?(n=e.charAt(Rr),Rr++):(n=u,0===Mr&&Vr(pn)),n}function Il(){var n;return mn.test(e.charAt(Rr))?(n=e.charAt(Rr),Rr++):(n=u,0===Mr&&Vr(vn)),n}function jl(){var e,n;for(Mr++,e=[],n=Rl();n!==u;)e.push(n),n=Rl();return Mr--,e===u&&(n=u,0===Mr&&Vr(yn)),e}function Rl(){var n;return Mr++,9===e.charCodeAt(Rr)?(n=bn,Rr++):(n=u,0===Mr&&Vr(gn)),n===u&&(11===e.charCodeAt(Rr)?(n=kn,Rr++):(n=u,0===Mr&&Vr(Cn)),n===u&&(12===e.charCodeAt(Rr)?(n=En,Rr++):(n=u,0===Mr&&Vr(Sn)),n===u&&(32===e.charCodeAt(Rr)?(n=xn,Rr++):(n=u,0===Mr&&Vr(An)),n===u&&(160===e.charCodeAt(Rr)?(n=wn,Rr++):(n=u,0===Mr&&Vr(_n)),n===u&&(65279===e.charCodeAt(Rr)?(n=On,Rr++):(n=u,0===Mr&&Vr(Ln)),n===u&&(n=function(){var n;return In.test(e.charAt(Rr))?(n=e.charAt(Rr),Rr++):(n=u,0===Mr&&Vr(jn)),n}())))))),Mr--,n===u&&0===Mr&&Vr(yn),n}function Pl(){var e,n;for(e=[],(n=Rl())===u&&(n=Tl())===u&&(n=Dl());n!==u;)e.push(n),(n=Rl())===u&&(n=Tl())===u&&(n=Dl());return e}function Dl(){var n,t,r,l,a,i;if(n=Rr,59===e.charCodeAt(Rr)?(t=Rn,Rr++):(t=u,0===Mr&&Vr(Pn)),t!==u){for(r=[],l=Rr,a=Rr,Mr++,10===e.charCodeAt(Rr)?(i=s,Rr++):(i=u,0===Mr&&Vr(f)),Mr--,i===u?a=void 0:(Rr=a,a=u),a!==u?(e.length>Rr?(i=e.charAt(Rr),Rr++):(i=u,0===Mr&&Vr(G)),i!==u?l=a=[a,i]:(Rr=l,l=u)):(Rr=l,l=u);l!==u;)r.push(l),l=Rr,a=Rr,Mr++,10===e.charCodeAt(Rr)?(i=s,Rr++):(i=u,0===Mr&&Vr(f)),Mr--,i===u?a=void 0:(Rr=a,a=u),a!==u?(e.length>Rr?(i=e.charAt(Rr),Rr++):(i=u,0===Mr&&Vr(G)),i!==u?l=a=[a,i]:(Rr=l,l=u)):(Rr=l,l=u);r!==u?n=t=[t,r]:(Rr=n,n=u)}else Rr=n,n=u;return n}function Tl(){var n;return Mr++,10===e.charCodeAt(Rr)?(n=s,Rr++):(n=u,0===Mr&&Vr(f)),n===u&&(e.substr(Rr,2)===Tn?(n=Tn,Rr+=2):(n=u,0===Mr&&Vr(Bn)),n===u&&(13===e.charCodeAt(Rr)?(n=Mn,Rr++):(n=u,0===Mr&&Vr(Nn)),n===u&&(8232===e.charCodeAt(Rr)?(n=Fn,Rr++):(n=u,0===Mr&&Vr(Hn)),n===u&&(8233===e.charCodeAt(Rr)?(n=$n,Rr++):(n=u,0===Mr&&Vr(Un)))))),Mr--,n===u&&0===Mr&&Vr(Dn),n}function Bl(){var n,t;return n=Rr,91===e.charCodeAt(Rr)?(t=Ct,Rr++):(t=u,0===Mr&&Vr(Et)),t!==u&&jl()!==u?(Pr=n,n=t=St(t)):(Rr=n,n=u),n}function Ml(){var n,t;return n=Rr,93===e.charCodeAt(Rr)?(t=xt,Rr++):(t=u,0===Mr&&Vr(At)),t!==u&&jl()!==u?(Pr=n,n=t=St(t)):(Rr=n,n=u),n}function Nl(){var n,t;return n=Rr,40===e.charCodeAt(Rr)?(t=wt,Rr++):(t=u,0===Mr&&Vr(_t)),t!==u&&jl()!==u?(Pr=n,n=t=St(t)):(Rr=n,n=u),n}function Fl(){var n,t;return n=Rr,41===e.charCodeAt(Rr)?(t=Ot,Rr++):(t=u,0===Mr&&Vr(Lt)),t!==u&&jl()!==u?(Pr=n,n=t=St(t)):(Rr=n,n=u),n}function Hl(){var n,t;return n=Rr,123===e.charCodeAt(Rr)?(t=It,Rr++):(t=u,0===Mr&&Vr(jt)),t!==u&&jl()!==u?(Pr=n,n=t=St(t)):(Rr=n,n=u),n}function $l(){var n,t;return n=Rr,125===e.charCodeAt(Rr)?(t=Rt,Rr++):(t=u,0===Mr&&Vr(Pt)),t!==u&&jl()!==u?(Pr=n,n=t=St(t)):(Rr=n,n=u),n}function Ul(){var n,t;return n=Rr,46===e.charCodeAt(Rr)?(t=Ve,Rr++):(t=u,0===Mr&&Vr(Xe)),t!==u&&jl()!==u?(Pr=n,n=t=St(t)):(Rr=n,n=u),n}function Wl(){var n,t,r,l;return n=Rr,38===e.charCodeAt(Rr)?(t=Dt,Rr++):(t=u,0===Mr&&Vr(Tt)),t!==u?(r=Rr,Mr++,Bt.test(e.charAt(Rr))?(l=e.charAt(Rr),Rr++):(l=u,0===Mr&&Vr(Mt)),Mr--,l===u?r=void 0:(Rr=r,r=u),r!==u&&(l=jl())!==u?(Pr=n,n=t=St(t)):(Rr=n,n=u)):(Rr=n,n=u),n}function Vl(){var n,t,r,l;return n=Rr,42===e.charCodeAt(Rr)?(t=Nt,Rr++):(t=u,0===Mr&&Vr(Ft)),t!==u?(r=Rr,Mr++,Ht.test(e.charAt(Rr))?(l=e.charAt(Rr),Rr++):(l=u,0===Mr&&Vr($t)),Mr--,l===u?r=void 0:(Rr=r,r=u),r!==u&&(l=jl())!==u?(Pr=n,n=t=St(t)):(Rr=n,n=u)):(Rr=n,n=u),n}function Xl(){var n,t,r,l;return n=Rr,43===e.charCodeAt(Rr)?(t=T,Rr++):(t=u,0===Mr&&Vr(B)),t!==u?(r=Rr,Mr++,Ut.test(e.charAt(Rr))?(l=e.charAt(Rr),Rr++):(l=u,0===Mr&&Vr(Wt)),Mr--,l===u?r=void 0:(Rr=r,r=u),r!==u&&(l=jl())!==u?(Pr=n,n=t=St(t)):(Rr=n,n=u)):(Rr=n,n=u),n}function Yl(){var n,t,r,l;return n=Rr,45===e.charCodeAt(Rr)?(t=Vt,Rr++):(t=u,0===Mr&&Vr(Xt)),t!==u?(r=Rr,Mr++,Yt.test(e.charAt(Rr))?(l=e.charAt(Rr),Rr++):(l=u,0===Mr&&Vr(qt)),Mr--,l===u?r=void 0:(Rr=r,r=u),r!==u&&(l=jl())!==u?(Pr=n,n=t=St(t)):(Rr=n,n=u)):(Rr=n,n=u),n}function ql(){var n,t,r,l;return n=Rr,47===e.charCodeAt(Rr)?(t=Jt,Rr++):(t=u,0===Mr&&Vr(Qt)),t!==u?(r=Rr,Mr++,Ht.test(e.charAt(Rr))?(l=e.charAt(Rr),Rr++):(l=u,0===Mr&&Vr($t)),Mr--,l===u?r=void 0:(Rr=r,r=u),r!==u&&(l=jl())!==u?(Pr=n,n=t=St(t)):(Rr=n,n=u)):(Rr=n,n=u),n}function zl(){var n,t,r,l;return n=Rr,37===e.charCodeAt(Rr)?(t=He,Rr++):(t=u,0===Mr&&Vr($e)),t!==u?(r=Rr,Mr++,er.test(e.charAt(Rr))?(l=e.charAt(Rr),Rr++):(l=u,0===Mr&&Vr(nr)),Mr--,l===u?r=void 0:(Rr=r,r=u),r!==u&&(l=jl())!==u?(Pr=n,n=t=St(t)):(Rr=n,n=u)):(Rr=n,n=u),n}function Kl(){var n,t,r,l;return n=Rr,e.substr(Rr,2)===tr?(t=tr,Rr+=2):(t=u,0===Mr&&Vr(rr)),t!==u?(r=Rr,Mr++,Ht.test(e.charAt(Rr))?(l=e.charAt(Rr),Rr++):(l=u,0===Mr&&Vr($t)),Mr--,l===u?r=void 0:(Rr=r,r=u),r!==u&&(l=jl())!==u?(Pr=n,n=t=St(t)):(Rr=n,n=u)):(Rr=n,n=u),n}function Zl(){var n,t,r,l;return n=Rr,e.substr(Rr,2)===lr?(t=lr,Rr+=2):(t=u,0===Mr&&Vr(ar)),t!==u?(r=Rr,Mr++,Ht.test(e.charAt(Rr))?(l=e.charAt(Rr),Rr++):(l=u,0===Mr&&Vr($t)),Mr--,l===u?r=void 0:(Rr=r,r=u),r!==u&&(l=jl())!==u?(Pr=n,n=t=St(t)):(Rr=n,n=u)):(Rr=n,n=u),n}function Gl(){var n,t,r,l;return n=Rr,60===e.charCodeAt(Rr)?(t=ir,Rr++):(t=u,0===Mr&&Vr(ur)),t!==u?(r=Rr,Mr++,Ht.test(e.charAt(Rr))?(l=e.charAt(Rr),Rr++):(l=u,0===Mr&&Vr($t)),Mr--,l===u?r=void 0:(Rr=r,r=u),r!==u&&(l=jl())!==u?(Pr=n,n=t=St(t)):(Rr=n,n=u)):(Rr=n,n=u),n}function Jl(){var n,t,r,l;return n=Rr,62===e.charCodeAt(Rr)?(t=or,Rr++):(t=u,0===Mr&&Vr(cr)),t!==u?(r=Rr,Mr++,Ht.test(e.charAt(Rr))?(l=e.charAt(Rr),Rr++):(l=u,0===Mr&&Vr($t)),Mr--,l===u?r=void 0:(Rr=r,r=u),r!==u&&(l=jl())!==u?(Pr=n,n=t=St(t)):(Rr=n,n=u)):(Rr=n,n=u),n}function Ql(){var n,t;return n=Rr,e.substr(Rr,2)===sr?(t=sr,Rr+=2):(t=u,0===Mr&&Vr(fr)),t!==u&&jl()!==u?(Pr=n,n=t=St(t)):(Rr=n,n=u),n}function ea(){var n,t;return n=Rr,e.substr(Rr,2)===dr?(t=dr,Rr+=2):(t=u,0===Mr&&Vr(hr)),t!==u&&jl()!==u?(Pr=n,n=t=St(t)):(Rr=n,n=u),n}function na(){var n,t;return n=Rr,e.substr(Rr,2)===pr?(t=pr,Rr+=2):(t=u,0===Mr&&Vr(mr)),t!==u&&jl()!==u?(Pr=n,n=t=St(t)):(Rr=n,n=u),n}function ta(){var n,t;return n=Rr,e.substr(Rr,2)===vr?(t=vr,Rr+=2):(t=u,0===Mr&&Vr(yr)),t!==u&&jl()!==u?(Pr=n,n=t=St(t)):(Rr=n,n=u),n}function ra(){var n,t,r,l;return n=Rr,94===e.charCodeAt(Rr)?(t=br,Rr++):(t=u,0===Mr&&Vr(gr)),t!==u?(r=Rr,Mr++,Ht.test(e.charAt(Rr))?(l=e.charAt(Rr),Rr++):(l=u,0===Mr&&Vr($t)),Mr--,l===u?r=void 0:(Rr=r,r=u),r!==u&&(l=jl())!==u?(Pr=n,n=t=St(t)):(Rr=n,n=u)):(Rr=n,n=u),n}function la(){var n,t,r,l;return n=Rr,124===e.charCodeAt(Rr)?(t=kr,Rr++):(t=u,0===Mr&&Vr(Cr)),t!==u?(r=Rr,Mr++,Ht.test(e.charAt(Rr))?(l=e.charAt(Rr),Rr++):(l=u,0===Mr&&Vr($t)),Mr--,l===u?r=void 0:(Rr=r,r=u),r!==u&&(l=jl())!==u?(Pr=n,n=t=St(t)):(Rr=n,n=u)):(Rr=n,n=u),n}function aa(){var n,t;return n=Rr,e.substr(Rr,2)===Er?(t=Er,Rr+=2):(t=u,0===Mr&&Vr(Sr)),t!==u&&jl()!==u?(Pr=n,n=t=St(t)):(Rr=n,n=u),n}function ia(){var n,t;return n=Rr,e.substr(Rr,2)===xr?(t=xr,Rr+=2):(t=u,0===Mr&&Vr(Ar)),t!==u&&jl()!==u?(Pr=n,n=t=St(t)):(Rr=n,n=u),n}function ua(){var n,t,r,l;return n=Rr,61===e.charCodeAt(Rr)?(t=Or,Rr++):(t=u,0===Mr&&Vr(Lr)),t!==u?(r=Rr,Mr++,61===e.charCodeAt(Rr)?(l=Or,Rr++):(l=u,0===Mr&&Vr(Lr)),Mr--,l===u?r=void 0:(Rr=r,r=u),r!==u&&(l=jl())!==u?(Pr=n,n=t=St(t)):(Rr=n,n=u)):(Rr=n,n=u),n}function oa(){var n,t;return n=Rr,44===e.charCodeAt(Rr)?(t=Ir,Rr++):(t=u,0===Mr&&Vr(jr)),t!==u&&jl()!==u?(Pr=n,n=t=St(t)):(Rr=n,n=u),n}var ca=t(28),sa=(ca.objectToAst,{mnemonic:null,imm:null,abs:null,absx:null,absy:null,absind:null,indx:null,indy:null});function fa(e,n,t,l){return r({},sa,{mnemonic:e,imm:n,abs:t,loc:l})}function da(e,n,t){return[e].concat(function(e,n){return e.map(function(e){return e[n]})}(n,t))}function ha(){return r({},Wr(Pr,Rr),{source:n.source})}if((i=c())!==u&&Rr===e.length)return i;throw i!==u&&Rr<e.length&&Vr({type:"end"}),Xr(Br,Tr<e.length?e.charAt(Tr):null,Tr<e.length?Wr(Tr,Tr+1):Wr(Tr,Tr))}}},,function(e,n,t){"use strict";var r=t(12),l=t(13);Object.defineProperty(n,"__esModule",{value:!0});var a=t(14),i=t(67),u=function(){function e(){r(this,e),this.lineStack=[],this.pcToLocs={},this.insnBitset=new i}return l(e,[{key:"startLine",value:function(e,n){var t={source:a.resolve(e.source),lineNo:e.start.line};this.lineStack.push({loc:t,pc:n})}},{key:"endLine",value:function(e){var n=this.lineStack.pop();if(!n)throw new Error("internal compiler error, mismatching start/end lines in debugInfo");if(e-n.pc>0){var t=this.pcToLocs[n.pc]||[];t.push(n.loc),this.pcToLocs[n.pc]=t}}},{key:"markAsInstruction",value:function(e,n){for(var t=e;t<n;t++)this.insnBitset.add(t)}},{key:"info",value:function(){var e=this.insnBitset.clone();return{pcToLocs:this.pcToLocs,isInstruction:function(n){return e.has(n)}}}}]),e}();n.DebugInfoTracker=u},,function(e,n,t){"use strict";var r=t(12),l=t(13);Object.defineProperty(n,"__esModule",{value:!0});var a=t(26);function i(e){return"".concat(e.toString(16).toUpperCase().padStart(2,"0"))}function u(e){return"".concat(e.toString(16).toUpperCase().padStart(4,"0"))}var o=function(){function e(n,t){var l=this;r(this,e),this.buf=n,this.byte=function(){var e=l.buf.readUInt8(l.curOffs);return l.curOffs++,e},this.print=function(e,n,t){var r=i(n[0]),a=n.length>=2?i(n[1]):"  ",o=n.length>=3?i(n[2]):"  ";l.output.push("".concat(u(e),": ").concat(r," ").concat(a," ").concat(o,"     ").concat(t))},this.output=[],this.curAddr=n.readUInt8(0)+(n.readUInt8(1)<<8),this.curOffs=2,this.disasmOptions=t,this.opToDecl={},Object.keys(a.default).forEach(function(e){for(var n=a.default[e],t=0;t<n.length;t++){var r=n[t];null!==r&&(l.opToDecl[r]={mnemonic:e,decode:n})}})}return l(e,[{key:"disImm",value:function(e,n){var t=this.curAddr,r=this.byte();this.print(t,[n,r],"".concat(e," #").concat(i(r)))}},{key:"disZp",value:function(e,n){var t=this.curAddr,r=this.byte();this.print(t,[n,r],"".concat(e," $").concat(i(r)))}},{key:"disZpX",value:function(e,n){var t=this.curAddr,r=this.byte();this.print(t,[n,r],"".concat(e," $").concat(i(r),",X"))}},{key:"disZpY",value:function(e,n){var t=this.curAddr,r=this.byte();this.print(t,[n,r],"".concat(e," $").concat(i(r),",Y"))}},{key:"disAbs",value:function(e,n){var t=this.curAddr,r=this.byte(),l=this.byte();this.print(t,[n,r,l],"".concat(e," $").concat(u(r+256*l)))}},{key:"disAbsX",value:function(e,n){var t=this.curAddr,r=this.byte(),l=this.byte();this.print(t,[n,r,l],"".concat(e," $").concat(u(r+256*l),",X"))}},{key:"disAbsY",value:function(e,n){var t=this.curAddr,r=this.byte(),l=this.byte();this.print(t,[n,r,l],"".concat(e," $").concat(u(r+256*l),",Y"))}},{key:"disInd",value:function(e,n){var t=this.curAddr,r=this.byte(),l=this.byte();this.print(t,[n,r,l],"".concat(e," ($").concat(u(r+256*l),")"))}},{key:"disIndX",value:function(e,n){var t=this.curAddr,r=this.byte();this.print(t,[n,r],"".concat(e," ($").concat(i(r),",X)"))}},{key:"disIndY",value:function(e,n){var t=this.curAddr,r=this.byte();this.print(t,[n,r],"".concat(e," ($").concat(i(r),"),Y"))}},{key:"disSingle",value:function(e,n){var t=this.curAddr;this.print(t,[n],"".concat(e))}},{key:"disBranch",value:function(e,n){var t=this.curAddr,r=this.byte(),l=t+(r>=128?-(256-r):r)+2;this.print(t,[n,r],"".concat(e," $").concat(u(l)))}},{key:"disUnknown",value:function(e){this.print(this.curAddr,[e],"")}},{key:"disassemble",value:function(){var e=this.buf.byteLength,n=function(e){return!0};this.disasmOptions&&this.disasmOptions.isInstruction&&(n=this.disasmOptions.isInstruction);for(var t=this.curOffs;this.curOffs<e;){this.curAddr+=this.curOffs-t,t=this.curOffs;var r=this.byte(),l=this.opToDecl[r];if(n(this.curAddr)&&void 0!==l){var a=l.decode.indexOf(r);if(0===a){this.disImm(l.mnemonic,r);continue}if(1===a){this.disZp(l.mnemonic,r);continue}if(2===a){this.disZpX(l.mnemonic,r);continue}if(3===a){this.disZpY(l.mnemonic,r);continue}if(4===a){this.disAbs(l.mnemonic,r);continue}if(5===a){this.disAbsX(l.mnemonic,r);continue}if(6===a){this.disAbsY(l.mnemonic,r);continue}if(7===a){this.disInd(l.mnemonic,r);continue}if(8===a){this.disIndX(l.mnemonic,r);continue}if(9===a){this.disIndY(l.mnemonic,r);continue}if(10===a){this.disSingle(l.mnemonic,r);continue}if(11===a){this.disBranch(l.mnemonic,r);continue}}else this.disUnknown(r)}return this.output}}]),e}();n.disassemble=function(e,n){return new o(e,n).disassemble()}}],[[37,1,2]]]);
//# sourceMappingURL=main.0147ee11.chunk.js.map